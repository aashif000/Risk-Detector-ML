var l8=Object.defineProperty;var SN=t=>{throw TypeError(t)};var u8=(t,e,n)=>e in t?l8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var CN=(t,e,n)=>u8(t,typeof e!="symbol"?e+"":e,n),p1=(t,e,n)=>e.has(t)||SN("Cannot "+n);var le=(t,e,n)=>(p1(t,e,"read from private field"),n?n.call(t):e.get(t)),ft=(t,e,n)=>e.has(t)?SN("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),We=(t,e,n,r)=>(p1(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Yn=(t,e,n)=>(p1(t,e,"access private method"),n);var eg=(t,e,n,r)=>({set _(o){We(t,e,o,n)},get _(){return le(t,e,r)}});function aF(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in t)){const s=Object.getOwnPropertyDescriptor(r,o);s&&Object.defineProperty(t,o,s.get?s:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();var $o=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ut(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function c8(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var o=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return t[r]}})}),n}var lF={exports:{}},m0={},uF={exports:{}},Xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wp=Symbol.for("react.element"),d8=Symbol.for("react.portal"),f8=Symbol.for("react.fragment"),h8=Symbol.for("react.strict_mode"),p8=Symbol.for("react.profiler"),m8=Symbol.for("react.provider"),g8=Symbol.for("react.context"),y8=Symbol.for("react.forward_ref"),v8=Symbol.for("react.suspense"),x8=Symbol.for("react.memo"),b8=Symbol.for("react.lazy"),$N=Symbol.iterator;function w8(t){return t===null||typeof t!="object"?null:(t=$N&&t[$N]||t["@@iterator"],typeof t=="function"?t:null)}var cF={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dF=Object.assign,fF={};function Sd(t,e,n){this.props=t,this.context=e,this.refs=fF,this.updater=n||cF}Sd.prototype.isReactComponent={};Sd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Sd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function hF(){}hF.prototype=Sd.prototype;function fk(t,e,n){this.props=t,this.context=e,this.refs=fF,this.updater=n||cF}var hk=fk.prototype=new hF;hk.constructor=fk;dF(hk,Sd.prototype);hk.isPureReactComponent=!0;var kN=Array.isArray,pF=Object.prototype.hasOwnProperty,pk={current:null},mF={key:!0,ref:!0,__self:!0,__source:!0};function gF(t,e,n){var r,o={},s=null,i=null;if(e!=null)for(r in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(s=""+e.key),e)pF.call(e,r)&&!mF.hasOwnProperty(r)&&(o[r]=e[r]);var a=arguments.length-2;if(a===1)o.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];o.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)o[r]===void 0&&(o[r]=a[r]);return{$$typeof:wp,type:t,key:s,ref:i,props:o,_owner:pk.current}}function S8(t,e){return{$$typeof:wp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function mk(t){return typeof t=="object"&&t!==null&&t.$$typeof===wp}function C8(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var IN=/\/+/g;function m1(t,e){return typeof t=="object"&&t!==null&&t.key!=null?C8(""+t.key):e.toString(36)}function Zg(t,e,n,r,o){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case wp:case d8:i=!0}}if(i)return i=t,o=o(i),t=r===""?"."+m1(i,0):r,kN(o)?(n="",t!=null&&(n=t.replace(IN,"$&/")+"/"),Zg(o,e,n,"",function(u){return u})):o!=null&&(mk(o)&&(o=S8(o,n+(!o.key||i&&i.key===o.key?"":(""+o.key).replace(IN,"$&/")+"/")+t)),e.push(o)),1;if(i=0,r=r===""?".":r+":",kN(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+m1(s,a);i+=Zg(s,e,n,l,o)}else if(l=w8(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+m1(s,a++),i+=Zg(s,e,n,l,o);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function tg(t,e,n){if(t==null)return t;var r=[],o=0;return Zg(t,r,"","",function(s){return e.call(n,s,o++)}),r}function $8(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Cr={current:null},Jg={transition:null},k8={ReactCurrentDispatcher:Cr,ReactCurrentBatchConfig:Jg,ReactCurrentOwner:pk};function yF(){throw Error("act(...) is not supported in production builds of React.")}Xe.Children={map:tg,forEach:function(t,e,n){tg(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return tg(t,function(){e++}),e},toArray:function(t){return tg(t,function(e){return e})||[]},only:function(t){if(!mk(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Xe.Component=Sd;Xe.Fragment=f8;Xe.Profiler=p8;Xe.PureComponent=fk;Xe.StrictMode=h8;Xe.Suspense=v8;Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k8;Xe.act=yF;Xe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=dF({},t.props),o=t.key,s=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,i=pk.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)pF.call(e,l)&&!mF.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:wp,type:t.type,key:o,ref:s,props:r,_owner:i}};Xe.createContext=function(t){return t={$$typeof:g8,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:m8,_context:t},t.Consumer=t};Xe.createElement=gF;Xe.createFactory=function(t){var e=gF.bind(null,t);return e.type=t,e};Xe.createRef=function(){return{current:null}};Xe.forwardRef=function(t){return{$$typeof:y8,render:t}};Xe.isValidElement=mk;Xe.lazy=function(t){return{$$typeof:b8,_payload:{_status:-1,_result:t},_init:$8}};Xe.memo=function(t,e){return{$$typeof:x8,type:t,compare:e===void 0?null:e}};Xe.startTransition=function(t){var e=Jg.transition;Jg.transition={};try{t()}finally{Jg.transition=e}};Xe.unstable_act=yF;Xe.useCallback=function(t,e){return Cr.current.useCallback(t,e)};Xe.useContext=function(t){return Cr.current.useContext(t)};Xe.useDebugValue=function(){};Xe.useDeferredValue=function(t){return Cr.current.useDeferredValue(t)};Xe.useEffect=function(t,e){return Cr.current.useEffect(t,e)};Xe.useId=function(){return Cr.current.useId()};Xe.useImperativeHandle=function(t,e,n){return Cr.current.useImperativeHandle(t,e,n)};Xe.useInsertionEffect=function(t,e){return Cr.current.useInsertionEffect(t,e)};Xe.useLayoutEffect=function(t,e){return Cr.current.useLayoutEffect(t,e)};Xe.useMemo=function(t,e){return Cr.current.useMemo(t,e)};Xe.useReducer=function(t,e,n){return Cr.current.useReducer(t,e,n)};Xe.useRef=function(t){return Cr.current.useRef(t)};Xe.useState=function(t){return Cr.current.useState(t)};Xe.useSyncExternalStore=function(t,e,n){return Cr.current.useSyncExternalStore(t,e,n)};Xe.useTransition=function(){return Cr.current.useTransition()};Xe.version="18.3.1";uF.exports=Xe;var A=uF.exports;const z=ut(A),vF=aF({__proto__:null,default:z},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I8=A,T8=Symbol.for("react.element"),E8=Symbol.for("react.fragment"),N8=Object.prototype.hasOwnProperty,A8=I8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,O8={key:!0,ref:!0,__self:!0,__source:!0};function xF(t,e,n){var r,o={},s=null,i=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(i=e.ref);for(r in e)N8.call(e,r)&&!O8.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)o[r]===void 0&&(o[r]=e[r]);return{$$typeof:T8,type:t,key:s,ref:i,props:o,_owner:A8.current}}m0.Fragment=E8;m0.jsx=xF;m0.jsxs=xF;lF.exports=m0;var R=lF.exports,bF={exports:{}},io={},wF={exports:{}},SF={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(N,D){var U=N.length;N.push(D);e:for(;0<U;){var B=U-1>>>1,W=N[B];if(0<o(W,D))N[B]=D,N[U]=W,U=B;else break e}}function n(N){return N.length===0?null:N[0]}function r(N){if(N.length===0)return null;var D=N[0],U=N.pop();if(U!==D){N[0]=U;e:for(var B=0,W=N.length,V=W>>>1;B<V;){var ee=2*(B+1)-1,ne=N[ee],se=ee+1,de=N[se];if(0>o(ne,U))se<W&&0>o(de,ne)?(N[B]=de,N[se]=U,B=se):(N[B]=ne,N[ee]=U,B=ee);else if(se<W&&0>o(de,U))N[B]=de,N[se]=U,B=se;else break e}}return D}function o(N,D){var U=N.sortIndex-D.sortIndex;return U!==0?U:N.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var i=Date,a=i.now();t.unstable_now=function(){return i.now()-a}}var l=[],u=[],c=1,d=null,f=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(N){for(var D=n(u);D!==null;){if(D.callback===null)r(u);else if(D.startTime<=N)r(u),D.sortIndex=D.expirationTime,e(l,D);else break;D=n(u)}}function x(N){if(m=!1,b(N),!p)if(n(l)!==null)p=!0,M(w);else{var D=n(u);D!==null&&L(x,D.startTime-N)}}function w(N,D){p=!1,m&&(m=!1,y(C),C=-1),h=!0;var U=f;try{for(b(D),d=n(l);d!==null&&(!(d.expirationTime>D)||N&&!T());){var B=d.callback;if(typeof B=="function"){d.callback=null,f=d.priorityLevel;var W=B(d.expirationTime<=D);D=t.unstable_now(),typeof W=="function"?d.callback=W:d===n(l)&&r(l),b(D)}else r(l);d=n(l)}if(d!==null)var V=!0;else{var ee=n(u);ee!==null&&L(x,ee.startTime-D),V=!1}return V}finally{d=null,f=U,h=!1}}var S=!1,$=null,C=-1,k=5,I=-1;function T(){return!(t.unstable_now()-I<k)}function E(){if($!==null){var N=t.unstable_now();I=N;var D=!0;try{D=$(!0,N)}finally{D?_():(S=!1,$=null)}}else S=!1}var _;if(typeof v=="function")_=function(){v(E)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,F=O.port2;O.port1.onmessage=E,_=function(){F.postMessage(null)}}else _=function(){g(E,0)};function M(N){$=N,S||(S=!0,_())}function L(N,D){C=g(function(){N(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(N){N.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,M(w))},t.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<N?Math.floor(1e3/N):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(N){switch(f){case 1:case 2:case 3:var D=3;break;default:D=f}var U=f;f=D;try{return N()}finally{f=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(N,D){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var U=f;f=N;try{return D()}finally{f=U}},t.unstable_scheduleCallback=function(N,D,U){var B=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?B+U:B):U=B,N){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=U+W,N={id:c++,callback:D,priorityLevel:N,startTime:U,expirationTime:W,sortIndex:-1},U>B?(N.sortIndex=U,e(u,N),n(l)===null&&N===n(u)&&(m?(y(C),C=-1):m=!0,L(x,U-B))):(N.sortIndex=W,e(l,N),p||h||(p=!0,M(w))),N},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(N){var D=f;return function(){var U=f;f=D;try{return N.apply(this,arguments)}finally{f=U}}}})(SF);wF.exports=SF;var _8=wF.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R8=A,oo=_8;function pe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var CF=new Set,ih={};function fu(t,e){Ec(t,e),Ec(t+"Capture",e)}function Ec(t,e){for(ih[t]=e,t=0;t<e.length;t++)CF.add(e[t])}var Ci=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ww=Object.prototype.hasOwnProperty,P8=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,TN={},EN={};function D8(t){return Ww.call(EN,t)?!0:Ww.call(TN,t)?!1:P8.test(t)?EN[t]=!0:(TN[t]=!0,!1)}function M8(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function F8(t,e,n,r){if(e===null||typeof e>"u"||M8(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function $r(t,e,n,r,o,s,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=i}var Un={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Un[t]=new $r(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Un[e]=new $r(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Un[t]=new $r(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Un[t]=new $r(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Un[t]=new $r(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Un[t]=new $r(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Un[t]=new $r(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Un[t]=new $r(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Un[t]=new $r(t,5,!1,t.toLowerCase(),null,!1,!1)});var gk=/[\-:]([a-z])/g;function yk(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(gk,yk);Un[e]=new $r(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(gk,yk);Un[e]=new $r(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(gk,yk);Un[e]=new $r(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Un[t]=new $r(t,1,!1,t.toLowerCase(),null,!1,!1)});Un.xlinkHref=new $r("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Un[t]=new $r(t,1,!1,t.toLowerCase(),null,!0,!0)});function vk(t,e,n,r){var o=Un.hasOwnProperty(e)?Un[e]:null;(o!==null?o.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(F8(e,n,o,r)&&(n=null),r||o===null?D8(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(e=o.attributeName,r=o.attributeNamespace,n===null?t.removeAttribute(e):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Mi=R8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ng=Symbol.for("react.element"),zu=Symbol.for("react.portal"),ju=Symbol.for("react.fragment"),xk=Symbol.for("react.strict_mode"),Vw=Symbol.for("react.profiler"),$F=Symbol.for("react.provider"),kF=Symbol.for("react.context"),bk=Symbol.for("react.forward_ref"),Uw=Symbol.for("react.suspense"),Gw=Symbol.for("react.suspense_list"),wk=Symbol.for("react.memo"),Xi=Symbol.for("react.lazy"),IF=Symbol.for("react.offscreen"),NN=Symbol.iterator;function of(t){return t===null||typeof t!="object"?null:(t=NN&&t[NN]||t["@@iterator"],typeof t=="function"?t:null)}var Xt=Object.assign,g1;function Ef(t){if(g1===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);g1=e&&e[1]||""}return`
`+g1+t}var y1=!1;function v1(t,e){if(!t||y1)return"";y1=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var o=u.stack.split(`
`),s=r.stack.split(`
`),i=o.length-1,a=s.length-1;1<=i&&0<=a&&o[i]!==s[a];)a--;for(;1<=i&&0<=a;i--,a--)if(o[i]!==s[a]){if(i!==1||a!==1)do if(i--,a--,0>a||o[i]!==s[a]){var l=`
`+o[i].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=i&&0<=a);break}}}finally{y1=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ef(t):""}function L8(t){switch(t.tag){case 5:return Ef(t.type);case 16:return Ef("Lazy");case 13:return Ef("Suspense");case 19:return Ef("SuspenseList");case 0:case 2:case 15:return t=v1(t.type,!1),t;case 11:return t=v1(t.type.render,!1),t;case 1:return t=v1(t.type,!0),t;default:return""}}function Hw(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ju:return"Fragment";case zu:return"Portal";case Vw:return"Profiler";case xk:return"StrictMode";case Uw:return"Suspense";case Gw:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case kF:return(t.displayName||"Context")+".Consumer";case $F:return(t._context.displayName||"Context")+".Provider";case bk:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case wk:return e=t.displayName||null,e!==null?e:Hw(t.type)||"Memo";case Xi:e=t._payload,t=t._init;try{return Hw(t(e))}catch{}}return null}function B8(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Hw(e);case 8:return e===xk?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ta(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function TF(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function z8(t){var e=TF(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(i){r=""+i,s.call(this,i)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function rg(t){t._valueTracker||(t._valueTracker=z8(t))}function EF(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=TF(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function gy(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Kw(t,e){var n=e.checked;return Xt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function AN(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ta(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function NF(t,e){e=e.checked,e!=null&&vk(t,"checked",e,!1)}function qw(t,e){NF(t,e);var n=Ta(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Xw(t,e.type,n):e.hasOwnProperty("defaultValue")&&Xw(t,e.type,Ta(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ON(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Xw(t,e,n){(e!=="number"||gy(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Nf=Array.isArray;function nc(t,e,n,r){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ta(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,r&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function Yw(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(pe(91));return Xt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function _N(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(pe(92));if(Nf(n)){if(1<n.length)throw Error(pe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ta(n)}}function AF(t,e){var n=Ta(e.value),r=Ta(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function RN(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function OF(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qw(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?OF(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var og,_F=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(og=og||document.createElement("div"),og.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=og.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ah(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Wf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},j8=["Webkit","ms","Moz","O"];Object.keys(Wf).forEach(function(t){j8.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Wf[e]=Wf[t]})});function RF(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Wf.hasOwnProperty(t)&&Wf[t]?(""+e).trim():e+"px"}function PF(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=RF(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,o):t[n]=o}}var W8=Xt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zw(t,e){if(e){if(W8[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(pe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(pe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(pe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(pe(62))}}function Jw(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eS=null;function Sk(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var tS=null,rc=null,oc=null;function PN(t){if(t=$p(t)){if(typeof tS!="function")throw Error(pe(280));var e=t.stateNode;e&&(e=b0(e),tS(t.stateNode,t.type,e))}}function DF(t){rc?oc?oc.push(t):oc=[t]:rc=t}function MF(){if(rc){var t=rc,e=oc;if(oc=rc=null,PN(t),e)for(t=0;t<e.length;t++)PN(e[t])}}function FF(t,e){return t(e)}function LF(){}var x1=!1;function BF(t,e,n){if(x1)return t(e,n);x1=!0;try{return FF(t,e,n)}finally{x1=!1,(rc!==null||oc!==null)&&(LF(),MF())}}function lh(t,e){var n=t.stateNode;if(n===null)return null;var r=b0(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(pe(231,e,typeof n));return n}var nS=!1;if(Ci)try{var sf={};Object.defineProperty(sf,"passive",{get:function(){nS=!0}}),window.addEventListener("test",sf,sf),window.removeEventListener("test",sf,sf)}catch{nS=!1}function V8(t,e,n,r,o,s,i,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Vf=!1,yy=null,vy=!1,rS=null,U8={onError:function(t){Vf=!0,yy=t}};function G8(t,e,n,r,o,s,i,a,l){Vf=!1,yy=null,V8.apply(U8,arguments)}function H8(t,e,n,r,o,s,i,a,l){if(G8.apply(this,arguments),Vf){if(Vf){var u=yy;Vf=!1,yy=null}else throw Error(pe(198));vy||(vy=!0,rS=u)}}function hu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function zF(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function DN(t){if(hu(t)!==t)throw Error(pe(188))}function K8(t){var e=t.alternate;if(!e){if(e=hu(t),e===null)throw Error(pe(188));return e!==t?null:t}for(var n=t,r=e;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return DN(o),t;if(s===r)return DN(o),e;s=s.sibling}throw Error(pe(188))}if(n.return!==r.return)n=o,r=s;else{for(var i=!1,a=o.child;a;){if(a===n){i=!0,n=o,r=s;break}if(a===r){i=!0,r=o,n=s;break}a=a.sibling}if(!i){for(a=s.child;a;){if(a===n){i=!0,n=s,r=o;break}if(a===r){i=!0,r=s,n=o;break}a=a.sibling}if(!i)throw Error(pe(189))}}if(n.alternate!==r)throw Error(pe(190))}if(n.tag!==3)throw Error(pe(188));return n.stateNode.current===n?t:e}function jF(t){return t=K8(t),t!==null?WF(t):null}function WF(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=WF(t);if(e!==null)return e;t=t.sibling}return null}var VF=oo.unstable_scheduleCallback,MN=oo.unstable_cancelCallback,q8=oo.unstable_shouldYield,X8=oo.unstable_requestPaint,un=oo.unstable_now,Y8=oo.unstable_getCurrentPriorityLevel,Ck=oo.unstable_ImmediatePriority,UF=oo.unstable_UserBlockingPriority,xy=oo.unstable_NormalPriority,Q8=oo.unstable_LowPriority,GF=oo.unstable_IdlePriority,g0=null,Ds=null;function Z8(t){if(Ds&&typeof Ds.onCommitFiberRoot=="function")try{Ds.onCommitFiberRoot(g0,t,void 0,(t.current.flags&128)===128)}catch{}}var os=Math.clz32?Math.clz32:tK,J8=Math.log,eK=Math.LN2;function tK(t){return t>>>=0,t===0?32:31-(J8(t)/eK|0)|0}var sg=64,ig=4194304;function Af(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function by(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,o=t.suspendedLanes,s=t.pingedLanes,i=n&268435455;if(i!==0){var a=i&~o;a!==0?r=Af(a):(s&=i,s!==0&&(r=Af(s)))}else i=n&~o,i!==0?r=Af(i):s!==0&&(r=Af(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&o)&&(o=r&-r,s=e&-e,o>=s||o===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-os(e),o=1<<n,r|=t[n],e&=~o;return r}function nK(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rK(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,o=t.expirationTimes,s=t.pendingLanes;0<s;){var i=31-os(s),a=1<<i,l=o[i];l===-1?(!(a&n)||a&r)&&(o[i]=nK(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function oS(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function HF(){var t=sg;return sg<<=1,!(sg&4194240)&&(sg=64),t}function b1(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Sp(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-os(e),t[e]=n}function oK(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var o=31-os(n),s=1<<o;e[o]=0,r[o]=-1,t[o]=-1,n&=~s}}function $k(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-os(n),o=1<<r;o&e|t[r]&e&&(t[r]|=e),n&=~o}}var mt=0;function KF(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var qF,kk,XF,YF,QF,sS=!1,ag=[],ha=null,pa=null,ma=null,uh=new Map,ch=new Map,ea=[],sK="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function FN(t,e){switch(t){case"focusin":case"focusout":ha=null;break;case"dragenter":case"dragleave":pa=null;break;case"mouseover":case"mouseout":ma=null;break;case"pointerover":case"pointerout":uh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ch.delete(e.pointerId)}}function af(t,e,n,r,o,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[o]},e!==null&&(e=$p(e),e!==null&&kk(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function iK(t,e,n,r,o){switch(e){case"focusin":return ha=af(ha,t,e,n,r,o),!0;case"dragenter":return pa=af(pa,t,e,n,r,o),!0;case"mouseover":return ma=af(ma,t,e,n,r,o),!0;case"pointerover":var s=o.pointerId;return uh.set(s,af(uh.get(s)||null,t,e,n,r,o)),!0;case"gotpointercapture":return s=o.pointerId,ch.set(s,af(ch.get(s)||null,t,e,n,r,o)),!0}return!1}function ZF(t){var e=Sl(t.target);if(e!==null){var n=hu(e);if(n!==null){if(e=n.tag,e===13){if(e=zF(n),e!==null){t.blockedOn=e,QF(t.priority,function(){XF(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ey(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=iS(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);eS=r,n.target.dispatchEvent(r),eS=null}else return e=$p(n),e!==null&&kk(e),t.blockedOn=n,!1;e.shift()}return!0}function LN(t,e,n){ey(t)&&n.delete(e)}function aK(){sS=!1,ha!==null&&ey(ha)&&(ha=null),pa!==null&&ey(pa)&&(pa=null),ma!==null&&ey(ma)&&(ma=null),uh.forEach(LN),ch.forEach(LN)}function lf(t,e){t.blockedOn===e&&(t.blockedOn=null,sS||(sS=!0,oo.unstable_scheduleCallback(oo.unstable_NormalPriority,aK)))}function dh(t){function e(o){return lf(o,t)}if(0<ag.length){lf(ag[0],t);for(var n=1;n<ag.length;n++){var r=ag[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ha!==null&&lf(ha,t),pa!==null&&lf(pa,t),ma!==null&&lf(ma,t),uh.forEach(e),ch.forEach(e),n=0;n<ea.length;n++)r=ea[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ea.length&&(n=ea[0],n.blockedOn===null);)ZF(n),n.blockedOn===null&&ea.shift()}var sc=Mi.ReactCurrentBatchConfig,wy=!0;function lK(t,e,n,r){var o=mt,s=sc.transition;sc.transition=null;try{mt=1,Ik(t,e,n,r)}finally{mt=o,sc.transition=s}}function uK(t,e,n,r){var o=mt,s=sc.transition;sc.transition=null;try{mt=4,Ik(t,e,n,r)}finally{mt=o,sc.transition=s}}function Ik(t,e,n,r){if(wy){var o=iS(t,e,n,r);if(o===null)A1(t,e,r,Sy,n),FN(t,r);else if(iK(o,t,e,n,r))r.stopPropagation();else if(FN(t,r),e&4&&-1<sK.indexOf(t)){for(;o!==null;){var s=$p(o);if(s!==null&&qF(s),s=iS(t,e,n,r),s===null&&A1(t,e,r,Sy,n),s===o)break;o=s}o!==null&&r.stopPropagation()}else A1(t,e,r,null,n)}}var Sy=null;function iS(t,e,n,r){if(Sy=null,t=Sk(r),t=Sl(t),t!==null)if(e=hu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=zF(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Sy=t,null}function JF(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Y8()){case Ck:return 1;case UF:return 4;case xy:case Q8:return 16;case GF:return 536870912;default:return 16}default:return 16}}var aa=null,Tk=null,ty=null;function eL(){if(ty)return ty;var t,e=Tk,n=e.length,r,o="value"in aa?aa.value:aa.textContent,s=o.length;for(t=0;t<n&&e[t]===o[t];t++);var i=n-t;for(r=1;r<=i&&e[n-r]===o[s-r];r++);return ty=o.slice(t,1<r?1-r:void 0)}function ny(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function lg(){return!0}function BN(){return!1}function ao(t){function e(n,r,o,s,i){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?lg:BN,this.isPropagationStopped=BN,this}return Xt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=lg)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=lg)},persist:function(){},isPersistent:lg}),e}var Cd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ek=ao(Cd),Cp=Xt({},Cd,{view:0,detail:0}),cK=ao(Cp),w1,S1,uf,y0=Xt({},Cp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nk,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==uf&&(uf&&t.type==="mousemove"?(w1=t.screenX-uf.screenX,S1=t.screenY-uf.screenY):S1=w1=0,uf=t),w1)},movementY:function(t){return"movementY"in t?t.movementY:S1}}),zN=ao(y0),dK=Xt({},y0,{dataTransfer:0}),fK=ao(dK),hK=Xt({},Cp,{relatedTarget:0}),C1=ao(hK),pK=Xt({},Cd,{animationName:0,elapsedTime:0,pseudoElement:0}),mK=ao(pK),gK=Xt({},Cd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),yK=ao(gK),vK=Xt({},Cd,{data:0}),jN=ao(vK),xK={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bK={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wK={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function SK(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=wK[t])?!!e[t]:!1}function Nk(){return SK}var CK=Xt({},Cp,{key:function(t){if(t.key){var e=xK[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ny(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?bK[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nk,charCode:function(t){return t.type==="keypress"?ny(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ny(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$K=ao(CK),kK=Xt({},y0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),WN=ao(kK),IK=Xt({},Cp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nk}),TK=ao(IK),EK=Xt({},Cd,{propertyName:0,elapsedTime:0,pseudoElement:0}),NK=ao(EK),AK=Xt({},y0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),OK=ao(AK),_K=[9,13,27,32],Ak=Ci&&"CompositionEvent"in window,Uf=null;Ci&&"documentMode"in document&&(Uf=document.documentMode);var RK=Ci&&"TextEvent"in window&&!Uf,tL=Ci&&(!Ak||Uf&&8<Uf&&11>=Uf),VN=" ",UN=!1;function nL(t,e){switch(t){case"keyup":return _K.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rL(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Wu=!1;function PK(t,e){switch(t){case"compositionend":return rL(e);case"keypress":return e.which!==32?null:(UN=!0,VN);case"textInput":return t=e.data,t===VN&&UN?null:t;default:return null}}function DK(t,e){if(Wu)return t==="compositionend"||!Ak&&nL(t,e)?(t=eL(),ty=Tk=aa=null,Wu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return tL&&e.locale!=="ko"?null:e.data;default:return null}}var MK={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function GN(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!MK[t.type]:e==="textarea"}function oL(t,e,n,r){DF(r),e=Cy(e,"onChange"),0<e.length&&(n=new Ek("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Gf=null,fh=null;function FK(t){mL(t,0)}function v0(t){var e=Gu(t);if(EF(e))return t}function LK(t,e){if(t==="change")return e}var sL=!1;if(Ci){var $1;if(Ci){var k1="oninput"in document;if(!k1){var HN=document.createElement("div");HN.setAttribute("oninput","return;"),k1=typeof HN.oninput=="function"}$1=k1}else $1=!1;sL=$1&&(!document.documentMode||9<document.documentMode)}function KN(){Gf&&(Gf.detachEvent("onpropertychange",iL),fh=Gf=null)}function iL(t){if(t.propertyName==="value"&&v0(fh)){var e=[];oL(e,fh,t,Sk(t)),BF(FK,e)}}function BK(t,e,n){t==="focusin"?(KN(),Gf=e,fh=n,Gf.attachEvent("onpropertychange",iL)):t==="focusout"&&KN()}function zK(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return v0(fh)}function jK(t,e){if(t==="click")return v0(e)}function WK(t,e){if(t==="input"||t==="change")return v0(e)}function VK(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var cs=typeof Object.is=="function"?Object.is:VK;function hh(t,e){if(cs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!Ww.call(e,o)||!cs(t[o],e[o]))return!1}return!0}function qN(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function XN(t,e){var n=qN(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=qN(n)}}function aL(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?aL(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function lL(){for(var t=window,e=gy();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=gy(t.document)}return e}function Ok(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function UK(t){var e=lL(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&aL(n.ownerDocument.documentElement,n)){if(r!==null&&Ok(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=n.textContent.length,s=Math.min(r.start,o);r=r.end===void 0?s:Math.min(r.end,o),!t.extend&&s>r&&(o=r,r=s,s=o),o=XN(n,s);var i=XN(n,r);o&&i&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var GK=Ci&&"documentMode"in document&&11>=document.documentMode,Vu=null,aS=null,Hf=null,lS=!1;function YN(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;lS||Vu==null||Vu!==gy(r)||(r=Vu,"selectionStart"in r&&Ok(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Hf&&hh(Hf,r)||(Hf=r,r=Cy(aS,"onSelect"),0<r.length&&(e=new Ek("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Vu)))}function ug(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Uu={animationend:ug("Animation","AnimationEnd"),animationiteration:ug("Animation","AnimationIteration"),animationstart:ug("Animation","AnimationStart"),transitionend:ug("Transition","TransitionEnd")},I1={},uL={};Ci&&(uL=document.createElement("div").style,"AnimationEvent"in window||(delete Uu.animationend.animation,delete Uu.animationiteration.animation,delete Uu.animationstart.animation),"TransitionEvent"in window||delete Uu.transitionend.transition);function x0(t){if(I1[t])return I1[t];if(!Uu[t])return t;var e=Uu[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in uL)return I1[t]=e[n];return t}var cL=x0("animationend"),dL=x0("animationiteration"),fL=x0("animationstart"),hL=x0("transitionend"),pL=new Map,QN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ja(t,e){pL.set(t,e),fu(e,[t])}for(var T1=0;T1<QN.length;T1++){var E1=QN[T1],HK=E1.toLowerCase(),KK=E1[0].toUpperCase()+E1.slice(1);ja(HK,"on"+KK)}ja(cL,"onAnimationEnd");ja(dL,"onAnimationIteration");ja(fL,"onAnimationStart");ja("dblclick","onDoubleClick");ja("focusin","onFocus");ja("focusout","onBlur");ja(hL,"onTransitionEnd");Ec("onMouseEnter",["mouseout","mouseover"]);Ec("onMouseLeave",["mouseout","mouseover"]);Ec("onPointerEnter",["pointerout","pointerover"]);Ec("onPointerLeave",["pointerout","pointerover"]);fu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fu("onBeforeInput",["compositionend","keypress","textInput","paste"]);fu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Of="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qK=new Set("cancel close invalid load scroll toggle".split(" ").concat(Of));function ZN(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,H8(r,e,void 0,t),t.currentTarget=null}function mL(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],o=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var i=r.length-1;0<=i;i--){var a=r[i],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&o.isPropagationStopped())break e;ZN(o,a,u),s=l}else for(i=0;i<r.length;i++){if(a=r[i],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&o.isPropagationStopped())break e;ZN(o,a,u),s=l}}}if(vy)throw t=rS,vy=!1,rS=null,t}function Dt(t,e){var n=e[hS];n===void 0&&(n=e[hS]=new Set);var r=t+"__bubble";n.has(r)||(gL(e,t,2,!1),n.add(r))}function N1(t,e,n){var r=0;e&&(r|=4),gL(n,t,r,e)}var cg="_reactListening"+Math.random().toString(36).slice(2);function ph(t){if(!t[cg]){t[cg]=!0,CF.forEach(function(n){n!=="selectionchange"&&(qK.has(n)||N1(n,!1,t),N1(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[cg]||(e[cg]=!0,N1("selectionchange",!1,e))}}function gL(t,e,n,r){switch(JF(e)){case 1:var o=lK;break;case 4:o=uK;break;default:o=Ik}n=o.bind(null,e,n,t),o=void 0,!nS||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),r?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function A1(t,e,n,r,o){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var a=r.stateNode.containerInfo;if(a===o||a.nodeType===8&&a.parentNode===o)break;if(i===4)for(i=r.return;i!==null;){var l=i.tag;if((l===3||l===4)&&(l=i.stateNode.containerInfo,l===o||l.nodeType===8&&l.parentNode===o))return;i=i.return}for(;a!==null;){if(i=Sl(a),i===null)return;if(l=i.tag,l===5||l===6){r=s=i;continue e}a=a.parentNode}}r=r.return}BF(function(){var u=s,c=Sk(n),d=[];e:{var f=pL.get(t);if(f!==void 0){var h=Ek,p=t;switch(t){case"keypress":if(ny(n)===0)break e;case"keydown":case"keyup":h=$K;break;case"focusin":p="focus",h=C1;break;case"focusout":p="blur",h=C1;break;case"beforeblur":case"afterblur":h=C1;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=zN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=fK;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=TK;break;case cL:case dL:case fL:h=mK;break;case hL:h=NK;break;case"scroll":h=cK;break;case"wheel":h=OK;break;case"copy":case"cut":case"paste":h=yK;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=WN}var m=(e&4)!==0,g=!m&&t==="scroll",y=m?f!==null?f+"Capture":null:f;m=[];for(var v=u,b;v!==null;){b=v;var x=b.stateNode;if(b.tag===5&&x!==null&&(b=x,y!==null&&(x=lh(v,y),x!=null&&m.push(mh(v,x,b)))),g)break;v=v.return}0<m.length&&(f=new h(f,p,null,n,c),d.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==eS&&(p=n.relatedTarget||n.fromElement)&&(Sl(p)||p[$i]))break e;if((h||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=u,p=p?Sl(p):null,p!==null&&(g=hu(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=u),h!==p)){if(m=zN,x="onMouseLeave",y="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(m=WN,x="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?f:Gu(h),b=p==null?f:Gu(p),f=new m(x,v+"leave",h,n,c),f.target=g,f.relatedTarget=b,x=null,Sl(c)===u&&(m=new m(y,v+"enter",p,n,c),m.target=b,m.relatedTarget=g,x=m),g=x,h&&p)t:{for(m=h,y=p,v=0,b=m;b;b=Au(b))v++;for(b=0,x=y;x;x=Au(x))b++;for(;0<v-b;)m=Au(m),v--;for(;0<b-v;)y=Au(y),b--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=Au(m),y=Au(y)}m=null}else m=null;h!==null&&JN(d,f,h,m,!1),p!==null&&g!==null&&JN(d,g,p,m,!0)}}e:{if(f=u?Gu(u):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var w=LK;else if(GN(f))if(sL)w=WK;else{w=zK;var S=BK}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(w=jK);if(w&&(w=w(t,u))){oL(d,w,n,c);break e}S&&S(t,f,u),t==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&Xw(f,"number",f.value)}switch(S=u?Gu(u):window,t){case"focusin":(GN(S)||S.contentEditable==="true")&&(Vu=S,aS=u,Hf=null);break;case"focusout":Hf=aS=Vu=null;break;case"mousedown":lS=!0;break;case"contextmenu":case"mouseup":case"dragend":lS=!1,YN(d,n,c);break;case"selectionchange":if(GK)break;case"keydown":case"keyup":YN(d,n,c)}var $;if(Ak)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Wu?nL(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(tL&&n.locale!=="ko"&&(Wu||C!=="onCompositionStart"?C==="onCompositionEnd"&&Wu&&($=eL()):(aa=c,Tk="value"in aa?aa.value:aa.textContent,Wu=!0)),S=Cy(u,C),0<S.length&&(C=new jN(C,t,null,n,c),d.push({event:C,listeners:S}),$?C.data=$:($=rL(n),$!==null&&(C.data=$)))),($=RK?PK(t,n):DK(t,n))&&(u=Cy(u,"onBeforeInput"),0<u.length&&(c=new jN("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=$))}mL(d,e)})}function mh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Cy(t,e){for(var n=e+"Capture",r=[];t!==null;){var o=t,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=lh(t,n),s!=null&&r.unshift(mh(t,s,o)),s=lh(t,e),s!=null&&r.push(mh(t,s,o))),t=t.return}return r}function Au(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function JN(t,e,n,r,o){for(var s=e._reactName,i=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,o?(l=lh(n,s),l!=null&&i.unshift(mh(n,l,a))):o||(l=lh(n,s),l!=null&&i.push(mh(n,l,a)))),n=n.return}i.length!==0&&t.push({event:e,listeners:i})}var XK=/\r\n?/g,YK=/\u0000|\uFFFD/g;function eA(t){return(typeof t=="string"?t:""+t).replace(XK,`
`).replace(YK,"")}function dg(t,e,n){if(e=eA(e),eA(t)!==e&&n)throw Error(pe(425))}function $y(){}var uS=null,cS=null;function dS(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var fS=typeof setTimeout=="function"?setTimeout:void 0,QK=typeof clearTimeout=="function"?clearTimeout:void 0,tA=typeof Promise=="function"?Promise:void 0,ZK=typeof queueMicrotask=="function"?queueMicrotask:typeof tA<"u"?function(t){return tA.resolve(null).then(t).catch(JK)}:fS;function JK(t){setTimeout(function(){throw t})}function O1(t,e){var n=e,r=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){t.removeChild(o),dh(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);dh(e)}function ga(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function nA(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var $d=Math.random().toString(36).slice(2),_s="__reactFiber$"+$d,gh="__reactProps$"+$d,$i="__reactContainer$"+$d,hS="__reactEvents$"+$d,eq="__reactListeners$"+$d,tq="__reactHandles$"+$d;function Sl(t){var e=t[_s];if(e)return e;for(var n=t.parentNode;n;){if(e=n[$i]||n[_s]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=nA(t);t!==null;){if(n=t[_s])return n;t=nA(t)}return e}t=n,n=t.parentNode}return null}function $p(t){return t=t[_s]||t[$i],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Gu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(pe(33))}function b0(t){return t[gh]||null}var pS=[],Hu=-1;function Wa(t){return{current:t}}function Lt(t){0>Hu||(t.current=pS[Hu],pS[Hu]=null,Hu--)}function Tt(t,e){Hu++,pS[Hu]=t.current,t.current=e}var Ea={},ir=Wa(Ea),Dr=Wa(!1),Ul=Ea;function Nc(t,e){var n=t.type.contextTypes;if(!n)return Ea;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in n)o[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Mr(t){return t=t.childContextTypes,t!=null}function ky(){Lt(Dr),Lt(ir)}function rA(t,e,n){if(ir.current!==Ea)throw Error(pe(168));Tt(ir,e),Tt(Dr,n)}function yL(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in e))throw Error(pe(108,B8(t)||"Unknown",o));return Xt({},n,r)}function Iy(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ea,Ul=ir.current,Tt(ir,t),Tt(Dr,Dr.current),!0}function oA(t,e,n){var r=t.stateNode;if(!r)throw Error(pe(169));n?(t=yL(t,e,Ul),r.__reactInternalMemoizedMergedChildContext=t,Lt(Dr),Lt(ir),Tt(ir,t)):Lt(Dr),Tt(Dr,n)}var ci=null,w0=!1,_1=!1;function vL(t){ci===null?ci=[t]:ci.push(t)}function nq(t){w0=!0,vL(t)}function Va(){if(!_1&&ci!==null){_1=!0;var t=0,e=mt;try{var n=ci;for(mt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ci=null,w0=!1}catch(o){throw ci!==null&&(ci=ci.slice(t+1)),VF(Ck,Va),o}finally{mt=e,_1=!1}}return null}var Ku=[],qu=0,Ty=null,Ey=0,bo=[],wo=0,Gl=null,hi=1,pi="";function cl(t,e){Ku[qu++]=Ey,Ku[qu++]=Ty,Ty=t,Ey=e}function xL(t,e,n){bo[wo++]=hi,bo[wo++]=pi,bo[wo++]=Gl,Gl=t;var r=hi;t=pi;var o=32-os(r)-1;r&=~(1<<o),n+=1;var s=32-os(e)+o;if(30<s){var i=o-o%5;s=(r&(1<<i)-1).toString(32),r>>=i,o-=i,hi=1<<32-os(e)+o|n<<o|r,pi=s+t}else hi=1<<s|n<<o|r,pi=t}function _k(t){t.return!==null&&(cl(t,1),xL(t,1,0))}function Rk(t){for(;t===Ty;)Ty=Ku[--qu],Ku[qu]=null,Ey=Ku[--qu],Ku[qu]=null;for(;t===Gl;)Gl=bo[--wo],bo[wo]=null,pi=bo[--wo],bo[wo]=null,hi=bo[--wo],bo[wo]=null}var to=null,Jr=null,jt=!1,Jo=null;function bL(t,e){var n=ko(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function sA(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,to=t,Jr=ga(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,to=t,Jr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Gl!==null?{id:hi,overflow:pi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ko(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,to=t,Jr=null,!0):!1;default:return!1}}function mS(t){return(t.mode&1)!==0&&(t.flags&128)===0}function gS(t){if(jt){var e=Jr;if(e){var n=e;if(!sA(t,e)){if(mS(t))throw Error(pe(418));e=ga(n.nextSibling);var r=to;e&&sA(t,e)?bL(r,n):(t.flags=t.flags&-4097|2,jt=!1,to=t)}}else{if(mS(t))throw Error(pe(418));t.flags=t.flags&-4097|2,jt=!1,to=t}}}function iA(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;to=t}function fg(t){if(t!==to)return!1;if(!jt)return iA(t),jt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!dS(t.type,t.memoizedProps)),e&&(e=Jr)){if(mS(t))throw wL(),Error(pe(418));for(;e;)bL(t,e),e=ga(e.nextSibling)}if(iA(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(pe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Jr=ga(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Jr=null}}else Jr=to?ga(t.stateNode.nextSibling):null;return!0}function wL(){for(var t=Jr;t;)t=ga(t.nextSibling)}function Ac(){Jr=to=null,jt=!1}function Pk(t){Jo===null?Jo=[t]:Jo.push(t)}var rq=Mi.ReactCurrentBatchConfig;function cf(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(pe(309));var r=n.stateNode}if(!r)throw Error(pe(147,t));var o=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(i){var a=o.refs;i===null?delete a[s]:a[s]=i},e._stringRef=s,e)}if(typeof t!="string")throw Error(pe(284));if(!n._owner)throw Error(pe(290,t))}return t}function hg(t,e){throw t=Object.prototype.toString.call(e),Error(pe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function aA(t){var e=t._init;return e(t._payload)}function SL(t){function e(y,v){if(t){var b=y.deletions;b===null?(y.deletions=[v],y.flags|=16):b.push(v)}}function n(y,v){if(!t)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function o(y,v){return y=ba(y,v),y.index=0,y.sibling=null,y}function s(y,v,b){return y.index=b,t?(b=y.alternate,b!==null?(b=b.index,b<v?(y.flags|=2,v):b):(y.flags|=2,v)):(y.flags|=1048576,v)}function i(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,v,b,x){return v===null||v.tag!==6?(v=B1(b,y.mode,x),v.return=y,v):(v=o(v,b),v.return=y,v)}function l(y,v,b,x){var w=b.type;return w===ju?c(y,v,b.props.children,x,b.key):v!==null&&(v.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Xi&&aA(w)===v.type)?(x=o(v,b.props),x.ref=cf(y,v,b),x.return=y,x):(x=uy(b.type,b.key,b.props,null,y.mode,x),x.ref=cf(y,v,b),x.return=y,x)}function u(y,v,b,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=z1(b,y.mode,x),v.return=y,v):(v=o(v,b.children||[]),v.return=y,v)}function c(y,v,b,x,w){return v===null||v.tag!==7?(v=Ml(b,y.mode,x,w),v.return=y,v):(v=o(v,b),v.return=y,v)}function d(y,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=B1(""+v,y.mode,b),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ng:return b=uy(v.type,v.key,v.props,null,y.mode,b),b.ref=cf(y,null,v),b.return=y,b;case zu:return v=z1(v,y.mode,b),v.return=y,v;case Xi:var x=v._init;return d(y,x(v._payload),b)}if(Nf(v)||of(v))return v=Ml(v,y.mode,b,null),v.return=y,v;hg(y,v)}return null}function f(y,v,b,x){var w=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return w!==null?null:a(y,v,""+b,x);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ng:return b.key===w?l(y,v,b,x):null;case zu:return b.key===w?u(y,v,b,x):null;case Xi:return w=b._init,f(y,v,w(b._payload),x)}if(Nf(b)||of(b))return w!==null?null:c(y,v,b,x,null);hg(y,b)}return null}function h(y,v,b,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return y=y.get(b)||null,a(v,y,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ng:return y=y.get(x.key===null?b:x.key)||null,l(v,y,x,w);case zu:return y=y.get(x.key===null?b:x.key)||null,u(v,y,x,w);case Xi:var S=x._init;return h(y,v,b,S(x._payload),w)}if(Nf(x)||of(x))return y=y.get(b)||null,c(v,y,x,w,null);hg(v,x)}return null}function p(y,v,b,x){for(var w=null,S=null,$=v,C=v=0,k=null;$!==null&&C<b.length;C++){$.index>C?(k=$,$=null):k=$.sibling;var I=f(y,$,b[C],x);if(I===null){$===null&&($=k);break}t&&$&&I.alternate===null&&e(y,$),v=s(I,v,C),S===null?w=I:S.sibling=I,S=I,$=k}if(C===b.length)return n(y,$),jt&&cl(y,C),w;if($===null){for(;C<b.length;C++)$=d(y,b[C],x),$!==null&&(v=s($,v,C),S===null?w=$:S.sibling=$,S=$);return jt&&cl(y,C),w}for($=r(y,$);C<b.length;C++)k=h($,y,C,b[C],x),k!==null&&(t&&k.alternate!==null&&$.delete(k.key===null?C:k.key),v=s(k,v,C),S===null?w=k:S.sibling=k,S=k);return t&&$.forEach(function(T){return e(y,T)}),jt&&cl(y,C),w}function m(y,v,b,x){var w=of(b);if(typeof w!="function")throw Error(pe(150));if(b=w.call(b),b==null)throw Error(pe(151));for(var S=w=null,$=v,C=v=0,k=null,I=b.next();$!==null&&!I.done;C++,I=b.next()){$.index>C?(k=$,$=null):k=$.sibling;var T=f(y,$,I.value,x);if(T===null){$===null&&($=k);break}t&&$&&T.alternate===null&&e(y,$),v=s(T,v,C),S===null?w=T:S.sibling=T,S=T,$=k}if(I.done)return n(y,$),jt&&cl(y,C),w;if($===null){for(;!I.done;C++,I=b.next())I=d(y,I.value,x),I!==null&&(v=s(I,v,C),S===null?w=I:S.sibling=I,S=I);return jt&&cl(y,C),w}for($=r(y,$);!I.done;C++,I=b.next())I=h($,y,C,I.value,x),I!==null&&(t&&I.alternate!==null&&$.delete(I.key===null?C:I.key),v=s(I,v,C),S===null?w=I:S.sibling=I,S=I);return t&&$.forEach(function(E){return e(y,E)}),jt&&cl(y,C),w}function g(y,v,b,x){if(typeof b=="object"&&b!==null&&b.type===ju&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case ng:e:{for(var w=b.key,S=v;S!==null;){if(S.key===w){if(w=b.type,w===ju){if(S.tag===7){n(y,S.sibling),v=o(S,b.props.children),v.return=y,y=v;break e}}else if(S.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Xi&&aA(w)===S.type){n(y,S.sibling),v=o(S,b.props),v.ref=cf(y,S,b),v.return=y,y=v;break e}n(y,S);break}else e(y,S);S=S.sibling}b.type===ju?(v=Ml(b.props.children,y.mode,x,b.key),v.return=y,y=v):(x=uy(b.type,b.key,b.props,null,y.mode,x),x.ref=cf(y,v,b),x.return=y,y=x)}return i(y);case zu:e:{for(S=b.key;v!==null;){if(v.key===S)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(y,v.sibling),v=o(v,b.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else e(y,v);v=v.sibling}v=z1(b,y.mode,x),v.return=y,y=v}return i(y);case Xi:return S=b._init,g(y,v,S(b._payload),x)}if(Nf(b))return p(y,v,b,x);if(of(b))return m(y,v,b,x);hg(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(y,v.sibling),v=o(v,b),v.return=y,y=v):(n(y,v),v=B1(b,y.mode,x),v.return=y,y=v),i(y)):n(y,v)}return g}var Oc=SL(!0),CL=SL(!1),Ny=Wa(null),Ay=null,Xu=null,Dk=null;function Mk(){Dk=Xu=Ay=null}function Fk(t){var e=Ny.current;Lt(Ny),t._currentValue=e}function yS(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ic(t,e){Ay=t,Dk=Xu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ar=!0),t.firstContext=null)}function Po(t){var e=t._currentValue;if(Dk!==t)if(t={context:t,memoizedValue:e,next:null},Xu===null){if(Ay===null)throw Error(pe(308));Xu=t,Ay.dependencies={lanes:0,firstContext:t}}else Xu=Xu.next=t;return e}var Cl=null;function Lk(t){Cl===null?Cl=[t]:Cl.push(t)}function $L(t,e,n,r){var o=e.interleaved;return o===null?(n.next=n,Lk(e)):(n.next=o.next,o.next=n),e.interleaved=n,ki(t,r)}function ki(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Yi=!1;function Bk(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kL(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function vi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ya(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,rt&2){var o=r.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),r.pending=e,ki(t,n)}return o=r.interleaved,o===null?(e.next=e,Lk(r)):(e.next=o.next,o.next=e),r.interleaved=e,ki(t,n)}function ry(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$k(t,n)}}function lA(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?o=s=i:s=s.next=i,n=n.next}while(n!==null);s===null?o=s=e:s=s.next=e}else o=s=e;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Oy(t,e,n,r){var o=t.updateQueue;Yi=!1;var s=o.firstBaseUpdate,i=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var l=a,u=l.next;l.next=null,i===null?s=u:i.next=u,i=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==i&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=o.baseState;i=0,c=u=l=null,a=s;do{var f=a.lane,h=a.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(f=e,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,f=typeof p=="function"?p.call(h,d,f):p,f==null)break e;d=Xt({},d,f);break e;case 2:Yi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=o.effects,f===null?o.effects=[a]:f.push(a))}else h={eventTime:h,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=h,l=d):c=c.next=h,i|=f;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;f=a,a=f.next,f.next=null,o.lastBaseUpdate=f,o.shared.pending=null}}while(!0);if(c===null&&(l=d),o.baseState=l,o.firstBaseUpdate=u,o.lastBaseUpdate=c,e=o.shared.interleaved,e!==null){o=e;do i|=o.lane,o=o.next;while(o!==e)}else s===null&&(o.shared.lanes=0);Kl|=i,t.lanes=i,t.memoizedState=d}}function uA(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(pe(191,o));o.call(r)}}}var kp={},Ms=Wa(kp),yh=Wa(kp),vh=Wa(kp);function $l(t){if(t===kp)throw Error(pe(174));return t}function zk(t,e){switch(Tt(vh,e),Tt(yh,t),Tt(Ms,kp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Qw(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Qw(e,t)}Lt(Ms),Tt(Ms,e)}function _c(){Lt(Ms),Lt(yh),Lt(vh)}function IL(t){$l(vh.current);var e=$l(Ms.current),n=Qw(e,t.type);e!==n&&(Tt(yh,t),Tt(Ms,n))}function jk(t){yh.current===t&&(Lt(Ms),Lt(yh))}var Kt=Wa(0);function _y(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var R1=[];function Wk(){for(var t=0;t<R1.length;t++)R1[t]._workInProgressVersionPrimary=null;R1.length=0}var oy=Mi.ReactCurrentDispatcher,P1=Mi.ReactCurrentBatchConfig,Hl=0,qt=null,Cn=null,_n=null,Ry=!1,Kf=!1,xh=0,oq=0;function Qn(){throw Error(pe(321))}function Vk(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!cs(t[n],e[n]))return!1;return!0}function Uk(t,e,n,r,o,s){if(Hl=s,qt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,oy.current=t===null||t.memoizedState===null?lq:uq,t=n(r,o),Kf){s=0;do{if(Kf=!1,xh=0,25<=s)throw Error(pe(301));s+=1,_n=Cn=null,e.updateQueue=null,oy.current=cq,t=n(r,o)}while(Kf)}if(oy.current=Py,e=Cn!==null&&Cn.next!==null,Hl=0,_n=Cn=qt=null,Ry=!1,e)throw Error(pe(300));return t}function Gk(){var t=xh!==0;return xh=0,t}function Cs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _n===null?qt.memoizedState=_n=t:_n=_n.next=t,_n}function Do(){if(Cn===null){var t=qt.alternate;t=t!==null?t.memoizedState:null}else t=Cn.next;var e=_n===null?qt.memoizedState:_n.next;if(e!==null)_n=e,Cn=t;else{if(t===null)throw Error(pe(310));Cn=t,t={memoizedState:Cn.memoizedState,baseState:Cn.baseState,baseQueue:Cn.baseQueue,queue:Cn.queue,next:null},_n===null?qt.memoizedState=_n=t:_n=_n.next=t}return _n}function bh(t,e){return typeof e=="function"?e(t):e}function D1(t){var e=Do(),n=e.queue;if(n===null)throw Error(pe(311));n.lastRenderedReducer=t;var r=Cn,o=r.baseQueue,s=n.pending;if(s!==null){if(o!==null){var i=o.next;o.next=s.next,s.next=i}r.baseQueue=o=s,n.pending=null}if(o!==null){s=o.next,r=r.baseState;var a=i=null,l=null,u=s;do{var c=u.lane;if((Hl&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,i=r):l=l.next=d,qt.lanes|=c,Kl|=c}u=u.next}while(u!==null&&u!==s);l===null?i=r:l.next=a,cs(r,e.memoizedState)||(Ar=!0),e.memoizedState=r,e.baseState=i,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){o=t;do s=o.lane,qt.lanes|=s,Kl|=s,o=o.next;while(o!==t)}else o===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function M1(t){var e=Do(),n=e.queue;if(n===null)throw Error(pe(311));n.lastRenderedReducer=t;var r=n.dispatch,o=n.pending,s=e.memoizedState;if(o!==null){n.pending=null;var i=o=o.next;do s=t(s,i.action),i=i.next;while(i!==o);cs(s,e.memoizedState)||(Ar=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function TL(){}function EL(t,e){var n=qt,r=Do(),o=e(),s=!cs(r.memoizedState,o);if(s&&(r.memoizedState=o,Ar=!0),r=r.queue,Hk(OL.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||_n!==null&&_n.memoizedState.tag&1){if(n.flags|=2048,wh(9,AL.bind(null,n,r,o,e),void 0,null),Pn===null)throw Error(pe(349));Hl&30||NL(n,e,o)}return o}function NL(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=qt.updateQueue,e===null?(e={lastEffect:null,stores:null},qt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function AL(t,e,n,r){e.value=n,e.getSnapshot=r,_L(e)&&RL(t)}function OL(t,e,n){return n(function(){_L(e)&&RL(t)})}function _L(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!cs(t,n)}catch{return!0}}function RL(t){var e=ki(t,1);e!==null&&ss(e,t,1,-1)}function cA(t){var e=Cs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bh,lastRenderedState:t},e.queue=t,t=t.dispatch=aq.bind(null,qt,t),[e.memoizedState,t]}function wh(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=qt.updateQueue,e===null?(e={lastEffect:null,stores:null},qt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function PL(){return Do().memoizedState}function sy(t,e,n,r){var o=Cs();qt.flags|=t,o.memoizedState=wh(1|e,n,void 0,r===void 0?null:r)}function S0(t,e,n,r){var o=Do();r=r===void 0?null:r;var s=void 0;if(Cn!==null){var i=Cn.memoizedState;if(s=i.destroy,r!==null&&Vk(r,i.deps)){o.memoizedState=wh(e,n,s,r);return}}qt.flags|=t,o.memoizedState=wh(1|e,n,s,r)}function dA(t,e){return sy(8390656,8,t,e)}function Hk(t,e){return S0(2048,8,t,e)}function DL(t,e){return S0(4,2,t,e)}function ML(t,e){return S0(4,4,t,e)}function FL(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function LL(t,e,n){return n=n!=null?n.concat([t]):null,S0(4,4,FL.bind(null,e,t),n)}function Kk(){}function BL(t,e){var n=Do();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Vk(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function zL(t,e){var n=Do();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Vk(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function jL(t,e,n){return Hl&21?(cs(n,e)||(n=HF(),qt.lanes|=n,Kl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ar=!0),t.memoizedState=n)}function sq(t,e){var n=mt;mt=n!==0&&4>n?n:4,t(!0);var r=P1.transition;P1.transition={};try{t(!1),e()}finally{mt=n,P1.transition=r}}function WL(){return Do().memoizedState}function iq(t,e,n){var r=xa(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},VL(t))UL(e,n);else if(n=$L(t,e,n,r),n!==null){var o=xr();ss(n,t,r,o),GL(n,e,r)}}function aq(t,e,n){var r=xa(t),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(VL(t))UL(e,o);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var i=e.lastRenderedState,a=s(i,n);if(o.hasEagerState=!0,o.eagerState=a,cs(a,i)){var l=e.interleaved;l===null?(o.next=o,Lk(e)):(o.next=l.next,l.next=o),e.interleaved=o;return}}catch{}finally{}n=$L(t,e,o,r),n!==null&&(o=xr(),ss(n,t,r,o),GL(n,e,r))}}function VL(t){var e=t.alternate;return t===qt||e!==null&&e===qt}function UL(t,e){Kf=Ry=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function GL(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$k(t,n)}}var Py={readContext:Po,useCallback:Qn,useContext:Qn,useEffect:Qn,useImperativeHandle:Qn,useInsertionEffect:Qn,useLayoutEffect:Qn,useMemo:Qn,useReducer:Qn,useRef:Qn,useState:Qn,useDebugValue:Qn,useDeferredValue:Qn,useTransition:Qn,useMutableSource:Qn,useSyncExternalStore:Qn,useId:Qn,unstable_isNewReconciler:!1},lq={readContext:Po,useCallback:function(t,e){return Cs().memoizedState=[t,e===void 0?null:e],t},useContext:Po,useEffect:dA,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,sy(4194308,4,FL.bind(null,e,t),n)},useLayoutEffect:function(t,e){return sy(4194308,4,t,e)},useInsertionEffect:function(t,e){return sy(4,2,t,e)},useMemo:function(t,e){var n=Cs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Cs();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=iq.bind(null,qt,t),[r.memoizedState,t]},useRef:function(t){var e=Cs();return t={current:t},e.memoizedState=t},useState:cA,useDebugValue:Kk,useDeferredValue:function(t){return Cs().memoizedState=t},useTransition:function(){var t=cA(!1),e=t[0];return t=sq.bind(null,t[1]),Cs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=qt,o=Cs();if(jt){if(n===void 0)throw Error(pe(407));n=n()}else{if(n=e(),Pn===null)throw Error(pe(349));Hl&30||NL(r,e,n)}o.memoizedState=n;var s={value:n,getSnapshot:e};return o.queue=s,dA(OL.bind(null,r,s,t),[t]),r.flags|=2048,wh(9,AL.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Cs(),e=Pn.identifierPrefix;if(jt){var n=pi,r=hi;n=(r&~(1<<32-os(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=xh++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=oq++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},uq={readContext:Po,useCallback:BL,useContext:Po,useEffect:Hk,useImperativeHandle:LL,useInsertionEffect:DL,useLayoutEffect:ML,useMemo:zL,useReducer:D1,useRef:PL,useState:function(){return D1(bh)},useDebugValue:Kk,useDeferredValue:function(t){var e=Do();return jL(e,Cn.memoizedState,t)},useTransition:function(){var t=D1(bh)[0],e=Do().memoizedState;return[t,e]},useMutableSource:TL,useSyncExternalStore:EL,useId:WL,unstable_isNewReconciler:!1},cq={readContext:Po,useCallback:BL,useContext:Po,useEffect:Hk,useImperativeHandle:LL,useInsertionEffect:DL,useLayoutEffect:ML,useMemo:zL,useReducer:M1,useRef:PL,useState:function(){return M1(bh)},useDebugValue:Kk,useDeferredValue:function(t){var e=Do();return Cn===null?e.memoizedState=t:jL(e,Cn.memoizedState,t)},useTransition:function(){var t=M1(bh)[0],e=Do().memoizedState;return[t,e]},useMutableSource:TL,useSyncExternalStore:EL,useId:WL,unstable_isNewReconciler:!1};function qo(t,e){if(t&&t.defaultProps){e=Xt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function vS(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Xt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var C0={isMounted:function(t){return(t=t._reactInternals)?hu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=xr(),o=xa(t),s=vi(r,o);s.payload=e,n!=null&&(s.callback=n),e=ya(t,s,o),e!==null&&(ss(e,t,o,r),ry(e,t,o))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=xr(),o=xa(t),s=vi(r,o);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ya(t,s,o),e!==null&&(ss(e,t,o,r),ry(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=xr(),r=xa(t),o=vi(n,r);o.tag=2,e!=null&&(o.callback=e),e=ya(t,o,r),e!==null&&(ss(e,t,r,n),ry(e,t,r))}};function fA(t,e,n,r,o,s,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,i):e.prototype&&e.prototype.isPureReactComponent?!hh(n,r)||!hh(o,s):!0}function HL(t,e,n){var r=!1,o=Ea,s=e.contextType;return typeof s=="object"&&s!==null?s=Po(s):(o=Mr(e)?Ul:ir.current,r=e.contextTypes,s=(r=r!=null)?Nc(t,o):Ea),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=C0,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=s),e}function hA(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&C0.enqueueReplaceState(e,e.state,null)}function xS(t,e,n,r){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs={},Bk(t);var s=e.contextType;typeof s=="object"&&s!==null?o.context=Po(s):(s=Mr(e)?Ul:ir.current,o.context=Nc(t,s)),o.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(vS(t,e,s,n),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&C0.enqueueReplaceState(o,o.state,null),Oy(t,n,o,r),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function Rc(t,e){try{var n="",r=e;do n+=L8(r),r=r.return;while(r);var o=n}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:o,digest:null}}function F1(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function bS(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var dq=typeof WeakMap=="function"?WeakMap:Map;function KL(t,e,n){n=vi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){My||(My=!0,AS=r),bS(t,e)},n}function qL(t,e,n){n=vi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var o=e.value;n.payload=function(){return r(o)},n.callback=function(){bS(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){bS(t,e),typeof r!="function"&&(va===null?va=new Set([this]):va.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),n}function pA(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new dq;var o=new Set;r.set(e,o)}else o=r.get(e),o===void 0&&(o=new Set,r.set(e,o));o.has(n)||(o.add(n),t=kq.bind(null,t,e,n),e.then(t,t))}function mA(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function gA(t,e,n,r,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=vi(-1,1),e.tag=2,ya(n,e,1))),n.lanes|=1),t)}var fq=Mi.ReactCurrentOwner,Ar=!1;function hr(t,e,n,r){e.child=t===null?CL(e,null,n,r):Oc(e,t.child,n,r)}function yA(t,e,n,r,o){n=n.render;var s=e.ref;return ic(e,o),r=Uk(t,e,n,r,s,o),n=Gk(),t!==null&&!Ar?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,Ii(t,e,o)):(jt&&n&&_k(e),e.flags|=1,hr(t,e,r,o),e.child)}function vA(t,e,n,r,o){if(t===null){var s=n.type;return typeof s=="function"&&!tI(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,XL(t,e,s,r,o)):(t=uy(n.type,null,r,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&o)){var i=s.memoizedProps;if(n=n.compare,n=n!==null?n:hh,n(i,r)&&t.ref===e.ref)return Ii(t,e,o)}return e.flags|=1,t=ba(s,r),t.ref=e.ref,t.return=e,e.child=t}function XL(t,e,n,r,o){if(t!==null){var s=t.memoizedProps;if(hh(s,r)&&t.ref===e.ref)if(Ar=!1,e.pendingProps=r=s,(t.lanes&o)!==0)t.flags&131072&&(Ar=!0);else return e.lanes=t.lanes,Ii(t,e,o)}return wS(t,e,n,r,o)}function YL(t,e,n){var r=e.pendingProps,o=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tt(Qu,qr),qr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Tt(Qu,qr),qr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Tt(Qu,qr),qr|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Tt(Qu,qr),qr|=r;return hr(t,e,o,n),e.child}function QL(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function wS(t,e,n,r,o){var s=Mr(n)?Ul:ir.current;return s=Nc(e,s),ic(e,o),n=Uk(t,e,n,r,s,o),r=Gk(),t!==null&&!Ar?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,Ii(t,e,o)):(jt&&r&&_k(e),e.flags|=1,hr(t,e,n,o),e.child)}function xA(t,e,n,r,o){if(Mr(n)){var s=!0;Iy(e)}else s=!1;if(ic(e,o),e.stateNode===null)iy(t,e),HL(e,n,r),xS(e,n,r,o),r=!0;else if(t===null){var i=e.stateNode,a=e.memoizedProps;i.props=a;var l=i.context,u=n.contextType;typeof u=="object"&&u!==null?u=Po(u):(u=Mr(n)?Ul:ir.current,u=Nc(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof i.getSnapshotBeforeUpdate=="function";d||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==r||l!==u)&&hA(e,i,r,u),Yi=!1;var f=e.memoizedState;i.state=f,Oy(e,r,i,o),l=e.memoizedState,a!==r||f!==l||Dr.current||Yi?(typeof c=="function"&&(vS(e,n,c,r),l=e.memoizedState),(a=Yi||fA(e,n,a,r,f,l,u))?(d||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),i.props=r,i.state=l,i.context=u,r=a):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{i=e.stateNode,kL(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:qo(e.type,a),i.props=u,d=e.pendingProps,f=i.context,l=n.contextType,typeof l=="object"&&l!==null?l=Po(l):(l=Mr(n)?Ul:ir.current,l=Nc(e,l));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==d||f!==l)&&hA(e,i,r,l),Yi=!1,f=e.memoizedState,i.state=f,Oy(e,r,i,o);var p=e.memoizedState;a!==d||f!==p||Dr.current||Yi?(typeof h=="function"&&(vS(e,n,h,r),p=e.memoizedState),(u=Yi||fA(e,n,u,r,f,p,l)||!1)?(c||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,p,l),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,p,l)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),i.props=r,i.state=p,i.context=l,r=u):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return SS(t,e,n,r,s,o)}function SS(t,e,n,r,o,s){QL(t,e);var i=(e.flags&128)!==0;if(!r&&!i)return o&&oA(e,n,!1),Ii(t,e,s);r=e.stateNode,fq.current=e;var a=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&i?(e.child=Oc(e,t.child,null,s),e.child=Oc(e,null,a,s)):hr(t,e,a,s),e.memoizedState=r.state,o&&oA(e,n,!0),e.child}function ZL(t){var e=t.stateNode;e.pendingContext?rA(t,e.pendingContext,e.pendingContext!==e.context):e.context&&rA(t,e.context,!1),zk(t,e.containerInfo)}function bA(t,e,n,r,o){return Ac(),Pk(o),e.flags|=256,hr(t,e,n,r),e.child}var CS={dehydrated:null,treeContext:null,retryLane:0};function $S(t){return{baseLanes:t,cachePool:null,transitions:null}}function JL(t,e,n){var r=e.pendingProps,o=Kt.current,s=!1,i=(e.flags&128)!==0,a;if((a=i)||(a=t!==null&&t.memoizedState===null?!1:(o&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),Tt(Kt,o&1),t===null)return gS(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=r.children,t=r.fallback,s?(r=e.mode,s=e.child,i={mode:"hidden",children:i},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=I0(i,r,0,null),t=Ml(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=$S(n),e.memoizedState=CS,t):qk(e,i));if(o=t.memoizedState,o!==null&&(a=o.dehydrated,a!==null))return hq(t,e,i,r,a,o,n);if(s){s=r.fallback,i=e.mode,o=t.child,a=o.sibling;var l={mode:"hidden",children:r.children};return!(i&1)&&e.child!==o?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ba(o,l),r.subtreeFlags=o.subtreeFlags&14680064),a!==null?s=ba(a,s):(s=Ml(s,i,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,i=t.child.memoizedState,i=i===null?$S(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=t.childLanes&~n,e.memoizedState=CS,r}return s=t.child,t=s.sibling,r=ba(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function qk(t,e){return e=I0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function pg(t,e,n,r){return r!==null&&Pk(r),Oc(e,t.child,null,n),t=qk(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function hq(t,e,n,r,o,s,i){if(n)return e.flags&256?(e.flags&=-257,r=F1(Error(pe(422))),pg(t,e,i,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,o=e.mode,r=I0({mode:"visible",children:r.children},o,0,null),s=Ml(s,o,i,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Oc(e,t.child,null,i),e.child.memoizedState=$S(i),e.memoizedState=CS,s);if(!(e.mode&1))return pg(t,e,i,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(pe(419)),r=F1(s,r,void 0),pg(t,e,i,r)}if(a=(i&t.childLanes)!==0,Ar||a){if(r=Pn,r!==null){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|i)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,ki(t,o),ss(r,t,o,-1))}return eI(),r=F1(Error(pe(421))),pg(t,e,i,r)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=Iq.bind(null,t),o._reactRetry=e,null):(t=s.treeContext,Jr=ga(o.nextSibling),to=e,jt=!0,Jo=null,t!==null&&(bo[wo++]=hi,bo[wo++]=pi,bo[wo++]=Gl,hi=t.id,pi=t.overflow,Gl=e),e=qk(e,r.children),e.flags|=4096,e)}function wA(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),yS(t.return,e,n)}function L1(t,e,n,r,o){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=o)}function e3(t,e,n){var r=e.pendingProps,o=r.revealOrder,s=r.tail;if(hr(t,e,r.children,n),r=Kt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&wA(t,n,e);else if(t.tag===19)wA(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Tt(Kt,r),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&_y(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),L1(e,!1,o,n,s);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&_y(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}L1(e,!0,n,null,s);break;case"together":L1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function iy(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ii(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Kl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(pe(153));if(e.child!==null){for(t=e.child,n=ba(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ba(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function pq(t,e,n){switch(e.tag){case 3:ZL(e),Ac();break;case 5:IL(e);break;case 1:Mr(e.type)&&Iy(e);break;case 4:zk(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,o=e.memoizedProps.value;Tt(Ny,r._currentValue),r._currentValue=o;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Tt(Kt,Kt.current&1),e.flags|=128,null):n&e.child.childLanes?JL(t,e,n):(Tt(Kt,Kt.current&1),t=Ii(t,e,n),t!==null?t.sibling:null);Tt(Kt,Kt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return e3(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Tt(Kt,Kt.current),r)break;return null;case 22:case 23:return e.lanes=0,YL(t,e,n)}return Ii(t,e,n)}var t3,kS,n3,r3;t3=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};kS=function(){};n3=function(t,e,n,r){var o=t.memoizedProps;if(o!==r){t=e.stateNode,$l(Ms.current);var s=null;switch(n){case"input":o=Kw(t,o),r=Kw(t,r),s=[];break;case"select":o=Xt({},o,{value:void 0}),r=Xt({},r,{value:void 0}),s=[];break;case"textarea":o=Yw(t,o),r=Yw(t,r),s=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=$y)}Zw(n,r);var i;n=null;for(u in o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&o[u]!=null)if(u==="style"){var a=o[u];for(i in a)a.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ih.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=o!=null?o[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(i in a)!a.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in l)l.hasOwnProperty(i)&&a[i]!==l[i]&&(n||(n={}),n[i]=l[i])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ih.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Dt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};r3=function(t,e,n,r){n!==r&&(e.flags|=4)};function df(t,e){if(!jt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Zn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function mq(t,e,n){var r=e.pendingProps;switch(Rk(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zn(e),null;case 1:return Mr(e.type)&&ky(),Zn(e),null;case 3:return r=e.stateNode,_c(),Lt(Dr),Lt(ir),Wk(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(fg(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Jo!==null&&(RS(Jo),Jo=null))),kS(t,e),Zn(e),null;case 5:jk(e);var o=$l(vh.current);if(n=e.type,t!==null&&e.stateNode!=null)n3(t,e,n,r,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(pe(166));return Zn(e),null}if(t=$l(Ms.current),fg(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[_s]=e,r[gh]=s,t=(e.mode&1)!==0,n){case"dialog":Dt("cancel",r),Dt("close",r);break;case"iframe":case"object":case"embed":Dt("load",r);break;case"video":case"audio":for(o=0;o<Of.length;o++)Dt(Of[o],r);break;case"source":Dt("error",r);break;case"img":case"image":case"link":Dt("error",r),Dt("load",r);break;case"details":Dt("toggle",r);break;case"input":AN(r,s),Dt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Dt("invalid",r);break;case"textarea":_N(r,s),Dt("invalid",r)}Zw(n,s),o=null;for(var i in s)if(s.hasOwnProperty(i)){var a=s[i];i==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&dg(r.textContent,a,t),o=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&dg(r.textContent,a,t),o=["children",""+a]):ih.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&Dt("scroll",r)}switch(n){case"input":rg(r),ON(r,s,!0);break;case"textarea":rg(r),RN(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=$y)}r=o,e.updateQueue=r,r!==null&&(e.flags|=4)}else{i=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=OF(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=i.createElement(n,{is:r.is}):(t=i.createElement(n),n==="select"&&(i=t,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):t=i.createElementNS(t,n),t[_s]=e,t[gh]=r,t3(t,e,!1,!1),e.stateNode=t;e:{switch(i=Jw(n,r),n){case"dialog":Dt("cancel",t),Dt("close",t),o=r;break;case"iframe":case"object":case"embed":Dt("load",t),o=r;break;case"video":case"audio":for(o=0;o<Of.length;o++)Dt(Of[o],t);o=r;break;case"source":Dt("error",t),o=r;break;case"img":case"image":case"link":Dt("error",t),Dt("load",t),o=r;break;case"details":Dt("toggle",t),o=r;break;case"input":AN(t,r),o=Kw(t,r),Dt("invalid",t);break;case"option":o=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},o=Xt({},r,{value:void 0}),Dt("invalid",t);break;case"textarea":_N(t,r),o=Yw(t,r),Dt("invalid",t);break;default:o=r}Zw(n,o),a=o;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?PF(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&_F(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ah(t,l):typeof l=="number"&&ah(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ih.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Dt("scroll",t):l!=null&&vk(t,s,l,i))}switch(n){case"input":rg(t),ON(t,r,!1);break;case"textarea":rg(t),RN(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ta(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?nc(t,!!r.multiple,s,!1):r.defaultValue!=null&&nc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=$y)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Zn(e),null;case 6:if(t&&e.stateNode!=null)r3(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(pe(166));if(n=$l(vh.current),$l(Ms.current),fg(e)){if(r=e.stateNode,n=e.memoizedProps,r[_s]=e,(s=r.nodeValue!==n)&&(t=to,t!==null))switch(t.tag){case 3:dg(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&dg(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[_s]=e,e.stateNode=r}return Zn(e),null;case 13:if(Lt(Kt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(jt&&Jr!==null&&e.mode&1&&!(e.flags&128))wL(),Ac(),e.flags|=98560,s=!1;else if(s=fg(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(pe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(pe(317));s[_s]=e}else Ac(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Zn(e),s=!1}else Jo!==null&&(RS(Jo),Jo=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Kt.current&1?In===0&&(In=3):eI())),e.updateQueue!==null&&(e.flags|=4),Zn(e),null);case 4:return _c(),kS(t,e),t===null&&ph(e.stateNode.containerInfo),Zn(e),null;case 10:return Fk(e.type._context),Zn(e),null;case 17:return Mr(e.type)&&ky(),Zn(e),null;case 19:if(Lt(Kt),s=e.memoizedState,s===null)return Zn(e),null;if(r=(e.flags&128)!==0,i=s.rendering,i===null)if(r)df(s,!1);else{if(In!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=_y(t),i!==null){for(e.flags|=128,df(s,!1),r=i.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,t=i.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Tt(Kt,Kt.current&1|2),e.child}t=t.sibling}s.tail!==null&&un()>Pc&&(e.flags|=128,r=!0,df(s,!1),e.lanes=4194304)}else{if(!r)if(t=_y(i),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),df(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!jt)return Zn(e),null}else 2*un()-s.renderingStartTime>Pc&&n!==1073741824&&(e.flags|=128,r=!0,df(s,!1),e.lanes=4194304);s.isBackwards?(i.sibling=e.child,e.child=i):(n=s.last,n!==null?n.sibling=i:e.child=i,s.last=i)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=un(),e.sibling=null,n=Kt.current,Tt(Kt,r?n&1|2:n&1),e):(Zn(e),null);case 22:case 23:return Jk(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?qr&1073741824&&(Zn(e),e.subtreeFlags&6&&(e.flags|=8192)):Zn(e),null;case 24:return null;case 25:return null}throw Error(pe(156,e.tag))}function gq(t,e){switch(Rk(e),e.tag){case 1:return Mr(e.type)&&ky(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return _c(),Lt(Dr),Lt(ir),Wk(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return jk(e),null;case 13:if(Lt(Kt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(pe(340));Ac()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Lt(Kt),null;case 4:return _c(),null;case 10:return Fk(e.type._context),null;case 22:case 23:return Jk(),null;case 24:return null;default:return null}}var mg=!1,nr=!1,yq=typeof WeakSet=="function"?WeakSet:Set,$e=null;function Yu(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Qt(t,e,r)}else n.current=null}function IS(t,e,n){try{n()}catch(r){Qt(t,e,r)}}var SA=!1;function vq(t,e){if(uS=wy,t=lL(),Ok(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var i=0,a=-1,l=-1,u=0,c=0,d=t,f=null;t:for(;;){for(var h;d!==n||o!==0&&d.nodeType!==3||(a=i+o),d!==s||r!==0&&d.nodeType!==3||(l=i+r),d.nodeType===3&&(i+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===n&&++u===o&&(a=i),f===s&&++c===r&&(l=i),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(cS={focusedElem:t,selectionRange:n},wy=!1,$e=e;$e!==null;)if(e=$e,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$e=t;else for(;$e!==null;){e=$e;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:qo(e.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(pe(163))}}catch(x){Qt(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,$e=t;break}$e=e.return}return p=SA,SA=!1,p}function qf(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var s=o.destroy;o.destroy=void 0,s!==void 0&&IS(e,n,s)}o=o.next}while(o!==r)}}function $0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function TS(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function o3(t){var e=t.alternate;e!==null&&(t.alternate=null,o3(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[_s],delete e[gh],delete e[hS],delete e[eq],delete e[tq])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function s3(t){return t.tag===5||t.tag===3||t.tag===4}function CA(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||s3(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ES(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=$y));else if(r!==4&&(t=t.child,t!==null))for(ES(t,e,n),t=t.sibling;t!==null;)ES(t,e,n),t=t.sibling}function NS(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(NS(t,e,n),t=t.sibling;t!==null;)NS(t,e,n),t=t.sibling}var jn=null,Qo=!1;function Gi(t,e,n){for(n=n.child;n!==null;)i3(t,e,n),n=n.sibling}function i3(t,e,n){if(Ds&&typeof Ds.onCommitFiberUnmount=="function")try{Ds.onCommitFiberUnmount(g0,n)}catch{}switch(n.tag){case 5:nr||Yu(n,e);case 6:var r=jn,o=Qo;jn=null,Gi(t,e,n),jn=r,Qo=o,jn!==null&&(Qo?(t=jn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):jn.removeChild(n.stateNode));break;case 18:jn!==null&&(Qo?(t=jn,n=n.stateNode,t.nodeType===8?O1(t.parentNode,n):t.nodeType===1&&O1(t,n),dh(t)):O1(jn,n.stateNode));break;case 4:r=jn,o=Qo,jn=n.stateNode.containerInfo,Qo=!0,Gi(t,e,n),jn=r,Qo=o;break;case 0:case 11:case 14:case 15:if(!nr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var s=o,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&IS(n,e,i),o=o.next}while(o!==r)}Gi(t,e,n);break;case 1:if(!nr&&(Yu(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Qt(n,e,a)}Gi(t,e,n);break;case 21:Gi(t,e,n);break;case 22:n.mode&1?(nr=(r=nr)||n.memoizedState!==null,Gi(t,e,n),nr=r):Gi(t,e,n);break;default:Gi(t,e,n)}}function $A(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new yq),e.forEach(function(r){var o=Tq.bind(null,t,r);n.has(r)||(n.add(r),r.then(o,o))})}}function Uo(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var s=t,i=e,a=i;e:for(;a!==null;){switch(a.tag){case 5:jn=a.stateNode,Qo=!1;break e;case 3:jn=a.stateNode.containerInfo,Qo=!0;break e;case 4:jn=a.stateNode.containerInfo,Qo=!0;break e}a=a.return}if(jn===null)throw Error(pe(160));i3(s,i,o),jn=null,Qo=!1;var l=o.alternate;l!==null&&(l.return=null),o.return=null}catch(u){Qt(o,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)a3(e,t),e=e.sibling}function a3(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Uo(e,t),Ss(t),r&4){try{qf(3,t,t.return),$0(3,t)}catch(m){Qt(t,t.return,m)}try{qf(5,t,t.return)}catch(m){Qt(t,t.return,m)}}break;case 1:Uo(e,t),Ss(t),r&512&&n!==null&&Yu(n,n.return);break;case 5:if(Uo(e,t),Ss(t),r&512&&n!==null&&Yu(n,n.return),t.flags&32){var o=t.stateNode;try{ah(o,"")}catch(m){Qt(t,t.return,m)}}if(r&4&&(o=t.stateNode,o!=null)){var s=t.memoizedProps,i=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&NF(o,s),Jw(a,i);var u=Jw(a,s);for(i=0;i<l.length;i+=2){var c=l[i],d=l[i+1];c==="style"?PF(o,d):c==="dangerouslySetInnerHTML"?_F(o,d):c==="children"?ah(o,d):vk(o,c,d,u)}switch(a){case"input":qw(o,s);break;case"textarea":AF(o,s);break;case"select":var f=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?nc(o,!!s.multiple,h,!1):f!==!!s.multiple&&(s.defaultValue!=null?nc(o,!!s.multiple,s.defaultValue,!0):nc(o,!!s.multiple,s.multiple?[]:"",!1))}o[gh]=s}catch(m){Qt(t,t.return,m)}}break;case 6:if(Uo(e,t),Ss(t),r&4){if(t.stateNode===null)throw Error(pe(162));o=t.stateNode,s=t.memoizedProps;try{o.nodeValue=s}catch(m){Qt(t,t.return,m)}}break;case 3:if(Uo(e,t),Ss(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{dh(e.containerInfo)}catch(m){Qt(t,t.return,m)}break;case 4:Uo(e,t),Ss(t);break;case 13:Uo(e,t),Ss(t),o=t.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(Qk=un())),r&4&&$A(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(nr=(u=nr)||c,Uo(e,t),nr=u):Uo(e,t),Ss(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for($e=t,c=t.child;c!==null;){for(d=$e=c;$e!==null;){switch(f=$e,h=f.child,f.tag){case 0:case 11:case 14:case 15:qf(4,f,f.return);break;case 1:Yu(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){Qt(r,n,m)}}break;case 5:Yu(f,f.return);break;case 22:if(f.memoizedState!==null){IA(d);continue}}h!==null?(h.return=f,$e=h):IA(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{o=d.stateNode,u?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,i=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=RF("display",i))}catch(m){Qt(t,t.return,m)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){Qt(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Uo(e,t),Ss(t),r&4&&$A(t);break;case 21:break;default:Uo(e,t),Ss(t)}}function Ss(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(s3(n)){var r=n;break e}n=n.return}throw Error(pe(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(ah(o,""),r.flags&=-33);var s=CA(t);NS(t,s,o);break;case 3:case 4:var i=r.stateNode.containerInfo,a=CA(t);ES(t,a,i);break;default:throw Error(pe(161))}}catch(l){Qt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function xq(t,e,n){$e=t,l3(t)}function l3(t,e,n){for(var r=(t.mode&1)!==0;$e!==null;){var o=$e,s=o.child;if(o.tag===22&&r){var i=o.memoizedState!==null||mg;if(!i){var a=o.alternate,l=a!==null&&a.memoizedState!==null||nr;a=mg;var u=nr;if(mg=i,(nr=l)&&!u)for($e=o;$e!==null;)i=$e,l=i.child,i.tag===22&&i.memoizedState!==null?TA(o):l!==null?(l.return=i,$e=l):TA(o);for(;s!==null;)$e=s,l3(s),s=s.sibling;$e=o,mg=a,nr=u}kA(t)}else o.subtreeFlags&8772&&s!==null?(s.return=o,$e=s):kA(t)}}function kA(t){for(;$e!==null;){var e=$e;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:nr||$0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!nr)if(n===null)r.componentDidMount();else{var o=e.elementType===e.type?n.memoizedProps:qo(e.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&uA(e,s,r);break;case 3:var i=e.updateQueue;if(i!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}uA(e,i,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&dh(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(pe(163))}nr||e.flags&512&&TS(e)}catch(f){Qt(e,e.return,f)}}if(e===t){$e=null;break}if(n=e.sibling,n!==null){n.return=e.return,$e=n;break}$e=e.return}}function IA(t){for(;$e!==null;){var e=$e;if(e===t){$e=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$e=n;break}$e=e.return}}function TA(t){for(;$e!==null;){var e=$e;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{$0(4,e)}catch(l){Qt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var o=e.return;try{r.componentDidMount()}catch(l){Qt(e,o,l)}}var s=e.return;try{TS(e)}catch(l){Qt(e,s,l)}break;case 5:var i=e.return;try{TS(e)}catch(l){Qt(e,i,l)}}}catch(l){Qt(e,e.return,l)}if(e===t){$e=null;break}var a=e.sibling;if(a!==null){a.return=e.return,$e=a;break}$e=e.return}}var bq=Math.ceil,Dy=Mi.ReactCurrentDispatcher,Xk=Mi.ReactCurrentOwner,Ro=Mi.ReactCurrentBatchConfig,rt=0,Pn=null,hn=null,Vn=0,qr=0,Qu=Wa(0),In=0,Sh=null,Kl=0,k0=0,Yk=0,Xf=null,Er=null,Qk=0,Pc=1/0,li=null,My=!1,AS=null,va=null,gg=!1,la=null,Fy=0,Yf=0,OS=null,ay=-1,ly=0;function xr(){return rt&6?un():ay!==-1?ay:ay=un()}function xa(t){return t.mode&1?rt&2&&Vn!==0?Vn&-Vn:rq.transition!==null?(ly===0&&(ly=HF()),ly):(t=mt,t!==0||(t=window.event,t=t===void 0?16:JF(t.type)),t):1}function ss(t,e,n,r){if(50<Yf)throw Yf=0,OS=null,Error(pe(185));Sp(t,n,r),(!(rt&2)||t!==Pn)&&(t===Pn&&(!(rt&2)&&(k0|=n),In===4&&ta(t,Vn)),Fr(t,r),n===1&&rt===0&&!(e.mode&1)&&(Pc=un()+500,w0&&Va()))}function Fr(t,e){var n=t.callbackNode;rK(t,e);var r=by(t,t===Pn?Vn:0);if(r===0)n!==null&&MN(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&MN(n),e===1)t.tag===0?nq(EA.bind(null,t)):vL(EA.bind(null,t)),ZK(function(){!(rt&6)&&Va()}),n=null;else{switch(KF(r)){case 1:n=Ck;break;case 4:n=UF;break;case 16:n=xy;break;case 536870912:n=GF;break;default:n=xy}n=g3(n,u3.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function u3(t,e){if(ay=-1,ly=0,rt&6)throw Error(pe(327));var n=t.callbackNode;if(ac()&&t.callbackNode!==n)return null;var r=by(t,t===Pn?Vn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ly(t,r);else{e=r;var o=rt;rt|=2;var s=d3();(Pn!==t||Vn!==e)&&(li=null,Pc=un()+500,Dl(t,e));do try{Cq();break}catch(a){c3(t,a)}while(!0);Mk(),Dy.current=s,rt=o,hn!==null?e=0:(Pn=null,Vn=0,e=In)}if(e!==0){if(e===2&&(o=oS(t),o!==0&&(r=o,e=_S(t,o))),e===1)throw n=Sh,Dl(t,0),ta(t,r),Fr(t,un()),n;if(e===6)ta(t,r);else{if(o=t.current.alternate,!(r&30)&&!wq(o)&&(e=Ly(t,r),e===2&&(s=oS(t),s!==0&&(r=s,e=_S(t,s))),e===1))throw n=Sh,Dl(t,0),ta(t,r),Fr(t,un()),n;switch(t.finishedWork=o,t.finishedLanes=r,e){case 0:case 1:throw Error(pe(345));case 2:dl(t,Er,li);break;case 3:if(ta(t,r),(r&130023424)===r&&(e=Qk+500-un(),10<e)){if(by(t,0)!==0)break;if(o=t.suspendedLanes,(o&r)!==r){xr(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=fS(dl.bind(null,t,Er,li),e);break}dl(t,Er,li);break;case 4:if(ta(t,r),(r&4194240)===r)break;for(e=t.eventTimes,o=-1;0<r;){var i=31-os(r);s=1<<i,i=e[i],i>o&&(o=i),r&=~s}if(r=o,r=un()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*bq(r/1960))-r,10<r){t.timeoutHandle=fS(dl.bind(null,t,Er,li),r);break}dl(t,Er,li);break;case 5:dl(t,Er,li);break;default:throw Error(pe(329))}}}return Fr(t,un()),t.callbackNode===n?u3.bind(null,t):null}function _S(t,e){var n=Xf;return t.current.memoizedState.isDehydrated&&(Dl(t,e).flags|=256),t=Ly(t,e),t!==2&&(e=Er,Er=n,e!==null&&RS(e)),t}function RS(t){Er===null?Er=t:Er.push.apply(Er,t)}function wq(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],s=o.getSnapshot;o=o.value;try{if(!cs(s(),o))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ta(t,e){for(e&=~Yk,e&=~k0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-os(e),r=1<<n;t[n]=-1,e&=~r}}function EA(t){if(rt&6)throw Error(pe(327));ac();var e=by(t,0);if(!(e&1))return Fr(t,un()),null;var n=Ly(t,e);if(t.tag!==0&&n===2){var r=oS(t);r!==0&&(e=r,n=_S(t,r))}if(n===1)throw n=Sh,Dl(t,0),ta(t,e),Fr(t,un()),n;if(n===6)throw Error(pe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,dl(t,Er,li),Fr(t,un()),null}function Zk(t,e){var n=rt;rt|=1;try{return t(e)}finally{rt=n,rt===0&&(Pc=un()+500,w0&&Va())}}function ql(t){la!==null&&la.tag===0&&!(rt&6)&&ac();var e=rt;rt|=1;var n=Ro.transition,r=mt;try{if(Ro.transition=null,mt=1,t)return t()}finally{mt=r,Ro.transition=n,rt=e,!(rt&6)&&Va()}}function Jk(){qr=Qu.current,Lt(Qu)}function Dl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,QK(n)),hn!==null)for(n=hn.return;n!==null;){var r=n;switch(Rk(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ky();break;case 3:_c(),Lt(Dr),Lt(ir),Wk();break;case 5:jk(r);break;case 4:_c();break;case 13:Lt(Kt);break;case 19:Lt(Kt);break;case 10:Fk(r.type._context);break;case 22:case 23:Jk()}n=n.return}if(Pn=t,hn=t=ba(t.current,null),Vn=qr=e,In=0,Sh=null,Yk=k0=Kl=0,Er=Xf=null,Cl!==null){for(e=0;e<Cl.length;e++)if(n=Cl[e],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,s=n.pending;if(s!==null){var i=s.next;s.next=o,r.next=i}n.pending=r}Cl=null}return t}function c3(t,e){do{var n=hn;try{if(Mk(),oy.current=Py,Ry){for(var r=qt.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Ry=!1}if(Hl=0,_n=Cn=qt=null,Kf=!1,xh=0,Xk.current=null,n===null||n.return===null){In=1,Sh=e,hn=null;break}e:{var s=t,i=n.return,a=n,l=e;if(e=Vn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=mA(i);if(h!==null){h.flags&=-257,gA(h,i,a,s,e),h.mode&1&&pA(s,u,e),e=h,l=u;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){pA(s,u,e),eI();break e}l=Error(pe(426))}}else if(jt&&a.mode&1){var g=mA(i);if(g!==null){!(g.flags&65536)&&(g.flags|=256),gA(g,i,a,s,e),Pk(Rc(l,a));break e}}s=l=Rc(l,a),In!==4&&(In=2),Xf===null?Xf=[s]:Xf.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=KL(s,l,e);lA(s,y);break e;case 1:a=l;var v=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(va===null||!va.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=qL(s,a,e);lA(s,x);break e}}s=s.return}while(s!==null)}h3(n)}catch(w){e=w,hn===n&&n!==null&&(hn=n=n.return);continue}break}while(!0)}function d3(){var t=Dy.current;return Dy.current=Py,t===null?Py:t}function eI(){(In===0||In===3||In===2)&&(In=4),Pn===null||!(Kl&268435455)&&!(k0&268435455)||ta(Pn,Vn)}function Ly(t,e){var n=rt;rt|=2;var r=d3();(Pn!==t||Vn!==e)&&(li=null,Dl(t,e));do try{Sq();break}catch(o){c3(t,o)}while(!0);if(Mk(),rt=n,Dy.current=r,hn!==null)throw Error(pe(261));return Pn=null,Vn=0,In}function Sq(){for(;hn!==null;)f3(hn)}function Cq(){for(;hn!==null&&!q8();)f3(hn)}function f3(t){var e=m3(t.alternate,t,qr);t.memoizedProps=t.pendingProps,e===null?h3(t):hn=e,Xk.current=null}function h3(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=gq(n,e),n!==null){n.flags&=32767,hn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{In=6,hn=null;return}}else if(n=mq(n,e,qr),n!==null){hn=n;return}if(e=e.sibling,e!==null){hn=e;return}hn=e=t}while(e!==null);In===0&&(In=5)}function dl(t,e,n){var r=mt,o=Ro.transition;try{Ro.transition=null,mt=1,$q(t,e,n,r)}finally{Ro.transition=o,mt=r}return null}function $q(t,e,n,r){do ac();while(la!==null);if(rt&6)throw Error(pe(327));n=t.finishedWork;var o=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(pe(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(oK(t,s),t===Pn&&(hn=Pn=null,Vn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||gg||(gg=!0,g3(xy,function(){return ac(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ro.transition,Ro.transition=null;var i=mt;mt=1;var a=rt;rt|=4,Xk.current=null,vq(t,n),a3(n,t),UK(cS),wy=!!uS,cS=uS=null,t.current=n,xq(n),X8(),rt=a,mt=i,Ro.transition=s}else t.current=n;if(gg&&(gg=!1,la=t,Fy=o),s=t.pendingLanes,s===0&&(va=null),Z8(n.stateNode),Fr(t,un()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)o=e[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(My)throw My=!1,t=AS,AS=null,t;return Fy&1&&t.tag!==0&&ac(),s=t.pendingLanes,s&1?t===OS?Yf++:(Yf=0,OS=t):Yf=0,Va(),null}function ac(){if(la!==null){var t=KF(Fy),e=Ro.transition,n=mt;try{if(Ro.transition=null,mt=16>t?16:t,la===null)var r=!1;else{if(t=la,la=null,Fy=0,rt&6)throw Error(pe(331));var o=rt;for(rt|=4,$e=t.current;$e!==null;){var s=$e,i=s.child;if($e.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for($e=u;$e!==null;){var c=$e;switch(c.tag){case 0:case 11:case 15:qf(8,c,s)}var d=c.child;if(d!==null)d.return=c,$e=d;else for(;$e!==null;){c=$e;var f=c.sibling,h=c.return;if(o3(c),c===u){$e=null;break}if(f!==null){f.return=h,$e=f;break}$e=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}$e=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,$e=i;else e:for(;$e!==null;){if(s=$e,s.flags&2048)switch(s.tag){case 0:case 11:case 15:qf(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,$e=y;break e}$e=s.return}}var v=t.current;for($e=v;$e!==null;){i=$e;var b=i.child;if(i.subtreeFlags&2064&&b!==null)b.return=i,$e=b;else e:for(i=v;$e!==null;){if(a=$e,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:$0(9,a)}}catch(w){Qt(a,a.return,w)}if(a===i){$e=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,$e=x;break e}$e=a.return}}if(rt=o,Va(),Ds&&typeof Ds.onPostCommitFiberRoot=="function")try{Ds.onPostCommitFiberRoot(g0,t)}catch{}r=!0}return r}finally{mt=n,Ro.transition=e}}return!1}function NA(t,e,n){e=Rc(n,e),e=KL(t,e,1),t=ya(t,e,1),e=xr(),t!==null&&(Sp(t,1,e),Fr(t,e))}function Qt(t,e,n){if(t.tag===3)NA(t,t,n);else for(;e!==null;){if(e.tag===3){NA(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(va===null||!va.has(r))){t=Rc(n,t),t=qL(e,t,1),e=ya(e,t,1),t=xr(),e!==null&&(Sp(e,1,t),Fr(e,t));break}}e=e.return}}function kq(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=xr(),t.pingedLanes|=t.suspendedLanes&n,Pn===t&&(Vn&n)===n&&(In===4||In===3&&(Vn&130023424)===Vn&&500>un()-Qk?Dl(t,0):Yk|=n),Fr(t,e)}function p3(t,e){e===0&&(t.mode&1?(e=ig,ig<<=1,!(ig&130023424)&&(ig=4194304)):e=1);var n=xr();t=ki(t,e),t!==null&&(Sp(t,e,n),Fr(t,n))}function Iq(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),p3(t,n)}function Tq(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(pe(314))}r!==null&&r.delete(e),p3(t,n)}var m3;m3=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Dr.current)Ar=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ar=!1,pq(t,e,n);Ar=!!(t.flags&131072)}else Ar=!1,jt&&e.flags&1048576&&xL(e,Ey,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;iy(t,e),t=e.pendingProps;var o=Nc(e,ir.current);ic(e,n),o=Uk(null,e,r,t,o,n);var s=Gk();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Mr(r)?(s=!0,Iy(e)):s=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Bk(e),o.updater=C0,e.stateNode=o,o._reactInternals=e,xS(e,r,t,n),e=SS(null,e,r,!0,s,n)):(e.tag=0,jt&&s&&_k(e),hr(null,e,o,n),e=e.child),e;case 16:r=e.elementType;e:{switch(iy(t,e),t=e.pendingProps,o=r._init,r=o(r._payload),e.type=r,o=e.tag=Nq(r),t=qo(r,t),o){case 0:e=wS(null,e,r,t,n);break e;case 1:e=xA(null,e,r,t,n);break e;case 11:e=yA(null,e,r,t,n);break e;case 14:e=vA(null,e,r,qo(r.type,t),n);break e}throw Error(pe(306,r,""))}return e;case 0:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:qo(r,o),wS(t,e,r,o,n);case 1:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:qo(r,o),xA(t,e,r,o,n);case 3:e:{if(ZL(e),t===null)throw Error(pe(387));r=e.pendingProps,s=e.memoizedState,o=s.element,kL(t,e),Oy(e,r,null,n);var i=e.memoizedState;if(r=i.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){o=Rc(Error(pe(423)),e),e=bA(t,e,r,n,o);break e}else if(r!==o){o=Rc(Error(pe(424)),e),e=bA(t,e,r,n,o);break e}else for(Jr=ga(e.stateNode.containerInfo.firstChild),to=e,jt=!0,Jo=null,n=CL(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ac(),r===o){e=Ii(t,e,n);break e}hr(t,e,r,n)}e=e.child}return e;case 5:return IL(e),t===null&&gS(e),r=e.type,o=e.pendingProps,s=t!==null?t.memoizedProps:null,i=o.children,dS(r,o)?i=null:s!==null&&dS(r,s)&&(e.flags|=32),QL(t,e),hr(t,e,i,n),e.child;case 6:return t===null&&gS(e),null;case 13:return JL(t,e,n);case 4:return zk(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Oc(e,null,r,n):hr(t,e,r,n),e.child;case 11:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:qo(r,o),yA(t,e,r,o,n);case 7:return hr(t,e,e.pendingProps,n),e.child;case 8:return hr(t,e,e.pendingProps.children,n),e.child;case 12:return hr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,o=e.pendingProps,s=e.memoizedProps,i=o.value,Tt(Ny,r._currentValue),r._currentValue=i,s!==null)if(cs(s.value,i)){if(s.children===o.children&&!Dr.current){e=Ii(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){i=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=vi(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),yS(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)i=s.type===e.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(pe(341));i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),yS(i,n,e),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===e){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}hr(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,r=e.pendingProps.children,ic(e,n),o=Po(o),r=r(o),e.flags|=1,hr(t,e,r,n),e.child;case 14:return r=e.type,o=qo(r,e.pendingProps),o=qo(r.type,o),vA(t,e,r,o,n);case 15:return XL(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:qo(r,o),iy(t,e),e.tag=1,Mr(r)?(t=!0,Iy(e)):t=!1,ic(e,n),HL(e,r,o),xS(e,r,o,n),SS(null,e,r,!0,t,n);case 19:return e3(t,e,n);case 22:return YL(t,e,n)}throw Error(pe(156,e.tag))};function g3(t,e){return VF(t,e)}function Eq(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ko(t,e,n,r){return new Eq(t,e,n,r)}function tI(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Nq(t){if(typeof t=="function")return tI(t)?1:0;if(t!=null){if(t=t.$$typeof,t===bk)return 11;if(t===wk)return 14}return 2}function ba(t,e){var n=t.alternate;return n===null?(n=ko(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function uy(t,e,n,r,o,s){var i=2;if(r=t,typeof t=="function")tI(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case ju:return Ml(n.children,o,s,e);case xk:i=8,o|=8;break;case Vw:return t=ko(12,n,e,o|2),t.elementType=Vw,t.lanes=s,t;case Uw:return t=ko(13,n,e,o),t.elementType=Uw,t.lanes=s,t;case Gw:return t=ko(19,n,e,o),t.elementType=Gw,t.lanes=s,t;case IF:return I0(n,o,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $F:i=10;break e;case kF:i=9;break e;case bk:i=11;break e;case wk:i=14;break e;case Xi:i=16,r=null;break e}throw Error(pe(130,t==null?t:typeof t,""))}return e=ko(i,n,e,o),e.elementType=t,e.type=r,e.lanes=s,e}function Ml(t,e,n,r){return t=ko(7,t,r,e),t.lanes=n,t}function I0(t,e,n,r){return t=ko(22,t,r,e),t.elementType=IF,t.lanes=n,t.stateNode={isHidden:!1},t}function B1(t,e,n){return t=ko(6,t,null,e),t.lanes=n,t}function z1(t,e,n){return e=ko(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Aq(t,e,n,r,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=b1(0),this.expirationTimes=b1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=b1(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function nI(t,e,n,r,o,s,i,a,l){return t=new Aq(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ko(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bk(s),t}function Oq(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zu,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function y3(t){if(!t)return Ea;t=t._reactInternals;e:{if(hu(t)!==t||t.tag!==1)throw Error(pe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Mr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(pe(171))}if(t.tag===1){var n=t.type;if(Mr(n))return yL(t,n,e)}return e}function v3(t,e,n,r,o,s,i,a,l){return t=nI(n,r,!0,t,o,s,i,a,l),t.context=y3(null),n=t.current,r=xr(),o=xa(n),s=vi(r,o),s.callback=e??null,ya(n,s,o),t.current.lanes=o,Sp(t,o,r),Fr(t,r),t}function T0(t,e,n,r){var o=e.current,s=xr(),i=xa(o);return n=y3(n),e.context===null?e.context=n:e.pendingContext=n,e=vi(s,i),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ya(o,e,i),t!==null&&(ss(t,o,i,s),ry(t,o,i)),i}function By(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function AA(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function rI(t,e){AA(t,e),(t=t.alternate)&&AA(t,e)}function _q(){return null}var x3=typeof reportError=="function"?reportError:function(t){console.error(t)};function oI(t){this._internalRoot=t}E0.prototype.render=oI.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(pe(409));T0(t,e,null,null)};E0.prototype.unmount=oI.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ql(function(){T0(null,t,null,null)}),e[$i]=null}};function E0(t){this._internalRoot=t}E0.prototype.unstable_scheduleHydration=function(t){if(t){var e=YF();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ea.length&&e!==0&&e<ea[n].priority;n++);ea.splice(n,0,t),n===0&&ZF(t)}};function sI(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function N0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function OA(){}function Rq(t,e,n,r,o){if(o){if(typeof r=="function"){var s=r;r=function(){var u=By(i);s.call(u)}}var i=v3(e,r,t,0,null,!1,!1,"",OA);return t._reactRootContainer=i,t[$i]=i.current,ph(t.nodeType===8?t.parentNode:t),ql(),i}for(;o=t.lastChild;)t.removeChild(o);if(typeof r=="function"){var a=r;r=function(){var u=By(l);a.call(u)}}var l=nI(t,0,!1,null,null,!1,!1,"",OA);return t._reactRootContainer=l,t[$i]=l.current,ph(t.nodeType===8?t.parentNode:t),ql(function(){T0(e,l,n,r)}),l}function A0(t,e,n,r,o){var s=n._reactRootContainer;if(s){var i=s;if(typeof o=="function"){var a=o;o=function(){var l=By(i);a.call(l)}}T0(e,i,t,o)}else i=Rq(n,e,t,o,r);return By(i)}qF=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Af(e.pendingLanes);n!==0&&($k(e,n|1),Fr(e,un()),!(rt&6)&&(Pc=un()+500,Va()))}break;case 13:ql(function(){var r=ki(t,1);if(r!==null){var o=xr();ss(r,t,1,o)}}),rI(t,1)}};kk=function(t){if(t.tag===13){var e=ki(t,134217728);if(e!==null){var n=xr();ss(e,t,134217728,n)}rI(t,134217728)}};XF=function(t){if(t.tag===13){var e=xa(t),n=ki(t,e);if(n!==null){var r=xr();ss(n,t,e,r)}rI(t,e)}};YF=function(){return mt};QF=function(t,e){var n=mt;try{return mt=t,e()}finally{mt=n}};tS=function(t,e,n){switch(e){case"input":if(qw(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var o=b0(r);if(!o)throw Error(pe(90));EF(r),qw(r,o)}}}break;case"textarea":AF(t,n);break;case"select":e=n.value,e!=null&&nc(t,!!n.multiple,e,!1)}};FF=Zk;LF=ql;var Pq={usingClientEntryPoint:!1,Events:[$p,Gu,b0,DF,MF,Zk]},ff={findFiberByHostInstance:Sl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Dq={bundleType:ff.bundleType,version:ff.version,rendererPackageName:ff.rendererPackageName,rendererConfig:ff.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=jF(t),t===null?null:t.stateNode},findFiberByHostInstance:ff.findFiberByHostInstance||_q,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yg.isDisabled&&yg.supportsFiber)try{g0=yg.inject(Dq),Ds=yg}catch{}}io.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pq;io.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sI(e))throw Error(pe(200));return Oq(t,e,null,n)};io.createRoot=function(t,e){if(!sI(t))throw Error(pe(299));var n=!1,r="",o=x3;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=nI(t,1,!1,null,null,n,!1,r,o),t[$i]=e.current,ph(t.nodeType===8?t.parentNode:t),new oI(e)};io.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(pe(188)):(t=Object.keys(t).join(","),Error(pe(268,t)));return t=jF(e),t=t===null?null:t.stateNode,t};io.flushSync=function(t){return ql(t)};io.hydrate=function(t,e,n){if(!N0(e))throw Error(pe(200));return A0(null,t,e,!0,n)};io.hydrateRoot=function(t,e,n){if(!sI(t))throw Error(pe(405));var r=n!=null&&n.hydratedSources||null,o=!1,s="",i=x3;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),e=v3(e,null,t,1,n??null,o,!1,s,i),t[$i]=e.current,ph(t),r)for(t=0;t<r.length;t++)n=r[t],o=n._getVersion,o=o(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,o]:e.mutableSourceEagerHydrationData.push(n,o);return new E0(e)};io.render=function(t,e,n){if(!N0(e))throw Error(pe(200));return A0(null,t,e,!1,n)};io.unmountComponentAtNode=function(t){if(!N0(t))throw Error(pe(40));return t._reactRootContainer?(ql(function(){A0(null,null,t,!1,function(){t._reactRootContainer=null,t[$i]=null})}),!0):!1};io.unstable_batchedUpdates=Zk;io.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!N0(n))throw Error(pe(200));if(t==null||t._reactInternals===void 0)throw Error(pe(38));return A0(t,e,n,!1,r)};io.version="18.3.1-next-f1338f8080-20240426";function b3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(b3)}catch(t){console.error(t)}}b3(),bF.exports=io;var Ip=bF.exports;const w3=ut(Ip);var S3,_A=Ip;S3=_A.createRoot,_A.hydrateRoot;const Mq=1,Fq=1e6;let j1=0;function Lq(){return j1=(j1+1)%Number.MAX_SAFE_INTEGER,j1.toString()}const W1=new Map,RA=t=>{if(W1.has(t))return;const e=setTimeout(()=>{W1.delete(t),Qf({type:"REMOVE_TOAST",toastId:t})},Fq);W1.set(t,e)},Bq=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,Mq)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?RA(n):t.toasts.forEach(r=>{RA(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},cy=[];let dy={toasts:[]};function Qf(t){dy=Bq(dy,t),cy.forEach(e=>{e(dy)})}function zq({...t}){const e=Lq(),n=o=>Qf({type:"UPDATE_TOAST",toast:{...o,id:e}}),r=()=>Qf({type:"DISMISS_TOAST",toastId:e});return Qf({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:o=>{o||r()}}}),{id:e,dismiss:r,update:n}}function jq(){const[t,e]=A.useState(dy);return A.useEffect(()=>(cy.push(e),()=>{const n=cy.indexOf(e);n>-1&&cy.splice(n,1)}),[t]),{...t,toast:zq,dismiss:n=>Qf({type:"DISMISS_TOAST",toastId:n})}}function $n(t,e,{checkForDefaultPrevented:n=!0}={}){return function(o){if(t==null||t(o),n===!1||!o.defaultPrevented)return e==null?void 0:e(o)}}function Wq(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function C3(...t){return e=>t.forEach(n=>Wq(n,e))}function ds(...t){return A.useCallback(C3(...t),t)}function Vq(t,e=[]){let n=[];function r(s,i){const a=A.createContext(i),l=n.length;n=[...n,i];function u(d){const{scope:f,children:h,...p}=d,m=(f==null?void 0:f[t][l])||a,g=A.useMemo(()=>p,Object.values(p));return R.jsx(m.Provider,{value:g,children:h})}function c(d,f){const h=(f==null?void 0:f[t][l])||a,p=A.useContext(h);if(p)return p;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,c]}const o=()=>{const s=n.map(i=>A.createContext(i));return function(a){const l=(a==null?void 0:a[t])||s;return A.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return o.scopeName=t,[r,Uq(o,...e)]}function Uq(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(s){const i=r.reduce((a,{useScope:l,scopeName:u})=>{const d=l(s)[`__scope${u}`];return{...a,...d}},{});return A.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return n.scopeName=e.scopeName,n}var Ch=A.forwardRef((t,e)=>{const{children:n,...r}=t,o=A.Children.toArray(n),s=o.find(Gq);if(s){const i=s.props.children,a=o.map(l=>l===s?A.Children.count(i)>1?A.Children.only(null):A.isValidElement(i)?i.props.children:null:l);return R.jsx(PS,{...r,ref:e,children:A.isValidElement(i)?A.cloneElement(i,void 0,a):null})}return R.jsx(PS,{...r,ref:e,children:n})});Ch.displayName="Slot";var PS=A.forwardRef((t,e)=>{const{children:n,...r}=t;if(A.isValidElement(n)){const o=Kq(n);return A.cloneElement(n,{...Hq(r,n.props),ref:e?C3(e,o):o})}return A.Children.count(n)>1?A.Children.only(null):null});PS.displayName="SlotClone";var $3=({children:t})=>R.jsx(R.Fragment,{children:t});function Gq(t){return A.isValidElement(t)&&t.type===$3}function Hq(t,e){const n={...e};for(const r in e){const o=t[r],s=e[r];/^on[A-Z]/.test(r)?o&&s?n[r]=(...a)=>{s(...a),o(...a)}:o&&(n[r]=o):r==="style"?n[r]={...o,...s}:r==="className"&&(n[r]=[o,s].filter(Boolean).join(" "))}return{...t,...n}}function Kq(t){var r,o;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(o=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:o.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function qq(t){const e=t+"CollectionProvider",[n,r]=Vq(e),[o,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),i=h=>{const{scope:p,children:m}=h,g=z.useRef(null),y=z.useRef(new Map).current;return R.jsx(o,{scope:p,itemMap:y,collectionRef:g,children:m})};i.displayName=e;const a=t+"CollectionSlot",l=z.forwardRef((h,p)=>{const{scope:m,children:g}=h,y=s(a,m),v=ds(p,y.collectionRef);return R.jsx(Ch,{ref:v,children:g})});l.displayName=a;const u=t+"CollectionItemSlot",c="data-radix-collection-item",d=z.forwardRef((h,p)=>{const{scope:m,children:g,...y}=h,v=z.useRef(null),b=ds(p,v),x=s(u,m);return z.useEffect(()=>(x.itemMap.set(v,{ref:v,...y}),()=>void x.itemMap.delete(v))),R.jsx(Ch,{[c]:"",ref:b,children:g})});d.displayName=u;function f(h){const p=s(t+"CollectionConsumer",h);return z.useCallback(()=>{const g=p.collectionRef.current;if(!g)return[];const y=Array.from(g.querySelectorAll(`[${c}]`));return Array.from(p.itemMap.values()).sort((x,w)=>y.indexOf(x.ref.current)-y.indexOf(w.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:i,Slot:l,ItemSlot:d},f,r]}function k3(t,e=[]){let n=[];function r(s,i){const a=A.createContext(i),l=n.length;n=[...n,i];const u=d=>{var y;const{scope:f,children:h,...p}=d,m=((y=f==null?void 0:f[t])==null?void 0:y[l])||a,g=A.useMemo(()=>p,Object.values(p));return R.jsx(m.Provider,{value:g,children:h})};u.displayName=s+"Provider";function c(d,f){var m;const h=((m=f==null?void 0:f[t])==null?void 0:m[l])||a,p=A.useContext(h);if(p)return p;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[u,c]}const o=()=>{const s=n.map(i=>A.createContext(i));return function(a){const l=(a==null?void 0:a[t])||s;return A.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return o.scopeName=t,[r,Xq(o,...e)]}function Xq(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(s){const i=r.reduce((a,{useScope:l,scopeName:u})=>{const d=l(s)[`__scope${u}`];return{...a,...d}},{});return A.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return n.scopeName=e.scopeName,n}var Yq=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ur=Yq.reduce((t,e)=>{const n=A.forwardRef((r,o)=>{const{asChild:s,...i}=r,a=s?Ch:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),R.jsx(a,{...i,ref:o})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function I3(t,e){t&&Ip.flushSync(()=>t.dispatchEvent(e))}function Gs(t){const e=A.useRef(t);return A.useEffect(()=>{e.current=t}),A.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function Qq(t,e=globalThis==null?void 0:globalThis.document){const n=Gs(t);A.useEffect(()=>{const r=o=>{o.key==="Escape"&&n(o)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var Zq="DismissableLayer",DS="dismissableLayer.update",Jq="dismissableLayer.pointerDownOutside",eX="dismissableLayer.focusOutside",PA,T3=A.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),iI=A.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:s,onInteractOutside:i,onDismiss:a,...l}=t,u=A.useContext(T3),[c,d]=A.useState(null),f=(c==null?void 0:c.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=A.useState({}),p=ds(e,$=>d($)),m=Array.from(u.layers),[g]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=m.indexOf(g),v=c?m.indexOf(c):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,x=v>=y,w=nX($=>{const C=$.target,k=[...u.branches].some(I=>I.contains(C));!x||k||(o==null||o($),i==null||i($),$.defaultPrevented||a==null||a())},f),S=rX($=>{const C=$.target;[...u.branches].some(I=>I.contains(C))||(s==null||s($),i==null||i($),$.defaultPrevented||a==null||a())},f);return Qq($=>{v===u.layers.size-1&&(r==null||r($),!$.defaultPrevented&&a&&($.preventDefault(),a()))},f),A.useEffect(()=>{if(c)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(PA=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(c)),u.layers.add(c),DA(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=PA)}},[c,f,n,u]),A.useEffect(()=>()=>{c&&(u.layers.delete(c),u.layersWithOutsidePointerEventsDisabled.delete(c),DA())},[c,u]),A.useEffect(()=>{const $=()=>h({});return document.addEventListener(DS,$),()=>document.removeEventListener(DS,$)},[]),R.jsx(ur.div,{...l,ref:p,style:{pointerEvents:b?x?"auto":"none":void 0,...t.style},onFocusCapture:$n(t.onFocusCapture,S.onFocusCapture),onBlurCapture:$n(t.onBlurCapture,S.onBlurCapture),onPointerDownCapture:$n(t.onPointerDownCapture,w.onPointerDownCapture)})});iI.displayName=Zq;var tX="DismissableLayerBranch",E3=A.forwardRef((t,e)=>{const n=A.useContext(T3),r=A.useRef(null),o=ds(e,r);return A.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),R.jsx(ur.div,{...t,ref:o})});E3.displayName=tX;function nX(t,e=globalThis==null?void 0:globalThis.document){const n=Gs(t),r=A.useRef(!1),o=A.useRef(()=>{});return A.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){N3(Jq,n,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=l,e.addEventListener("click",o.current,{once:!0})):l()}else e.removeEventListener("click",o.current);r.current=!1},i=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(i),e.removeEventListener("pointerdown",s),e.removeEventListener("click",o.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function rX(t,e=globalThis==null?void 0:globalThis.document){const n=Gs(t),r=A.useRef(!1);return A.useEffect(()=>{const o=s=>{s.target&&!r.current&&N3(eX,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function DA(){const t=new CustomEvent(DS);document.dispatchEvent(t)}function N3(t,e,n,{discrete:r}){const o=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&o.addEventListener(t,e,{once:!0}),r?I3(o,s):o.dispatchEvent(s)}var oX=iI,sX=E3,Na=globalThis!=null&&globalThis.document?A.useLayoutEffect:()=>{},iX="Portal",A3=A.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[o,s]=A.useState(!1);Na(()=>s(!0),[]);const i=n||o&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return i?w3.createPortal(R.jsx(ur.div,{...r,ref:e}),i):null});A3.displayName=iX;function aX(t,e){return A.useReducer((n,r)=>e[n][r]??n,t)}var aI=t=>{const{present:e,children:n}=t,r=lX(e),o=typeof n=="function"?n({present:r.isPresent}):A.Children.only(n),s=ds(r.ref,uX(o));return typeof n=="function"||r.isPresent?A.cloneElement(o,{ref:s}):null};aI.displayName="Presence";function lX(t){const[e,n]=A.useState(),r=A.useRef({}),o=A.useRef(t),s=A.useRef("none"),i=t?"mounted":"unmounted",[a,l]=aX(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return A.useEffect(()=>{const u=vg(r.current);s.current=a==="mounted"?u:"none"},[a]),Na(()=>{const u=r.current,c=o.current;if(c!==t){const f=s.current,h=vg(u);t?l("MOUNT"):h==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(c&&f!==h?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,l]),Na(()=>{if(e){let u;const c=e.ownerDocument.defaultView??window,d=h=>{const m=vg(r.current).includes(h.animationName);if(h.target===e&&m&&(l("ANIMATION_END"),!o.current)){const g=e.style.animationFillMode;e.style.animationFillMode="forwards",u=c.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=g)})}},f=h=>{h.target===e&&(s.current=vg(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{c.clearTimeout(u),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:A.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function vg(t){return(t==null?void 0:t.animationName)||"none"}function uX(t){var r,o;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(o=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:o.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function O3({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,o]=cX({defaultProp:e,onChange:n}),s=t!==void 0,i=s?t:r,a=Gs(n),l=A.useCallback(u=>{if(s){const d=typeof u=="function"?u(t):u;d!==t&&a(d)}else o(u)},[s,t,o,a]);return[i,l]}function cX({defaultProp:t,onChange:e}){const n=A.useState(t),[r]=n,o=A.useRef(r),s=Gs(e);return A.useEffect(()=>{o.current!==r&&(s(r),o.current=r)},[r,o,s]),n}var dX="VisuallyHidden",O0=A.forwardRef((t,e)=>R.jsx(ur.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));O0.displayName=dX;var fX=O0,lI="ToastProvider",[uI,hX,pX]=qq("Toast"),[_3,o8e]=k3("Toast",[pX]),[mX,_0]=_3(lI),R3=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:o="right",swipeThreshold:s=50,children:i}=t,[a,l]=A.useState(null),[u,c]=A.useState(0),d=A.useRef(!1),f=A.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${lI}\`. Expected non-empty \`string\`.`),R.jsx(uI.Provider,{scope:e,children:R.jsx(mX,{scope:e,label:n,duration:r,swipeDirection:o,swipeThreshold:s,toastCount:u,viewport:a,onViewportChange:l,onToastAdd:A.useCallback(()=>c(h=>h+1),[]),onToastRemove:A.useCallback(()=>c(h=>h-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:f,children:i})})};R3.displayName=lI;var P3="ToastViewport",gX=["F8"],MS="toast.viewportPause",FS="toast.viewportResume",D3=A.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=gX,label:o="Notifications ({hotkey})",...s}=t,i=_0(P3,n),a=hX(n),l=A.useRef(null),u=A.useRef(null),c=A.useRef(null),d=A.useRef(null),f=ds(e,d,i.onViewportChange),h=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),p=i.toastCount>0;A.useEffect(()=>{const g=y=>{var b;r.length!==0&&r.every(x=>y[x]||y.code===x)&&((b=d.current)==null||b.focus())};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[r]),A.useEffect(()=>{const g=l.current,y=d.current;if(p&&g&&y){const v=()=>{if(!i.isClosePausedRef.current){const S=new CustomEvent(MS);y.dispatchEvent(S),i.isClosePausedRef.current=!0}},b=()=>{if(i.isClosePausedRef.current){const S=new CustomEvent(FS);y.dispatchEvent(S),i.isClosePausedRef.current=!1}},x=S=>{!g.contains(S.relatedTarget)&&b()},w=()=>{g.contains(document.activeElement)||b()};return g.addEventListener("focusin",v),g.addEventListener("focusout",x),g.addEventListener("pointermove",v),g.addEventListener("pointerleave",w),window.addEventListener("blur",v),window.addEventListener("focus",b),()=>{g.removeEventListener("focusin",v),g.removeEventListener("focusout",x),g.removeEventListener("pointermove",v),g.removeEventListener("pointerleave",w),window.removeEventListener("blur",v),window.removeEventListener("focus",b)}}},[p,i.isClosePausedRef]);const m=A.useCallback(({tabbingDirection:g})=>{const v=a().map(b=>{const x=b.ref.current,w=[x,...NX(x)];return g==="forwards"?w:w.reverse()});return(g==="forwards"?v.reverse():v).flat()},[a]);return A.useEffect(()=>{const g=d.current;if(g){const y=v=>{var w,S,$;const b=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!b){const C=document.activeElement,k=v.shiftKey;if(v.target===g&&k){(w=u.current)==null||w.focus();return}const E=m({tabbingDirection:k?"backwards":"forwards"}),_=E.findIndex(O=>O===C);V1(E.slice(_+1))?v.preventDefault():k?(S=u.current)==null||S.focus():($=c.current)==null||$.focus()}};return g.addEventListener("keydown",y),()=>g.removeEventListener("keydown",y)}},[a,m]),R.jsxs(sX,{ref:l,role:"region","aria-label":o.replace("{hotkey}",h),tabIndex:-1,style:{pointerEvents:p?void 0:"none"},children:[p&&R.jsx(LS,{ref:u,onFocusFromOutsideViewport:()=>{const g=m({tabbingDirection:"forwards"});V1(g)}}),R.jsx(uI.Slot,{scope:n,children:R.jsx(ur.ol,{tabIndex:-1,...s,ref:f})}),p&&R.jsx(LS,{ref:c,onFocusFromOutsideViewport:()=>{const g=m({tabbingDirection:"backwards"});V1(g)}})]})});D3.displayName=P3;var M3="ToastFocusProxy",LS=A.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...o}=t,s=_0(M3,n);return R.jsx(O0,{"aria-hidden":!0,tabIndex:0,...o,ref:e,style:{position:"fixed"},onFocus:i=>{var u;const a=i.relatedTarget;!((u=s.viewport)!=null&&u.contains(a))&&r()}})});LS.displayName=M3;var R0="Toast",yX="toast.swipeStart",vX="toast.swipeMove",xX="toast.swipeCancel",bX="toast.swipeEnd",F3=A.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:o,onOpenChange:s,...i}=t,[a=!0,l]=O3({prop:r,defaultProp:o,onChange:s});return R.jsx(aI,{present:n||a,children:R.jsx(CX,{open:a,...i,ref:e,onClose:()=>l(!1),onPause:Gs(t.onPause),onResume:Gs(t.onResume),onSwipeStart:$n(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:$n(t.onSwipeMove,u=>{const{x:c,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${c}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:$n(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:$n(t.onSwipeEnd,u=>{const{x:c,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${c}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});F3.displayName=R0;var[wX,SX]=_3(R0,{onClose(){}}),CX=A.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:o,open:s,onClose:i,onEscapeKeyDown:a,onPause:l,onResume:u,onSwipeStart:c,onSwipeMove:d,onSwipeCancel:f,onSwipeEnd:h,...p}=t,m=_0(R0,n),[g,y]=A.useState(null),v=ds(e,O=>y(O)),b=A.useRef(null),x=A.useRef(null),w=o||m.duration,S=A.useRef(0),$=A.useRef(w),C=A.useRef(0),{onToastAdd:k,onToastRemove:I}=m,T=Gs(()=>{var F;(g==null?void 0:g.contains(document.activeElement))&&((F=m.viewport)==null||F.focus()),i()}),E=A.useCallback(O=>{!O||O===1/0||(window.clearTimeout(C.current),S.current=new Date().getTime(),C.current=window.setTimeout(T,O))},[T]);A.useEffect(()=>{const O=m.viewport;if(O){const F=()=>{E($.current),u==null||u()},M=()=>{const L=new Date().getTime()-S.current;$.current=$.current-L,window.clearTimeout(C.current),l==null||l()};return O.addEventListener(MS,M),O.addEventListener(FS,F),()=>{O.removeEventListener(MS,M),O.removeEventListener(FS,F)}}},[m.viewport,w,l,u,E]),A.useEffect(()=>{s&&!m.isClosePausedRef.current&&E(w)},[s,w,m.isClosePausedRef,E]),A.useEffect(()=>(k(),()=>I()),[k,I]);const _=A.useMemo(()=>g?U3(g):null,[g]);return m.viewport?R.jsxs(R.Fragment,{children:[_&&R.jsx($X,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:_}),R.jsx(wX,{scope:n,onClose:T,children:Ip.createPortal(R.jsx(uI.ItemSlot,{scope:n,children:R.jsx(oX,{asChild:!0,onEscapeKeyDown:$n(a,()=>{m.isFocusedToastEscapeKeyDownRef.current||T(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:R.jsx(ur.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":m.swipeDirection,...p,ref:v,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:$n(t.onKeyDown,O=>{O.key==="Escape"&&(a==null||a(O.nativeEvent),O.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,T()))}),onPointerDown:$n(t.onPointerDown,O=>{O.button===0&&(b.current={x:O.clientX,y:O.clientY})}),onPointerMove:$n(t.onPointerMove,O=>{if(!b.current)return;const F=O.clientX-b.current.x,M=O.clientY-b.current.y,L=!!x.current,N=["left","right"].includes(m.swipeDirection),D=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,U=N?D(0,F):0,B=N?0:D(0,M),W=O.pointerType==="touch"?10:2,V={x:U,y:B},ee={originalEvent:O,delta:V};L?(x.current=V,xg(vX,d,ee,{discrete:!1})):MA(V,m.swipeDirection,W)?(x.current=V,xg(yX,c,ee,{discrete:!1}),O.target.setPointerCapture(O.pointerId)):(Math.abs(F)>W||Math.abs(M)>W)&&(b.current=null)}),onPointerUp:$n(t.onPointerUp,O=>{const F=x.current,M=O.target;if(M.hasPointerCapture(O.pointerId)&&M.releasePointerCapture(O.pointerId),x.current=null,b.current=null,F){const L=O.currentTarget,N={originalEvent:O,delta:F};MA(F,m.swipeDirection,m.swipeThreshold)?xg(bX,h,N,{discrete:!0}):xg(xX,f,N,{discrete:!0}),L.addEventListener("click",D=>D.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),$X=t=>{const{__scopeToast:e,children:n,...r}=t,o=_0(R0,e),[s,i]=A.useState(!1),[a,l]=A.useState(!1);return TX(()=>i(!0)),A.useEffect(()=>{const u=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(u)},[]),a?null:R.jsx(A3,{asChild:!0,children:R.jsx(O0,{...r,children:s&&R.jsxs(R.Fragment,{children:[o.label," ",n]})})})},kX="ToastTitle",L3=A.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return R.jsx(ur.div,{...r,ref:e})});L3.displayName=kX;var IX="ToastDescription",B3=A.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return R.jsx(ur.div,{...r,ref:e})});B3.displayName=IX;var z3="ToastAction",j3=A.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?R.jsx(V3,{altText:n,asChild:!0,children:R.jsx(cI,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${z3}\`. Expected non-empty \`string\`.`),null)});j3.displayName=z3;var W3="ToastClose",cI=A.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,o=SX(W3,n);return R.jsx(V3,{asChild:!0,children:R.jsx(ur.button,{type:"button",...r,ref:e,onClick:$n(t.onClick,o.onClose)})})});cI.displayName=W3;var V3=A.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...o}=t;return R.jsx(ur.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...o,ref:e})});function U3(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),EX(r)){const o=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!o)if(s){const i=r.dataset.radixToastAnnounceAlt;i&&e.push(i)}else e.push(...U3(r))}}),e}function xg(t,e,n,{discrete:r}){const o=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&o.addEventListener(t,e,{once:!0}),r?I3(o,s):o.dispatchEvent(s)}var MA=(t,e,n=0)=>{const r=Math.abs(t.x),o=Math.abs(t.y),s=r>o;return e==="left"||e==="right"?s&&r>n:!s&&o>n};function TX(t=()=>{}){const e=Gs(t);Na(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function EX(t){return t.nodeType===t.ELEMENT_NODE}function NX(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function V1(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var AX=R3,G3=D3,H3=F3,K3=L3,q3=B3,X3=j3,Y3=cI;function Q3(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=Q3(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function et(){for(var t,e,n=0,r="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=Q3(t))&&(r&&(r+=" "),r+=e);return r}const FA=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,LA=et,Z3=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return LA(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:o,defaultVariants:s}=e,i=Object.keys(o).map(u=>{const c=n==null?void 0:n[u],d=s==null?void 0:s[u];if(c===null)return null;const f=FA(c)||FA(d);return o[u][f]}),a=n&&Object.entries(n).reduce((u,c)=>{let[d,f]=c;return f===void 0||(u[d]=f),u},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,c)=>{let{class:d,className:f,...h}=c;return Object.entries(h).every(p=>{let[m,g]=p;return Array.isArray(g)?g.includes({...s,...a}[m]):{...s,...a}[m]===g})?[...u,d,f]:u},[]);return LA(t,i,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OX=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),J3=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _X={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RX=A.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:s,iconNode:i,...a},l)=>A.createElement("svg",{ref:l,..._X,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:J3("lucide",o),...a},[...i.map(([u,c])=>A.createElement(u,c)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ei=(t,e)=>{const n=A.forwardRef(({className:r,...o},s)=>A.createElement(RX,{ref:s,iconNode:e,className:J3(`lucide-${OX(t)}`,r),...o}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PX=ei("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BS=ei("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BA=ei("CloudUpload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DX=ei("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eB=ei("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fl=ei("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MX=ei("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FX=ei("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LX=ei("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BX=ei("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),dI="-",zX=t=>{const e=WX(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:i=>{const a=i.split(dI);return a[0]===""&&a.length!==1&&a.shift(),tB(a,e)||jX(i)},getConflictingClassGroupIds:(i,a)=>{const l=n[i]||[];return a&&r[i]?[...l,...r[i]]:l}}},tB=(t,e)=>{var i;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),o=r?tB(t.slice(1),r):void 0;if(o)return o;if(e.validators.length===0)return;const s=t.join(dI);return(i=e.validators.find(({validator:a})=>a(s)))==null?void 0:i.classGroupId},zA=/^\[(.+)\]$/,jX=t=>{if(zA.test(t)){const e=zA.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},WX=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return UX(Object.entries(t.classGroups),n).forEach(([s,i])=>{zS(i,r,s,e)}),r},zS=(t,e,n,r)=>{t.forEach(o=>{if(typeof o=="string"){const s=o===""?e:jA(e,o);s.classGroupId=n;return}if(typeof o=="function"){if(VX(o)){zS(o(r),e,n,r);return}e.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([s,i])=>{zS(i,jA(e,s),n,r)})})},jA=(t,e)=>{let n=t;return e.split(dI).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},VX=t=>t.isThemeGetter,UX=(t,e)=>e?t.map(([n,r])=>{const o=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([i,a])=>[e+i,a])):s);return[n,o]}):t,GX=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const o=(s,i)=>{n.set(s,i),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let i=n.get(s);if(i!==void 0)return i;if((i=r.get(s))!==void 0)return o(s,i),i},set(s,i){n.has(s)?n.set(s,i):o(s,i)}}},nB="!",HX=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,o=e[0],s=e.length,i=a=>{const l=[];let u=0,c=0,d;for(let g=0;g<a.length;g++){let y=a[g];if(u===0){if(y===o&&(r||a.slice(g,g+s)===e)){l.push(a.slice(c,g)),c=g+s;continue}if(y==="/"){d=g;continue}}y==="["?u++:y==="]"&&u--}const f=l.length===0?a:a.substring(c),h=f.startsWith(nB),p=h?f.substring(1):f,m=d&&d>c?d-c:void 0;return{modifiers:l,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:m}};return n?a=>n({className:a,parseClassName:i}):i},KX=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},qX=t=>({cache:GX(t.cacheSize),parseClassName:HX(t),...zX(t)}),XX=/\s+/,YX=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:o}=e,s=[],i=t.trim().split(XX);let a="";for(let l=i.length-1;l>=0;l-=1){const u=i[l],{modifiers:c,hasImportantModifier:d,baseClassName:f,maybePostfixModifierPosition:h}=n(u);let p=!!h,m=r(p?f.substring(0,h):f);if(!m){if(!p){a=u+(a.length>0?" "+a:a);continue}if(m=r(f),!m){a=u+(a.length>0?" "+a:a);continue}p=!1}const g=KX(c).join(":"),y=d?g+nB:g,v=y+m;if(s.includes(v))continue;s.push(v);const b=o(m,p);for(let x=0;x<b.length;++x){const w=b[x];s.push(y+w)}a=u+(a.length>0?" "+a:a)}return a};function QX(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=rB(e))&&(r&&(r+=" "),r+=n);return r}const rB=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=rB(t[r]))&&(n&&(n+=" "),n+=e);return n};function ZX(t,...e){let n,r,o,s=i;function i(l){const u=e.reduce((c,d)=>d(c),t());return n=qX(u),r=n.cache.get,o=n.cache.set,s=a,a(l)}function a(l){const u=r(l);if(u)return u;const c=YX(l,n);return o(l,c),c}return function(){return s(QX.apply(null,arguments))}}const Pt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},oB=/^\[(?:([a-z-]+):)?(.+)\]$/i,JX=/^\d+\/\d+$/,e7=new Set(["px","full","screen"]),t7=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,n7=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,r7=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,o7=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,s7=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,si=t=>lc(t)||e7.has(t)||JX.test(t),Hi=t=>kd(t,"length",h7),lc=t=>!!t&&!Number.isNaN(Number(t)),U1=t=>kd(t,"number",lc),hf=t=>!!t&&Number.isInteger(Number(t)),i7=t=>t.endsWith("%")&&lc(t.slice(0,-1)),ze=t=>oB.test(t),Ki=t=>t7.test(t),a7=new Set(["length","size","percentage"]),l7=t=>kd(t,a7,sB),u7=t=>kd(t,"position",sB),c7=new Set(["image","url"]),d7=t=>kd(t,c7,m7),f7=t=>kd(t,"",p7),pf=()=>!0,kd=(t,e,n)=>{const r=oB.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},h7=t=>n7.test(t)&&!r7.test(t),sB=()=>!1,p7=t=>o7.test(t),m7=t=>s7.test(t),g7=()=>{const t=Pt("colors"),e=Pt("spacing"),n=Pt("blur"),r=Pt("brightness"),o=Pt("borderColor"),s=Pt("borderRadius"),i=Pt("borderSpacing"),a=Pt("borderWidth"),l=Pt("contrast"),u=Pt("grayscale"),c=Pt("hueRotate"),d=Pt("invert"),f=Pt("gap"),h=Pt("gradientColorStops"),p=Pt("gradientColorStopPositions"),m=Pt("inset"),g=Pt("margin"),y=Pt("opacity"),v=Pt("padding"),b=Pt("saturate"),x=Pt("scale"),w=Pt("sepia"),S=Pt("skew"),$=Pt("space"),C=Pt("translate"),k=()=>["auto","contain","none"],I=()=>["auto","hidden","clip","visible","scroll"],T=()=>["auto",ze,e],E=()=>[ze,e],_=()=>["",si,Hi],O=()=>["auto",lc,ze],F=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],M=()=>["solid","dashed","dotted","double","none"],L=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],N=()=>["start","end","center","between","around","evenly","stretch"],D=()=>["","0",ze],U=()=>["auto","avoid","all","avoid-page","page","left","right","column"],B=()=>[lc,ze];return{cacheSize:500,separator:":",theme:{colors:[pf],spacing:[si,Hi],blur:["none","",Ki,ze],brightness:B(),borderColor:[t],borderRadius:["none","","full",Ki,ze],borderSpacing:E(),borderWidth:_(),contrast:B(),grayscale:D(),hueRotate:B(),invert:D(),gap:E(),gradientColorStops:[t],gradientColorStopPositions:[i7,Hi],inset:T(),margin:T(),opacity:B(),padding:E(),saturate:B(),scale:B(),sepia:D(),skew:B(),space:E(),translate:E()},classGroups:{aspect:[{aspect:["auto","square","video",ze]}],container:["container"],columns:[{columns:[Ki]}],"break-after":[{"break-after":U()}],"break-before":[{"break-before":U()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...F(),ze]}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",hf,ze]}],basis:[{basis:T()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ze]}],grow:[{grow:D()}],shrink:[{shrink:D()}],order:[{order:["first","last","none",hf,ze]}],"grid-cols":[{"grid-cols":[pf]}],"col-start-end":[{col:["auto",{span:["full",hf,ze]},ze]}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":[pf]}],"row-start-end":[{row:["auto",{span:[hf,ze]},ze]}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ze]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ze]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...N()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...N(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...N(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[$]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[$]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ze,e]}],"min-w":[{"min-w":[ze,e,"min","max","fit"]}],"max-w":[{"max-w":[ze,e,"none","full","min","max","fit","prose",{screen:[Ki]},Ki]}],h:[{h:[ze,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ze,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ze,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ze,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Ki,Hi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",U1]}],"font-family":[{font:[pf]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ze]}],"line-clamp":[{"line-clamp":["none",lc,U1]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",si,ze]}],"list-image":[{"list-image":["none",ze]}],"list-style-type":[{list:["none","disc","decimal",ze]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...M(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",si,Hi]}],"underline-offset":[{"underline-offset":["auto",si,ze]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ze]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ze]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...F(),u7]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",l7]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},d7]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...M(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:M()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",...M()]}],"outline-offset":[{"outline-offset":[si,ze]}],"outline-w":[{outline:[si,Hi]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:_()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[si,Hi]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Ki,f7]}],"shadow-color":[{shadow:[pf]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...L(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":L()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Ki,ze]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[c]}],invert:[{invert:[d]}],saturate:[{saturate:[b]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[c]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ze]}],duration:[{duration:B()}],ease:[{ease:["linear","in","out","in-out",ze]}],delay:[{delay:B()}],animate:[{animate:["none","spin","ping","pulse","bounce",ze]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[x]}],"scale-x":[{"scale-x":[x]}],"scale-y":[{"scale-y":[x]}],rotate:[{rotate:[hf,ze]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ze]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ze]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ze]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[si,Hi,U1]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},y7=ZX(g7);function Ut(...t){return y7(et(t))}const v7=AX,iB=A.forwardRef(({className:t,...e},n)=>R.jsx(G3,{ref:n,className:Ut("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));iB.displayName=G3.displayName;const x7=Z3("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),aB=A.forwardRef(({className:t,variant:e,...n},r)=>R.jsx(H3,{ref:r,className:Ut(x7({variant:e}),t),...n}));aB.displayName=H3.displayName;const b7=A.forwardRef(({className:t,...e},n)=>R.jsx(X3,{ref:n,className:Ut("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));b7.displayName=X3.displayName;const lB=A.forwardRef(({className:t,...e},n)=>R.jsx(Y3,{ref:n,className:Ut("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:R.jsx(BX,{className:"h-4 w-4"})}));lB.displayName=Y3.displayName;const uB=A.forwardRef(({className:t,...e},n)=>R.jsx(K3,{ref:n,className:Ut("text-sm font-semibold",t),...e}));uB.displayName=K3.displayName;const cB=A.forwardRef(({className:t,...e},n)=>R.jsx(q3,{ref:n,className:Ut("text-sm opacity-90",t),...e}));cB.displayName=q3.displayName;function w7(){const{toasts:t}=jq();return R.jsxs(v7,{children:[t.map(function({id:e,title:n,description:r,action:o,...s}){return R.jsxs(aB,{...s,children:[R.jsxs("div",{className:"grid gap-1",children:[n&&R.jsx(uB,{children:n}),r&&R.jsx(cB,{children:r})]}),o,R.jsx(lB,{})]},e)}),R.jsx(iB,{})]})}var WA=["light","dark"],S7="(prefers-color-scheme: dark)",C7=A.createContext(void 0),$7={setTheme:t=>{},themes:[]},k7=()=>{var t;return(t=A.useContext(C7))!=null?t:$7};A.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:o,defaultTheme:s,value:i,attrs:a,nonce:l})=>{let u=s==="system",c=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(p=>`'${p}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,d=o?WA.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(p,m=!1,g=!0)=>{let y=i?i[p]:p,v=m?p+"|| ''":`'${y}'`,b="";return o&&g&&!m&&WA.includes(p)&&(b+=`d.style.colorScheme = '${p}';`),n==="class"?m||y?b+=`c.add(${v})`:b+="null":y&&(b+=`d[s](n,${v})`),b},h=t?`!function(){${c}${f(t)}}()`:r?`!function(){try{${c}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${S7}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${i?`var x=${JSON.stringify(i)};`:""}${f(i?"x[e]":"e",!0)}}${u?"":"else{"+f(s,!1,!1)+"}"}${d}}catch(e){}}()`:`!function(){try{${c}var e=localStorage.getItem('${e}');if(e){${i?`var x=${JSON.stringify(i)};`:""}${f(i?"x[e]":"e",!0)}}else{${f(s,!1,!1)};}${d}}catch(t){}}();`;return A.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:h}})});var I7=t=>{switch(t){case"success":return N7;case"info":return O7;case"warning":return A7;case"error":return _7;default:return null}},T7=Array(12).fill(0),E7=({visible:t})=>z.createElement("div",{className:"sonner-loading-wrapper","data-visible":t},z.createElement("div",{className:"sonner-spinner"},T7.map((e,n)=>z.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),N7=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),A7=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),O7=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),_7=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),R7=()=>{let[t,e]=z.useState(document.hidden);return z.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},jS=1,P7=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...r}=t,o=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:jS++,s=this.toasts.find(a=>a.id===o),i=t.dismissible===void 0?!0:t.dismissible;return s?this.toasts=this.toasts.map(a=>a.id===o?(this.publish({...a,...t,id:o,title:n}),{...a,...t,id:o,dismissible:i,title:n}):a):this.addToast({title:n,...r,dismissible:i,id:o}),o},this.dismiss=t=>(t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=t instanceof Promise?t:t(),o=n!==void 0;return r.then(async s=>{if(M7(s)&&!s.ok){o=!1;let i=typeof e.error=="function"?await e.error(`HTTP error! status: ${s.status}`):e.error,a=typeof e.description=="function"?await e.description(`HTTP error! status: ${s.status}`):e.description;this.create({id:n,type:"error",message:i,description:a})}else if(e.success!==void 0){o=!1;let i=typeof e.success=="function"?await e.success(s):e.success,a=typeof e.description=="function"?await e.description(s):e.description;this.create({id:n,type:"success",message:i,description:a})}}).catch(async s=>{if(e.error!==void 0){o=!1;let i=typeof e.error=="function"?await e.error(s):e.error,a=typeof e.description=="function"?await e.description(s):e.description;this.create({id:n,type:"error",message:i,description:a})}}).finally(()=>{var s;o&&(this.dismiss(n),n=void 0),(s=e.finally)==null||s.call(e)}),n},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||jS++;return this.create({jsx:t(n),id:n,...e}),n},this.subscribers=[],this.toasts=[]}},Kr=new P7,D7=(t,e)=>{let n=(e==null?void 0:e.id)||jS++;return Kr.addToast({title:t,...e,id:n}),n},M7=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",F7=D7,L7=()=>Kr.toasts,bg=Object.assign(F7,{success:Kr.success,info:Kr.info,warning:Kr.warning,error:Kr.error,custom:Kr.custom,message:Kr.message,promise:Kr.promise,dismiss:Kr.dismiss,loading:Kr.loading},{getHistory:L7});function B7(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}B7(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function wg(t){return t.label!==void 0}var z7=3,j7="32px",W7=4e3,V7=356,U7=14,G7=20,H7=200;function K7(...t){return t.filter(Boolean).join(" ")}var q7=t=>{var e,n,r,o,s,i,a,l,u,c;let{invert:d,toast:f,unstyled:h,interacting:p,setHeights:m,visibleToasts:g,heights:y,index:v,toasts:b,expanded:x,removeToast:w,defaultRichColors:S,closeButton:$,style:C,cancelButtonStyle:k,actionButtonStyle:I,className:T="",descriptionClassName:E="",duration:_,position:O,gap:F,loadingIcon:M,expandByDefault:L,classNames:N,icons:D,closeButtonAriaLabel:U="Close toast",pauseWhenPageIsHidden:B,cn:W}=t,[V,ee]=z.useState(!1),[ne,se]=z.useState(!1),[de,ue]=z.useState(!1),[Y,ae]=z.useState(!1),[oe,Z]=z.useState(0),[be,me]=z.useState(0),xe=z.useRef(null),fe=z.useRef(null),Oe=v===0,ye=v+1<=g,Ne=f.type,Fe=f.dismissible!==!1,_t=f.className||"",ct=f.descriptionClassName||"",an=z.useMemo(()=>y.findIndex(Be=>Be.toastId===f.id)||0,[y,f.id]),nt=z.useMemo(()=>{var Be;return(Be=f.closeButton)!=null?Be:$},[f.closeButton,$]),Ht=z.useMemo(()=>f.duration||_||W7,[f.duration,_]),lt=z.useRef(0),dt=z.useRef(0),ln=z.useRef(0),Xn=z.useRef(null),[oi,co]=O.split("-"),dr=z.useMemo(()=>y.reduce((Be,Rt,$t)=>$t>=an?Be:Be+Rt.height,0),[y,an]),Ur=R7(),Nu=f.invert||d,rf=Ne==="loading";dt.current=z.useMemo(()=>an*F+dr,[an,dr]),z.useEffect(()=>{ee(!0)},[]),z.useLayoutEffect(()=>{if(!V)return;let Be=fe.current,Rt=Be.style.height;Be.style.height="auto";let $t=Be.getBoundingClientRect().height;Be.style.height=Rt,me($t),m(bs=>bs.find(ws=>ws.toastId===f.id)?bs.map(ws=>ws.toastId===f.id?{...ws,height:$t}:ws):[{toastId:f.id,height:$t,position:f.position},...bs])},[V,f.title,f.description,m,f.id]);let Ui=z.useCallback(()=>{se(!0),Z(dt.current),m(Be=>Be.filter(Rt=>Rt.toastId!==f.id)),setTimeout(()=>{w(f)},H7)},[f,w,m,dt]);z.useEffect(()=>{if(f.promise&&Ne==="loading"||f.duration===1/0||f.type==="loading")return;let Be,Rt=Ht;return x||p||B&&Ur?(()=>{if(ln.current<lt.current){let $t=new Date().getTime()-lt.current;Rt=Rt-$t}ln.current=new Date().getTime()})():Rt!==1/0&&(lt.current=new Date().getTime(),Be=setTimeout(()=>{var $t;($t=f.onAutoClose)==null||$t.call(f,f),Ui()},Rt)),()=>clearTimeout(Be)},[x,p,L,f,Ht,Ui,f.promise,Ne,B,Ur]),z.useEffect(()=>{let Be=fe.current;if(Be){let Rt=Be.getBoundingClientRect().height;return me(Rt),m($t=>[{toastId:f.id,height:Rt,position:f.position},...$t]),()=>m($t=>$t.filter(bs=>bs.toastId!==f.id))}},[m,f.id]),z.useEffect(()=>{f.delete&&Ui()},[Ui,f.delete]);function i8(){return D!=null&&D.loading?z.createElement("div",{className:"sonner-loader","data-visible":Ne==="loading"},D.loading):M?z.createElement("div",{className:"sonner-loader","data-visible":Ne==="loading"},M):z.createElement(E7,{visible:Ne==="loading"})}return z.createElement("li",{"aria-live":f.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:fe,className:W(T,_t,N==null?void 0:N.toast,(e=f==null?void 0:f.classNames)==null?void 0:e.toast,N==null?void 0:N.default,N==null?void 0:N[Ne],(n=f==null?void 0:f.classNames)==null?void 0:n[Ne]),"data-sonner-toast":"","data-rich-colors":(r=f.richColors)!=null?r:S,"data-styled":!(f.jsx||f.unstyled||h),"data-mounted":V,"data-promise":!!f.promise,"data-removed":ne,"data-visible":ye,"data-y-position":oi,"data-x-position":co,"data-index":v,"data-front":Oe,"data-swiping":de,"data-dismissible":Fe,"data-type":Ne,"data-invert":Nu,"data-swipe-out":Y,"data-expanded":!!(x||L&&V),style:{"--index":v,"--toasts-before":v,"--z-index":b.length-v,"--offset":`${ne?oe:dt.current}px`,"--initial-height":L?"auto":`${be}px`,...C,...f.style},onPointerDown:Be=>{rf||!Fe||(xe.current=new Date,Z(dt.current),Be.target.setPointerCapture(Be.pointerId),Be.target.tagName!=="BUTTON"&&(ue(!0),Xn.current={x:Be.clientX,y:Be.clientY}))},onPointerUp:()=>{var Be,Rt,$t,bs;if(Y||!Fe)return;Xn.current=null;let ws=Number(((Be=fe.current)==null?void 0:Be.style.getPropertyValue("--swipe-amount").replace("px",""))||0),Jm=new Date().getTime()-((Rt=xe.current)==null?void 0:Rt.getTime()),a8=Math.abs(ws)/Jm;if(Math.abs(ws)>=G7||a8>.11){Z(dt.current),($t=f.onDismiss)==null||$t.call(f,f),Ui(),ae(!0);return}(bs=fe.current)==null||bs.style.setProperty("--swipe-amount","0px"),ue(!1)},onPointerMove:Be=>{var Rt;if(!Xn.current||!Fe)return;let $t=Be.clientY-Xn.current.y,bs=Be.clientX-Xn.current.x,ws=(oi==="top"?Math.min:Math.max)(0,$t),Jm=Be.pointerType==="touch"?10:2;Math.abs(ws)>Jm?(Rt=fe.current)==null||Rt.style.setProperty("--swipe-amount",`${$t}px`):Math.abs(bs)>Jm&&(Xn.current=null)}},nt&&!f.jsx?z.createElement("button",{"aria-label":U,"data-disabled":rf,"data-close-button":!0,onClick:rf||!Fe?()=>{}:()=>{var Be;Ui(),(Be=f.onDismiss)==null||Be.call(f,f)},className:W(N==null?void 0:N.closeButton,(o=f==null?void 0:f.classNames)==null?void 0:o.closeButton)},z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},z.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),z.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,f.jsx||z.isValidElement(f.title)?f.jsx||f.title:z.createElement(z.Fragment,null,Ne||f.icon||f.promise?z.createElement("div",{"data-icon":"",className:W(N==null?void 0:N.icon,(s=f==null?void 0:f.classNames)==null?void 0:s.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||i8():null,f.type!=="loading"?f.icon||(D==null?void 0:D[Ne])||I7(Ne):null):null,z.createElement("div",{"data-content":"",className:W(N==null?void 0:N.content,(i=f==null?void 0:f.classNames)==null?void 0:i.content)},z.createElement("div",{"data-title":"",className:W(N==null?void 0:N.title,(a=f==null?void 0:f.classNames)==null?void 0:a.title)},f.title),f.description?z.createElement("div",{"data-description":"",className:W(E,ct,N==null?void 0:N.description,(l=f==null?void 0:f.classNames)==null?void 0:l.description)},f.description):null),z.isValidElement(f.cancel)?f.cancel:f.cancel&&wg(f.cancel)?z.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||k,onClick:Be=>{var Rt,$t;wg(f.cancel)&&Fe&&(($t=(Rt=f.cancel).onClick)==null||$t.call(Rt,Be),Ui())},className:W(N==null?void 0:N.cancelButton,(u=f==null?void 0:f.classNames)==null?void 0:u.cancelButton)},f.cancel.label):null,z.isValidElement(f.action)?f.action:f.action&&wg(f.action)?z.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||I,onClick:Be=>{var Rt,$t;wg(f.action)&&(Be.defaultPrevented||(($t=(Rt=f.action).onClick)==null||$t.call(Rt,Be),Ui()))},className:W(N==null?void 0:N.actionButton,(c=f==null?void 0:f.classNames)==null?void 0:c.actionButton)},f.action.label):null))};function VA(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}var X7=t=>{let{invert:e,position:n="bottom-right",hotkey:r=["altKey","KeyT"],expand:o,closeButton:s,className:i,offset:a,theme:l="light",richColors:u,duration:c,style:d,visibleToasts:f=z7,toastOptions:h,dir:p=VA(),gap:m=U7,loadingIcon:g,icons:y,containerAriaLabel:v="Notifications",pauseWhenPageIsHidden:b,cn:x=K7}=t,[w,S]=z.useState([]),$=z.useMemo(()=>Array.from(new Set([n].concat(w.filter(B=>B.position).map(B=>B.position)))),[w,n]),[C,k]=z.useState([]),[I,T]=z.useState(!1),[E,_]=z.useState(!1),[O,F]=z.useState(l!=="system"?l:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),M=z.useRef(null),L=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),N=z.useRef(null),D=z.useRef(!1),U=z.useCallback(B=>{var W;(W=w.find(V=>V.id===B.id))!=null&&W.delete||Kr.dismiss(B.id),S(V=>V.filter(({id:ee})=>ee!==B.id))},[w]);return z.useEffect(()=>Kr.subscribe(B=>{if(B.dismiss){S(W=>W.map(V=>V.id===B.id?{...V,delete:!0}:V));return}setTimeout(()=>{w3.flushSync(()=>{S(W=>{let V=W.findIndex(ee=>ee.id===B.id);return V!==-1?[...W.slice(0,V),{...W[V],...B},...W.slice(V+1)]:[B,...W]})})})}),[]),z.useEffect(()=>{if(l!=="system"){F(l);return}l==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?F("dark"):F("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:B})=>{F(B?"dark":"light")})},[l]),z.useEffect(()=>{w.length<=1&&T(!1)},[w]),z.useEffect(()=>{let B=W=>{var V,ee;r.every(ne=>W[ne]||W.code===ne)&&(T(!0),(V=M.current)==null||V.focus()),W.code==="Escape"&&(document.activeElement===M.current||(ee=M.current)!=null&&ee.contains(document.activeElement))&&T(!1)};return document.addEventListener("keydown",B),()=>document.removeEventListener("keydown",B)},[r]),z.useEffect(()=>{if(M.current)return()=>{N.current&&(N.current.focus({preventScroll:!0}),N.current=null,D.current=!1)}},[M.current]),w.length?z.createElement("section",{"aria-label":`${v} ${L}`,tabIndex:-1},$.map((B,W)=>{var V;let[ee,ne]=B.split("-");return z.createElement("ol",{key:B,dir:p==="auto"?VA():p,tabIndex:-1,ref:M,className:i,"data-sonner-toaster":!0,"data-theme":O,"data-y-position":ee,"data-x-position":ne,style:{"--front-toast-height":`${((V=C[0])==null?void 0:V.height)||0}px`,"--offset":typeof a=="number"?`${a}px`:a||j7,"--width":`${V7}px`,"--gap":`${m}px`,...d},onBlur:se=>{D.current&&!se.currentTarget.contains(se.relatedTarget)&&(D.current=!1,N.current&&(N.current.focus({preventScroll:!0}),N.current=null))},onFocus:se=>{se.target instanceof HTMLElement&&se.target.dataset.dismissible==="false"||D.current||(D.current=!0,N.current=se.relatedTarget)},onMouseEnter:()=>T(!0),onMouseMove:()=>T(!0),onMouseLeave:()=>{E||T(!1)},onPointerDown:se=>{se.target instanceof HTMLElement&&se.target.dataset.dismissible==="false"||_(!0)},onPointerUp:()=>_(!1)},w.filter(se=>!se.position&&W===0||se.position===B).map((se,de)=>{var ue,Y;return z.createElement(q7,{key:se.id,icons:y,index:de,toast:se,defaultRichColors:u,duration:(ue=h==null?void 0:h.duration)!=null?ue:c,className:h==null?void 0:h.className,descriptionClassName:h==null?void 0:h.descriptionClassName,invert:e,visibleToasts:f,closeButton:(Y=h==null?void 0:h.closeButton)!=null?Y:s,interacting:E,position:B,style:h==null?void 0:h.style,unstyled:h==null?void 0:h.unstyled,classNames:h==null?void 0:h.classNames,cancelButtonStyle:h==null?void 0:h.cancelButtonStyle,actionButtonStyle:h==null?void 0:h.actionButtonStyle,removeToast:U,toasts:w.filter(ae=>ae.position==se.position),heights:C.filter(ae=>ae.position==se.position),setHeights:k,expandByDefault:o,gap:m,loadingIcon:g,expanded:I,pauseWhenPageIsHidden:b,cn:x})}))})):null};const Y7=({...t})=>{const{theme:e="system"}=k7();return R.jsx(X7,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var Q7=vF.useId||(()=>{}),Z7=0;function J7(t){const[e,n]=A.useState(Q7());return Na(()=>{n(r=>r??String(Z7++))},[t]),e?`radix-${e}`:""}const e9=["top","right","bottom","left"],Aa=Math.min,Xr=Math.max,zy=Math.round,Sg=Math.floor,Oa=t=>({x:t,y:t}),t9={left:"right",right:"left",bottom:"top",top:"bottom"},n9={start:"end",end:"start"};function WS(t,e,n){return Xr(t,Aa(e,n))}function Ti(t,e){return typeof t=="function"?t(e):t}function Ei(t){return t.split("-")[0]}function Id(t){return t.split("-")[1]}function fI(t){return t==="x"?"y":"x"}function hI(t){return t==="y"?"height":"width"}function _a(t){return["top","bottom"].includes(Ei(t))?"y":"x"}function pI(t){return fI(_a(t))}function r9(t,e,n){n===void 0&&(n=!1);const r=Id(t),o=pI(t),s=hI(o);let i=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(i=jy(i)),[i,jy(i)]}function o9(t){const e=jy(t);return[VS(t),e,VS(e)]}function VS(t){return t.replace(/start|end/g,e=>n9[e])}function s9(t,e,n){const r=["left","right"],o=["right","left"],s=["top","bottom"],i=["bottom","top"];switch(t){case"top":case"bottom":return n?e?o:r:e?r:o;case"left":case"right":return e?s:i;default:return[]}}function i9(t,e,n,r){const o=Id(t);let s=s9(Ei(t),n==="start",r);return o&&(s=s.map(i=>i+"-"+o),e&&(s=s.concat(s.map(VS)))),s}function jy(t){return t.replace(/left|right|bottom|top/g,e=>t9[e])}function a9(t){return{top:0,right:0,bottom:0,left:0,...t}}function dB(t){return typeof t!="number"?a9(t):{top:t,right:t,bottom:t,left:t}}function Wy(t){const{x:e,y:n,width:r,height:o}=t;return{width:r,height:o,top:n,left:e,right:e+r,bottom:n+o,x:e,y:n}}function UA(t,e,n){let{reference:r,floating:o}=t;const s=_a(e),i=pI(e),a=hI(i),l=Ei(e),u=s==="y",c=r.x+r.width/2-o.width/2,d=r.y+r.height/2-o.height/2,f=r[a]/2-o[a]/2;let h;switch(l){case"top":h={x:c,y:r.y-o.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-o.width,y:d};break;default:h={x:r.x,y:r.y}}switch(Id(e)){case"start":h[i]-=f*(n&&u?-1:1);break;case"end":h[i]+=f*(n&&u?-1:1);break}return h}const l9=async(t,e,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:s=[],platform:i}=n,a=s.filter(Boolean),l=await(i.isRTL==null?void 0:i.isRTL(e));let u=await i.getElementRects({reference:t,floating:e,strategy:o}),{x:c,y:d}=UA(u,r,l),f=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:b,data:x,reset:w}=await y({x:c,y:d,initialPlacement:r,placement:f,strategy:o,middlewareData:h,rects:u,platform:i,elements:{reference:t,floating:e}});c=v??c,d=b??d,h={...h,[g]:{...h[g],...x}},w&&p<=50&&(p++,typeof w=="object"&&(w.placement&&(f=w.placement),w.rects&&(u=w.rects===!0?await i.getElementRects({reference:t,floating:e,strategy:o}):w.rects),{x:c,y:d}=UA(u,f,l)),m=-1)}return{x:c,y:d,placement:f,strategy:o,middlewareData:h}};async function $h(t,e){var n;e===void 0&&(e={});const{x:r,y:o,platform:s,rects:i,elements:a,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=Ti(e,t),p=dB(h),g=a[f?d==="floating"?"reference":"floating":d],y=Wy(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),v=d==="floating"?{x:r,y:o,width:i.floating.width,height:i.floating.height}:i.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),x=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},w=Wy(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:b,strategy:l}):v);return{top:(y.top-w.top+p.top)/x.y,bottom:(w.bottom-y.bottom+p.bottom)/x.y,left:(y.left-w.left+p.left)/x.x,right:(w.right-y.right+p.right)/x.x}}const u9=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:o,rects:s,platform:i,elements:a,middlewareData:l}=e,{element:u,padding:c=0}=Ti(t,e)||{};if(u==null)return{};const d=dB(c),f={x:n,y:r},h=pI(o),p=hI(h),m=await i.getDimensions(u),g=h==="y",y=g?"top":"left",v=g?"bottom":"right",b=g?"clientHeight":"clientWidth",x=s.reference[p]+s.reference[h]-f[h]-s.floating[p],w=f[h]-s.reference[h],S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u));let $=S?S[b]:0;(!$||!await(i.isElement==null?void 0:i.isElement(S)))&&($=a.floating[b]||s.floating[p]);const C=x/2-w/2,k=$/2-m[p]/2-1,I=Aa(d[y],k),T=Aa(d[v],k),E=I,_=$-m[p]-T,O=$/2-m[p]/2+C,F=WS(E,O,_),M=!l.arrow&&Id(o)!=null&&O!==F&&s.reference[p]/2-(O<E?I:T)-m[p]/2<0,L=M?O<E?O-E:O-_:0;return{[h]:f[h]+L,data:{[h]:F,centerOffset:O-F-L,...M&&{alignmentOffset:L}},reset:M}}}),c9=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:o,middlewareData:s,rects:i,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=Ti(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=Ei(o),v=_a(a),b=Ei(a)===a,x=await(l.isRTL==null?void 0:l.isRTL(u.floating)),w=f||(b||!m?[jy(a)]:o9(a)),S=p!=="none";!f&&S&&w.push(...i9(a,m,p,x));const $=[a,...w],C=await $h(e,g),k=[];let I=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&k.push(C[y]),d){const O=r9(o,i,x);k.push(C[O[0]],C[O[1]])}if(I=[...I,{placement:o,overflows:k}],!k.every(O=>O<=0)){var T,E;const O=(((T=s.flip)==null?void 0:T.index)||0)+1,F=$[O];if(F)return{data:{index:O,overflows:I},reset:{placement:F}};let M=(E=I.filter(L=>L.overflows[0]<=0).sort((L,N)=>L.overflows[1]-N.overflows[1])[0])==null?void 0:E.placement;if(!M)switch(h){case"bestFit":{var _;const L=(_=I.filter(N=>{if(S){const D=_a(N.placement);return D===v||D==="y"}return!0}).map(N=>[N.placement,N.overflows.filter(D=>D>0).reduce((D,U)=>D+U,0)]).sort((N,D)=>N[1]-D[1])[0])==null?void 0:_[0];L&&(M=L);break}case"initialPlacement":M=a;break}if(o!==M)return{reset:{placement:M}}}return{}}}};function GA(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function HA(t){return e9.some(e=>t[e]>=0)}const d9=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...o}=Ti(t,e);switch(r){case"referenceHidden":{const s=await $h(e,{...o,elementContext:"reference"}),i=GA(s,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:HA(i)}}}case"escaped":{const s=await $h(e,{...o,altBoundary:!0}),i=GA(s,n.floating);return{data:{escapedOffsets:i,escaped:HA(i)}}}default:return{}}}}};async function f9(t,e){const{placement:n,platform:r,elements:o}=t,s=await(r.isRTL==null?void 0:r.isRTL(o.floating)),i=Ei(n),a=Id(n),l=_a(n)==="y",u=["left","top"].includes(i)?-1:1,c=s&&l?-1:1,d=Ti(e,t);let{mainAxis:f,crossAxis:h,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),l?{x:h*c,y:f*u}:{x:f*u,y:h*c}}const h9=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:o,y:s,placement:i,middlewareData:a}=e,l=await f9(e,t);return i===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:o+l.x,y:s+l.y,data:{...l,placement:i}}}}},p9=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:o}=e,{mainAxis:s=!0,crossAxis:i=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...l}=Ti(t,e),u={x:n,y:r},c=await $h(e,l),d=_a(Ei(o)),f=fI(d);let h=u[f],p=u[d];if(s){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=h+c[g],b=h-c[y];h=WS(v,h,b)}if(i){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=p+c[g],b=p-c[y];p=WS(v,p,b)}const m=a.fn({...e,[f]:h,[d]:p});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[f]:s,[d]:i}}}}}},m9=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:o,rects:s,middlewareData:i}=e,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=Ti(t,e),c={x:n,y:r},d=_a(o),f=fI(d);let h=c[f],p=c[d];const m=Ti(a,e),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const b=f==="y"?"height":"width",x=s.reference[f]-s.floating[b]+g.mainAxis,w=s.reference[f]+s.reference[b]-g.mainAxis;h<x?h=x:h>w&&(h=w)}if(u){var y,v;const b=f==="y"?"width":"height",x=["top","left"].includes(Ei(o)),w=s.reference[d]-s.floating[b]+(x&&((y=i.offset)==null?void 0:y[d])||0)+(x?0:g.crossAxis),S=s.reference[d]+s.reference[b]+(x?0:((v=i.offset)==null?void 0:v[d])||0)-(x?g.crossAxis:0);p<w?p=w:p>S&&(p=S)}return{[f]:h,[d]:p}}}},g9=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:o,rects:s,platform:i,elements:a}=e,{apply:l=()=>{},...u}=Ti(t,e),c=await $h(e,u),d=Ei(o),f=Id(o),h=_a(o)==="y",{width:p,height:m}=s.floating;let g,y;d==="top"||d==="bottom"?(g=d,y=f===(await(i.isRTL==null?void 0:i.isRTL(a.floating))?"start":"end")?"left":"right"):(y=d,g=f==="end"?"top":"bottom");const v=m-c.top-c.bottom,b=p-c.left-c.right,x=Aa(m-c[g],v),w=Aa(p-c[y],b),S=!e.middlewareData.shift;let $=x,C=w;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(C=b),(r=e.middlewareData.shift)!=null&&r.enabled.y&&($=v),S&&!f){const I=Xr(c.left,0),T=Xr(c.right,0),E=Xr(c.top,0),_=Xr(c.bottom,0);h?C=p-2*(I!==0||T!==0?I+T:Xr(c.left,c.right)):$=m-2*(E!==0||_!==0?E+_:Xr(c.top,c.bottom))}await l({...e,availableWidth:C,availableHeight:$});const k=await i.getDimensions(a.floating);return p!==k.width||m!==k.height?{reset:{rects:!0}}:{}}}};function P0(){return typeof window<"u"}function Td(t){return fB(t)?(t.nodeName||"").toLowerCase():"#document"}function no(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ti(t){var e;return(e=(fB(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function fB(t){return P0()?t instanceof Node||t instanceof no(t).Node:!1}function fs(t){return P0()?t instanceof Element||t instanceof no(t).Element:!1}function Hs(t){return P0()?t instanceof HTMLElement||t instanceof no(t).HTMLElement:!1}function KA(t){return!P0()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof no(t).ShadowRoot}function Tp(t){const{overflow:e,overflowX:n,overflowY:r,display:o}=hs(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(o)}function y9(t){return["table","td","th"].includes(Td(t))}function D0(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function mI(t){const e=gI(),n=fs(t)?hs(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function v9(t){let e=Ra(t);for(;Hs(e)&&!Dc(e);){if(mI(e))return e;if(D0(e))return null;e=Ra(e)}return null}function gI(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Dc(t){return["html","body","#document"].includes(Td(t))}function hs(t){return no(t).getComputedStyle(t)}function M0(t){return fs(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ra(t){if(Td(t)==="html")return t;const e=t.assignedSlot||t.parentNode||KA(t)&&t.host||ti(t);return KA(e)?e.host:e}function hB(t){const e=Ra(t);return Dc(e)?t.ownerDocument?t.ownerDocument.body:t.body:Hs(e)&&Tp(e)?e:hB(e)}function kh(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const o=hB(t),s=o===((r=t.ownerDocument)==null?void 0:r.body),i=no(o);if(s){const a=US(i);return e.concat(i,i.visualViewport||[],Tp(o)?o:[],a&&n?kh(a):[])}return e.concat(o,kh(o,[],n))}function US(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function pB(t){const e=hs(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const o=Hs(t),s=o?t.offsetWidth:n,i=o?t.offsetHeight:r,a=zy(n)!==s||zy(r)!==i;return a&&(n=s,r=i),{width:n,height:r,$:a}}function yI(t){return fs(t)?t:t.contextElement}function uc(t){const e=yI(t);if(!Hs(e))return Oa(1);const n=e.getBoundingClientRect(),{width:r,height:o,$:s}=pB(e);let i=(s?zy(n.width):n.width)/r,a=(s?zy(n.height):n.height)/o;return(!i||!Number.isFinite(i))&&(i=1),(!a||!Number.isFinite(a))&&(a=1),{x:i,y:a}}const x9=Oa(0);function mB(t){const e=no(t);return!gI()||!e.visualViewport?x9:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function b9(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==no(t)?!1:e}function Xl(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const o=t.getBoundingClientRect(),s=yI(t);let i=Oa(1);e&&(r?fs(r)&&(i=uc(r)):i=uc(t));const a=b9(s,n,r)?mB(s):Oa(0);let l=(o.left+a.x)/i.x,u=(o.top+a.y)/i.y,c=o.width/i.x,d=o.height/i.y;if(s){const f=no(s),h=r&&fs(r)?no(r):r;let p=f,m=US(p);for(;m&&r&&h!==p;){const g=uc(m),y=m.getBoundingClientRect(),v=hs(m),b=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,x=y.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;l*=g.x,u*=g.y,c*=g.x,d*=g.y,l+=b,u+=x,p=no(m),m=US(p)}}return Wy({width:c,height:d,x:l,y:u})}function w9(t){let{elements:e,rect:n,offsetParent:r,strategy:o}=t;const s=o==="fixed",i=ti(r),a=e?D0(e.floating):!1;if(r===i||a&&s)return n;let l={scrollLeft:0,scrollTop:0},u=Oa(1);const c=Oa(0),d=Hs(r);if((d||!d&&!s)&&((Td(r)!=="body"||Tp(i))&&(l=M0(r)),Hs(r))){const f=Xl(r);u=uc(r),c.x=f.x+r.clientLeft,c.y=f.y+r.clientTop}return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+c.x,y:n.y*u.y-l.scrollTop*u.y+c.y}}function S9(t){return Array.from(t.getClientRects())}function GS(t,e){const n=M0(t).scrollLeft;return e?e.left+n:Xl(ti(t)).left+n}function C9(t){const e=ti(t),n=M0(t),r=t.ownerDocument.body,o=Xr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Xr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+GS(t);const a=-n.scrollTop;return hs(r).direction==="rtl"&&(i+=Xr(e.clientWidth,r.clientWidth)-o),{width:o,height:s,x:i,y:a}}function $9(t,e){const n=no(t),r=ti(t),o=n.visualViewport;let s=r.clientWidth,i=r.clientHeight,a=0,l=0;if(o){s=o.width,i=o.height;const u=gI();(!u||u&&e==="fixed")&&(a=o.offsetLeft,l=o.offsetTop)}return{width:s,height:i,x:a,y:l}}function k9(t,e){const n=Xl(t,!0,e==="fixed"),r=n.top+t.clientTop,o=n.left+t.clientLeft,s=Hs(t)?uc(t):Oa(1),i=t.clientWidth*s.x,a=t.clientHeight*s.y,l=o*s.x,u=r*s.y;return{width:i,height:a,x:l,y:u}}function qA(t,e,n){let r;if(e==="viewport")r=$9(t,n);else if(e==="document")r=C9(ti(t));else if(fs(e))r=k9(e,n);else{const o=mB(t);r={...e,x:e.x-o.x,y:e.y-o.y}}return Wy(r)}function gB(t,e){const n=Ra(t);return n===e||!fs(n)||Dc(n)?!1:hs(n).position==="fixed"||gB(n,e)}function I9(t,e){const n=e.get(t);if(n)return n;let r=kh(t,[],!1).filter(a=>fs(a)&&Td(a)!=="body"),o=null;const s=hs(t).position==="fixed";let i=s?Ra(t):t;for(;fs(i)&&!Dc(i);){const a=hs(i),l=mI(i);!l&&a.position==="fixed"&&(o=null),(s?!l&&!o:!l&&a.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||Tp(i)&&!l&&gB(t,i))?r=r.filter(c=>c!==i):o=a,i=Ra(i)}return e.set(t,r),r}function T9(t){let{element:e,boundary:n,rootBoundary:r,strategy:o}=t;const i=[...n==="clippingAncestors"?D0(e)?[]:I9(e,this._c):[].concat(n),r],a=i[0],l=i.reduce((u,c)=>{const d=qA(e,c,o);return u.top=Xr(d.top,u.top),u.right=Aa(d.right,u.right),u.bottom=Aa(d.bottom,u.bottom),u.left=Xr(d.left,u.left),u},qA(e,a,o));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function E9(t){const{width:e,height:n}=pB(t);return{width:e,height:n}}function N9(t,e,n){const r=Hs(e),o=ti(e),s=n==="fixed",i=Xl(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Oa(0);if(r||!r&&!s)if((Td(e)!=="body"||Tp(o))&&(a=M0(e)),r){const h=Xl(e,!0,s,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else o&&(l.x=GS(o));let u=0,c=0;if(o&&!r&&!s){const h=o.getBoundingClientRect();c=h.top+a.scrollTop,u=h.left+a.scrollLeft-GS(o,h)}const d=i.left+a.scrollLeft-l.x-u,f=i.top+a.scrollTop-l.y-c;return{x:d,y:f,width:i.width,height:i.height}}function G1(t){return hs(t).position==="static"}function XA(t,e){if(!Hs(t)||hs(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ti(t)===n&&(n=n.ownerDocument.body),n}function yB(t,e){const n=no(t);if(D0(t))return n;if(!Hs(t)){let o=Ra(t);for(;o&&!Dc(o);){if(fs(o)&&!G1(o))return o;o=Ra(o)}return n}let r=XA(t,e);for(;r&&y9(r)&&G1(r);)r=XA(r,e);return r&&Dc(r)&&G1(r)&&!mI(r)?n:r||v9(t)||n}const A9=async function(t){const e=this.getOffsetParent||yB,n=this.getDimensions,r=await n(t.floating);return{reference:N9(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function O9(t){return hs(t).direction==="rtl"}const _9={convertOffsetParentRelativeRectToViewportRelativeRect:w9,getDocumentElement:ti,getClippingRect:T9,getOffsetParent:yB,getElementRects:A9,getClientRects:S9,getDimensions:E9,getScale:uc,isElement:fs,isRTL:O9};function R9(t,e){let n=null,r;const o=ti(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function i(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:u,top:c,width:d,height:f}=t.getBoundingClientRect();if(a||e(),!d||!f)return;const h=Sg(c),p=Sg(o.clientWidth-(u+d)),m=Sg(o.clientHeight-(c+f)),g=Sg(u),v={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:Xr(0,Aa(1,l))||1};let b=!0;function x(w){const S=w[0].intersectionRatio;if(S!==l){if(!b)return i();S?i(!1,S):r=setTimeout(()=>{i(!1,1e-7)},1e3)}b=!1}try{n=new IntersectionObserver(x,{...v,root:o.ownerDocument})}catch{n=new IntersectionObserver(x,v)}n.observe(t)}return i(!0),s}function P9(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:s=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=yI(t),c=o||s?[...u?kh(u):[],...kh(e)]:[];c.forEach(y=>{o&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const d=u&&a?R9(u,n):null;let f=-1,h=null;i&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===u&&h&&(h.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var b;(b=h)==null||b.observe(e)})),n()}),u&&!l&&h.observe(u),h.observe(e));let p,m=l?Xl(t):null;l&&g();function g(){const y=Xl(t);m&&(y.x!==m.x||y.y!==m.y||y.width!==m.width||y.height!==m.height)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;c.forEach(v=>{o&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),d==null||d(),(y=h)==null||y.disconnect(),h=null,l&&cancelAnimationFrame(p)}}const D9=h9,M9=p9,F9=c9,L9=g9,B9=d9,YA=u9,z9=m9,j9=(t,e,n)=>{const r=new Map,o={platform:_9,...n},s={...o.platform,_c:r};return l9(t,e,{...o,platform:s})};var fy=typeof document<"u"?A.useLayoutEffect:A.useEffect;function Vy(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,o;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Vy(t[r],e[r]))return!1;return!0}if(o=Object.keys(t),n=o.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,o[r]))return!1;for(r=n;r--!==0;){const s=o[r];if(!(s==="_owner"&&t.$$typeof)&&!Vy(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function vB(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function QA(t,e){const n=vB(t);return Math.round(e*n)/n}function H1(t){const e=A.useRef(t);return fy(()=>{e.current=t}),e}function W9(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:s,floating:i}={},transform:a=!0,whileElementsMounted:l,open:u}=t,[c,d]=A.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,h]=A.useState(r);Vy(f,r)||h(r);const[p,m]=A.useState(null),[g,y]=A.useState(null),v=A.useCallback(N=>{N!==S.current&&(S.current=N,m(N))},[]),b=A.useCallback(N=>{N!==$.current&&($.current=N,y(N))},[]),x=s||p,w=i||g,S=A.useRef(null),$=A.useRef(null),C=A.useRef(c),k=l!=null,I=H1(l),T=H1(o),E=H1(u),_=A.useCallback(()=>{if(!S.current||!$.current)return;const N={placement:e,strategy:n,middleware:f};T.current&&(N.platform=T.current),j9(S.current,$.current,N).then(D=>{const U={...D,isPositioned:E.current!==!1};O.current&&!Vy(C.current,U)&&(C.current=U,Ip.flushSync(()=>{d(U)}))})},[f,e,n,T,E]);fy(()=>{u===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,d(N=>({...N,isPositioned:!1})))},[u]);const O=A.useRef(!1);fy(()=>(O.current=!0,()=>{O.current=!1}),[]),fy(()=>{if(x&&(S.current=x),w&&($.current=w),x&&w){if(I.current)return I.current(x,w,_);_()}},[x,w,_,I,k]);const F=A.useMemo(()=>({reference:S,floating:$,setReference:v,setFloating:b}),[v,b]),M=A.useMemo(()=>({reference:x,floating:w}),[x,w]),L=A.useMemo(()=>{const N={position:n,left:0,top:0};if(!M.floating)return N;const D=QA(M.floating,c.x),U=QA(M.floating,c.y);return a?{...N,transform:"translate("+D+"px, "+U+"px)",...vB(M.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:D,top:U}},[n,a,M.floating,c.x,c.y]);return A.useMemo(()=>({...c,update:_,refs:F,elements:M,floatingStyles:L}),[c,_,F,M,L])}const V9=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:o}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?YA({element:r.current,padding:o}).fn(n):{}:r?YA({element:r,padding:o}).fn(n):{}}}},U9=(t,e)=>({...D9(t),options:[t,e]}),G9=(t,e)=>({...M9(t),options:[t,e]}),H9=(t,e)=>({...z9(t),options:[t,e]}),K9=(t,e)=>({...F9(t),options:[t,e]}),q9=(t,e)=>({...L9(t),options:[t,e]}),X9=(t,e)=>({...B9(t),options:[t,e]}),Y9=(t,e)=>({...V9(t),options:[t,e]});var Q9="Arrow",xB=A.forwardRef((t,e)=>{const{children:n,width:r=10,height:o=5,...s}=t;return R.jsx(ur.svg,{...s,ref:e,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:R.jsx("polygon",{points:"0,0 30,0 15,10"})})});xB.displayName=Q9;var Z9=xB;function J9(t,e=[]){let n=[];function r(s,i){const a=A.createContext(i),l=n.length;n=[...n,i];function u(d){const{scope:f,children:h,...p}=d,m=(f==null?void 0:f[t][l])||a,g=A.useMemo(()=>p,Object.values(p));return R.jsx(m.Provider,{value:g,children:h})}function c(d,f){const h=(f==null?void 0:f[t][l])||a,p=A.useContext(h);if(p)return p;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,c]}const o=()=>{const s=n.map(i=>A.createContext(i));return function(a){const l=(a==null?void 0:a[t])||s;return A.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return o.scopeName=t,[r,eY(o,...e)]}function eY(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(s){const i=r.reduce((a,{useScope:l,scopeName:u})=>{const d=l(s)[`__scope${u}`];return{...a,...d}},{});return A.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return n.scopeName=e.scopeName,n}function tY(t){const[e,n]=A.useState(void 0);return Na(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const s=o[0];let i,a;if("borderBoxSize"in s){const l=s.borderBoxSize,u=Array.isArray(l)?l[0]:l;i=u.inlineSize,a=u.blockSize}else i=t.offsetWidth,a=t.offsetHeight;n({width:i,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var vI="Popper",[bB,wB]=J9(vI),[nY,SB]=bB(vI),CB=t=>{const{__scopePopper:e,children:n}=t,[r,o]=A.useState(null);return R.jsx(nY,{scope:e,anchor:r,onAnchorChange:o,children:n})};CB.displayName=vI;var $B="PopperAnchor",kB=A.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...o}=t,s=SB($B,n),i=A.useRef(null),a=ds(e,i);return A.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||i.current)}),r?null:R.jsx(ur.div,{...o,ref:a})});kB.displayName=$B;var xI="PopperContent",[rY,oY]=bB(xI),IB=A.forwardRef((t,e)=>{var de,ue,Y,ae,oe,Z;const{__scopePopper:n,side:r="bottom",sideOffset:o=0,align:s="center",alignOffset:i=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:c=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:h="optimized",onPlaced:p,...m}=t,g=SB(xI,n),[y,v]=A.useState(null),b=ds(e,be=>v(be)),[x,w]=A.useState(null),S=tY(x),$=(S==null?void 0:S.width)??0,C=(S==null?void 0:S.height)??0,k=r+(s!=="center"?"-"+s:""),I=typeof c=="number"?c:{top:0,right:0,bottom:0,left:0,...c},T=Array.isArray(u)?u:[u],E=T.length>0,_={padding:I,boundary:T.filter(iY),altBoundary:E},{refs:O,floatingStyles:F,placement:M,isPositioned:L,middlewareData:N}=W9({strategy:"fixed",placement:k,whileElementsMounted:(...be)=>P9(...be,{animationFrame:h==="always"}),elements:{reference:g.anchor},middleware:[U9({mainAxis:o+C,alignmentAxis:i}),l&&G9({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?H9():void 0,..._}),l&&K9({..._}),q9({..._,apply:({elements:be,rects:me,availableWidth:xe,availableHeight:fe})=>{const{width:Oe,height:ye}=me.reference,Ne=be.floating.style;Ne.setProperty("--radix-popper-available-width",`${xe}px`),Ne.setProperty("--radix-popper-available-height",`${fe}px`),Ne.setProperty("--radix-popper-anchor-width",`${Oe}px`),Ne.setProperty("--radix-popper-anchor-height",`${ye}px`)}}),x&&Y9({element:x,padding:a}),aY({arrowWidth:$,arrowHeight:C}),f&&X9({strategy:"referenceHidden",..._})]}),[D,U]=NB(M),B=Gs(p);Na(()=>{L&&(B==null||B())},[L,B]);const W=(de=N.arrow)==null?void 0:de.x,V=(ue=N.arrow)==null?void 0:ue.y,ee=((Y=N.arrow)==null?void 0:Y.centerOffset)!==0,[ne,se]=A.useState();return Na(()=>{y&&se(window.getComputedStyle(y).zIndex)},[y]),R.jsx("div",{ref:O.setFloating,"data-radix-popper-content-wrapper":"",style:{...F,transform:L?F.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ne,"--radix-popper-transform-origin":[(ae=N.transformOrigin)==null?void 0:ae.x,(oe=N.transformOrigin)==null?void 0:oe.y].join(" "),...((Z=N.hide)==null?void 0:Z.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:R.jsx(rY,{scope:n,placedSide:D,onArrowChange:w,arrowX:W,arrowY:V,shouldHideArrow:ee,children:R.jsx(ur.div,{"data-side":D,"data-align":U,...m,ref:b,style:{...m.style,animation:L?void 0:"none"}})})})});IB.displayName=xI;var TB="PopperArrow",sY={top:"bottom",right:"left",bottom:"top",left:"right"},EB=A.forwardRef(function(e,n){const{__scopePopper:r,...o}=e,s=oY(TB,r),i=sY[s.placedSide];return R.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:R.jsx(Z9,{...o,ref:n,style:{...o.style,display:"block"}})})});EB.displayName=TB;function iY(t){return t!==null}var aY=t=>({name:"transformOrigin",options:t,fn(e){var g,y,v;const{placement:n,rects:r,middlewareData:o}=e,i=((g=o.arrow)==null?void 0:g.centerOffset)!==0,a=i?0:t.arrowWidth,l=i?0:t.arrowHeight,[u,c]=NB(n),d={start:"0%",center:"50%",end:"100%"}[c],f=(((y=o.arrow)==null?void 0:y.x)??0)+a/2,h=(((v=o.arrow)==null?void 0:v.y)??0)+l/2;let p="",m="";return u==="bottom"?(p=i?d:`${f}px`,m=`${-l}px`):u==="top"?(p=i?d:`${f}px`,m=`${r.floating.height+l}px`):u==="right"?(p=`${-l}px`,m=i?d:`${h}px`):u==="left"&&(p=`${r.floating.width+l}px`,m=i?d:`${h}px`),{data:{x:p,y:m}}}});function NB(t){const[e,n="center"]=t.split("-");return[e,n]}var lY=CB,uY=kB,cY=IB,dY=EB,[F0,s8e]=k3("Tooltip",[wB]),L0=wB(),AB="TooltipProvider",fY=700,HS="tooltip.open",[hY,bI]=F0(AB),OB=t=>{const{__scopeTooltip:e,delayDuration:n=fY,skipDelayDuration:r=300,disableHoverableContent:o=!1,children:s}=t,[i,a]=A.useState(!0),l=A.useRef(!1),u=A.useRef(0);return A.useEffect(()=>{const c=u.current;return()=>window.clearTimeout(c)},[]),R.jsx(hY,{scope:e,isOpenDelayed:i,delayDuration:n,onOpen:A.useCallback(()=>{window.clearTimeout(u.current),a(!1)},[]),onClose:A.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>a(!0),r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:A.useCallback(c=>{l.current=c},[]),disableHoverableContent:o,children:s})};OB.displayName=AB;var B0="Tooltip",[pY,z0]=F0(B0),_B=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:o=!1,onOpenChange:s,disableHoverableContent:i,delayDuration:a}=t,l=bI(B0,t.__scopeTooltip),u=L0(e),[c,d]=A.useState(null),f=J7(),h=A.useRef(0),p=i??l.disableHoverableContent,m=a??l.delayDuration,g=A.useRef(!1),[y=!1,v]=O3({prop:r,defaultProp:o,onChange:$=>{$?(l.onOpen(),document.dispatchEvent(new CustomEvent(HS))):l.onClose(),s==null||s($)}}),b=A.useMemo(()=>y?g.current?"delayed-open":"instant-open":"closed",[y]),x=A.useCallback(()=>{window.clearTimeout(h.current),h.current=0,g.current=!1,v(!0)},[v]),w=A.useCallback(()=>{window.clearTimeout(h.current),h.current=0,v(!1)},[v]),S=A.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{g.current=!0,v(!0),h.current=0},m)},[m,v]);return A.useEffect(()=>()=>{h.current&&(window.clearTimeout(h.current),h.current=0)},[]),R.jsx(lY,{...u,children:R.jsx(pY,{scope:e,contentId:f,open:y,stateAttribute:b,trigger:c,onTriggerChange:d,onTriggerEnter:A.useCallback(()=>{l.isOpenDelayed?S():x()},[l.isOpenDelayed,S,x]),onTriggerLeave:A.useCallback(()=>{p?w():(window.clearTimeout(h.current),h.current=0)},[w,p]),onOpen:x,onClose:w,disableHoverableContent:p,children:n})})};_B.displayName=B0;var KS="TooltipTrigger",RB=A.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,o=z0(KS,n),s=bI(KS,n),i=L0(n),a=A.useRef(null),l=ds(e,a,o.onTriggerChange),u=A.useRef(!1),c=A.useRef(!1),d=A.useCallback(()=>u.current=!1,[]);return A.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),R.jsx(uY,{asChild:!0,...i,children:R.jsx(ur.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...r,ref:l,onPointerMove:$n(t.onPointerMove,f=>{f.pointerType!=="touch"&&!c.current&&!s.isPointerInTransitRef.current&&(o.onTriggerEnter(),c.current=!0)}),onPointerLeave:$n(t.onPointerLeave,()=>{o.onTriggerLeave(),c.current=!1}),onPointerDown:$n(t.onPointerDown,()=>{u.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:$n(t.onFocus,()=>{u.current||o.onOpen()}),onBlur:$n(t.onBlur,o.onClose),onClick:$n(t.onClick,o.onClose)})})});RB.displayName=KS;var mY="TooltipPortal",[i8e,gY]=F0(mY,{forceMount:void 0}),Mc="TooltipContent",PB=A.forwardRef((t,e)=>{const n=gY(Mc,t.__scopeTooltip),{forceMount:r=n.forceMount,side:o="top",...s}=t,i=z0(Mc,t.__scopeTooltip);return R.jsx(aI,{present:r||i.open,children:i.disableHoverableContent?R.jsx(DB,{side:o,...s,ref:e}):R.jsx(yY,{side:o,...s,ref:e})})}),yY=A.forwardRef((t,e)=>{const n=z0(Mc,t.__scopeTooltip),r=bI(Mc,t.__scopeTooltip),o=A.useRef(null),s=ds(e,o),[i,a]=A.useState(null),{trigger:l,onClose:u}=n,c=o.current,{onPointerInTransitChange:d}=r,f=A.useCallback(()=>{a(null),d(!1)},[d]),h=A.useCallback((p,m)=>{const g=p.currentTarget,y={x:p.clientX,y:p.clientY},v=wY(y,g.getBoundingClientRect()),b=SY(y,v),x=CY(m.getBoundingClientRect()),w=kY([...b,...x]);a(w),d(!0)},[d]);return A.useEffect(()=>()=>f(),[f]),A.useEffect(()=>{if(l&&c){const p=g=>h(g,c),m=g=>h(g,l);return l.addEventListener("pointerleave",p),c.addEventListener("pointerleave",m),()=>{l.removeEventListener("pointerleave",p),c.removeEventListener("pointerleave",m)}}},[l,c,h,f]),A.useEffect(()=>{if(i){const p=m=>{const g=m.target,y={x:m.clientX,y:m.clientY},v=(l==null?void 0:l.contains(g))||(c==null?void 0:c.contains(g)),b=!$Y(y,i);v?f():b&&(f(),u())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[l,c,i,u,f]),R.jsx(DB,{...t,ref:s})}),[vY,xY]=F0(B0,{isInside:!1}),DB=A.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":o,onEscapeKeyDown:s,onPointerDownOutside:i,...a}=t,l=z0(Mc,n),u=L0(n),{onClose:c}=l;return A.useEffect(()=>(document.addEventListener(HS,c),()=>document.removeEventListener(HS,c)),[c]),A.useEffect(()=>{if(l.trigger){const d=f=>{const h=f.target;h!=null&&h.contains(l.trigger)&&c()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,c]),R.jsx(iI,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:d=>d.preventDefault(),onDismiss:c,children:R.jsxs(cY,{"data-state":l.stateAttribute,...u,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[R.jsx($3,{children:r}),R.jsx(vY,{scope:n,isInside:!0,children:R.jsx(fX,{id:l.contentId,role:"tooltip",children:o||r})})]})})});PB.displayName=Mc;var MB="TooltipArrow",bY=A.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,o=L0(n);return xY(MB,n).isInside?null:R.jsx(dY,{...o,...r,ref:e})});bY.displayName=MB;function wY(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),o=Math.abs(e.right-t.x),s=Math.abs(e.left-t.x);switch(Math.min(n,r,o,s)){case s:return"left";case o:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function SY(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function CY(t){const{top:e,right:n,bottom:r,left:o}=t;return[{x:o,y:e},{x:n,y:e},{x:n,y:r},{x:o,y:r}]}function $Y(t,e){const{x:n,y:r}=t;let o=!1;for(let s=0,i=e.length-1;s<e.length;i=s++){const a=e[s].x,l=e[s].y,u=e[i].x,c=e[i].y;l>r!=c>r&&n<(u-a)*(r-l)/(c-l)+a&&(o=!o)}return o}function kY(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),IY(e)}function IY(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const o=t[r];for(;e.length>=2;){const s=e[e.length-1],i=e[e.length-2];if((s.x-i.x)*(o.y-i.y)>=(s.y-i.y)*(o.x-i.x))e.pop();else break}e.push(o)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const o=t[r];for(;n.length>=2;){const s=n[n.length-1],i=n[n.length-2];if((s.x-i.x)*(o.y-i.y)>=(s.y-i.y)*(o.x-i.x))n.pop();else break}n.push(o)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var TY=OB,EY=_B,NY=RB,FB=PB;const qS=TY,ZA=EY,JA=NY,XS=A.forwardRef(({className:t,sideOffset:e=4,...n},r)=>R.jsx(FB,{ref:r,sideOffset:e,className:Ut("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));XS.displayName=FB.displayName;var j0=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},W0=typeof window>"u"||"Deno"in globalThis;function Xo(){}function AY(t,e){return typeof t=="function"?t(e):t}function OY(t){return typeof t=="number"&&t>=0&&t!==1/0}function _Y(t,e){return Math.max(t+(e||0)-Date.now(),0)}function eO(t,e){return typeof t=="function"?t(e):t}function RY(t,e){return typeof t=="function"?t(e):t}function tO(t,e){const{type:n="all",exact:r,fetchStatus:o,predicate:s,queryKey:i,stale:a}=t;if(i){if(r){if(e.queryHash!==wI(i,e.options))return!1}else if(!Th(e.queryKey,i))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||o&&o!==e.state.fetchStatus||s&&!s(e))}function nO(t,e){const{exact:n,status:r,predicate:o,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(Ih(e.options.mutationKey)!==Ih(s))return!1}else if(!Th(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||o&&!o(e))}function wI(t,e){return((e==null?void 0:e.queryKeyHashFn)||Ih)(t)}function Ih(t){return JSON.stringify(t,(e,n)=>YS(n)?Object.keys(n).sort().reduce((r,o)=>(r[o]=n[o],r),{}):n)}function Th(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!Th(t[n],e[n])):!1}function LB(t,e){if(t===e)return t;const n=rO(t)&&rO(e);if(n||YS(t)&&YS(e)){const r=n?t:Object.keys(t),o=r.length,s=n?e:Object.keys(e),i=s.length,a=n?[]:{};let l=0;for(let u=0;u<i;u++){const c=n?u:s[u];(!n&&r.includes(c)||n)&&t[c]===void 0&&e[c]===void 0?(a[c]=void 0,l++):(a[c]=LB(t[c],e[c]),a[c]===t[c]&&t[c]!==void 0&&l++)}return o===i&&l===o?t:a}return e}function rO(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function YS(t){if(!oO(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!oO(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function oO(t){return Object.prototype.toString.call(t)==="[object Object]"}function PY(t){return new Promise(e=>{setTimeout(e,t)})}function DY(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?LB(t,e):e}function MY(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function FY(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var SI=Symbol();function BB(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===SI?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Ol,na,xc,JM,LY=(JM=class extends j0{constructor(){super();ft(this,Ol);ft(this,na);ft(this,xc);We(this,xc,e=>{if(!W0&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){le(this,na)||this.setEventListener(le(this,xc))}onUnsubscribe(){var e;this.hasListeners()||((e=le(this,na))==null||e.call(this),We(this,na,void 0))}setEventListener(e){var n;We(this,xc,e),(n=le(this,na))==null||n.call(this),We(this,na,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){le(this,Ol)!==e&&(We(this,Ol,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof le(this,Ol)=="boolean"?le(this,Ol):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ol=new WeakMap,na=new WeakMap,xc=new WeakMap,JM),zB=new LY,bc,ra,wc,eF,BY=(eF=class extends j0{constructor(){super();ft(this,bc,!0);ft(this,ra);ft(this,wc);We(this,wc,e=>{if(!W0&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){le(this,ra)||this.setEventListener(le(this,wc))}onUnsubscribe(){var e;this.hasListeners()||((e=le(this,ra))==null||e.call(this),We(this,ra,void 0))}setEventListener(e){var n;We(this,wc,e),(n=le(this,ra))==null||n.call(this),We(this,ra,e(this.setOnline.bind(this)))}setOnline(e){le(this,bc)!==e&&(We(this,bc,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return le(this,bc)}},bc=new WeakMap,ra=new WeakMap,wc=new WeakMap,eF),Uy=new BY;function zY(){let t,e;const n=new Promise((o,s)=>{t=o,e=s});n.status="pending",n.catch(()=>{});function r(o){Object.assign(n,o),delete n.resolve,delete n.reject}return n.resolve=o=>{r({status:"fulfilled",value:o}),t(o)},n.reject=o=>{r({status:"rejected",reason:o}),e(o)},n}function jY(t){return Math.min(1e3*2**t,3e4)}function jB(t){return(t??"online")==="online"?Uy.isOnline():!0}var WB=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function K1(t){return t instanceof WB}function VB(t){let e=!1,n=0,r=!1,o;const s=zY(),i=m=>{var g;r||(f(new WB(m)),(g=t.abort)==null||g.call(t))},a=()=>{e=!0},l=()=>{e=!1},u=()=>zB.isFocused()&&(t.networkMode==="always"||Uy.isOnline())&&t.canRun(),c=()=>jB(t.networkMode)&&t.canRun(),d=m=>{var g;r||(r=!0,(g=t.onSuccess)==null||g.call(t,m),o==null||o(),s.resolve(m))},f=m=>{var g;r||(r=!0,(g=t.onError)==null||g.call(t,m),o==null||o(),s.reject(m))},h=()=>new Promise(m=>{var g;o=y=>{(r||u())&&m(y)},(g=t.onPause)==null||g.call(t)}).then(()=>{var m;o=void 0,r||(m=t.onContinue)==null||m.call(t)}),p=()=>{if(r)return;let m;const g=n===0?t.initialPromise:void 0;try{m=g??t.fn()}catch(y){m=Promise.reject(y)}Promise.resolve(m).then(d).catch(y=>{var S;if(r)return;const v=t.retry??(W0?0:3),b=t.retryDelay??jY,x=typeof b=="function"?b(n,y):b,w=v===!0||typeof v=="number"&&n<v||typeof v=="function"&&v(n,y);if(e||!w){f(y);return}n++,(S=t.onFail)==null||S.call(t,n,y),PY(x).then(()=>u()?void 0:h()).then(()=>{e?f(y):p()})})};return{promise:s,cancel:i,continue:()=>(o==null||o(),s),cancelRetry:a,continueRetry:l,canStart:c,start:()=>(c()?p():h().then(p),s)}}function WY(){let t=[],e=0,n=a=>{a()},r=a=>{a()},o=a=>setTimeout(a,0);const s=a=>{e?t.push(a):o(()=>{n(a)})},i=()=>{const a=t;t=[],a.length&&o(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||i()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{o=a}}}var mr=WY(),_l,tF,UB=(tF=class{constructor(){ft(this,_l)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),OY(this.gcTime)&&We(this,_l,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(W0?1/0:5*60*1e3))}clearGcTimeout(){le(this,_l)&&(clearTimeout(le(this,_l)),We(this,_l,void 0))}},_l=new WeakMap,tF),Sc,Cc,vo,Jn,xp,Rl,Yo,ai,nF,VY=(nF=class extends UB{constructor(e){super();ft(this,Yo);ft(this,Sc);ft(this,Cc);ft(this,vo);ft(this,Jn);ft(this,xp);ft(this,Rl);We(this,Rl,!1),We(this,xp,e.defaultOptions),this.setOptions(e.options),this.observers=[],We(this,vo,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,We(this,Sc,GY(this.options)),this.state=e.state??le(this,Sc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=le(this,Jn))==null?void 0:e.promise}setOptions(e){this.options={...le(this,xp),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&le(this,vo).remove(this)}setData(e,n){const r=DY(this.state.data,e,this.options);return Yn(this,Yo,ai).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){Yn(this,Yo,ai).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,o;const n=(r=le(this,Jn))==null?void 0:r.promise;return(o=le(this,Jn))==null||o.cancel(e),n?n.then(Xo).catch(Xo):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(le(this,Sc))}isActive(){return this.observers.some(e=>RY(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===SI||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!_Y(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=le(this,Jn))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=le(this,Jn))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),le(this,vo).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(le(this,Jn)&&(le(this,Rl)?le(this,Jn).cancel({revert:!0}):le(this,Jn).cancelRetry()),this.scheduleGc()),le(this,vo).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Yn(this,Yo,ai).call(this,{type:"invalidate"})}fetch(e,n){var l,u,c;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(le(this,Jn))return le(this,Jn).continueRetry(),le(this,Jn).promise}if(e&&this.setOptions(e),!this.options.queryFn){const d=this.observers.find(f=>f.options.queryFn);d&&this.setOptions(d.options)}const r=new AbortController,o=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(We(this,Rl,!0),r.signal)})},s=()=>{const d=BB(this.options,n),f={queryKey:this.queryKey,meta:this.meta};return o(f),We(this,Rl,!1),this.options.persister?this.options.persister(d,f,this):d(f)},i={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:s};o(i),(l=this.options.behavior)==null||l.onFetch(i,this),We(this,Cc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=i.fetchOptions)==null?void 0:u.meta))&&Yn(this,Yo,ai).call(this,{type:"fetch",meta:(c=i.fetchOptions)==null?void 0:c.meta});const a=d=>{var f,h,p,m;K1(d)&&d.silent||Yn(this,Yo,ai).call(this,{type:"error",error:d}),K1(d)||((h=(f=le(this,vo).config).onError)==null||h.call(f,d,this),(m=(p=le(this,vo).config).onSettled)==null||m.call(p,this.state.data,d,this)),this.scheduleGc()};return We(this,Jn,VB({initialPromise:n==null?void 0:n.initialPromise,fn:i.fetchFn,abort:r.abort.bind(r),onSuccess:d=>{var f,h,p,m;if(d===void 0){a(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(d)}catch(g){a(g);return}(h=(f=le(this,vo).config).onSuccess)==null||h.call(f,d,this),(m=(p=le(this,vo).config).onSettled)==null||m.call(p,d,this.state.error,this),this.scheduleGc()},onError:a,onFail:(d,f)=>{Yn(this,Yo,ai).call(this,{type:"failed",failureCount:d,error:f})},onPause:()=>{Yn(this,Yo,ai).call(this,{type:"pause"})},onContinue:()=>{Yn(this,Yo,ai).call(this,{type:"continue"})},retry:i.options.retry,retryDelay:i.options.retryDelay,networkMode:i.options.networkMode,canRun:()=>!0})),le(this,Jn).start()}},Sc=new WeakMap,Cc=new WeakMap,vo=new WeakMap,Jn=new WeakMap,xp=new WeakMap,Rl=new WeakMap,Yo=new WeakSet,ai=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...UY(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=e.error;return K1(o)&&o.revert&&le(this,Cc)?{...le(this,Cc),fetchStatus:"idle"}:{...r,error:o,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),mr.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),le(this,vo).notify({query:this,type:"updated",action:e})})},nF);function UY(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:jB(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function GY(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Is,rF,HY=(rF=class extends j0{constructor(e={}){super();ft(this,Is);this.config=e,We(this,Is,new Map)}build(e,n,r){const o=n.queryKey,s=n.queryHash??wI(o,n);let i=this.get(s);return i||(i=new VY({cache:this,queryKey:o,queryHash:s,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(o)}),this.add(i)),i}add(e){le(this,Is).has(e.queryHash)||(le(this,Is).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=le(this,Is).get(e.queryHash);n&&(e.destroy(),n===e&&le(this,Is).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){mr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return le(this,Is).get(e)}getAll(){return[...le(this,Is).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>tO(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>tO(e,r)):n}notify(e){mr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){mr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){mr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Is=new WeakMap,rF),Ts,fr,Pl,Es,qi,oF,KY=(oF=class extends UB{constructor(e){super();ft(this,Es);ft(this,Ts);ft(this,fr);ft(this,Pl);this.mutationId=e.mutationId,We(this,fr,e.mutationCache),We(this,Ts,[]),this.state=e.state||qY(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){le(this,Ts).includes(e)||(le(this,Ts).push(e),this.clearGcTimeout(),le(this,fr).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){We(this,Ts,le(this,Ts).filter(n=>n!==e)),this.scheduleGc(),le(this,fr).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){le(this,Ts).length||(this.state.status==="pending"?this.scheduleGc():le(this,fr).remove(this))}continue(){var e;return((e=le(this,Pl))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,s,i,a,l,u,c,d,f,h,p,m,g,y,v,b,x,w,S,$;We(this,Pl,VB({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(C,k)=>{Yn(this,Es,qi).call(this,{type:"failed",failureCount:C,error:k})},onPause:()=>{Yn(this,Es,qi).call(this,{type:"pause"})},onContinue:()=>{Yn(this,Es,qi).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>le(this,fr).canRun(this)}));const n=this.state.status==="pending",r=!le(this,Pl).canStart();try{if(!n){Yn(this,Es,qi).call(this,{type:"pending",variables:e,isPaused:r}),await((s=(o=le(this,fr).config).onMutate)==null?void 0:s.call(o,e,this));const k=await((a=(i=this.options).onMutate)==null?void 0:a.call(i,e));k!==this.state.context&&Yn(this,Es,qi).call(this,{type:"pending",context:k,variables:e,isPaused:r})}const C=await le(this,Pl).start();return await((u=(l=le(this,fr).config).onSuccess)==null?void 0:u.call(l,C,e,this.state.context,this)),await((d=(c=this.options).onSuccess)==null?void 0:d.call(c,C,e,this.state.context)),await((h=(f=le(this,fr).config).onSettled)==null?void 0:h.call(f,C,null,this.state.variables,this.state.context,this)),await((m=(p=this.options).onSettled)==null?void 0:m.call(p,C,null,e,this.state.context)),Yn(this,Es,qi).call(this,{type:"success",data:C}),C}catch(C){try{throw await((y=(g=le(this,fr).config).onError)==null?void 0:y.call(g,C,e,this.state.context,this)),await((b=(v=this.options).onError)==null?void 0:b.call(v,C,e,this.state.context)),await((w=(x=le(this,fr).config).onSettled)==null?void 0:w.call(x,void 0,C,this.state.variables,this.state.context,this)),await(($=(S=this.options).onSettled)==null?void 0:$.call(S,void 0,C,e,this.state.context)),C}finally{Yn(this,Es,qi).call(this,{type:"error",error:C})}}finally{le(this,fr).runNext(this)}}},Ts=new WeakMap,fr=new WeakMap,Pl=new WeakMap,Es=new WeakSet,qi=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),mr.batch(()=>{le(this,Ts).forEach(r=>{r.onMutationUpdate(e)}),le(this,fr).notify({mutation:this,type:"updated",action:e})})},oF);function qY(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Hr,bp,sF,XY=(sF=class extends j0{constructor(e={}){super();ft(this,Hr);ft(this,bp);this.config=e,We(this,Hr,new Map),We(this,bp,Date.now())}build(e,n,r){const o=new KY({mutationCache:this,mutationId:++eg(this,bp)._,options:e.defaultMutationOptions(n),state:r});return this.add(o),o}add(e){const n=Cg(e),r=le(this,Hr).get(n)??[];r.push(e),le(this,Hr).set(n,r),this.notify({type:"added",mutation:e})}remove(e){var r;const n=Cg(e);if(le(this,Hr).has(n)){const o=(r=le(this,Hr).get(n))==null?void 0:r.filter(s=>s!==e);o&&(o.length===0?le(this,Hr).delete(n):le(this,Hr).set(n,o))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const n=(r=le(this,Hr).get(Cg(e)))==null?void 0:r.find(o=>o.state.status==="pending");return!n||n===e}runNext(e){var r;const n=(r=le(this,Hr).get(Cg(e)))==null?void 0:r.find(o=>o!==e&&o.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){mr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...le(this,Hr).values()].flat()}find(e){const n={exact:!0,...e};return this.getAll().find(r=>nO(n,r))}findAll(e={}){return this.getAll().filter(n=>nO(e,n))}notify(e){mr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return mr.batch(()=>Promise.all(e.map(n=>n.continue().catch(Xo))))}},Hr=new WeakMap,bp=new WeakMap,sF);function Cg(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function sO(t){return{onFetch:(e,n)=>{var c,d,f,h,p;const r=e.options,o=(f=(d=(c=e.fetchOptions)==null?void 0:c.meta)==null?void 0:d.fetchMore)==null?void 0:f.direction,s=((h=e.state.data)==null?void 0:h.pages)||[],i=((p=e.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const u=async()=>{let m=!1;const g=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(e.signal.aborted?m=!0:e.signal.addEventListener("abort",()=>{m=!0}),e.signal)})},y=BB(e.options,e.fetchOptions),v=async(b,x,w)=>{if(m)return Promise.reject();if(x==null&&b.pages.length)return Promise.resolve(b);const S={queryKey:e.queryKey,pageParam:x,direction:w?"backward":"forward",meta:e.options.meta};g(S);const $=await y(S),{maxPages:C}=e.options,k=w?FY:MY;return{pages:k(b.pages,$,C),pageParams:k(b.pageParams,x,C)}};if(o&&s.length){const b=o==="backward",x=b?YY:iO,w={pages:s,pageParams:i},S=x(r,w);a=await v(w,S,b)}else{const b=t??s.length;do{const x=l===0?i[0]??r.initialPageParam:iO(r,a);if(l>0&&x==null)break;a=await v(a,x),l++}while(l<b)}return a};e.options.persister?e.fetchFn=()=>{var m,g;return(g=(m=e.options).persister)==null?void 0:g.call(m,u,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function iO(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function YY(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Yt,oa,sa,$c,kc,ia,Ic,Tc,iF,QY=(iF=class{constructor(t={}){ft(this,Yt);ft(this,oa);ft(this,sa);ft(this,$c);ft(this,kc);ft(this,ia);ft(this,Ic);ft(this,Tc);We(this,Yt,t.queryCache||new HY),We(this,oa,t.mutationCache||new XY),We(this,sa,t.defaultOptions||{}),We(this,$c,new Map),We(this,kc,new Map),We(this,ia,0)}mount(){eg(this,ia)._++,le(this,ia)===1&&(We(this,Ic,zB.subscribe(async t=>{t&&(await this.resumePausedMutations(),le(this,Yt).onFocus())})),We(this,Tc,Uy.subscribe(async t=>{t&&(await this.resumePausedMutations(),le(this,Yt).onOnline())})))}unmount(){var t,e;eg(this,ia)._--,le(this,ia)===0&&((t=le(this,Ic))==null||t.call(this),We(this,Ic,void 0),(e=le(this,Tc))==null||e.call(this),We(this,Tc,void 0))}isFetching(t){return le(this,Yt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return le(this,oa).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=le(this,Yt).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=le(this,Yt).build(this,n);return t.revalidateIfStale&&r.isStaleByTime(eO(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return le(this,Yt).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),o=le(this,Yt).get(r.queryHash),s=o==null?void 0:o.state.data,i=AY(e,s);if(i!==void 0)return le(this,Yt).build(this,r).setData(i,{...n,manual:!0})}setQueriesData(t,e,n){return mr.batch(()=>le(this,Yt).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=le(this,Yt).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=le(this,Yt);mr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=le(this,Yt),r={type:"active",...t};return mr.batch(()=>(n.findAll(t).forEach(o=>{o.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=mr.batch(()=>le(this,Yt).findAll(t).map(o=>o.cancel(n)));return Promise.all(r).then(Xo).catch(Xo)}invalidateQueries(t={},e={}){return mr.batch(()=>{if(le(this,Yt).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=mr.batch(()=>le(this,Yt).findAll(t).filter(o=>!o.isDisabled()).map(o=>{let s=o.fetch(void 0,n);return n.throwOnError||(s=s.catch(Xo)),o.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(Xo)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=le(this,Yt).build(this,e);return n.isStaleByTime(eO(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Xo).catch(Xo)}fetchInfiniteQuery(t){return t.behavior=sO(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Xo).catch(Xo)}ensureInfiniteQueryData(t){return t.behavior=sO(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Uy.isOnline()?le(this,oa).resumePausedMutations():Promise.resolve()}getQueryCache(){return le(this,Yt)}getMutationCache(){return le(this,oa)}getDefaultOptions(){return le(this,sa)}setDefaultOptions(t){We(this,sa,t)}setQueryDefaults(t,e){le(this,$c).set(Ih(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...le(this,$c).values()];let n={};return e.forEach(r=>{Th(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,e){le(this,kc).set(Ih(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...le(this,kc).values()];let n={};return e.forEach(r=>{Th(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...le(this,sa).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=wI(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===SI&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...le(this,sa).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){le(this,Yt).clear(),le(this,oa).clear()}},Yt=new WeakMap,oa=new WeakMap,sa=new WeakMap,$c=new WeakMap,kc=new WeakMap,ia=new WeakMap,Ic=new WeakMap,Tc=new WeakMap,iF),ZY=A.createContext(void 0),JY=({client:t,children:e})=>(A.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),R.jsx(ZY.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gy(){return Gy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gy.apply(this,arguments)}var ua;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ua||(ua={}));const aO="popstate";function eQ(t){t===void 0&&(t={});function e(r,o){let{pathname:s,search:i,hash:a}=r.location;return QS("",{pathname:s,search:i,hash:a},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){return typeof o=="string"?o:HB(o)}return nQ(e,n,null,t)}function Lr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function GB(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function tQ(){return Math.random().toString(36).substr(2,8)}function lO(t,e){return{usr:t.state,key:t.key,idx:e}}function QS(t,e,n,r){return n===void 0&&(n=null),Gy({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?V0(e):e,{state:n,key:e&&e.key||r||tQ()})}function HB(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function V0(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function nQ(t,e,n,r){r===void 0&&(r={});let{window:o=document.defaultView,v5Compat:s=!1}=r,i=o.history,a=ua.Pop,l=null,u=c();u==null&&(u=0,i.replaceState(Gy({},i.state,{idx:u}),""));function c(){return(i.state||{idx:null}).idx}function d(){a=ua.Pop;let g=c(),y=g==null?null:g-u;u=g,l&&l({action:a,location:m.location,delta:y})}function f(g,y){a=ua.Push;let v=QS(m.location,g,y);u=c()+1;let b=lO(v,u),x=m.createHref(v);try{i.pushState(b,"",x)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;o.location.assign(x)}s&&l&&l({action:a,location:m.location,delta:1})}function h(g,y){a=ua.Replace;let v=QS(m.location,g,y);u=c();let b=lO(v,u),x=m.createHref(v);i.replaceState(b,"",x),s&&l&&l({action:a,location:m.location,delta:0})}function p(g){let y=o.location.origin!=="null"?o.location.origin:o.location.href,v=typeof g=="string"?g:HB(g);return v=v.replace(/ $/,"%20"),Lr(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return a},get location(){return t(o,i)},listen(g){if(l)throw new Error("A history only accepts one active listener");return o.addEventListener(aO,d),l=g,()=>{o.removeEventListener(aO,d),l=null}},createHref(g){return e(o,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:h,go(g){return i.go(g)}};return m}var uO;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(uO||(uO={}));function rQ(t,e,n){return n===void 0&&(n="/"),oQ(t,e,n,!1)}function oQ(t,e,n,r){let o=typeof e=="string"?V0(e):e,s=XB(o.pathname||"/",n);if(s==null)return null;let i=KB(t);sQ(i);let a=null;for(let l=0;a==null&&l<i.length;++l){let u=gQ(s);a=pQ(i[l],u,r)}return a}function KB(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let o=(s,i,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:i,route:s};l.relativePath.startsWith("/")&&(Lr(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=cc([r,l.relativePath]),c=n.concat(l);s.children&&s.children.length>0&&(Lr(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),KB(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:fQ(u,s.index),routesMeta:c})};return t.forEach((s,i)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))o(s,i);else for(let l of qB(s.path))o(s,i,l)}),e}function qB(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,o=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return o?[s,""]:[s];let i=qB(r.join("/")),a=[];return a.push(...i.map(l=>l===""?s:[s,l].join("/"))),o&&a.push(...i),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function sQ(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:hQ(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const iQ=/^:[\w-]+$/,aQ=3,lQ=2,uQ=1,cQ=10,dQ=-2,cO=t=>t==="*";function fQ(t,e){let n=t.split("/"),r=n.length;return n.some(cO)&&(r+=dQ),e&&(r+=lQ),n.filter(o=>!cO(o)).reduce((o,s)=>o+(iQ.test(s)?aQ:s===""?uQ:cQ),r)}function hQ(t,e){return t.length===e.length&&t.slice(0,-1).every((r,o)=>r===e[o])?t[t.length-1]-e[e.length-1]:0}function pQ(t,e,n){let{routesMeta:r}=t,o={},s="/",i=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=s==="/"?e:e.slice(s.length)||"/",d=dO({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),f=l.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=dO({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!d)return null;Object.assign(o,d.params),i.push({params:o,pathname:cc([s,d.pathname]),pathnameBase:yQ(cc([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=cc([s,d.pathnameBase]))}return i}function dO(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=mQ(t.path,t.caseSensitive,t.end),o=e.match(n);if(!o)return null;let s=o[0],i=s.replace(/(.)\/+$/,"$1"),a=o.slice(1);return{params:r.reduce((u,c,d)=>{let{paramName:f,isOptional:h}=c;if(f==="*"){let m=a[d]||"";i=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[d];return h&&!p?u[f]=void 0:u[f]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:i,pattern:t}}function mQ(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),GB(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function gQ(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return GB(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function XB(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const cc=t=>t.join("/").replace(/\/\/+/g,"/"),yQ=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/");function vQ(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const YB=["post","put","patch","delete"];new Set(YB);const xQ=["get",...YB];new Set(xQ);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hy(){return Hy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hy.apply(this,arguments)}const bQ=A.createContext(null),wQ=A.createContext(null),QB=A.createContext(null),U0=A.createContext(null),G0=A.createContext({outlet:null,matches:[],isDataRoute:!1}),ZB=A.createContext(null);function CI(){return A.useContext(U0)!=null}function JB(){return CI()||Lr(!1),A.useContext(U0).location}function SQ(t,e){return CQ(t,e)}function CQ(t,e,n,r){CI()||Lr(!1);let{navigator:o}=A.useContext(QB),{matches:s}=A.useContext(G0),i=s[s.length-1],a=i?i.params:{};i&&i.pathname;let l=i?i.pathnameBase:"/";i&&i.route;let u=JB(),c;if(e){var d;let g=typeof e=="string"?V0(e):e;l==="/"||(d=g.pathname)!=null&&d.startsWith(l)||Lr(!1),c=g}else c=u;let f=c.pathname||"/",h=f;if(l!=="/"){let g=l.replace(/^\//,"").split("/");h="/"+f.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=rQ(t,{pathname:h}),m=EQ(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:cc([l,o.encodeLocation?o.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?l:cc([l,o.encodeLocation?o.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,n,r);return e&&m?A.createElement(U0.Provider,{value:{location:Hy({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:ua.Pop}},m):m}function $Q(){let t=_Q(),e=vQ(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:o},n):null,null)}const kQ=A.createElement($Q,null);class IQ extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?A.createElement(G0.Provider,{value:this.props.routeContext},A.createElement(ZB.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function TQ(t){let{routeContext:e,match:n,children:r}=t,o=A.useContext(bQ);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),A.createElement(G0.Provider,{value:e},r)}function EQ(t,e,n,r){var o;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,a=(o=n)==null?void 0:o.errors;if(a!=null){let c=i.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);c>=0||Lr(!1),i=i.slice(0,Math.min(i.length,c+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<i.length;c++){let d=i[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:f,errors:h}=n,p=d.route.loader&&f[d.route.id]===void 0&&(!h||h[d.route.id]===void 0);if(d.route.lazy||p){l=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((c,d,f)=>{let h,p=!1,m=null,g=null;n&&(h=a&&d.route.id?a[d.route.id]:void 0,m=d.route.errorElement||kQ,l&&(u<0&&f===0?(p=!0,g=null):u===f&&(p=!0,g=d.route.hydrateFallbackElement||null)));let y=e.concat(i.slice(0,f+1)),v=()=>{let b;return h?b=m:p?b=g:d.route.Component?b=A.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=c,A.createElement(TQ,{match:d,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:b})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?A.createElement(IQ,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var ZS=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ZS||{});function NQ(t){let e=A.useContext(wQ);return e||Lr(!1),e}function AQ(t){let e=A.useContext(G0);return e||Lr(!1),e}function OQ(t){let e=AQ(),n=e.matches[e.matches.length-1];return n.route.id||Lr(!1),n.route.id}function _Q(){var t;let e=A.useContext(ZB),n=NQ(ZS.UseRouteError),r=OQ(ZS.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function JS(t){Lr(!1)}function RQ(t){let{basename:e="/",children:n=null,location:r,navigationType:o=ua.Pop,navigator:s,static:i=!1,future:a}=t;CI()&&Lr(!1);let l=e.replace(/^\/*/,"/"),u=A.useMemo(()=>({basename:l,navigator:s,static:i,future:Hy({v7_relativeSplatPath:!1},a)}),[l,a,s,i]);typeof r=="string"&&(r=V0(r));let{pathname:c="/",search:d="",hash:f="",state:h=null,key:p="default"}=r,m=A.useMemo(()=>{let g=XB(c,l);return g==null?null:{location:{pathname:g,search:d,hash:f,state:h,key:p},navigationType:o}},[l,c,d,f,h,p,o]);return m==null?null:A.createElement(QB.Provider,{value:u},A.createElement(U0.Provider,{children:n,value:m}))}function PQ(t){let{children:e,location:n}=t;return SQ(eC(e),n)}new Promise(()=>{});function eC(t,e){e===void 0&&(e=[]);let n=[];return A.Children.forEach(t,(r,o)=>{if(!A.isValidElement(r))return;let s=[...e,o];if(r.type===A.Fragment){n.push.apply(n,eC(r.props.children,s));return}r.type!==JS&&Lr(!1),!r.props.index||!r.props.children||Lr(!1);let i={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=eC(r.props.children,s)),n.push(i)}),n}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const DQ="6";try{window.__reactRouterVersion=DQ}catch{}const MQ="startTransition",fO=vF[MQ];function FQ(t){let{basename:e,children:n,future:r,window:o}=t,s=A.useRef();s.current==null&&(s.current=eQ({window:o,v5Compat:!0}));let i=s.current,[a,l]=A.useState({action:i.action,location:i.location}),{v7_startTransition:u}=r||{},c=A.useCallback(d=>{u&&fO?fO(()=>l(d)):l(d)},[l,u]);return A.useLayoutEffect(()=>i.listen(c),[i,c]),A.createElement(RQ,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:i,future:r})}var hO;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(hO||(hO={}));var pO;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(pO||(pO={}));const LQ=Z3("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Qi=A.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...o},s)=>{const i=r?Ch:"button";return R.jsx(i,{className:Ut(LQ({variant:e,size:n,className:t})),ref:s,...o})});Qi.displayName="Button";const Yl=A.forwardRef(({className:t,...e},n)=>R.jsx("div",{ref:n,className:Ut("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Yl.displayName="Card";const Fc=A.forwardRef(({className:t,...e},n)=>R.jsx("div",{ref:n,className:Ut("flex flex-col space-y-1.5 p-6",t),...e}));Fc.displayName="CardHeader";const Lc=A.forwardRef(({className:t,...e},n)=>R.jsx("h3",{ref:n,className:Ut("text-2xl font-semibold leading-none tracking-tight",t),...e}));Lc.displayName="CardTitle";const Bc=A.forwardRef(({className:t,...e},n)=>R.jsx("p",{ref:n,className:Ut("text-sm text-muted-foreground",t),...e}));Bc.displayName="CardDescription";const Ql=A.forwardRef(({className:t,...e},n)=>R.jsx("div",{ref:n,className:Ut("p-6 pt-0",t),...e}));Ql.displayName="CardContent";const tC=A.forwardRef(({className:t,...e},n)=>R.jsx("div",{ref:n,className:Ut("flex items-center p-6 pt-0",t),...e}));tC.displayName="CardFooter";const BQ=({onFilesUploaded:t,onAnalyzeClick:e,filesReady:n})=>{const[r,o]=A.useState({default:null,history:null}),s=A.useRef(null),i=A.useRef(null),a=(c,d)=>{if(d.target.files&&d.target.files[0]){const f={...r,[c]:d.target.files[0]};o(f),f.default&&f.history&&t(f)}},l=c=>{c==="default"&&s.current?s.current.click():c==="history"&&i.current&&i.current.click()},u=r.default&&r.history;return R.jsxs("div",{className:"flex flex-col space-y-6",children:[R.jsx("div",{className:"flex justify-center",children:R.jsxs(Qi,{onClick:()=>window.open("https://aashif000.github.io/Loan-Prediction-Data-Science/","_blank"),variant:"link",className:"text-amber-700 hover:text-amber-900 font-semibold",children:[R.jsx(fl,{className:"w-4 h-4 mr-2"}),"View Assignment Given Dataset Analysis"]})}),R.jsx("div",{className:"bg-finance-slate/50 p-4 rounded-lg border border-amber-300 mb-2",children:R.jsxs("div",{className:"flex items-start",children:[R.jsx(fl,{className:"h-5 w-5 text-amber-500 mt-1 mr-2 flex-shrink-0"}),R.jsxs("div",{children:[R.jsx("h4",{className:"font-semibold text-amber-700 mb-1",children:"CSV Format Requirements"}),R.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Please ensure your CSV files have the following columns:"}),R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[R.jsxs("div",{children:[R.jsx("p",{className:"text-xs font-semibold text-gray-700",children:"payment_default.csv:"}),R.jsxs("ul",{className:"list-disc list-inside text-xs text-gray-600 ml-2",children:[R.jsx("li",{children:"client_id"}),R.jsx("li",{children:"credit_given"}),R.jsx("li",{children:"gender"}),R.jsx("li",{children:"education"}),R.jsx("li",{children:"marital_status"}),R.jsx("li",{children:"month"}),R.jsx("li",{children:"default"})]})]}),R.jsxs("div",{children:[R.jsx("p",{className:"text-xs font-semibold text-gray-700",children:"payment_history.csv:"}),R.jsxs("ul",{className:"list-disc list-inside text-xs text-gray-600 ml-2",children:[R.jsx("li",{children:"client_id"}),R.jsx("li",{children:"payment_status"}),R.jsx("li",{children:"bill_amt"}),R.jsx("li",{children:"paid_amt"}),R.jsx("li",{children:"month"})]})]}),R.jsx("h4",{className:"font-semibold text-amber-700 mb-1",children:"NOTE:: Uploading large Datasets may consume lot of time for response"}),R.jsxs("h4",{className:"font-semibold text-amber-700 mb-1",children:["No DataSet ??, No Problem !, Use these links to download sample dataset for testing:",R.jsx("div",{className:"flex justify-center",children:R.jsxs(Qi,{onClick:()=>window.open("https://drive.google.com/file/d/1xwRA8W3ig1PsEkOO040JQyAO5eOK1UzG/view?usp=drive_link","_blank"),variant:"link",className:"text-amber-700 hover:text-amber-900 font-semibold",children:[R.jsx(fl,{className:"w-4 h-4 mr-2"}),"Download Default Dataset"]})}),R.jsx("div",{className:"flex justify-center",children:R.jsxs(Qi,{onClick:()=>window.open("https://drive.google.com/file/d/1pD-jIm3SThEZl77ArtrqV-4M7KkiQgiU/view?usp=drive_link","_blank"),variant:"link",className:"text-amber-700 hover:text-amber-900 font-semibold",children:[R.jsx(fl,{className:"w-4 h-4 mr-2"}),"Download History Dataset"]})})]})]})]})]})}),R.jsxs("div",{className:"flex flex-col md:flex-row gap-4 w-full",children:[R.jsxs(Yl,{className:"flex-1 flex flex-col",children:[R.jsx(Fc,{children:R.jsxs("div",{className:"flex justify-between items-start",children:[R.jsxs("div",{children:[R.jsx(Lc,{className:"text-finance-blue",children:"Payment Default Data"}),R.jsx(Bc,{children:"Upload payment_default.csv file"})]}),R.jsx(qS,{children:R.jsxs(ZA,{children:[R.jsx(JA,{asChild:!0,children:R.jsx("div",{className:"cursor-help",children:R.jsx(fl,{className:"h-4 w-4 text-gray-400"})})}),R.jsx(XS,{side:"top",className:"max-w-sm",children:R.jsx("p",{className:"text-xs",children:"File must contain columns: client_id, credit_given, gender, education, marital_status, month, default"})})]})})]})}),R.jsx(Ql,{className:"flex-1 flex flex-col items-center justify-center p-6 border-2 border-dashed border-gray-200 rounded-md bg-finance-slate cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>l("default"),children:r.default?R.jsxs("div",{className:"flex flex-col items-center animate-fade-in",children:[R.jsx(BS,{className:"h-12 w-12 text-green-500 mb-4"}),R.jsx("p",{className:"text-sm font-medium",children:r.default.name}),R.jsxs("p",{className:"text-xs text-gray-500",children:[(r.default.size/1024).toFixed(2)," KB"]})]}):R.jsxs("div",{className:"flex flex-col items-center",children:[R.jsx(BA,{className:"h-12 w-12 text-gray-400 mb-4"}),R.jsx("p",{className:"text-sm text-gray-500",children:"Click to upload payment_default.csv"})]})}),R.jsxs(tC,{children:[R.jsx("input",{ref:s,type:"file",accept:".csv",className:"hidden",onChange:c=>a("default",c)}),R.jsx(Qi,{variant:"outline",className:"w-full",onClick:()=>l("default"),children:r.default?"Change File":"Select File"})]})]}),R.jsxs(Yl,{className:"flex-1 flex flex-col",children:[R.jsx(Fc,{children:R.jsxs("div",{className:"flex justify-between items-start",children:[R.jsxs("div",{children:[R.jsx(Lc,{className:"text-finance-darkblue",children:"Payment History Data"}),R.jsx(Bc,{children:"Upload payment_history.csv file"})]}),R.jsx(qS,{children:R.jsxs(ZA,{children:[R.jsx(JA,{asChild:!0,children:R.jsx("div",{className:"cursor-help",children:R.jsx(fl,{className:"h-4 w-4 text-gray-400"})})}),R.jsx(XS,{side:"top",className:"max-w-sm",children:R.jsx("p",{className:"text-xs",children:"File must contain columns: client_id, payment_status, bill_amt, paid_amt, month"})})]})})]})}),R.jsx(Ql,{className:"flex-1 flex flex-col items-center justify-center p-6 border-2 border-dashed border-gray-200 rounded-md bg-finance-slate cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>l("history"),children:r.history?R.jsxs("div",{className:"flex flex-col items-center animate-fade-in",children:[R.jsx(BS,{className:"h-12 w-12 text-green-500 mb-4"}),R.jsx("p",{className:"text-sm font-medium",children:r.history.name}),R.jsxs("p",{className:"text-xs text-gray-500",children:[(r.history.size/1024).toFixed(2)," KB"]})]}):R.jsxs("div",{className:"flex flex-col items-center",children:[R.jsx(BA,{className:"h-12 w-12 text-gray-400 mb-4"}),R.jsx("p",{className:"text-sm text-gray-500",children:"Click to upload payment_history.csv"})]})}),R.jsxs(tC,{children:[R.jsx("input",{ref:i,type:"file",accept:".csv",className:"hidden",onChange:c=>a("history",c)}),R.jsx(Qi,{variant:"outline",className:"w-full",onClick:()=>l("history"),children:r.history?"Change File":"Select File"})]})]})]}),u&&R.jsx("div",{className:"flex justify-center",children:R.jsxs(Qi,{onClick:e,size:"lg",className:"bg-finance-blue hover:bg-finance-blue/90 text-white font-medium py-2 px-8 rounded-md shadow-lg transition-all duration-300 hover:shadow-xl hover:scale-105 animate-fade-in",children:[R.jsx(eB,{className:"w-5 h-5 mr-2"}),"Analyze Payment Data"]})})]})};function zQ(t,e=[]){let n=[];function r(s,i){const a=A.createContext(i),l=n.length;n=[...n,i];function u(d){const{scope:f,children:h,...p}=d,m=(f==null?void 0:f[t][l])||a,g=A.useMemo(()=>p,Object.values(p));return R.jsx(m.Provider,{value:g,children:h})}function c(d,f){const h=(f==null?void 0:f[t][l])||a,p=A.useContext(h);if(p)return p;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,c]}const o=()=>{const s=n.map(i=>A.createContext(i));return function(a){const l=(a==null?void 0:a[t])||s;return A.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return o.scopeName=t,[r,jQ(o,...e)]}function jQ(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(s){const i=r.reduce((a,{useScope:l,scopeName:u})=>{const d=l(s)[`__scope${u}`];return{...a,...d}},{});return A.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return n.scopeName=e.scopeName,n}var $I="Progress",kI=100,[WQ,a8e]=zQ($I),[VQ,UQ]=WQ($I),ez=A.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:o,getValueLabel:s=GQ,...i}=t;(o||o===0)&&!mO(o)&&console.error(HQ(`${o}`,"Progress"));const a=mO(o)?o:kI;r!==null&&!gO(r,a)&&console.error(KQ(`${r}`,"Progress"));const l=gO(r,a)?r:null,u=Ky(l)?s(l,a):void 0;return R.jsx(VQ,{scope:n,value:l,max:a,children:R.jsx(ur.div,{"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":Ky(l)?l:void 0,"aria-valuetext":u,role:"progressbar","data-state":rz(l,a),"data-value":l??void 0,"data-max":a,...i,ref:e})})});ez.displayName=$I;var tz="ProgressIndicator",nz=A.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,o=UQ(tz,n);return R.jsx(ur.div,{"data-state":rz(o.value,o.max),"data-value":o.value??void 0,"data-max":o.max,...r,ref:e})});nz.displayName=tz;function GQ(t,e){return`${Math.round(t/e*100)}%`}function rz(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Ky(t){return typeof t=="number"}function mO(t){return Ky(t)&&!isNaN(t)&&t>0}function gO(t,e){return Ky(t)&&!isNaN(t)&&t<=e&&t>=0}function HQ(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${kI}\`.`}function KQ(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${kI} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var oz=ez,qQ=nz;const sz=A.forwardRef(({className:t,value:e,...n},r)=>R.jsx(oz,{ref:r,className:Ut("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:R.jsx(qQ,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));sz.displayName=oz.displayName;const XQ=({isProcessing:t,stage:e,progress:n,filesReady:r=!1,error:o=null})=>!t&&!r&&!o?null:R.jsx(Yl,{className:"w-full animate-fade-in",children:R.jsx(Ql,{className:"pt-6",children:R.jsx("div",{className:"flex flex-col items-center",children:o?R.jsxs(R.Fragment,{children:[R.jsx(LX,{className:"h-8 w-8 text-finance-red mb-2 animate-pulse"}),R.jsx("h3",{className:"text-lg font-medium text-finance-red",children:"Error Processing Files"}),R.jsx("p",{className:"text-sm text-muted-foreground mt-2 text-center",children:o}),R.jsxs("div",{className:"bg-finance-slate/80 mt-4 p-3 rounded-md w-full max-w-xl",children:[R.jsx("p",{className:"text-xs text-gray-600",children:R.jsx("strong",{children:"Common issues:"})}),R.jsxs("ul",{className:"list-disc list-inside text-xs text-gray-600 mt-1",children:[R.jsx("li",{children:"Make sure your CSV files are formatted correctly with all required columns"}),R.jsx("li",{children:"Check for special characters or encoding issues in your CSV"}),R.jsx("li",{children:"Ensure the column names match exactly (client_id, credit_given, etc.)"}),R.jsx("li",{children:"Try with a different CSV delimiter (comma, semicolon, tab)"})]}),R.jsx("div",{className:"mt-3 bg-blue-50 p-2 rounded-md border border-blue-200",children:R.jsxs("div",{className:"flex items-start",children:[R.jsx(fl,{className:"h-4 w-4 text-blue-500 mt-0.5 mr-2"}),R.jsxs("div",{children:[R.jsx("p",{className:"text-xs font-medium text-blue-700",children:"CSV Format Tips"}),R.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"We now support multiple CSV formats and will automatically try different delimiters (comma, semicolon, tab, pipe). If you're still seeing errors, try converting your CSV to use comma separators."})]})]})})]})]}):t?R.jsxs(R.Fragment,{children:[R.jsx(MX,{className:"h-8 w-8 text-finance-blue animate-spin mb-2"}),R.jsx("h3",{className:"text-lg font-medium",children:e}),R.jsxs("div",{className:"w-full max-w-md mt-4",children:[R.jsx(sz,{value:n,className:"h-2"}),R.jsxs("p",{className:"text-sm text-muted-foreground mt-2 text-center",children:[n,"% complete"]}),n>10&&n<100&&R.jsx("div",{className:"mt-3 text-xs text-center text-gray-500",children:n<40?R.jsx("span",{children:"Parsing and validating CSV data..."}):n<70?R.jsx("span",{children:"Creating feature engineering pipeline..."}):R.jsx("span",{children:"Training model and generating predictions..."})})]})]}):r?R.jsxs(R.Fragment,{children:[R.jsx(BS,{className:"h-8 w-8 text-green-500 mb-2 animate-scale-in"}),R.jsx("h3",{className:"text-lg font-medium",children:"Files Ready for Analysis"}),R.jsxs("div",{className:"mt-3 flex items-center space-x-2",children:[R.jsx(eB,{className:"h-5 w-5 text-finance-blue"}),R.jsx("span",{className:"text-sm text-muted-foreground",children:"Files validated and ready for processing"})]}),R.jsx("div",{className:"mt-4 bg-finance-slate/50 p-3 rounded-md w-full max-w-lg",children:R.jsx("p",{className:"text-sm text-gray-700",children:'Click the "Analyze Payment Data" button to start processing the data and generate default predictions.'})})]}):null})})}),nC=A.forwardRef(({className:t,...e},n)=>R.jsx("div",{className:"relative w-full overflow-auto",children:R.jsx("table",{ref:n,className:Ut("w-full caption-bottom text-sm",t),...e})}));nC.displayName="Table";const iz=A.forwardRef(({className:t,...e},n)=>R.jsx("thead",{ref:n,className:Ut("[&_tr]:border-b bg-white sticky top-0 z-10",t),...e}));iz.displayName="TableHeader";const YQ=A.forwardRef(({className:t,...e},n)=>R.jsx("tbody",{ref:n,className:Ut("[&_tr:last-child]:border-0",t),...e}));YQ.displayName="TableBody";const QQ=A.forwardRef(({className:t,...e},n)=>R.jsx("tfoot",{ref:n,className:Ut("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));QQ.displayName="TableFooter";const rC=A.forwardRef(({className:t,...e},n)=>R.jsx("tr",{ref:n,className:Ut("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...e}));rC.displayName="TableRow";const _f=A.forwardRef(({className:t,...e},n)=>R.jsx("th",{ref:n,className:Ut("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));_f.displayName="TableHead";const Rf=A.forwardRef(({className:t,...e},n)=>R.jsx("td",{ref:n,className:Ut("px-4 py-2 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));Rf.displayName="TableCell";const ZQ=A.forwardRef(({className:t,...e},n)=>R.jsx("caption",{ref:n,className:Ut("mt-4 text-sm text-muted-foreground",t),...e}));ZQ.displayName="TableCaption";const az=A.forwardRef(({className:t,type:e,...n},r)=>R.jsx("input",{type:e,className:Ut("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));az.displayName="Input";function oC(){return oC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oC.apply(null,arguments)}function yO(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sC(t,e){return sC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},sC(t,e)}function JQ(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,sC(t,e)}var vO=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function eZ(t,e){return!!(t===e||vO(t)&&vO(e))}function tZ(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!eZ(t[n],e[n]))return!1;return!0}function q1(t,e){e===void 0&&(e=tZ);var n,r=[],o,s=!1;function i(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return s&&n===this&&e(a,r)||(o=t.apply(this,a),s=!0,n=this,r=a),o}return i}var nZ=typeof performance=="object"&&typeof performance.now=="function",xO=nZ?function(){return performance.now()}:function(){return Date.now()};function bO(t){cancelAnimationFrame(t.id)}function rZ(t,e){var n=xO();function r(){xO()-n>=e?t.call(null):o.id=requestAnimationFrame(r)}var o={id:requestAnimationFrame(r)};return o}var X1=-1;function wO(t){if(t===void 0&&(t=!1),X1===-1||t){var e=document.createElement("div"),n=e.style;n.width="50px",n.height="50px",n.overflow="scroll",document.body.appendChild(e),X1=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return X1}var Ou=null;function SO(t){if(t===void 0&&(t=!1),Ou===null||t){var e=document.createElement("div"),n=e.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";var r=document.createElement("div"),o=r.style;return o.width="100px",o.height="100px",e.appendChild(r),document.body.appendChild(e),e.scrollLeft>0?Ou="positive-descending":(e.scrollLeft=1,e.scrollLeft===0?Ou="negative":Ou="positive-ascending"),document.body.removeChild(e),Ou}return Ou}var oZ=150,sZ=function(e,n){return e};function iZ(t){var e,n=t.getItemOffset,r=t.getEstimatedTotalSize,o=t.getItemSize,s=t.getOffsetForIndexAndAlignment,i=t.getStartIndexForOffset,a=t.getStopIndexForStartIndex,l=t.initInstanceProps,u=t.shouldResetStyleCacheOnItemSizeChange,c=t.validateProps;return e=function(d){JQ(f,d);function f(p){var m;return m=d.call(this,p)||this,m._instanceProps=l(m.props,yO(m)),m._outerRef=void 0,m._resetIsScrollingTimeoutId=null,m.state={instance:yO(m),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof m.props.initialScrollOffset=="number"?m.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},m._callOnItemsRendered=void 0,m._callOnItemsRendered=q1(function(g,y,v,b){return m.props.onItemsRendered({overscanStartIndex:g,overscanStopIndex:y,visibleStartIndex:v,visibleStopIndex:b})}),m._callOnScroll=void 0,m._callOnScroll=q1(function(g,y,v){return m.props.onScroll({scrollDirection:g,scrollOffset:y,scrollUpdateWasRequested:v})}),m._getItemStyle=void 0,m._getItemStyle=function(g){var y=m.props,v=y.direction,b=y.itemSize,x=y.layout,w=m._getItemStyleCache(u&&b,u&&x,u&&v),S;if(w.hasOwnProperty(g))S=w[g];else{var $=n(m.props,g,m._instanceProps),C=o(m.props,g,m._instanceProps),k=v==="horizontal"||x==="horizontal",I=v==="rtl",T=k?$:0;w[g]=S={position:"absolute",left:I?void 0:T,right:I?T:void 0,top:k?0:$,height:k?"100%":C,width:k?C:"100%"}}return S},m._getItemStyleCache=void 0,m._getItemStyleCache=q1(function(g,y,v){return{}}),m._onScrollHorizontal=function(g){var y=g.currentTarget,v=y.clientWidth,b=y.scrollLeft,x=y.scrollWidth;m.setState(function(w){if(w.scrollOffset===b)return null;var S=m.props.direction,$=b;if(S==="rtl")switch(SO()){case"negative":$=-b;break;case"positive-descending":$=x-v-b;break}return $=Math.max(0,Math.min($,x-v)),{isScrolling:!0,scrollDirection:w.scrollOffset<$?"forward":"backward",scrollOffset:$,scrollUpdateWasRequested:!1}},m._resetIsScrollingDebounced)},m._onScrollVertical=function(g){var y=g.currentTarget,v=y.clientHeight,b=y.scrollHeight,x=y.scrollTop;m.setState(function(w){if(w.scrollOffset===x)return null;var S=Math.max(0,Math.min(x,b-v));return{isScrolling:!0,scrollDirection:w.scrollOffset<S?"forward":"backward",scrollOffset:S,scrollUpdateWasRequested:!1}},m._resetIsScrollingDebounced)},m._outerRefSetter=function(g){var y=m.props.outerRef;m._outerRef=g,typeof y=="function"?y(g):y!=null&&typeof y=="object"&&y.hasOwnProperty("current")&&(y.current=g)},m._resetIsScrollingDebounced=function(){m._resetIsScrollingTimeoutId!==null&&bO(m._resetIsScrollingTimeoutId),m._resetIsScrollingTimeoutId=rZ(m._resetIsScrolling,oZ)},m._resetIsScrolling=function(){m._resetIsScrollingTimeoutId=null,m.setState({isScrolling:!1},function(){m._getItemStyleCache(-1,null)})},m}f.getDerivedStateFromProps=function(m,g){return aZ(m,g),c(m),null};var h=f.prototype;return h.scrollTo=function(m){m=Math.max(0,m),this.setState(function(g){return g.scrollOffset===m?null:{scrollDirection:g.scrollOffset<m?"forward":"backward",scrollOffset:m,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},h.scrollToItem=function(m,g){g===void 0&&(g="auto");var y=this.props,v=y.itemCount,b=y.layout,x=this.state.scrollOffset;m=Math.max(0,Math.min(m,v-1));var w=0;if(this._outerRef){var S=this._outerRef;b==="vertical"?w=S.scrollWidth>S.clientWidth?wO():0:w=S.scrollHeight>S.clientHeight?wO():0}this.scrollTo(s(this.props,m,g,x,this._instanceProps,w))},h.componentDidMount=function(){var m=this.props,g=m.direction,y=m.initialScrollOffset,v=m.layout;if(typeof y=="number"&&this._outerRef!=null){var b=this._outerRef;g==="horizontal"||v==="horizontal"?b.scrollLeft=y:b.scrollTop=y}this._callPropsCallbacks()},h.componentDidUpdate=function(){var m=this.props,g=m.direction,y=m.layout,v=this.state,b=v.scrollOffset,x=v.scrollUpdateWasRequested;if(x&&this._outerRef!=null){var w=this._outerRef;if(g==="horizontal"||y==="horizontal")if(g==="rtl")switch(SO()){case"negative":w.scrollLeft=-b;break;case"positive-ascending":w.scrollLeft=b;break;default:var S=w.clientWidth,$=w.scrollWidth;w.scrollLeft=$-S-b;break}else w.scrollLeft=b;else w.scrollTop=b}this._callPropsCallbacks()},h.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&bO(this._resetIsScrollingTimeoutId)},h.render=function(){var m=this.props,g=m.children,y=m.className,v=m.direction,b=m.height,x=m.innerRef,w=m.innerElementType,S=m.innerTagName,$=m.itemCount,C=m.itemData,k=m.itemKey,I=k===void 0?sZ:k,T=m.layout,E=m.outerElementType,_=m.outerTagName,O=m.style,F=m.useIsScrolling,M=m.width,L=this.state.isScrolling,N=v==="horizontal"||T==="horizontal",D=N?this._onScrollHorizontal:this._onScrollVertical,U=this._getRangeToRender(),B=U[0],W=U[1],V=[];if($>0)for(var ee=B;ee<=W;ee++)V.push(A.createElement(g,{data:C,key:I(ee,C),index:ee,isScrolling:F?L:void 0,style:this._getItemStyle(ee)}));var ne=r(this.props,this._instanceProps);return A.createElement(E||_||"div",{className:y,onScroll:D,ref:this._outerRefSetter,style:oC({position:"relative",height:b,width:M,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:v},O)},A.createElement(w||S||"div",{children:V,ref:x,style:{height:N?"100%":ne,pointerEvents:L?"none":void 0,width:N?ne:"100%"}}))},h._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var m=this.props.itemCount;if(m>0){var g=this._getRangeToRender(),y=g[0],v=g[1],b=g[2],x=g[3];this._callOnItemsRendered(y,v,b,x)}}if(typeof this.props.onScroll=="function"){var w=this.state,S=w.scrollDirection,$=w.scrollOffset,C=w.scrollUpdateWasRequested;this._callOnScroll(S,$,C)}},h._getRangeToRender=function(){var m=this.props,g=m.itemCount,y=m.overscanCount,v=this.state,b=v.isScrolling,x=v.scrollDirection,w=v.scrollOffset;if(g===0)return[0,0,0,0];var S=i(this.props,w,this._instanceProps),$=a(this.props,S,w,this._instanceProps),C=!b||x==="backward"?Math.max(1,y):1,k=!b||x==="forward"?Math.max(1,y):1;return[Math.max(0,S-C),Math.max(0,Math.min(g-1,$+k)),S,$]},f}(A.PureComponent),e.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},e}var aZ=function(e,n){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,n.instance},lZ=iZ({getItemOffset:function(e,n){var r=e.itemSize;return n*r},getItemSize:function(e,n){var r=e.itemSize;return r},getEstimatedTotalSize:function(e){var n=e.itemCount,r=e.itemSize;return r*n},getOffsetForIndexAndAlignment:function(e,n,r,o,s,i){var a=e.direction,l=e.height,u=e.itemCount,c=e.itemSize,d=e.layout,f=e.width,h=a==="horizontal"||d==="horizontal",p=h?f:l,m=Math.max(0,u*c-p),g=Math.min(m,n*c),y=Math.max(0,n*c-p+c+i);switch(r==="smart"&&(o>=y-p&&o<=g+p?r="auto":r="center"),r){case"start":return g;case"end":return y;case"center":{var v=Math.round(y+(g-y)/2);return v<Math.ceil(p/2)?0:v>m+Math.floor(p/2)?m:v}case"auto":default:return o>=y&&o<=g?o:o<y?y:g}},getStartIndexForOffset:function(e,n){var r=e.itemCount,o=e.itemSize;return Math.max(0,Math.min(r-1,Math.floor(n/o)))},getStopIndexForStartIndex:function(e,n,r){var o=e.direction,s=e.height,i=e.itemCount,a=e.itemSize,l=e.layout,u=e.width,c=o==="horizontal"||l==="horizontal",d=n*a,f=c?u:s,h=Math.ceil((f+r-d)/a);return Math.max(0,Math.min(i-1,n+h-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.itemSize}});const uZ=({results:t})=>{const[e,n]=A.useState("");if(!t.length)return null;const r=t.filter(i=>i.client_id.toString().includes(e)),o=()=>{const a=[["client_id","probability_default","default_indicator"].join(","),...t.map(d=>[d.client_id,d.probability_default.toFixed(4),d.default_indicator].join(","))].join(`
`),l=new Blob([a],{type:"text/csv;charset=utf-8;"}),u=URL.createObjectURL(l),c=document.createElement("a");c.setAttribute("href",u),c.setAttribute("download",`default_predictions_${new Date().toISOString().slice(0,10)}.csv`),c.style.visibility="hidden",document.body.appendChild(c),c.click(),document.body.removeChild(c)},s={clientId:"25%",probability:"30%",indicator:"20%",risk:"25%"};return R.jsxs(Yl,{className:"w-full animate-fade-in",children:[R.jsx(Fc,{children:R.jsxs("div",{className:"flex justify-between items-center",children:[R.jsxs("div",{children:[R.jsx(Lc,{children:"Scoring Results"}),R.jsxs(Bc,{children:["Predictions for ",t.length," clients"]})]}),R.jsxs(Qi,{variant:"outline",size:"sm",onClick:o,children:[R.jsx(DX,{className:"h-4 w-4 mr-2"}),"Export"]})]})}),R.jsxs(Ql,{children:[R.jsx("div",{className:"flex items-center mb-4",children:R.jsxs("div",{className:"relative flex-1",children:[R.jsx(FX,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground pointer-events-none"}),R.jsx(az,{placeholder:"Search by client ID",value:e,onChange:i=>n(i.target.value),className:"pl-8"})]})}),R.jsxs("div",{className:"rounded-md border overflow-hidden",children:[R.jsx(nC,{children:R.jsx(iz,{children:R.jsxs(rC,{children:[R.jsx(_f,{style:{width:s.clientId},children:"Client ID"}),R.jsx(_f,{style:{width:s.probability},children:"Default Probability"}),R.jsx(_f,{style:{width:s.indicator},children:"Default Indicator"}),R.jsx(_f,{style:{width:s.risk},children:"Risk Level"})]})})}),r.length>0?R.jsx("div",{className:"max-h-64 overflow-auto",children:R.jsx(nC,{children:R.jsx(lZ,{height:256,width:"100%",itemCount:r.length,itemSize:48,className:"scrollbar-thin",overscanCount:5,children:({index:i,style:a})=>{const l=r[i];return R.jsxs(rC,{style:{...a,display:"flex",alignItems:"center",width:"100%"},children:[R.jsx(Rf,{style:{width:s.clientId},children:l.client_id}),R.jsx(Rf,{style:{width:s.probability},children:l.probability_default.toFixed(4)}),R.jsx(Rf,{style:{width:s.indicator},children:l.default_indicator}),R.jsx(Rf,{style:{width:s.risk},children:R.jsxs("div",{className:"flex items-center",children:[R.jsx("div",{className:`w-2 h-2 rounded-full mr-2 ${l.probability_default>=.7?"bg-finance-red":l.probability_default>=.3?"bg-yellow-500":"bg-finance-green"}`}),l.probability_default>=.7?"High":l.probability_default>=.3?"Medium":"Low"]})})]})}})})}):R.jsx("div",{className:"py-8 text-center",children:R.jsxs("div",{className:"flex flex-col items-center text-muted-foreground",children:[R.jsx(PX,{className:"h-8 w-8 mb-2"}),R.jsx("p",{children:"No matching results found"})]})})]})]})]})};var cZ=Array.isArray,Wr=cZ,dZ=typeof $o=="object"&&$o&&$o.Object===Object&&$o,lz=dZ,fZ=lz,hZ=typeof self=="object"&&self&&self.Object===Object&&self,pZ=fZ||hZ||Function("return this")(),ni=pZ,mZ=ni,gZ=mZ.Symbol,Ep=gZ,CO=Ep,uz=Object.prototype,yZ=uz.hasOwnProperty,vZ=uz.toString,mf=CO?CO.toStringTag:void 0;function xZ(t){var e=yZ.call(t,mf),n=t[mf];try{t[mf]=void 0;var r=!0}catch{}var o=vZ.call(t);return r&&(e?t[mf]=n:delete t[mf]),o}var bZ=xZ,wZ=Object.prototype,SZ=wZ.toString;function CZ(t){return SZ.call(t)}var $Z=CZ,$O=Ep,kZ=bZ,IZ=$Z,TZ="[object Null]",EZ="[object Undefined]",kO=$O?$O.toStringTag:void 0;function NZ(t){return t==null?t===void 0?EZ:TZ:kO&&kO in Object(t)?kZ(t):IZ(t)}var Fi=NZ;function AZ(t){return t!=null&&typeof t=="object"}var Li=AZ,OZ=Fi,_Z=Li,RZ="[object Symbol]";function PZ(t){return typeof t=="symbol"||_Z(t)&&OZ(t)==RZ}var Ed=PZ,DZ=Wr,MZ=Ed,FZ=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,LZ=/^\w*$/;function BZ(t,e){if(DZ(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||MZ(t)?!0:LZ.test(t)||!FZ.test(t)||e!=null&&t in Object(e)}var II=BZ;function zZ(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Ua=zZ;const Nd=ut(Ua);var jZ=Fi,WZ=Ua,VZ="[object AsyncFunction]",UZ="[object Function]",GZ="[object GeneratorFunction]",HZ="[object Proxy]";function KZ(t){if(!WZ(t))return!1;var e=jZ(t);return e==UZ||e==GZ||e==VZ||e==HZ}var TI=KZ;const qe=ut(TI);var qZ=ni,XZ=qZ["__core-js_shared__"],YZ=XZ,Y1=YZ,IO=function(){var t=/[^.]+$/.exec(Y1&&Y1.keys&&Y1.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function QZ(t){return!!IO&&IO in t}var ZZ=QZ,JZ=Function.prototype,eJ=JZ.toString;function tJ(t){if(t!=null){try{return eJ.call(t)}catch{}try{return t+""}catch{}}return""}var cz=tJ,nJ=TI,rJ=ZZ,oJ=Ua,sJ=cz,iJ=/[\\^$.*+?()[\]{}|]/g,aJ=/^\[object .+?Constructor\]$/,lJ=Function.prototype,uJ=Object.prototype,cJ=lJ.toString,dJ=uJ.hasOwnProperty,fJ=RegExp("^"+cJ.call(dJ).replace(iJ,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function hJ(t){if(!oJ(t)||rJ(t))return!1;var e=nJ(t)?fJ:aJ;return e.test(sJ(t))}var pJ=hJ;function mJ(t,e){return t==null?void 0:t[e]}var gJ=mJ,yJ=pJ,vJ=gJ;function xJ(t,e){var n=vJ(t,e);return yJ(n)?n:void 0}var pu=xJ,bJ=pu,wJ=bJ(Object,"create"),H0=wJ,TO=H0;function SJ(){this.__data__=TO?TO(null):{},this.size=0}var CJ=SJ;function $J(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var kJ=$J,IJ=H0,TJ="__lodash_hash_undefined__",EJ=Object.prototype,NJ=EJ.hasOwnProperty;function AJ(t){var e=this.__data__;if(IJ){var n=e[t];return n===TJ?void 0:n}return NJ.call(e,t)?e[t]:void 0}var OJ=AJ,_J=H0,RJ=Object.prototype,PJ=RJ.hasOwnProperty;function DJ(t){var e=this.__data__;return _J?e[t]!==void 0:PJ.call(e,t)}var MJ=DJ,FJ=H0,LJ="__lodash_hash_undefined__";function BJ(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=FJ&&e===void 0?LJ:e,this}var zJ=BJ,jJ=CJ,WJ=kJ,VJ=OJ,UJ=MJ,GJ=zJ;function Ad(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ad.prototype.clear=jJ;Ad.prototype.delete=WJ;Ad.prototype.get=VJ;Ad.prototype.has=UJ;Ad.prototype.set=GJ;var HJ=Ad;function KJ(){this.__data__=[],this.size=0}var qJ=KJ;function XJ(t,e){return t===e||t!==t&&e!==e}var EI=XJ,YJ=EI;function QJ(t,e){for(var n=t.length;n--;)if(YJ(t[n][0],e))return n;return-1}var K0=QJ,ZJ=K0,JJ=Array.prototype,eee=JJ.splice;function tee(t){var e=this.__data__,n=ZJ(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():eee.call(e,n,1),--this.size,!0}var nee=tee,ree=K0;function oee(t){var e=this.__data__,n=ree(e,t);return n<0?void 0:e[n][1]}var see=oee,iee=K0;function aee(t){return iee(this.__data__,t)>-1}var lee=aee,uee=K0;function cee(t,e){var n=this.__data__,r=uee(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var dee=cee,fee=qJ,hee=nee,pee=see,mee=lee,gee=dee;function Od(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Od.prototype.clear=fee;Od.prototype.delete=hee;Od.prototype.get=pee;Od.prototype.has=mee;Od.prototype.set=gee;var q0=Od,yee=pu,vee=ni,xee=yee(vee,"Map"),NI=xee,EO=HJ,bee=q0,wee=NI;function See(){this.size=0,this.__data__={hash:new EO,map:new(wee||bee),string:new EO}}var Cee=See;function $ee(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var kee=$ee,Iee=kee;function Tee(t,e){var n=t.__data__;return Iee(e)?n[typeof e=="string"?"string":"hash"]:n.map}var X0=Tee,Eee=X0;function Nee(t){var e=Eee(this,t).delete(t);return this.size-=e?1:0,e}var Aee=Nee,Oee=X0;function _ee(t){return Oee(this,t).get(t)}var Ree=_ee,Pee=X0;function Dee(t){return Pee(this,t).has(t)}var Mee=Dee,Fee=X0;function Lee(t,e){var n=Fee(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var Bee=Lee,zee=Cee,jee=Aee,Wee=Ree,Vee=Mee,Uee=Bee;function _d(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}_d.prototype.clear=zee;_d.prototype.delete=jee;_d.prototype.get=Wee;_d.prototype.has=Vee;_d.prototype.set=Uee;var AI=_d,dz=AI,Gee="Expected a function";function OI(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Gee);var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],s=n.cache;if(s.has(o))return s.get(o);var i=t.apply(this,r);return n.cache=s.set(o,i)||s,i};return n.cache=new(OI.Cache||dz),n}OI.Cache=dz;var fz=OI;const Hee=ut(fz);var Kee=fz,qee=500;function Xee(t){var e=Kee(t,function(r){return n.size===qee&&n.clear(),r}),n=e.cache;return e}var Yee=Xee,Qee=Yee,Zee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Jee=/\\(\\)?/g,ete=Qee(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Zee,function(n,r,o,s){e.push(o?s.replace(Jee,"$1"):r||n)}),e}),tte=ete;function nte(t,e){for(var n=-1,r=t==null?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}var _I=nte,NO=Ep,rte=_I,ote=Wr,ste=Ed,ite=1/0,AO=NO?NO.prototype:void 0,OO=AO?AO.toString:void 0;function hz(t){if(typeof t=="string")return t;if(ote(t))return rte(t,hz)+"";if(ste(t))return OO?OO.call(t):"";var e=t+"";return e=="0"&&1/t==-ite?"-0":e}var ate=hz,lte=ate;function ute(t){return t==null?"":lte(t)}var pz=ute,cte=Wr,dte=II,fte=tte,hte=pz;function pte(t,e){return cte(t)?t:dte(t,e)?[t]:fte(hte(t))}var mz=pte,mte=Ed,gte=1/0;function yte(t){if(typeof t=="string"||mte(t))return t;var e=t+"";return e=="0"&&1/t==-gte?"-0":e}var Y0=yte,vte=mz,xte=Y0;function bte(t,e){e=vte(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[xte(e[n++])];return n&&n==r?t:void 0}var RI=bte,wte=RI;function Ste(t,e,n){var r=t==null?void 0:wte(t,e);return r===void 0?n:r}var gz=Ste;const is=ut(gz);function Cte(t){return t==null}var $te=Cte;const Ye=ut($te);var kte=Fi,Ite=Wr,Tte=Li,Ete="[object String]";function Nte(t){return typeof t=="string"||!Ite(t)&&Tte(t)&&kte(t)==Ete}var Ate=Nte;const Np=ut(Ate);var yz={exports:{}},yt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PI=Symbol.for("react.element"),DI=Symbol.for("react.portal"),Q0=Symbol.for("react.fragment"),Z0=Symbol.for("react.strict_mode"),J0=Symbol.for("react.profiler"),ex=Symbol.for("react.provider"),tx=Symbol.for("react.context"),Ote=Symbol.for("react.server_context"),nx=Symbol.for("react.forward_ref"),rx=Symbol.for("react.suspense"),ox=Symbol.for("react.suspense_list"),sx=Symbol.for("react.memo"),ix=Symbol.for("react.lazy"),_te=Symbol.for("react.offscreen"),vz;vz=Symbol.for("react.module.reference");function Bo(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case PI:switch(t=t.type,t){case Q0:case J0:case Z0:case rx:case ox:return t;default:switch(t=t&&t.$$typeof,t){case Ote:case tx:case nx:case ix:case sx:case ex:return t;default:return e}}case DI:return e}}}yt.ContextConsumer=tx;yt.ContextProvider=ex;yt.Element=PI;yt.ForwardRef=nx;yt.Fragment=Q0;yt.Lazy=ix;yt.Memo=sx;yt.Portal=DI;yt.Profiler=J0;yt.StrictMode=Z0;yt.Suspense=rx;yt.SuspenseList=ox;yt.isAsyncMode=function(){return!1};yt.isConcurrentMode=function(){return!1};yt.isContextConsumer=function(t){return Bo(t)===tx};yt.isContextProvider=function(t){return Bo(t)===ex};yt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===PI};yt.isForwardRef=function(t){return Bo(t)===nx};yt.isFragment=function(t){return Bo(t)===Q0};yt.isLazy=function(t){return Bo(t)===ix};yt.isMemo=function(t){return Bo(t)===sx};yt.isPortal=function(t){return Bo(t)===DI};yt.isProfiler=function(t){return Bo(t)===J0};yt.isStrictMode=function(t){return Bo(t)===Z0};yt.isSuspense=function(t){return Bo(t)===rx};yt.isSuspenseList=function(t){return Bo(t)===ox};yt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Q0||t===J0||t===Z0||t===rx||t===ox||t===_te||typeof t=="object"&&t!==null&&(t.$$typeof===ix||t.$$typeof===sx||t.$$typeof===ex||t.$$typeof===tx||t.$$typeof===nx||t.$$typeof===vz||t.getModuleId!==void 0)};yt.typeOf=Bo;yz.exports=yt;var xz=yz.exports,Rte=Fi,Pte=Li,Dte="[object Number]";function Mte(t){return typeof t=="number"||Pte(t)&&Rte(t)==Dte}var bz=Mte;const Fte=ut(bz);var Lte=bz;function Bte(t){return Lte(t)&&t!=+t}var zte=Bte;const Ap=ut(zte);var Io=function(e){return e===0?0:e>0?1:-1},kl=function(e){return Np(e)&&e.indexOf("%")===e.length-1},Ce=function(e){return Fte(e)&&!Ap(e)},Tn=function(e){return Ce(e)||Np(e)},jte=0,ax=function(e){var n=++jte;return"".concat(e||"").concat(n)},Or=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ce(e)&&!Np(e))return r;var s;if(kl(e)){var i=e.indexOf("%");s=n*parseFloat(e.slice(0,i))/100}else s=+e;return Ap(s)&&(s=r),o&&s>n&&(s=n),s},Mu=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},Wte=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},o=0;o<n;o++)if(!r[e[o]])r[e[o]]=!0;else return!0;return!1},_O=function(e,n){return Ce(e)&&Ce(n)?function(r){return e+r*(n-e)}:function(){return n}};function iC(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):is(r,e))===n})}function aC(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function lC(t){"@babel/helpers - typeof";return lC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lC(t)}var Vte=["viewBox","children"],Ute=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],RO=["points","pathLength"],Q1={svg:Vte,polygon:RO,polyline:RO},MI=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],qy=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(A.isValidElement(e)&&(r=e.props),!Nd(r))return null;var o={};return Object.keys(r).forEach(function(s){MI.includes(s)&&(o[s]=n||function(i){return r[s](r,i)})}),o},Gte=function(e,n,r){return function(o){return e(n,r,o),null}},lx=function(e,n,r){if(!Nd(e)||lC(e)!=="object")return null;var o=null;return Object.keys(e).forEach(function(s){var i=e[s];MI.includes(s)&&typeof i=="function"&&(o||(o={}),o[s]=Gte(i,n,r))}),o},Hte=["children"],Kte=["children"];function PO(t,e){if(t==null)return{};var n=qte(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function qte(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var DO={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},xi=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},MO=null,Z1=null,FI=function t(e){if(e===MO&&Array.isArray(Z1))return Z1;var n=[];return A.Children.forEach(e,function(r){Ye(r)||(xz.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),Z1=n,MO=e,n};function Fs(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(o){return xi(o)}):r=[xi(e)],FI(t).forEach(function(o){var s=is(o,"type.displayName")||is(o,"type.name");r.indexOf(s)!==-1&&n.push(o)}),n}function xo(t,e){var n=Fs(t,e);return n&&n[0]}var FO=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,o=n.height;return!(!Ce(r)||r<=0||!Ce(o)||o<=0)},Xte=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Yte=function(e){return e&&e.type&&Np(e.type)&&Xte.indexOf(e.type)>=0},Qte=function(e,n,r,o){var s,i=(s=Q1==null?void 0:Q1[o])!==null&&s!==void 0?s:[];return!qe(e)&&(o&&i.includes(n)||Ute.includes(n))||r&&MI.includes(n)},Ve=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var o=e;if(A.isValidElement(e)&&(o=e.props),!Nd(o))return null;var s={};return Object.keys(o).forEach(function(i){var a;Qte((a=o)===null||a===void 0?void 0:a[i],i,n,r)&&(s[i]=o[i])}),s},uC=function t(e,n){if(e===n)return!0;var r=A.Children.count(e);if(r!==A.Children.count(n))return!1;if(r===0)return!0;if(r===1)return LO(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var o=0;o<r;o++){var s=e[o],i=n[o];if(Array.isArray(s)||Array.isArray(i)){if(!t(s,i))return!1}else if(!LO(s,i))return!1}return!0},LO=function(e,n){if(Ye(e)&&Ye(n))return!0;if(!Ye(e)&&!Ye(n)){var r=e.props||{},o=r.children,s=PO(r,Hte),i=n.props||{},a=i.children,l=PO(i,Kte);return o&&a?aC(s,l)&&uC(o,a):!o&&!a?aC(s,l):!1}return!1},BO=function(e,n){var r=[],o={};return FI(e).forEach(function(s,i){if(Yte(s))r.push(s);else if(s){var a=xi(s.type),l=n[a]||{},u=l.handler,c=l.once;if(u&&(!c||!o[a])){var d=u(s,a,i);r.push(d),o[a]=!0}}}),r},Zte=function(e){var n=e&&e.type;return n&&DO[n]?DO[n]:null},Jte=function(e,n){return FI(n).indexOf(e)},ene=["children","width","height","viewBox","className","style","title","desc"];function cC(){return cC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cC.apply(this,arguments)}function tne(t,e){if(t==null)return{};var n=nne(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function nne(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function dC(t){var e=t.children,n=t.width,r=t.height,o=t.viewBox,s=t.className,i=t.style,a=t.title,l=t.desc,u=tne(t,ene),c=o||{width:n,height:r,x:0,y:0},d=et("recharts-surface",s);return z.createElement("svg",cC({},Ve(u,!0,"svg"),{className:d,width:n,height:r,style:i,viewBox:"".concat(c.x," ").concat(c.y," ").concat(c.width," ").concat(c.height)}),z.createElement("title",null,a),z.createElement("desc",null,l),e)}var rne=["children","className"];function fC(){return fC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fC.apply(this,arguments)}function one(t,e){if(t==null)return{};var n=sne(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function sne(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Jt=z.forwardRef(function(t,e){var n=t.children,r=t.className,o=one(t,rne),s=et("recharts-layer",r);return z.createElement("g",fC({className:s},Ve(o,!0),{ref:e}),n)}),bi=function(e,n){for(var r=arguments.length,o=new Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s]};function ine(t,e,n){var r=-1,o=t.length;e<0&&(e=-e>o?0:o+e),n=n>o?o:n,n<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(o);++r<o;)s[r]=t[r+e];return s}var ane=ine,lne=ane;function une(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:lne(t,e,n)}var cne=une,dne="\\ud800-\\udfff",fne="\\u0300-\\u036f",hne="\\ufe20-\\ufe2f",pne="\\u20d0-\\u20ff",mne=fne+hne+pne,gne="\\ufe0e\\ufe0f",yne="\\u200d",vne=RegExp("["+yne+dne+mne+gne+"]");function xne(t){return vne.test(t)}var wz=xne;function bne(t){return t.split("")}var wne=bne,Sz="\\ud800-\\udfff",Sne="\\u0300-\\u036f",Cne="\\ufe20-\\ufe2f",$ne="\\u20d0-\\u20ff",kne=Sne+Cne+$ne,Ine="\\ufe0e\\ufe0f",Tne="["+Sz+"]",hC="["+kne+"]",pC="\\ud83c[\\udffb-\\udfff]",Ene="(?:"+hC+"|"+pC+")",Cz="[^"+Sz+"]",$z="(?:\\ud83c[\\udde6-\\uddff]){2}",kz="[\\ud800-\\udbff][\\udc00-\\udfff]",Nne="\\u200d",Iz=Ene+"?",Tz="["+Ine+"]?",Ane="(?:"+Nne+"(?:"+[Cz,$z,kz].join("|")+")"+Tz+Iz+")*",One=Tz+Iz+Ane,_ne="(?:"+[Cz+hC+"?",hC,$z,kz,Tne].join("|")+")",Rne=RegExp(pC+"(?="+pC+")|"+_ne+One,"g");function Pne(t){return t.match(Rne)||[]}var Dne=Pne,Mne=wne,Fne=wz,Lne=Dne;function Bne(t){return Fne(t)?Lne(t):Mne(t)}var zne=Bne,jne=cne,Wne=wz,Vne=zne,Une=pz;function Gne(t){return function(e){e=Une(e);var n=Wne(e)?Vne(e):void 0,r=n?n[0]:e.charAt(0),o=n?jne(n,1).join(""):e.slice(1);return r[t]()+o}}var Hne=Gne,Kne=Hne,qne=Kne("toUpperCase"),Xne=qne;const ux=ut(Xne);function It(t){return function(){return t}}const Ez=Math.cos,Xy=Math.sin,ys=Math.sqrt,Yy=Math.PI,cx=2*Yy,mC=Math.PI,gC=2*mC,hl=1e-6,Yne=gC-hl;function Nz(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Qne(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Nz;const n=10**e;return function(r){this._+=r[0];for(let o=1,s=r.length;o<s;++o)this._+=Math.round(arguments[o]*n)/n+r[o]}}class Zne{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Nz:Qne(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,o){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+o}`}bezierCurveTo(e,n,r,o,s,i){this._append`C${+e},${+n},${+r},${+o},${this._x1=+s},${this._y1=+i}`}arcTo(e,n,r,o,s){if(e=+e,n=+n,r=+r,o=+o,s=+s,s<0)throw new Error(`negative radius: ${s}`);let i=this._x1,a=this._y1,l=r-e,u=o-n,c=i-e,d=a-n,f=c*c+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>hl)if(!(Math.abs(d*l-u*c)>hl)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let h=r-i,p=o-a,m=l*l+u*u,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(f),b=s*Math.tan((mC-Math.acos((m+f-g)/(2*y*v)))/2),x=b/v,w=b/y;Math.abs(x-1)>hl&&this._append`L${e+x*c},${n+x*d}`,this._append`A${s},${s},0,0,${+(d*h>c*p)},${this._x1=e+w*l},${this._y1=n+w*u}`}}arc(e,n,r,o,s,i){if(e=+e,n=+n,r=+r,i=!!i,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(o),l=r*Math.sin(o),u=e+a,c=n+l,d=1^i,f=i?o-s:s-o;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>hl||Math.abs(this._y1-c)>hl)&&this._append`L${u},${c}`,r&&(f<0&&(f=f%gC+gC),f>Yne?this._append`A${r},${r},0,1,${d},${e-a},${n-l}A${r},${r},0,1,${d},${this._x1=u},${this._y1=c}`:f>hl&&this._append`A${r},${r},0,${+(f>=mC)},${d},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,o){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+o}h${-r}Z`}toString(){return this._}}function LI(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Zne(e)}function BI(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Az(t){this._context=t}Az.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function dx(t){return new Az(t)}function Oz(t){return t[0]}function _z(t){return t[1]}function Rz(t,e){var n=It(!0),r=null,o=dx,s=null,i=LI(a);t=typeof t=="function"?t:t===void 0?Oz:It(t),e=typeof e=="function"?e:e===void 0?_z:It(e);function a(l){var u,c=(l=BI(l)).length,d,f=!1,h;for(r==null&&(s=o(h=i())),u=0;u<=c;++u)!(u<c&&n(d=l[u],u,l))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+t(d,u,l),+e(d,u,l));if(h)return s=null,h+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:It(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:It(+l),a):e},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:It(!!l),a):n},a.curve=function(l){return arguments.length?(o=l,r!=null&&(s=o(r)),a):o},a.context=function(l){return arguments.length?(l==null?r=s=null:s=o(r=l),a):r},a}function $g(t,e,n){var r=null,o=It(!0),s=null,i=dx,a=null,l=LI(u);t=typeof t=="function"?t:t===void 0?Oz:It(+t),e=typeof e=="function"?e:It(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?_z:It(+n);function u(d){var f,h,p,m=(d=BI(d)).length,g,y=!1,v,b=new Array(m),x=new Array(m);for(s==null&&(a=i(v=l())),f=0;f<=m;++f){if(!(f<m&&o(g=d[f],f,d))===y)if(y=!y)h=f,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=f-1;p>=h;--p)a.point(b[p],x[p]);a.lineEnd(),a.areaEnd()}y&&(b[f]=+t(g,f,d),x[f]=+e(g,f,d),a.point(r?+r(g,f,d):b[f],n?+n(g,f,d):x[f]))}if(v)return a=null,v+""||null}function c(){return Rz().defined(o).curve(i).context(s)}return u.x=function(d){return arguments.length?(t=typeof d=="function"?d:It(+d),r=null,u):t},u.x0=function(d){return arguments.length?(t=typeof d=="function"?d:It(+d),u):t},u.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:It(+d),u):r},u.y=function(d){return arguments.length?(e=typeof d=="function"?d:It(+d),n=null,u):e},u.y0=function(d){return arguments.length?(e=typeof d=="function"?d:It(+d),u):e},u.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:It(+d),u):n},u.lineX0=u.lineY0=function(){return c().x(t).y(e)},u.lineY1=function(){return c().x(t).y(n)},u.lineX1=function(){return c().x(r).y(e)},u.defined=function(d){return arguments.length?(o=typeof d=="function"?d:It(!!d),u):o},u.curve=function(d){return arguments.length?(i=d,s!=null&&(a=i(s)),u):i},u.context=function(d){return arguments.length?(d==null?s=a=null:a=i(s=d),u):s},u}class Pz{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function Jne(t){return new Pz(t,!0)}function ere(t){return new Pz(t,!1)}const zI={draw(t,e){const n=ys(e/Yy);t.moveTo(n,0),t.arc(0,0,n,0,cx)}},tre={draw(t,e){const n=ys(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},Dz=ys(1/3),nre=Dz*2,rre={draw(t,e){const n=ys(e/nre),r=n*Dz;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},ore={draw(t,e){const n=ys(e),r=-n/2;t.rect(r,r,n,n)}},sre=.8908130915292852,Mz=Xy(Yy/10)/Xy(7*Yy/10),ire=Xy(cx/10)*Mz,are=-Ez(cx/10)*Mz,lre={draw(t,e){const n=ys(e*sre),r=ire*n,o=are*n;t.moveTo(0,-n),t.lineTo(r,o);for(let s=1;s<5;++s){const i=cx*s/5,a=Ez(i),l=Xy(i);t.lineTo(l*n,-a*n),t.lineTo(a*r-l*o,l*r+a*o)}t.closePath()}},J1=ys(3),ure={draw(t,e){const n=-ys(e/(J1*3));t.moveTo(0,n*2),t.lineTo(-J1*n,-n),t.lineTo(J1*n,-n),t.closePath()}},fo=-.5,ho=ys(3)/2,yC=1/ys(12),cre=(yC/2+1)*3,dre={draw(t,e){const n=ys(e/cre),r=n/2,o=n*yC,s=r,i=n*yC+n,a=-s,l=i;t.moveTo(r,o),t.lineTo(s,i),t.lineTo(a,l),t.lineTo(fo*r-ho*o,ho*r+fo*o),t.lineTo(fo*s-ho*i,ho*s+fo*i),t.lineTo(fo*a-ho*l,ho*a+fo*l),t.lineTo(fo*r+ho*o,fo*o-ho*r),t.lineTo(fo*s+ho*i,fo*i-ho*s),t.lineTo(fo*a+ho*l,fo*l-ho*a),t.closePath()}};function fre(t,e){let n=null,r=LI(o);t=typeof t=="function"?t:It(t||zI),e=typeof e=="function"?e:It(e===void 0?64:+e);function o(){let s;if(n||(n=s=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return o.type=function(s){return arguments.length?(t=typeof s=="function"?s:It(s),o):t},o.size=function(s){return arguments.length?(e=typeof s=="function"?s:It(+s),o):e},o.context=function(s){return arguments.length?(n=s??null,o):n},o}function Qy(){}function Zy(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Fz(t){this._context=t}Fz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Zy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Zy(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function hre(t){return new Fz(t)}function Lz(t){this._context=t}Lz.prototype={areaStart:Qy,areaEnd:Qy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Zy(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function pre(t){return new Lz(t)}function Bz(t){this._context=t}Bz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Zy(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function mre(t){return new Bz(t)}function zz(t){this._context=t}zz.prototype={areaStart:Qy,areaEnd:Qy,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function gre(t){return new zz(t)}function zO(t){return t<0?-1:1}function jO(t,e,n){var r=t._x1-t._x0,o=e-t._x1,s=(t._y1-t._y0)/(r||o<0&&-0),i=(n-t._y1)/(o||r<0&&-0),a=(s*o+i*r)/(r+o);return(zO(s)+zO(i))*Math.min(Math.abs(s),Math.abs(i),.5*Math.abs(a))||0}function WO(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function ew(t,e,n){var r=t._x0,o=t._y0,s=t._x1,i=t._y1,a=(s-r)/3;t._context.bezierCurveTo(r+a,o+a*e,s-a,i-a*n,s,i)}function Jy(t){this._context=t}Jy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ew(this,this._t0,WO(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,ew(this,WO(this,n=jO(this,t,e)),n);break;default:ew(this,this._t0,n=jO(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function jz(t){this._context=new Wz(t)}(jz.prototype=Object.create(Jy.prototype)).point=function(t,e){Jy.prototype.point.call(this,e,t)};function Wz(t){this._context=t}Wz.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,o,s){this._context.bezierCurveTo(e,t,r,n,s,o)}};function yre(t){return new Jy(t)}function vre(t){return new jz(t)}function Vz(t){this._context=t}Vz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=VO(t),o=VO(e),s=0,i=1;i<n;++s,++i)this._context.bezierCurveTo(r[0][s],o[0][s],r[1][s],o[1][s],t[i],e[i]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function VO(t){var e,n=t.length-1,r,o=new Array(n),s=new Array(n),i=new Array(n);for(o[0]=0,s[0]=2,i[0]=t[0]+2*t[1],e=1;e<n-1;++e)o[e]=1,s[e]=4,i[e]=4*t[e]+2*t[e+1];for(o[n-1]=2,s[n-1]=7,i[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=o[e]/s[e-1],s[e]-=r,i[e]-=r*i[e-1];for(o[n-1]=i[n-1]/s[n-1],e=n-2;e>=0;--e)o[e]=(i[e]-o[e+1])/s[e];for(s[n-1]=(t[n]+o[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-o[e+1];return[o,s]}function xre(t){return new Vz(t)}function fx(t,e){this._context=t,this._t=e}fx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function bre(t){return new fx(t,.5)}function wre(t){return new fx(t,0)}function Sre(t){return new fx(t,1)}function zc(t,e){if((i=t.length)>1)for(var n=1,r,o,s=t[e[0]],i,a=s.length;n<i;++n)for(o=s,s=t[e[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(o[r][1])?o[r][0]:o[r][1]}function vC(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Cre(t,e){return t[e]}function $re(t){const e=[];return e.key=t,e}function kre(){var t=It([]),e=vC,n=zc,r=Cre;function o(s){var i=Array.from(t.apply(this,arguments),$re),a,l=i.length,u=-1,c;for(const d of s)for(a=0,++u;a<l;++a)(i[a][u]=[0,+r(d,i[a].key,u,s)]).data=d;for(a=0,c=BI(e(i));a<l;++a)i[c[a]].index=a;return n(i,c),i}return o.keys=function(s){return arguments.length?(t=typeof s=="function"?s:It(Array.from(s)),o):t},o.value=function(s){return arguments.length?(r=typeof s=="function"?s:It(+s),o):r},o.order=function(s){return arguments.length?(e=s==null?vC:typeof s=="function"?s:It(Array.from(s)),o):e},o.offset=function(s){return arguments.length?(n=s??zc,o):n},o}function Ire(t,e){if((r=t.length)>0){for(var n,r,o=0,s=t[0].length,i;o<s;++o){for(i=n=0;n<r;++n)i+=t[n][o][1]||0;if(i)for(n=0;n<r;++n)t[n][o][1]/=i}zc(t,e)}}function Tre(t,e){if((o=t.length)>0){for(var n=0,r=t[e[0]],o,s=r.length;n<s;++n){for(var i=0,a=0;i<o;++i)a+=t[i][n][1]||0;r[n][1]+=r[n][0]=-a/2}zc(t,e)}}function Ere(t,e){if(!(!((i=t.length)>0)||!((s=(o=t[e[0]]).length)>0))){for(var n=0,r=1,o,s,i;r<s;++r){for(var a=0,l=0,u=0;a<i;++a){for(var c=t[e[a]],d=c[r][1]||0,f=c[r-1][1]||0,h=(d-f)/2,p=0;p<a;++p){var m=t[e[p]],g=m[r][1]||0,y=m[r-1][1]||0;h+=g-y}l+=d,u+=h*d}o[r-1][1]+=o[r-1][0]=n,l&&(n-=u/l)}o[r-1][1]+=o[r-1][0]=n,zc(t,e)}}function Eh(t){"@babel/helpers - typeof";return Eh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eh(t)}var Nre=["type","size","sizeType"];function xC(){return xC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xC.apply(this,arguments)}function UO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function GO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UO(Object(n),!0).forEach(function(r){Are(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Are(t,e,n){return e=Ore(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ore(t){var e=_re(t,"string");return Eh(e)=="symbol"?e:e+""}function _re(t,e){if(Eh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Eh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Rre(t,e){if(t==null)return{};var n=Pre(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Pre(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Uz={symbolCircle:zI,symbolCross:tre,symbolDiamond:rre,symbolSquare:ore,symbolStar:lre,symbolTriangle:ure,symbolWye:dre},Dre=Math.PI/180,Mre=function(e){var n="symbol".concat(ux(e));return Uz[n]||zI},Fre=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var o=18*Dre;return 1.25*e*e*(Math.tan(o)-Math.tan(o*2)*Math.pow(Math.tan(o),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Lre=function(e,n){Uz["symbol".concat(ux(e))]=n},jI=function(e){var n=e.type,r=n===void 0?"circle":n,o=e.size,s=o===void 0?64:o,i=e.sizeType,a=i===void 0?"area":i,l=Rre(e,Nre),u=GO(GO({},l),{},{type:r,size:s,sizeType:a}),c=function(){var g=Mre(r),y=fre().type(g).size(Fre(s,a,r));return y()},d=u.className,f=u.cx,h=u.cy,p=Ve(u,!0);return f===+f&&h===+h&&s===+s?z.createElement("path",xC({},p,{className:et("recharts-symbols",d),transform:"translate(".concat(f,", ").concat(h,")"),d:c()})):null};jI.registerSymbol=Lre;function jc(t){"@babel/helpers - typeof";return jc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jc(t)}function bC(){return bC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bC.apply(this,arguments)}function HO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Bre(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HO(Object(n),!0).forEach(function(r){Nh(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zre(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jre(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Hz(r.key),r)}}function Wre(t,e,n){return e&&jre(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Vre(t,e,n){return e=ev(e),Ure(t,Gz()?Reflect.construct(e,n||[],ev(t).constructor):e.apply(t,n))}function Ure(t,e){if(e&&(jc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gre(t)}function Gre(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Gz(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Gz=function(){return!!t})()}function ev(t){return ev=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ev(t)}function Hre(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wC(t,e)}function wC(t,e){return wC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},wC(t,e)}function Nh(t,e,n){return e=Hz(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hz(t){var e=Kre(t,"string");return jc(e)=="symbol"?e:e+""}function Kre(t,e){if(jc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(jc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var po=32,WI=function(t){function e(){return zre(this,e),Vre(this,e,arguments)}return Hre(e,t),Wre(e,[{key:"renderIcon",value:function(r){var o=this.props.inactiveColor,s=po/2,i=po/6,a=po/3,l=r.inactive?o:r.color;if(r.type==="plainline")return z.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:s,x2:po,y2:s,className:"recharts-legend-icon"});if(r.type==="line")return z.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(s,"h").concat(a,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*a,",").concat(s,`
            H`).concat(po,"M").concat(2*a,",").concat(s,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(a,",").concat(s),className:"recharts-legend-icon"});if(r.type==="rect")return z.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(po/8,"h").concat(po,"v").concat(po*3/4,"h").concat(-po,"z"),className:"recharts-legend-icon"});if(z.isValidElement(r.legendIcon)){var u=Bre({},r);return delete u.legendIcon,z.cloneElement(r.legendIcon,u)}return z.createElement(jI,{fill:l,cx:s,cy:s,size:po,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,o=this.props,s=o.payload,i=o.iconSize,a=o.layout,l=o.formatter,u=o.inactiveColor,c={x:0,y:0,width:po,height:po},d={display:a==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(h,p){var m=h.formatter||l,g=et(Nh(Nh({"recharts-legend-item":!0},"legend-item-".concat(p),!0),"inactive",h.inactive));if(h.type==="none")return null;var y=qe(h.value)?null:h.value;bi(!qe(h.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var v=h.inactive?u:h.color;return z.createElement("li",bC({className:g,style:d,key:"legend-item-".concat(p)},lx(r.props,h,p)),z.createElement(dC,{width:i,height:i,viewBox:c,style:f},r.renderIcon(h)),z.createElement("span",{className:"recharts-legend-item-text",style:{color:v}},m?m(y,h,p):y))})}},{key:"render",value:function(){var r=this.props,o=r.payload,s=r.layout,i=r.align;if(!o||!o.length)return null;var a={padding:0,margin:0,textAlign:s==="horizontal"?i:"left"};return z.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}])}(A.PureComponent);Nh(WI,"displayName","Legend");Nh(WI,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var qre=q0;function Xre(){this.__data__=new qre,this.size=0}var Yre=Xre;function Qre(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var Zre=Qre;function Jre(t){return this.__data__.get(t)}var eoe=Jre;function toe(t){return this.__data__.has(t)}var noe=toe,roe=q0,ooe=NI,soe=AI,ioe=200;function aoe(t,e){var n=this.__data__;if(n instanceof roe){var r=n.__data__;if(!ooe||r.length<ioe-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new soe(r)}return n.set(t,e),this.size=n.size,this}var loe=aoe,uoe=q0,coe=Yre,doe=Zre,foe=eoe,hoe=noe,poe=loe;function Rd(t){var e=this.__data__=new uoe(t);this.size=e.size}Rd.prototype.clear=coe;Rd.prototype.delete=doe;Rd.prototype.get=foe;Rd.prototype.has=hoe;Rd.prototype.set=poe;var Kz=Rd,moe="__lodash_hash_undefined__";function goe(t){return this.__data__.set(t,moe),this}var yoe=goe;function voe(t){return this.__data__.has(t)}var xoe=voe,boe=AI,woe=yoe,Soe=xoe;function tv(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new boe;++e<n;)this.add(t[e])}tv.prototype.add=tv.prototype.push=woe;tv.prototype.has=Soe;var qz=tv;function Coe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Xz=Coe;function $oe(t,e){return t.has(e)}var Yz=$oe,koe=qz,Ioe=Xz,Toe=Yz,Eoe=1,Noe=2;function Aoe(t,e,n,r,o,s){var i=n&Eoe,a=t.length,l=e.length;if(a!=l&&!(i&&l>a))return!1;var u=s.get(t),c=s.get(e);if(u&&c)return u==e&&c==t;var d=-1,f=!0,h=n&Noe?new koe:void 0;for(s.set(t,e),s.set(e,t);++d<a;){var p=t[d],m=e[d];if(r)var g=i?r(m,p,d,e,t,s):r(p,m,d,t,e,s);if(g!==void 0){if(g)continue;f=!1;break}if(h){if(!Ioe(e,function(y,v){if(!Toe(h,v)&&(p===y||o(p,y,n,r,s)))return h.push(v)})){f=!1;break}}else if(!(p===m||o(p,m,n,r,s))){f=!1;break}}return s.delete(t),s.delete(e),f}var Qz=Aoe,Ooe=ni,_oe=Ooe.Uint8Array,Roe=_oe;function Poe(t){var e=-1,n=Array(t.size);return t.forEach(function(r,o){n[++e]=[o,r]}),n}var Doe=Poe;function Moe(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var VI=Moe,KO=Ep,qO=Roe,Foe=EI,Loe=Qz,Boe=Doe,zoe=VI,joe=1,Woe=2,Voe="[object Boolean]",Uoe="[object Date]",Goe="[object Error]",Hoe="[object Map]",Koe="[object Number]",qoe="[object RegExp]",Xoe="[object Set]",Yoe="[object String]",Qoe="[object Symbol]",Zoe="[object ArrayBuffer]",Joe="[object DataView]",XO=KO?KO.prototype:void 0,tw=XO?XO.valueOf:void 0;function ese(t,e,n,r,o,s,i){switch(n){case Joe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Zoe:return!(t.byteLength!=e.byteLength||!s(new qO(t),new qO(e)));case Voe:case Uoe:case Koe:return Foe(+t,+e);case Goe:return t.name==e.name&&t.message==e.message;case qoe:case Yoe:return t==e+"";case Hoe:var a=Boe;case Xoe:var l=r&joe;if(a||(a=zoe),t.size!=e.size&&!l)return!1;var u=i.get(t);if(u)return u==e;r|=Woe,i.set(t,e);var c=Loe(a(t),a(e),r,o,s,i);return i.delete(t),c;case Qoe:if(tw)return tw.call(t)==tw.call(e)}return!1}var tse=ese;function nse(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}var Zz=nse,rse=Zz,ose=Wr;function sse(t,e,n){var r=e(t);return ose(t)?r:rse(r,n(t))}var ise=sse;function ase(t,e){for(var n=-1,r=t==null?0:t.length,o=0,s=[];++n<r;){var i=t[n];e(i,n,t)&&(s[o++]=i)}return s}var lse=ase;function use(){return[]}var cse=use,dse=lse,fse=cse,hse=Object.prototype,pse=hse.propertyIsEnumerable,YO=Object.getOwnPropertySymbols,mse=YO?function(t){return t==null?[]:(t=Object(t),dse(YO(t),function(e){return pse.call(t,e)}))}:fse,gse=mse;function yse(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var vse=yse,xse=Fi,bse=Li,wse="[object Arguments]";function Sse(t){return bse(t)&&xse(t)==wse}var Cse=Sse,QO=Cse,$se=Li,Jz=Object.prototype,kse=Jz.hasOwnProperty,Ise=Jz.propertyIsEnumerable,Tse=QO(function(){return arguments}())?QO:function(t){return $se(t)&&kse.call(t,"callee")&&!Ise.call(t,"callee")},UI=Tse,nv={exports:{}};function Ese(){return!1}var Nse=Ese;nv.exports;(function(t,e){var n=ni,r=Nse,o=e&&!e.nodeType&&e,s=o&&!0&&t&&!t.nodeType&&t,i=s&&s.exports===o,a=i?n.Buffer:void 0,l=a?a.isBuffer:void 0,u=l||r;t.exports=u})(nv,nv.exports);var ej=nv.exports,Ase=9007199254740991,Ose=/^(?:0|[1-9]\d*)$/;function _se(t,e){var n=typeof t;return e=e??Ase,!!e&&(n=="number"||n!="symbol"&&Ose.test(t))&&t>-1&&t%1==0&&t<e}var GI=_se,Rse=9007199254740991;function Pse(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Rse}var HI=Pse,Dse=Fi,Mse=HI,Fse=Li,Lse="[object Arguments]",Bse="[object Array]",zse="[object Boolean]",jse="[object Date]",Wse="[object Error]",Vse="[object Function]",Use="[object Map]",Gse="[object Number]",Hse="[object Object]",Kse="[object RegExp]",qse="[object Set]",Xse="[object String]",Yse="[object WeakMap]",Qse="[object ArrayBuffer]",Zse="[object DataView]",Jse="[object Float32Array]",eie="[object Float64Array]",tie="[object Int8Array]",nie="[object Int16Array]",rie="[object Int32Array]",oie="[object Uint8Array]",sie="[object Uint8ClampedArray]",iie="[object Uint16Array]",aie="[object Uint32Array]",Mt={};Mt[Jse]=Mt[eie]=Mt[tie]=Mt[nie]=Mt[rie]=Mt[oie]=Mt[sie]=Mt[iie]=Mt[aie]=!0;Mt[Lse]=Mt[Bse]=Mt[Qse]=Mt[zse]=Mt[Zse]=Mt[jse]=Mt[Wse]=Mt[Vse]=Mt[Use]=Mt[Gse]=Mt[Hse]=Mt[Kse]=Mt[qse]=Mt[Xse]=Mt[Yse]=!1;function lie(t){return Fse(t)&&Mse(t.length)&&!!Mt[Dse(t)]}var uie=lie;function cie(t){return function(e){return t(e)}}var tj=cie,rv={exports:{}};rv.exports;(function(t,e){var n=lz,r=e&&!e.nodeType&&e,o=r&&!0&&t&&!t.nodeType&&t,s=o&&o.exports===r,i=s&&n.process,a=function(){try{var l=o&&o.require&&o.require("util").types;return l||i&&i.binding&&i.binding("util")}catch{}}();t.exports=a})(rv,rv.exports);var die=rv.exports,fie=uie,hie=tj,ZO=die,JO=ZO&&ZO.isTypedArray,pie=JO?hie(JO):fie,nj=pie,mie=vse,gie=UI,yie=Wr,vie=ej,xie=GI,bie=nj,wie=Object.prototype,Sie=wie.hasOwnProperty;function Cie(t,e){var n=yie(t),r=!n&&gie(t),o=!n&&!r&&vie(t),s=!n&&!r&&!o&&bie(t),i=n||r||o||s,a=i?mie(t.length,String):[],l=a.length;for(var u in t)(e||Sie.call(t,u))&&!(i&&(u=="length"||o&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||xie(u,l)))&&a.push(u);return a}var $ie=Cie,kie=Object.prototype;function Iie(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||kie;return t===n}var Tie=Iie;function Eie(t,e){return function(n){return t(e(n))}}var rj=Eie,Nie=rj,Aie=Nie(Object.keys,Object),Oie=Aie,_ie=Tie,Rie=Oie,Pie=Object.prototype,Die=Pie.hasOwnProperty;function Mie(t){if(!_ie(t))return Rie(t);var e=[];for(var n in Object(t))Die.call(t,n)&&n!="constructor"&&e.push(n);return e}var Fie=Mie,Lie=TI,Bie=HI;function zie(t){return t!=null&&Bie(t.length)&&!Lie(t)}var hx=zie,jie=$ie,Wie=Fie,Vie=hx;function Uie(t){return Vie(t)?jie(t):Wie(t)}var KI=Uie,Gie=ise,Hie=gse,Kie=KI;function qie(t){return Gie(t,Kie,Hie)}var Xie=qie,e_=Xie,Yie=1,Qie=Object.prototype,Zie=Qie.hasOwnProperty;function Jie(t,e,n,r,o,s){var i=n&Yie,a=e_(t),l=a.length,u=e_(e),c=u.length;if(l!=c&&!i)return!1;for(var d=l;d--;){var f=a[d];if(!(i?f in e:Zie.call(e,f)))return!1}var h=s.get(t),p=s.get(e);if(h&&p)return h==e&&p==t;var m=!0;s.set(t,e),s.set(e,t);for(var g=i;++d<l;){f=a[d];var y=t[f],v=e[f];if(r)var b=i?r(v,y,f,e,t,s):r(y,v,f,t,e,s);if(!(b===void 0?y===v||o(y,v,n,r,s):b)){m=!1;break}g||(g=f=="constructor")}if(m&&!g){var x=t.constructor,w=e.constructor;x!=w&&"constructor"in t&&"constructor"in e&&!(typeof x=="function"&&x instanceof x&&typeof w=="function"&&w instanceof w)&&(m=!1)}return s.delete(t),s.delete(e),m}var eae=Jie,tae=pu,nae=ni,rae=tae(nae,"DataView"),oae=rae,sae=pu,iae=ni,aae=sae(iae,"Promise"),lae=aae,uae=pu,cae=ni,dae=uae(cae,"Set"),oj=dae,fae=pu,hae=ni,pae=fae(hae,"WeakMap"),mae=pae,SC=oae,CC=NI,$C=lae,kC=oj,IC=mae,sj=Fi,Pd=cz,t_="[object Map]",gae="[object Object]",n_="[object Promise]",r_="[object Set]",o_="[object WeakMap]",s_="[object DataView]",yae=Pd(SC),vae=Pd(CC),xae=Pd($C),bae=Pd(kC),wae=Pd(IC),pl=sj;(SC&&pl(new SC(new ArrayBuffer(1)))!=s_||CC&&pl(new CC)!=t_||$C&&pl($C.resolve())!=n_||kC&&pl(new kC)!=r_||IC&&pl(new IC)!=o_)&&(pl=function(t){var e=sj(t),n=e==gae?t.constructor:void 0,r=n?Pd(n):"";if(r)switch(r){case yae:return s_;case vae:return t_;case xae:return n_;case bae:return r_;case wae:return o_}return e});var Sae=pl,nw=Kz,Cae=Qz,$ae=tse,kae=eae,i_=Sae,a_=Wr,l_=ej,Iae=nj,Tae=1,u_="[object Arguments]",c_="[object Array]",kg="[object Object]",Eae=Object.prototype,d_=Eae.hasOwnProperty;function Nae(t,e,n,r,o,s){var i=a_(t),a=a_(e),l=i?c_:i_(t),u=a?c_:i_(e);l=l==u_?kg:l,u=u==u_?kg:u;var c=l==kg,d=u==kg,f=l==u;if(f&&l_(t)){if(!l_(e))return!1;i=!0,c=!1}if(f&&!c)return s||(s=new nw),i||Iae(t)?Cae(t,e,n,r,o,s):$ae(t,e,l,n,r,o,s);if(!(n&Tae)){var h=c&&d_.call(t,"__wrapped__"),p=d&&d_.call(e,"__wrapped__");if(h||p){var m=h?t.value():t,g=p?e.value():e;return s||(s=new nw),o(m,g,n,r,s)}}return f?(s||(s=new nw),kae(t,e,n,r,o,s)):!1}var Aae=Nae,Oae=Aae,f_=Li;function ij(t,e,n,r,o){return t===e?!0:t==null||e==null||!f_(t)&&!f_(e)?t!==t&&e!==e:Oae(t,e,n,r,ij,o)}var qI=ij,_ae=Kz,Rae=qI,Pae=1,Dae=2;function Mae(t,e,n,r){var o=n.length,s=o,i=!r;if(t==null)return!s;for(t=Object(t);o--;){var a=n[o];if(i&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++o<s;){a=n[o];var l=a[0],u=t[l],c=a[1];if(i&&a[2]){if(u===void 0&&!(l in t))return!1}else{var d=new _ae;if(r)var f=r(u,c,l,t,e,d);if(!(f===void 0?Rae(c,u,Pae|Dae,r,d):f))return!1}}return!0}var Fae=Mae,Lae=Ua;function Bae(t){return t===t&&!Lae(t)}var aj=Bae,zae=aj,jae=KI;function Wae(t){for(var e=jae(t),n=e.length;n--;){var r=e[n],o=t[r];e[n]=[r,o,zae(o)]}return e}var Vae=Wae;function Uae(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var lj=Uae,Gae=Fae,Hae=Vae,Kae=lj;function qae(t){var e=Hae(t);return e.length==1&&e[0][2]?Kae(e[0][0],e[0][1]):function(n){return n===t||Gae(n,t,e)}}var Xae=qae;function Yae(t,e){return t!=null&&e in Object(t)}var Qae=Yae,Zae=mz,Jae=UI,ele=Wr,tle=GI,nle=HI,rle=Y0;function ole(t,e,n){e=Zae(e,t);for(var r=-1,o=e.length,s=!1;++r<o;){var i=rle(e[r]);if(!(s=t!=null&&n(t,i)))break;t=t[i]}return s||++r!=o?s:(o=t==null?0:t.length,!!o&&nle(o)&&tle(i,o)&&(ele(t)||Jae(t)))}var sle=ole,ile=Qae,ale=sle;function lle(t,e){return t!=null&&ale(t,e,ile)}var ule=lle,cle=qI,dle=gz,fle=ule,hle=II,ple=aj,mle=lj,gle=Y0,yle=1,vle=2;function xle(t,e){return hle(t)&&ple(e)?mle(gle(t),e):function(n){var r=dle(n,t);return r===void 0&&r===e?fle(n,t):cle(e,r,yle|vle)}}var ble=xle;function wle(t){return t}var Dd=wle;function Sle(t){return function(e){return e==null?void 0:e[t]}}var Cle=Sle,$le=RI;function kle(t){return function(e){return $le(e,t)}}var Ile=kle,Tle=Cle,Ele=Ile,Nle=II,Ale=Y0;function Ole(t){return Nle(t)?Tle(Ale(t)):Ele(t)}var _le=Ole,Rle=Xae,Ple=ble,Dle=Dd,Mle=Wr,Fle=_le;function Lle(t){return typeof t=="function"?t:t==null?Dle:typeof t=="object"?Mle(t)?Ple(t[0],t[1]):Rle(t):Fle(t)}var Ga=Lle;function Ble(t,e,n,r){for(var o=t.length,s=n+(r?1:-1);r?s--:++s<o;)if(e(t[s],s,t))return s;return-1}var zle=Ble;function jle(t){return t!==t}var Wle=jle;function Vle(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}var Ule=Vle,Gle=zle,Hle=Wle,Kle=Ule;function qle(t,e,n){return e===e?Kle(t,e,n):Gle(t,Hle,n)}var Xle=qle,Yle=Xle;function Qle(t,e){var n=t==null?0:t.length;return!!n&&Yle(t,e,0)>-1}var Zle=Qle;function Jle(t,e,n){for(var r=-1,o=t==null?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1}var eue=Jle;function tue(){}var nue=tue,rw=oj,rue=nue,oue=VI,sue=1/0,iue=rw&&1/oue(new rw([,-0]))[1]==sue?function(t){return new rw(t)}:rue,aue=iue,lue=qz,uue=Zle,cue=eue,due=Yz,fue=aue,hue=VI,pue=200;function mue(t,e,n){var r=-1,o=uue,s=t.length,i=!0,a=[],l=a;if(n)i=!1,o=cue;else if(s>=pue){var u=e?null:fue(t);if(u)return hue(u);i=!1,o=due,l=new lue}else l=e?[]:a;e:for(;++r<s;){var c=t[r],d=e?e(c):c;if(c=n||c!==0?c:0,i&&d===d){for(var f=l.length;f--;)if(l[f]===d)continue e;e&&l.push(d),a.push(c)}else o(l,d,n)||(l!==a&&l.push(d),a.push(c))}return a}var gue=mue,yue=Ga,vue=gue;function xue(t,e){return t&&t.length?vue(t,yue(e)):[]}var bue=xue;const h_=ut(bue);function uj(t,e,n){return e===!0?h_(t,n):qe(e)?h_(t,e):t}function Wc(t){"@babel/helpers - typeof";return Wc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wc(t)}var wue=["ref"];function p_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function ii(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?p_(Object(n),!0).forEach(function(r){px(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Sue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,dj(r.key),r)}}function Cue(t,e,n){return e&&m_(t.prototype,e),n&&m_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function $ue(t,e,n){return e=ov(e),kue(t,cj()?Reflect.construct(e,n||[],ov(t).constructor):e.apply(t,n))}function kue(t,e){if(e&&(Wc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Iue(t)}function Iue(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cj(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cj=function(){return!!t})()}function ov(t){return ov=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ov(t)}function Tue(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TC(t,e)}function TC(t,e){return TC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},TC(t,e)}function px(t,e,n){return e=dj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dj(t){var e=Eue(t,"string");return Wc(e)=="symbol"?e:e+""}function Eue(t,e){if(Wc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Wc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Nue(t,e){if(t==null)return{};var n=Aue(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Aue(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Oue(t){return t.value}function _ue(t,e){if(z.isValidElement(t))return z.cloneElement(t,e);if(typeof t=="function")return z.createElement(t,e);e.ref;var n=Nue(e,wue);return z.createElement(WI,n)}var g_=1,wa=function(t){function e(){var n;Sue(this,e);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return n=$ue(this,e,[].concat(o)),px(n,"lastBoundingBox",{width:-1,height:-1}),n}return Tue(e,t),Cue(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,o=this.getBBox();o?(Math.abs(o.width-this.lastBoundingBox.width)>g_||Math.abs(o.height-this.lastBoundingBox.height)>g_)&&(this.lastBoundingBox.width=o.width,this.lastBoundingBox.height=o.height,r&&r(o)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?ii({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var o=this.props,s=o.layout,i=o.align,a=o.verticalAlign,l=o.margin,u=o.chartWidth,c=o.chartHeight,d,f;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(i==="center"&&s==="vertical"){var h=this.getBBoxSnapshot();d={left:((u||0)-h.width)/2}}else d=i==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(a==="middle"){var p=this.getBBoxSnapshot();f={top:((c||0)-p.height)/2}}else f=a==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return ii(ii({},d),f)}},{key:"render",value:function(){var r=this,o=this.props,s=o.content,i=o.width,a=o.height,l=o.wrapperStyle,u=o.payloadUniqBy,c=o.payload,d=ii(ii({position:"absolute",width:i||"auto",height:a||"auto"},this.getDefaultPosition(l)),l);return z.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(h){r.wrapperNode=h}},_ue(s,ii(ii({},this.props),{},{payload:uj(c,u,Oue)})))}}],[{key:"getWithHeight",value:function(r,o){var s=ii(ii({},this.defaultProps),r.props),i=s.layout;return i==="vertical"&&Ce(r.props.height)?{height:r.props.height}:i==="horizontal"?{width:r.props.width||o}:null}}])}(A.PureComponent);px(wa,"displayName","Legend");px(wa,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var y_=Ep,Rue=UI,Pue=Wr,v_=y_?y_.isConcatSpreadable:void 0;function Due(t){return Pue(t)||Rue(t)||!!(v_&&t&&t[v_])}var Mue=Due,Fue=Zz,Lue=Mue;function fj(t,e,n,r,o){var s=-1,i=t.length;for(n||(n=Lue),o||(o=[]);++s<i;){var a=t[s];e>0&&n(a)?e>1?fj(a,e-1,n,r,o):Fue(o,a):r||(o[o.length]=a)}return o}var hj=fj;function Bue(t){return function(e,n,r){for(var o=-1,s=Object(e),i=r(e),a=i.length;a--;){var l=i[t?a:++o];if(n(s[l],l,s)===!1)break}return e}}var zue=Bue,jue=zue,Wue=jue(),Vue=Wue,Uue=Vue,Gue=KI;function Hue(t,e){return t&&Uue(t,e,Gue)}var pj=Hue,Kue=hx;function que(t,e){return function(n,r){if(n==null)return n;if(!Kue(n))return t(n,r);for(var o=n.length,s=e?o:-1,i=Object(n);(e?s--:++s<o)&&r(i[s],s,i)!==!1;);return n}}var Xue=que,Yue=pj,Que=Xue,Zue=Que(Yue),XI=Zue,Jue=XI,ece=hx;function tce(t,e){var n=-1,r=ece(t)?Array(t.length):[];return Jue(t,function(o,s,i){r[++n]=e(o,s,i)}),r}var mj=tce;function nce(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var rce=nce,x_=Ed;function oce(t,e){if(t!==e){var n=t!==void 0,r=t===null,o=t===t,s=x_(t),i=e!==void 0,a=e===null,l=e===e,u=x_(e);if(!a&&!u&&!s&&t>e||s&&i&&l&&!a&&!u||r&&i&&l||!n&&l||!o)return 1;if(!r&&!s&&!u&&t<e||u&&n&&o&&!r&&!s||a&&n&&o||!i&&o||!l)return-1}return 0}var sce=oce,ice=sce;function ace(t,e,n){for(var r=-1,o=t.criteria,s=e.criteria,i=o.length,a=n.length;++r<i;){var l=ice(o[r],s[r]);if(l){if(r>=a)return l;var u=n[r];return l*(u=="desc"?-1:1)}}return t.index-e.index}var lce=ace,ow=_I,uce=RI,cce=Ga,dce=mj,fce=rce,hce=tj,pce=lce,mce=Dd,gce=Wr;function yce(t,e,n){e.length?e=ow(e,function(s){return gce(s)?function(i){return uce(i,s.length===1?s[0]:s)}:s}):e=[mce];var r=-1;e=ow(e,hce(cce));var o=dce(t,function(s,i,a){var l=ow(e,function(u){return u(s)});return{criteria:l,index:++r,value:s}});return fce(o,function(s,i){return pce(s,i,n)})}var vce=yce;function xce(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var bce=xce,wce=bce,b_=Math.max;function Sce(t,e,n){return e=b_(e===void 0?t.length-1:e,0),function(){for(var r=arguments,o=-1,s=b_(r.length-e,0),i=Array(s);++o<s;)i[o]=r[e+o];o=-1;for(var a=Array(e+1);++o<e;)a[o]=r[o];return a[e]=n(i),wce(t,this,a)}}var Cce=Sce;function $ce(t){return function(){return t}}var kce=$ce,Ice=pu,Tce=function(){try{var t=Ice(Object,"defineProperty");return t({},"",{}),t}catch{}}(),gj=Tce,Ece=kce,w_=gj,Nce=Dd,Ace=w_?function(t,e){return w_(t,"toString",{configurable:!0,enumerable:!1,value:Ece(e),writable:!0})}:Nce,Oce=Ace,_ce=800,Rce=16,Pce=Date.now;function Dce(t){var e=0,n=0;return function(){var r=Pce(),o=Rce-(r-n);if(n=r,o>0){if(++e>=_ce)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var Mce=Dce,Fce=Oce,Lce=Mce,Bce=Lce(Fce),zce=Bce,jce=Dd,Wce=Cce,Vce=zce;function Uce(t,e){return Vce(Wce(t,e,jce),t+"")}var Gce=Uce,Hce=EI,Kce=hx,qce=GI,Xce=Ua;function Yce(t,e,n){if(!Xce(n))return!1;var r=typeof e;return(r=="number"?Kce(n)&&qce(e,n.length):r=="string"&&e in n)?Hce(n[e],t):!1}var mx=Yce,Qce=hj,Zce=vce,Jce=Gce,S_=mx,ede=Jce(function(t,e){if(t==null)return[];var n=e.length;return n>1&&S_(t,e[0],e[1])?e=[]:n>2&&S_(e[0],e[1],e[2])&&(e=[e[0]]),Zce(t,Qce(e,1),[])}),tde=ede;const YI=ut(tde);function Ah(t){"@babel/helpers - typeof";return Ah=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ah(t)}function EC(){return EC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},EC.apply(this,arguments)}function nde(t,e){return ide(t)||sde(t,e)||ode(t,e)||rde()}function rde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ode(t,e){if(t){if(typeof t=="string")return C_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C_(t,e)}}function C_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function sde(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,s,i,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,o=c}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return a}}function ide(t){if(Array.isArray(t))return t}function $_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function sw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$_(Object(n),!0).forEach(function(r){ade(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ade(t,e,n){return e=lde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lde(t){var e=ude(t,"string");return Ah(e)=="symbol"?e:e+""}function ude(t,e){if(Ah(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ah(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cde(t){return Array.isArray(t)&&Tn(t[0])&&Tn(t[1])?t.join(" ~ "):t}var dde=function(e){var n=e.separator,r=n===void 0?" : ":n,o=e.contentStyle,s=o===void 0?{}:o,i=e.itemStyle,a=i===void 0?{}:i,l=e.labelStyle,u=l===void 0?{}:l,c=e.payload,d=e.formatter,f=e.itemSorter,h=e.wrapperClassName,p=e.labelClassName,m=e.label,g=e.labelFormatter,y=e.accessibilityLayer,v=y===void 0?!1:y,b=function(){if(c&&c.length){var E={padding:0,margin:0},_=(f?YI(c,f):c).map(function(O,F){if(O.type==="none")return null;var M=sw({display:"block",paddingTop:4,paddingBottom:4,color:O.color||"#000"},a),L=O.formatter||d||cde,N=O.value,D=O.name,U=N,B=D;if(L&&U!=null&&B!=null){var W=L(N,D,O,F,c);if(Array.isArray(W)){var V=nde(W,2);U=V[0],B=V[1]}else U=W}return z.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(F),style:M},Tn(B)?z.createElement("span",{className:"recharts-tooltip-item-name"},B):null,Tn(B)?z.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,z.createElement("span",{className:"recharts-tooltip-item-value"},U),z.createElement("span",{className:"recharts-tooltip-item-unit"},O.unit||""))});return z.createElement("ul",{className:"recharts-tooltip-item-list",style:E},_)}return null},x=sw({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),w=sw({margin:0},u),S=!Ye(m),$=S?m:"",C=et("recharts-default-tooltip",h),k=et("recharts-tooltip-label",p);S&&g&&c!==void 0&&c!==null&&($=g(m,c));var I=v?{role:"status","aria-live":"assertive"}:{};return z.createElement("div",EC({className:C,style:x},I),z.createElement("p",{className:k,style:w},z.isValidElement($)?$:"".concat($)),b())};function Oh(t){"@babel/helpers - typeof";return Oh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oh(t)}function Ig(t,e,n){return e=fde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fde(t){var e=hde(t,"string");return Oh(e)=="symbol"?e:e+""}function hde(t,e){if(Oh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Oh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gf="recharts-tooltip-wrapper",pde={visibility:"hidden"};function mde(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return et(gf,Ig(Ig(Ig(Ig({},"".concat(gf,"-right"),Ce(n)&&e&&Ce(e.x)&&n>=e.x),"".concat(gf,"-left"),Ce(n)&&e&&Ce(e.x)&&n<e.x),"".concat(gf,"-bottom"),Ce(r)&&e&&Ce(e.y)&&r>=e.y),"".concat(gf,"-top"),Ce(r)&&e&&Ce(e.y)&&r<e.y))}function k_(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,o=t.offsetTopLeft,s=t.position,i=t.reverseDirection,a=t.tooltipDimension,l=t.viewBox,u=t.viewBoxDimension;if(s&&Ce(s[r]))return s[r];var c=n[r]-a-o,d=n[r]+o;if(e[r])return i[r]?c:d;if(i[r]){var f=c,h=l[r];return f<h?Math.max(d,l[r]):Math.max(c,l[r])}var p=d+a,m=l[r]+u;return p>m?Math.max(c,l[r]):Math.max(d,l[r])}function gde(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function yde(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,o=t.position,s=t.reverseDirection,i=t.tooltipBox,a=t.useTranslate3d,l=t.viewBox,u,c,d;return i.height>0&&i.width>0&&n?(c=k_({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:o,reverseDirection:s,tooltipDimension:i.width,viewBox:l,viewBoxDimension:l.width}),d=k_({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:o,reverseDirection:s,tooltipDimension:i.height,viewBox:l,viewBoxDimension:l.height}),u=gde({translateX:c,translateY:d,useTranslate3d:a})):u=pde,{cssProperties:u,cssClasses:mde({translateX:c,translateY:d,coordinate:n})}}function Vc(t){"@babel/helpers - typeof";return Vc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vc(t)}function I_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function T_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?I_(Object(n),!0).forEach(function(r){AC(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vde(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xde(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,vj(r.key),r)}}function bde(t,e,n){return e&&xde(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function wde(t,e,n){return e=sv(e),Sde(t,yj()?Reflect.construct(e,n||[],sv(t).constructor):e.apply(t,n))}function Sde(t,e){if(e&&(Vc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cde(t)}function Cde(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yj(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yj=function(){return!!t})()}function sv(t){return sv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},sv(t)}function $de(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&NC(t,e)}function NC(t,e){return NC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},NC(t,e)}function AC(t,e,n){return e=vj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vj(t){var e=kde(t,"string");return Vc(e)=="symbol"?e:e+""}function kde(t,e){if(Vc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Vc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var E_=1,Ide=function(t){function e(){var n;vde(this,e);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return n=wde(this,e,[].concat(o)),AC(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),AC(n,"handleKeyDown",function(i){if(i.key==="Escape"){var a,l,u,c;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(a=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&a!==void 0?a:0,y:(u=(c=n.props.coordinate)===null||c===void 0?void 0:c.y)!==null&&u!==void 0?u:0}})}}),n}return $de(e,t),bde(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>E_||Math.abs(r.height-this.state.lastBoundingBox.height)>E_)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,o;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,o=this.props,s=o.active,i=o.allowEscapeViewBox,a=o.animationDuration,l=o.animationEasing,u=o.children,c=o.coordinate,d=o.hasPayload,f=o.isAnimationActive,h=o.offset,p=o.position,m=o.reverseDirection,g=o.useTranslate3d,y=o.viewBox,v=o.wrapperStyle,b=yde({allowEscapeViewBox:i,coordinate:c,offsetTopLeft:h,position:p,reverseDirection:m,tooltipBox:this.state.lastBoundingBox,useTranslate3d:g,viewBox:y}),x=b.cssClasses,w=b.cssProperties,S=T_(T_({transition:f&&s?"transform ".concat(a,"ms ").concat(l):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&d?"visible":"hidden",position:"absolute",top:0,left:0},v);return z.createElement("div",{tabIndex:-1,className:x,style:S,ref:function(C){r.wrapperNode=C}},u)}}])}(A.PureComponent),Tde=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Fl={isSsr:Tde(),get:function(e){return Fl[e]},set:function(e,n){if(typeof e=="string")Fl[e]=n;else{var r=Object.keys(e);r&&r.length&&r.forEach(function(o){Fl[o]=e[o]})}}};function Uc(t){"@babel/helpers - typeof";return Uc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uc(t)}function N_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function A_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?N_(Object(n),!0).forEach(function(r){QI(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ede(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Nde(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,bj(r.key),r)}}function Ade(t,e,n){return e&&Nde(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ode(t,e,n){return e=iv(e),_de(t,xj()?Reflect.construct(e,n||[],iv(t).constructor):e.apply(t,n))}function _de(t,e){if(e&&(Uc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rde(t)}function Rde(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xj(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xj=function(){return!!t})()}function iv(t){return iv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},iv(t)}function Pde(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OC(t,e)}function OC(t,e){return OC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},OC(t,e)}function QI(t,e,n){return e=bj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bj(t){var e=Dde(t,"string");return Uc(e)=="symbol"?e:e+""}function Dde(t,e){if(Uc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Uc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mde(t){return t.dataKey}function Fde(t,e){return z.isValidElement(t)?z.cloneElement(t,e):typeof t=="function"?z.createElement(t,e):z.createElement(dde,e)}var Zo=function(t){function e(){return Ede(this,e),Ode(this,e,arguments)}return Pde(e,t),Ade(e,[{key:"render",value:function(){var r=this,o=this.props,s=o.active,i=o.allowEscapeViewBox,a=o.animationDuration,l=o.animationEasing,u=o.content,c=o.coordinate,d=o.filterNull,f=o.isAnimationActive,h=o.offset,p=o.payload,m=o.payloadUniqBy,g=o.position,y=o.reverseDirection,v=o.useTranslate3d,b=o.viewBox,x=o.wrapperStyle,w=p??[];d&&w.length&&(w=uj(p.filter(function($){return $.value!=null&&($.hide!==!0||r.props.includeHidden)}),m,Mde));var S=w.length>0;return z.createElement(Ide,{allowEscapeViewBox:i,animationDuration:a,animationEasing:l,isAnimationActive:f,active:s,coordinate:c,hasPayload:S,offset:h,position:g,reverseDirection:y,useTranslate3d:v,viewBox:b,wrapperStyle:x},Fde(u,A_(A_({},this.props),{},{payload:w})))}}])}(A.PureComponent);QI(Zo,"displayName","Tooltip");QI(Zo,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Fl.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Lde=ni,Bde=function(){return Lde.Date.now()},zde=Bde,jde=/\s/;function Wde(t){for(var e=t.length;e--&&jde.test(t.charAt(e)););return e}var Vde=Wde,Ude=Vde,Gde=/^\s+/;function Hde(t){return t&&t.slice(0,Ude(t)+1).replace(Gde,"")}var Kde=Hde,qde=Kde,O_=Ua,Xde=Ed,__=NaN,Yde=/^[-+]0x[0-9a-f]+$/i,Qde=/^0b[01]+$/i,Zde=/^0o[0-7]+$/i,Jde=parseInt;function efe(t){if(typeof t=="number")return t;if(Xde(t))return __;if(O_(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=O_(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=qde(t);var n=Qde.test(t);return n||Zde.test(t)?Jde(t.slice(2),n?2:8):Yde.test(t)?__:+t}var wj=efe,tfe=Ua,iw=zde,R_=wj,nfe="Expected a function",rfe=Math.max,ofe=Math.min;function sfe(t,e,n){var r,o,s,i,a,l,u=0,c=!1,d=!1,f=!0;if(typeof t!="function")throw new TypeError(nfe);e=R_(e)||0,tfe(n)&&(c=!!n.leading,d="maxWait"in n,s=d?rfe(R_(n.maxWait)||0,e):s,f="trailing"in n?!!n.trailing:f);function h(S){var $=r,C=o;return r=o=void 0,u=S,i=t.apply(C,$),i}function p(S){return u=S,a=setTimeout(y,e),c?h(S):i}function m(S){var $=S-l,C=S-u,k=e-$;return d?ofe(k,s-C):k}function g(S){var $=S-l,C=S-u;return l===void 0||$>=e||$<0||d&&C>=s}function y(){var S=iw();if(g(S))return v(S);a=setTimeout(y,m(S))}function v(S){return a=void 0,f&&r?h(S):(r=o=void 0,i)}function b(){a!==void 0&&clearTimeout(a),u=0,r=l=o=a=void 0}function x(){return a===void 0?i:v(iw())}function w(){var S=iw(),$=g(S);if(r=arguments,o=this,l=S,$){if(a===void 0)return p(l);if(d)return clearTimeout(a),a=setTimeout(y,e),h(l)}return a===void 0&&(a=setTimeout(y,e)),i}return w.cancel=b,w.flush=x,w}var ife=sfe,afe=ife,lfe=Ua,ufe="Expected a function";function cfe(t,e,n){var r=!0,o=!0;if(typeof t!="function")throw new TypeError(ufe);return lfe(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),afe(t,e,{leading:r,maxWait:e,trailing:o})}var dfe=cfe;const Sj=ut(dfe);function _h(t){"@babel/helpers - typeof";return _h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_h(t)}function P_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Tg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?P_(Object(n),!0).forEach(function(r){ffe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ffe(t,e,n){return e=hfe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hfe(t){var e=pfe(t,"string");return _h(e)=="symbol"?e:e+""}function pfe(t,e){if(_h(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(_h(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mfe(t,e){return xfe(t)||vfe(t,e)||yfe(t,e)||gfe()}function gfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yfe(t,e){if(t){if(typeof t=="string")return D_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D_(t,e)}}function D_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vfe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,s,i,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,o=c}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return a}}function xfe(t){if(Array.isArray(t))return t}var M_=A.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,o=r===void 0?{width:-1,height:-1}:r,s=t.width,i=s===void 0?"100%":s,a=t.height,l=a===void 0?"100%":a,u=t.minWidth,c=u===void 0?0:u,d=t.minHeight,f=t.maxHeight,h=t.children,p=t.debounce,m=p===void 0?0:p,g=t.id,y=t.className,v=t.onResize,b=t.style,x=b===void 0?{}:b,w=A.useRef(null),S=A.useRef();S.current=v,A.useImperativeHandle(e,function(){return Object.defineProperty(w.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),w.current},configurable:!0})});var $=A.useState({containerWidth:o.width,containerHeight:o.height}),C=mfe($,2),k=C[0],I=C[1],T=A.useCallback(function(_,O){I(function(F){var M=Math.round(_),L=Math.round(O);return F.containerWidth===M&&F.containerHeight===L?F:{containerWidth:M,containerHeight:L}})},[]);A.useEffect(function(){var _=function(D){var U,B=D[0].contentRect,W=B.width,V=B.height;T(W,V),(U=S.current)===null||U===void 0||U.call(S,W,V)};m>0&&(_=Sj(_,m,{trailing:!0,leading:!1}));var O=new ResizeObserver(_),F=w.current.getBoundingClientRect(),M=F.width,L=F.height;return T(M,L),O.observe(w.current),function(){O.disconnect()}},[T,m]);var E=A.useMemo(function(){var _=k.containerWidth,O=k.containerHeight;if(_<0||O<0)return null;bi(kl(i)||kl(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,l),bi(!n||n>0,"The aspect(%s) must be greater than zero.",n);var F=kl(i)?_:i,M=kl(l)?O:l;n&&n>0&&(F?M=F/n:M&&(F=M*n),f&&M>f&&(M=f)),bi(F>0||M>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,F,M,i,l,c,d,n);var L=!Array.isArray(h)&&xi(h.type).endsWith("Chart");return z.Children.map(h,function(N){return xz.isElement(N)?A.cloneElement(N,Tg({width:F,height:M},L?{style:Tg({height:"100%",width:"100%",maxHeight:M,maxWidth:F},N.props.style)}:{})):N})},[n,h,l,f,d,c,k,i]);return z.createElement("div",{id:g?"".concat(g):void 0,className:et("recharts-responsive-container",y),style:Tg(Tg({},x),{},{width:i,height:l,minWidth:c,minHeight:d,maxHeight:f}),ref:w},E)}),av=function(e){return null};av.displayName="Cell";function Rh(t){"@babel/helpers - typeof";return Rh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rh(t)}function F_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function _C(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F_(Object(n),!0).forEach(function(r){bfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bfe(t,e,n){return e=wfe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wfe(t){var e=Sfe(t,"string");return Rh(e)=="symbol"?e:e+""}function Sfe(t,e){if(Rh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Rh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _u={widthCache:{},cacheCount:0},Cfe=2e3,$fe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},L_="recharts_measurement_span";function kfe(t){var e=_C({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var B_=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Fl.isSsr)return{width:0,height:0};var r=kfe(n),o=JSON.stringify({text:e,copyStyle:r});if(_u.widthCache[o])return _u.widthCache[o];try{var s=document.getElementById(L_);s||(s=document.createElement("span"),s.setAttribute("id",L_),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var i=_C(_C({},$fe),r);Object.assign(s.style,i),s.textContent="".concat(e);var a=s.getBoundingClientRect(),l={width:a.width,height:a.height};return _u.widthCache[o]=l,++_u.cacheCount>Cfe&&(_u.cacheCount=0,_u.widthCache={}),l}catch{return{width:0,height:0}}},Ife=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Ph(t){"@babel/helpers - typeof";return Ph=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ph(t)}function lv(t,e){return Afe(t)||Nfe(t,e)||Efe(t,e)||Tfe()}function Tfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Efe(t,e){if(t){if(typeof t=="string")return z_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z_(t,e)}}function z_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Nfe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,s,i,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,o=c}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return a}}function Afe(t){if(Array.isArray(t))return t}function Ofe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function j_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Rfe(r.key),r)}}function _fe(t,e,n){return e&&j_(t.prototype,e),n&&j_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Rfe(t){var e=Pfe(t,"string");return Ph(e)=="symbol"?e:e+""}function Pfe(t,e){if(Ph(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ph(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var W_=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,V_=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Dfe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Mfe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Cj={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Ffe=Object.keys(Cj),Zu="NaN";function Lfe(t,e){return t*Cj[e]}var Eg=function(){function t(e,n){Ofe(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!Dfe.test(n)&&(this.num=NaN,this.unit=""),Ffe.includes(n)&&(this.num=Lfe(e,n),this.unit="px")}return _fe(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,o=(r=Mfe.exec(n))!==null&&r!==void 0?r:[],s=lv(o,3),i=s[1],a=s[2];return new t(parseFloat(i),a??"")}}])}();function $j(t){if(t.includes(Zu))return Zu;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=W_.exec(e))!==null&&n!==void 0?n:[],o=lv(r,4),s=o[1],i=o[2],a=o[3],l=Eg.parse(s??""),u=Eg.parse(a??""),c=i==="*"?l.multiply(u):l.divide(u);if(c.isNaN())return Zu;e=e.replace(W_,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,f=(d=V_.exec(e))!==null&&d!==void 0?d:[],h=lv(f,4),p=h[1],m=h[2],g=h[3],y=Eg.parse(p??""),v=Eg.parse(g??""),b=m==="+"?y.add(v):y.subtract(v);if(b.isNaN())return Zu;e=e.replace(V_,b.toString())}return e}var U_=/\(([^()]*)\)/;function Bfe(t){for(var e=t;e.includes("(");){var n=U_.exec(e),r=lv(n,2),o=r[1];e=e.replace(U_,$j(o))}return e}function zfe(t){var e=t.replace(/\s+/g,"");return e=Bfe(e),e=$j(e),e}function jfe(t){try{return zfe(t)}catch{return Zu}}function aw(t){var e=jfe(t.slice(5,-1));return e===Zu?"":e}var Wfe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Vfe=["dx","dy","angle","className","breakAll"];function RC(){return RC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},RC.apply(this,arguments)}function G_(t,e){if(t==null)return{};var n=Ufe(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Ufe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function H_(t,e){return qfe(t)||Kfe(t,e)||Hfe(t,e)||Gfe()}function Gfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hfe(t,e){if(t){if(typeof t=="string")return K_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K_(t,e)}}function K_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Kfe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,s,i,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,o=c}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return a}}function qfe(t){if(Array.isArray(t))return t}var kj=/[ \f\n\r\t\v\u2028\u2029]+/,Ij=function(e){var n=e.children,r=e.breakAll,o=e.style;try{var s=[];Ye(n)||(r?s=n.toString().split(""):s=n.toString().split(kj));var i=s.map(function(l){return{word:l,width:B_(l,o).width}}),a=r?0:B_(" ",o).width;return{wordsWithComputedWidth:i,spaceWidth:a}}catch{return null}},Xfe=function(e,n,r,o,s){var i=e.maxLines,a=e.children,l=e.style,u=e.breakAll,c=Ce(i),d=a,f=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return F.reduce(function(M,L){var N=L.word,D=L.width,U=M[M.length-1];if(U&&(o==null||s||U.width+D+r<Number(o)))U.words.push(N),U.width+=D+r;else{var B={words:[N],width:D};M.push(B)}return M},[])},h=f(n),p=function(F){return F.reduce(function(M,L){return M.width>L.width?M:L})};if(!c)return h;for(var m="…",g=function(F){var M=d.slice(0,F),L=Ij({breakAll:u,style:l,children:M+m}).wordsWithComputedWidth,N=f(L),D=N.length>i||p(N).width>Number(o);return[D,N]},y=0,v=d.length-1,b=0,x;y<=v&&b<=d.length-1;){var w=Math.floor((y+v)/2),S=w-1,$=g(S),C=H_($,2),k=C[0],I=C[1],T=g(w),E=H_(T,1),_=E[0];if(!k&&!_&&(y=w+1),k&&_&&(v=w-1),!k&&_){x=I;break}b++}return x||h},q_=function(e){var n=Ye(e)?[]:e.toString().split(kj);return[{words:n}]},Yfe=function(e){var n=e.width,r=e.scaleToFit,o=e.children,s=e.style,i=e.breakAll,a=e.maxLines;if((n||r)&&!Fl.isSsr){var l,u,c=Ij({breakAll:i,children:o,style:s});if(c){var d=c.wordsWithComputedWidth,f=c.spaceWidth;l=d,u=f}else return q_(o);return Xfe({breakAll:i,children:o,maxLines:a,style:s},l,u,n,r)}return q_(o)},X_="#808080",Gc=function(e){var n=e.x,r=n===void 0?0:n,o=e.y,s=o===void 0?0:o,i=e.lineHeight,a=i===void 0?"1em":i,l=e.capHeight,u=l===void 0?"0.71em":l,c=e.scaleToFit,d=c===void 0?!1:c,f=e.textAnchor,h=f===void 0?"start":f,p=e.verticalAnchor,m=p===void 0?"end":p,g=e.fill,y=g===void 0?X_:g,v=G_(e,Wfe),b=A.useMemo(function(){return Yfe({breakAll:v.breakAll,children:v.children,maxLines:v.maxLines,scaleToFit:d,style:v.style,width:v.width})},[v.breakAll,v.children,v.maxLines,d,v.style,v.width]),x=v.dx,w=v.dy,S=v.angle,$=v.className,C=v.breakAll,k=G_(v,Vfe);if(!Tn(r)||!Tn(s))return null;var I=r+(Ce(x)?x:0),T=s+(Ce(w)?w:0),E;switch(m){case"start":E=aw("calc(".concat(u,")"));break;case"middle":E=aw("calc(".concat((b.length-1)/2," * -").concat(a," + (").concat(u," / 2))"));break;default:E=aw("calc(".concat(b.length-1," * -").concat(a,")"));break}var _=[];if(d){var O=b[0].width,F=v.width;_.push("scale(".concat((Ce(F)?F/O:1)/O,")"))}return S&&_.push("rotate(".concat(S,", ").concat(I,", ").concat(T,")")),_.length&&(k.transform=_.join(" ")),z.createElement("text",RC({},Ve(k,!0),{x:I,y:T,className:et("recharts-text",$),textAnchor:h,fill:y.includes("url")?X_:y}),b.map(function(M,L){var N=M.words.join(C?"":" ");return z.createElement("tspan",{x:I,dy:L===0?E:a,key:"".concat(N,"-").concat(L)},N)}))};function Sa(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Qfe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ZI(t){let e,n,r;t.length!==2?(e=Sa,n=(a,l)=>Sa(t(a),l),r=(a,l)=>t(a)-l):(e=t===Sa||t===Qfe?t:Zfe,n=t,r=t);function o(a,l,u=0,c=a.length){if(u<c){if(e(l,l)!==0)return c;do{const d=u+c>>>1;n(a[d],l)<0?u=d+1:c=d}while(u<c)}return u}function s(a,l,u=0,c=a.length){if(u<c){if(e(l,l)!==0)return c;do{const d=u+c>>>1;n(a[d],l)<=0?u=d+1:c=d}while(u<c)}return u}function i(a,l,u=0,c=a.length){const d=o(a,l,u,c-1);return d>u&&r(a[d-1],l)>-r(a[d],l)?d-1:d}return{left:o,center:i,right:s}}function Zfe(){return 0}function Tj(t){return t===null?NaN:+t}function*Jfe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const ehe=ZI(Sa),Op=ehe.right;ZI(Tj).center;class Y_ extends Map{constructor(e,n=rhe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,o]of e)this.set(r,o)}get(e){return super.get(Q_(this,e))}has(e){return super.has(Q_(this,e))}set(e,n){return super.set(the(this,e),n)}delete(e){return super.delete(nhe(this,e))}}function Q_({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function the({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function nhe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function rhe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function ohe(t=Sa){if(t===Sa)return Ej;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function Ej(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const she=Math.sqrt(50),ihe=Math.sqrt(10),ahe=Math.sqrt(2);function uv(t,e,n){const r=(e-t)/Math.max(0,n),o=Math.floor(Math.log10(r)),s=r/Math.pow(10,o),i=s>=she?10:s>=ihe?5:s>=ahe?2:1;let a,l,u;return o<0?(u=Math.pow(10,-o)/i,a=Math.round(t*u),l=Math.round(e*u),a/u<t&&++a,l/u>e&&--l,u=-u):(u=Math.pow(10,o)*i,a=Math.round(t/u),l=Math.round(e/u),a*u<t&&++a,l*u>e&&--l),l<a&&.5<=n&&n<2?uv(t,e,n*2):[a,l,u]}function PC(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[o,s,i]=r?uv(e,t,n):uv(t,e,n);if(!(s>=o))return[];const a=s-o+1,l=new Array(a);if(r)if(i<0)for(let u=0;u<a;++u)l[u]=(s-u)/-i;else for(let u=0;u<a;++u)l[u]=(s-u)*i;else if(i<0)for(let u=0;u<a;++u)l[u]=(o+u)/-i;else for(let u=0;u<a;++u)l[u]=(o+u)*i;return l}function DC(t,e,n){return e=+e,t=+t,n=+n,uv(t,e,n)[2]}function MC(t,e,n){e=+e,t=+t,n=+n;const r=e<t,o=r?DC(e,t,n):DC(t,e,n);return(r?-1:1)*(o<0?1/-o:o)}function Z_(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function J_(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function Nj(t,e,n=0,r=1/0,o){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(o=o===void 0?Ej:ohe(o);r>n;){if(r-n>600){const l=r-n+1,u=e-n+1,c=Math.log(l),d=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*d*(l-d)/l)*(u-l/2<0?-1:1),h=Math.max(n,Math.floor(e-u*d/l+f)),p=Math.min(r,Math.floor(e+(l-u)*d/l+f));Nj(t,e,h,p,o)}const s=t[e];let i=n,a=r;for(yf(t,n,e),o(t[r],s)>0&&yf(t,n,r);i<a;){for(yf(t,i,a),++i,--a;o(t[i],s)<0;)++i;for(;o(t[a],s)>0;)--a}o(t[n],s)===0?yf(t,n,a):(++a,yf(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}return t}function yf(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function lhe(t,e,n){if(t=Float64Array.from(Jfe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return J_(t);if(e>=1)return Z_(t);var r,o=(r-1)*e,s=Math.floor(o),i=Z_(Nj(t,s).subarray(0,s+1)),a=J_(t.subarray(s+1));return i+(a-i)*(o-s)}}function uhe(t,e,n=Tj){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,o=(r-1)*e,s=Math.floor(o),i=+n(t[s],s,t),a=+n(t[s+1],s+1,t);return i+(a-i)*(o-s)}}function che(t,e,n){t=+t,e=+e,n=(o=arguments.length)<2?(e=t,t=0,1):o<3?1:+n;for(var r=-1,o=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(o);++r<o;)s[r]=t+r*n;return s}function zo(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Bi(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const FC=Symbol("implicit");function JI(){var t=new Y_,e=[],n=[],r=FC;function o(s){let i=t.get(s);if(i===void 0){if(r!==FC)return r;t.set(s,i=e.push(s)-1)}return n[i%n.length]}return o.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new Y_;for(const i of s)t.has(i)||t.set(i,e.push(i)-1);return o},o.range=function(s){return arguments.length?(n=Array.from(s),o):n.slice()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.copy=function(){return JI(e,n).unknown(r)},zo.apply(o,arguments),o}function Dh(){var t=JI().unknown(void 0),e=t.domain,n=t.range,r=0,o=1,s,i,a=!1,l=0,u=0,c=.5;delete t.unknown;function d(){var f=e().length,h=o<r,p=h?o:r,m=h?r:o;s=(m-p)/Math.max(1,f-l+u*2),a&&(s=Math.floor(s)),p+=(m-p-s*(f-l))*c,i=s*(1-l),a&&(p=Math.round(p),i=Math.round(i));var g=che(f).map(function(y){return p+s*y});return n(h?g.reverse():g)}return t.domain=function(f){return arguments.length?(e(f),d()):e()},t.range=function(f){return arguments.length?([r,o]=f,r=+r,o=+o,d()):[r,o]},t.rangeRound=function(f){return[r,o]=f,r=+r,o=+o,a=!0,d()},t.bandwidth=function(){return i},t.step=function(){return s},t.round=function(f){return arguments.length?(a=!!f,d()):a},t.padding=function(f){return arguments.length?(l=Math.min(1,u=+f),d()):l},t.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),d()):l},t.paddingOuter=function(f){return arguments.length?(u=+f,d()):u},t.align=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),d()):c},t.copy=function(){return Dh(e(),[r,o]).round(a).paddingInner(l).paddingOuter(u).align(c)},zo.apply(d(),arguments)}function Aj(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Aj(e())},t}function Zf(){return Aj(Dh.apply(null,arguments).paddingInner(1))}function eT(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Oj(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function _p(){}var Mh=.7,cv=1/Mh,dc="\\s*([+-]?\\d+)\\s*",Fh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ls="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",dhe=/^#([0-9a-f]{3,8})$/,fhe=new RegExp(`^rgb\\(${dc},${dc},${dc}\\)$`),hhe=new RegExp(`^rgb\\(${Ls},${Ls},${Ls}\\)$`),phe=new RegExp(`^rgba\\(${dc},${dc},${dc},${Fh}\\)$`),mhe=new RegExp(`^rgba\\(${Ls},${Ls},${Ls},${Fh}\\)$`),ghe=new RegExp(`^hsl\\(${Fh},${Ls},${Ls}\\)$`),yhe=new RegExp(`^hsla\\(${Fh},${Ls},${Ls},${Fh}\\)$`),eR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};eT(_p,Lh,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:tR,formatHex:tR,formatHex8:vhe,formatHsl:xhe,formatRgb:nR,toString:nR});function tR(){return this.rgb().formatHex()}function vhe(){return this.rgb().formatHex8()}function xhe(){return _j(this).formatHsl()}function nR(){return this.rgb().formatRgb()}function Lh(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=dhe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?rR(e):n===3?new _r(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Ng(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Ng(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=fhe.exec(t))?new _r(e[1],e[2],e[3],1):(e=hhe.exec(t))?new _r(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=phe.exec(t))?Ng(e[1],e[2],e[3],e[4]):(e=mhe.exec(t))?Ng(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=ghe.exec(t))?iR(e[1],e[2]/100,e[3]/100,1):(e=yhe.exec(t))?iR(e[1],e[2]/100,e[3]/100,e[4]):eR.hasOwnProperty(t)?rR(eR[t]):t==="transparent"?new _r(NaN,NaN,NaN,0):null}function rR(t){return new _r(t>>16&255,t>>8&255,t&255,1)}function Ng(t,e,n,r){return r<=0&&(t=e=n=NaN),new _r(t,e,n,r)}function bhe(t){return t instanceof _p||(t=Lh(t)),t?(t=t.rgb(),new _r(t.r,t.g,t.b,t.opacity)):new _r}function LC(t,e,n,r){return arguments.length===1?bhe(t):new _r(t,e,n,r??1)}function _r(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}eT(_r,LC,Oj(_p,{brighter(t){return t=t==null?cv:Math.pow(cv,t),new _r(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Mh:Math.pow(Mh,t),new _r(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new _r(Ll(this.r),Ll(this.g),Ll(this.b),dv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:oR,formatHex:oR,formatHex8:whe,formatRgb:sR,toString:sR}));function oR(){return`#${Il(this.r)}${Il(this.g)}${Il(this.b)}`}function whe(){return`#${Il(this.r)}${Il(this.g)}${Il(this.b)}${Il((isNaN(this.opacity)?1:this.opacity)*255)}`}function sR(){const t=dv(this.opacity);return`${t===1?"rgb(":"rgba("}${Ll(this.r)}, ${Ll(this.g)}, ${Ll(this.b)}${t===1?")":`, ${t})`}`}function dv(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ll(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Il(t){return t=Ll(t),(t<16?"0":"")+t.toString(16)}function iR(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ns(t,e,n,r)}function _j(t){if(t instanceof ns)return new ns(t.h,t.s,t.l,t.opacity);if(t instanceof _p||(t=Lh(t)),!t)return new ns;if(t instanceof ns)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,o=Math.min(e,n,r),s=Math.max(e,n,r),i=NaN,a=s-o,l=(s+o)/2;return a?(e===s?i=(n-r)/a+(n<r)*6:n===s?i=(r-e)/a+2:i=(e-n)/a+4,a/=l<.5?s+o:2-s-o,i*=60):a=l>0&&l<1?0:i,new ns(i,a,l,t.opacity)}function She(t,e,n,r){return arguments.length===1?_j(t):new ns(t,e,n,r??1)}function ns(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}eT(ns,She,Oj(_p,{brighter(t){return t=t==null?cv:Math.pow(cv,t),new ns(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Mh:Math.pow(Mh,t),new ns(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,o=2*n-r;return new _r(lw(t>=240?t-240:t+120,o,r),lw(t,o,r),lw(t<120?t+240:t-120,o,r),this.opacity)},clamp(){return new ns(aR(this.h),Ag(this.s),Ag(this.l),dv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=dv(this.opacity);return`${t===1?"hsl(":"hsla("}${aR(this.h)}, ${Ag(this.s)*100}%, ${Ag(this.l)*100}%${t===1?")":`, ${t})`}`}}));function aR(t){return t=(t||0)%360,t<0?t+360:t}function Ag(t){return Math.max(0,Math.min(1,t||0))}function lw(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const tT=t=>()=>t;function Che(t,e){return function(n){return t+n*e}}function $he(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function khe(t){return(t=+t)==1?Rj:function(e,n){return n-e?$he(e,n,t):tT(isNaN(e)?n:e)}}function Rj(t,e){var n=e-t;return n?Che(t,n):tT(isNaN(t)?e:t)}const lR=function t(e){var n=khe(e);function r(o,s){var i=n((o=LC(o)).r,(s=LC(s)).r),a=n(o.g,s.g),l=n(o.b,s.b),u=Rj(o.opacity,s.opacity);return function(c){return o.r=i(c),o.g=a(c),o.b=l(c),o.opacity=u(c),o+""}}return r.gamma=t,r}(1);function Ihe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),o;return function(s){for(o=0;o<n;++o)r[o]=t[o]*(1-s)+e[o]*s;return r}}function The(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ehe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,o=new Array(r),s=new Array(n),i;for(i=0;i<r;++i)o[i]=Md(t[i],e[i]);for(;i<n;++i)s[i]=e[i];return function(a){for(i=0;i<r;++i)s[i]=o[i](a);return s}}function Nhe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function fv(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Ahe(t,e){var n={},r={},o;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(o in e)o in t?n[o]=Md(t[o],e[o]):r[o]=e[o];return function(s){for(o in n)r[o]=n[o](s);return r}}var BC=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,uw=new RegExp(BC.source,"g");function Ohe(t){return function(){return t}}function _he(t){return function(e){return t(e)+""}}function Rhe(t,e){var n=BC.lastIndex=uw.lastIndex=0,r,o,s,i=-1,a=[],l=[];for(t=t+"",e=e+"";(r=BC.exec(t))&&(o=uw.exec(e));)(s=o.index)>n&&(s=e.slice(n,s),a[i]?a[i]+=s:a[++i]=s),(r=r[0])===(o=o[0])?a[i]?a[i]+=o:a[++i]=o:(a[++i]=null,l.push({i,x:fv(r,o)})),n=uw.lastIndex;return n<e.length&&(s=e.slice(n),a[i]?a[i]+=s:a[++i]=s),a.length<2?l[0]?_he(l[0].x):Ohe(e):(e=l.length,function(u){for(var c=0,d;c<e;++c)a[(d=l[c]).i]=d.x(u);return a.join("")})}function Md(t,e){var n=typeof e,r;return e==null||n==="boolean"?tT(e):(n==="number"?fv:n==="string"?(r=Lh(e))?(e=r,lR):Rhe:e instanceof Lh?lR:e instanceof Date?Nhe:The(e)?Ihe:Array.isArray(e)?Ehe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Ahe:fv)(t,e)}function nT(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Phe(t,e){e===void 0&&(e=t,t=Md);for(var n=0,r=e.length-1,o=e[0],s=new Array(r<0?0:r);n<r;)s[n]=t(o,o=e[++n]);return function(i){var a=Math.max(0,Math.min(r-1,Math.floor(i*=r)));return s[a](i-a)}}function Dhe(t){return function(){return t}}function hv(t){return+t}var uR=[0,1];function vr(t){return t}function zC(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Dhe(isNaN(e)?NaN:.5)}function Mhe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Fhe(t,e,n){var r=t[0],o=t[1],s=e[0],i=e[1];return o<r?(r=zC(o,r),s=n(i,s)):(r=zC(r,o),s=n(s,i)),function(a){return s(r(a))}}function Lhe(t,e,n){var r=Math.min(t.length,e.length)-1,o=new Array(r),s=new Array(r),i=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++i<r;)o[i]=zC(t[i],t[i+1]),s[i]=n(e[i],e[i+1]);return function(a){var l=Op(t,a,1,r)-1;return s[l](o[l](a))}}function Rp(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function gx(){var t=uR,e=uR,n=Md,r,o,s,i=vr,a,l,u;function c(){var f=Math.min(t.length,e.length);return i!==vr&&(i=Mhe(t[0],t[f-1])),a=f>2?Lhe:Fhe,l=u=null,d}function d(f){return f==null||isNaN(f=+f)?s:(l||(l=a(t.map(r),e,n)))(r(i(f)))}return d.invert=function(f){return i(o((u||(u=a(e,t.map(r),fv)))(f)))},d.domain=function(f){return arguments.length?(t=Array.from(f,hv),c()):t.slice()},d.range=function(f){return arguments.length?(e=Array.from(f),c()):e.slice()},d.rangeRound=function(f){return e=Array.from(f),n=nT,c()},d.clamp=function(f){return arguments.length?(i=f?!0:vr,c()):i!==vr},d.interpolate=function(f){return arguments.length?(n=f,c()):n},d.unknown=function(f){return arguments.length?(s=f,d):s},function(f,h){return r=f,o=h,c()}}function rT(){return gx()(vr,vr)}function Bhe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function pv(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Hc(t){return t=pv(Math.abs(t)),t?t[1]:NaN}function zhe(t,e){return function(n,r){for(var o=n.length,s=[],i=0,a=t[0],l=0;o>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(n.substring(o-=a,o+a)),!((l+=a+1)>r));)a=t[i=(i+1)%t.length];return s.reverse().join(e)}}function jhe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Whe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Bh(t){if(!(e=Whe.exec(t)))throw new Error("invalid format: "+t);var e;return new oT({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Bh.prototype=oT.prototype;function oT(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}oT.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Vhe(t){e:for(var e=t.length,n=1,r=-1,o;n<e;++n)switch(t[n]){case".":r=o=n;break;case"0":r===0&&(r=n),o=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(o+1):t}var Pj;function Uhe(t,e){var n=pv(t,e);if(!n)return t+"";var r=n[0],o=n[1],s=o-(Pj=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,i=r.length;return s===i?r:s>i?r+new Array(s-i+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+pv(t,Math.max(0,e+s-1))[0]}function cR(t,e){var n=pv(t,e);if(!n)return t+"";var r=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+r:r.length>o+1?r.slice(0,o+1)+"."+r.slice(o+1):r+new Array(o-r.length+2).join("0")}const dR={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Bhe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>cR(t*100,e),r:cR,s:Uhe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function fR(t){return t}var hR=Array.prototype.map,pR=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Ghe(t){var e=t.grouping===void 0||t.thousands===void 0?fR:zhe(hR.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",o=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?fR:jhe(hR.call(t.numerals,String)),i=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(d){d=Bh(d);var f=d.fill,h=d.align,p=d.sign,m=d.symbol,g=d.zero,y=d.width,v=d.comma,b=d.precision,x=d.trim,w=d.type;w==="n"?(v=!0,w="g"):dR[w]||(b===void 0&&(b=12),x=!0,w="g"),(g||f==="0"&&h==="=")&&(g=!0,f="0",h="=");var S=m==="$"?n:m==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",$=m==="$"?r:/[%p]/.test(w)?i:"",C=dR[w],k=/[defgprs%]/.test(w);b=b===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function I(T){var E=S,_=$,O,F,M;if(w==="c")_=C(T)+_,T="";else{T=+T;var L=T<0||1/T<0;if(T=isNaN(T)?l:C(Math.abs(T),b),x&&(T=Vhe(T)),L&&+T==0&&p!=="+"&&(L=!1),E=(L?p==="("?p:a:p==="-"||p==="("?"":p)+E,_=(w==="s"?pR[8+Pj/3]:"")+_+(L&&p==="("?")":""),k){for(O=-1,F=T.length;++O<F;)if(M=T.charCodeAt(O),48>M||M>57){_=(M===46?o+T.slice(O+1):T.slice(O))+_,T=T.slice(0,O);break}}}v&&!g&&(T=e(T,1/0));var N=E.length+T.length+_.length,D=N<y?new Array(y-N+1).join(f):"";switch(v&&g&&(T=e(D+T,D.length?y-_.length:1/0),D=""),h){case"<":T=E+T+_+D;break;case"=":T=E+D+T+_;break;case"^":T=D.slice(0,N=D.length>>1)+E+T+_+D.slice(N);break;default:T=D+E+T+_;break}return s(T)}return I.toString=function(){return d+""},I}function c(d,f){var h=u((d=Bh(d),d.type="f",d)),p=Math.max(-8,Math.min(8,Math.floor(Hc(f)/3)))*3,m=Math.pow(10,-p),g=pR[8+p/3];return function(y){return h(m*y)+g}}return{format:u,formatPrefix:c}}var Og,sT,Dj;Hhe({thousands:",",grouping:[3],currency:["$",""]});function Hhe(t){return Og=Ghe(t),sT=Og.format,Dj=Og.formatPrefix,Og}function Khe(t){return Math.max(0,-Hc(Math.abs(t)))}function qhe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Hc(e)/3)))*3-Hc(Math.abs(t)))}function Xhe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Hc(e)-Hc(t))+1}function Mj(t,e,n,r){var o=MC(t,e,n),s;switch(r=Bh(r??",f"),r.type){case"s":{var i=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=qhe(o,i))&&(r.precision=s),Dj(r,i)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=Xhe(o,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=Khe(o))&&(r.precision=s-(r.type==="%")*2);break}}return sT(r)}function Ha(t){var e=t.domain;return t.ticks=function(n){var r=e();return PC(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var o=e();return Mj(o[0],o[o.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),o=0,s=r.length-1,i=r[o],a=r[s],l,u,c=10;for(a<i&&(u=i,i=a,a=u,u=o,o=s,s=u);c-- >0;){if(u=DC(i,a,n),u===l)return r[o]=i,r[s]=a,e(r);if(u>0)i=Math.floor(i/u)*u,a=Math.ceil(a/u)*u;else if(u<0)i=Math.ceil(i*u)/u,a=Math.floor(a*u)/u;else break;l=u}return t},t}function mv(){var t=rT();return t.copy=function(){return Rp(t,mv())},zo.apply(t,arguments),Ha(t)}function Fj(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,hv),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return Fj(t).unknown(e)},t=arguments.length?Array.from(t,hv):[0,1],Ha(n)}function Lj(t,e){t=t.slice();var n=0,r=t.length-1,o=t[n],s=t[r],i;return s<o&&(i=n,n=r,r=i,i=o,o=s,s=i),t[n]=e.floor(o),t[r]=e.ceil(s),t}function mR(t){return Math.log(t)}function gR(t){return Math.exp(t)}function Yhe(t){return-Math.log(-t)}function Qhe(t){return-Math.exp(-t)}function Zhe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Jhe(t){return t===10?Zhe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function epe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function yR(t){return(e,n)=>-t(-e,n)}function iT(t){const e=t(mR,gR),n=e.domain;let r=10,o,s;function i(){return o=epe(r),s=Jhe(r),n()[0]<0?(o=yR(o),s=yR(s),t(Yhe,Qhe)):t(mR,gR),e}return e.base=function(a){return arguments.length?(r=+a,i()):r},e.domain=function(a){return arguments.length?(n(a),i()):n()},e.ticks=a=>{const l=n();let u=l[0],c=l[l.length-1];const d=c<u;d&&([u,c]=[c,u]);let f=o(u),h=o(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-f<g){if(f=Math.floor(f),h=Math.ceil(h),u>0){for(;f<=h;++f)for(p=1;p<r;++p)if(m=f<0?p/s(-f):p*s(f),!(m<u)){if(m>c)break;y.push(m)}}else for(;f<=h;++f)for(p=r-1;p>=1;--p)if(m=f>0?p/s(-f):p*s(f),!(m<u)){if(m>c)break;y.push(m)}y.length*2<g&&(y=PC(u,c,g))}else y=PC(f,h,Math.min(h-f,g)).map(s);return d?y.reverse():y},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=Bh(l)).precision==null&&(l.trim=!0),l=sT(l)),a===1/0)return l;const u=Math.max(1,r*a/e.ticks().length);return c=>{let d=c/s(Math.round(o(c)));return d*r<r-.5&&(d*=r),d<=u?l(c):""}},e.nice=()=>n(Lj(n(),{floor:a=>s(Math.floor(o(a))),ceil:a=>s(Math.ceil(o(a)))})),e}function Bj(){const t=iT(gx()).domain([1,10]);return t.copy=()=>Rp(t,Bj()).base(t.base()),zo.apply(t,arguments),t}function vR(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function xR(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function aT(t){var e=1,n=t(vR(e),xR(e));return n.constant=function(r){return arguments.length?t(vR(e=+r),xR(e)):e},Ha(n)}function zj(){var t=aT(gx());return t.copy=function(){return Rp(t,zj()).constant(t.constant())},zo.apply(t,arguments)}function bR(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function tpe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function npe(t){return t<0?-t*t:t*t}function lT(t){var e=t(vr,vr),n=1;function r(){return n===1?t(vr,vr):n===.5?t(tpe,npe):t(bR(n),bR(1/n))}return e.exponent=function(o){return arguments.length?(n=+o,r()):n},Ha(e)}function uT(){var t=lT(gx());return t.copy=function(){return Rp(t,uT()).exponent(t.exponent())},zo.apply(t,arguments),t}function rpe(){return uT.apply(null,arguments).exponent(.5)}function wR(t){return Math.sign(t)*t*t}function ope(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function jj(){var t=rT(),e=[0,1],n=!1,r;function o(s){var i=ope(t(s));return isNaN(i)?r:n?Math.round(i):i}return o.invert=function(s){return t.invert(wR(s))},o.domain=function(s){return arguments.length?(t.domain(s),o):t.domain()},o.range=function(s){return arguments.length?(t.range((e=Array.from(s,hv)).map(wR)),o):e.slice()},o.rangeRound=function(s){return o.range(s).round(!0)},o.round=function(s){return arguments.length?(n=!!s,o):n},o.clamp=function(s){return arguments.length?(t.clamp(s),o):t.clamp()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.copy=function(){return jj(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},zo.apply(o,arguments),Ha(o)}function Wj(){var t=[],e=[],n=[],r;function o(){var i=0,a=Math.max(1,e.length);for(n=new Array(a-1);++i<a;)n[i-1]=uhe(t,i/a);return s}function s(i){return i==null||isNaN(i=+i)?r:e[Op(n,i)]}return s.invertExtent=function(i){var a=e.indexOf(i);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},s.domain=function(i){if(!arguments.length)return t.slice();t=[];for(let a of i)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Sa),o()},s.range=function(i){return arguments.length?(e=Array.from(i),o()):e.slice()},s.unknown=function(i){return arguments.length?(r=i,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return Wj().domain(t).range(e).unknown(r)},zo.apply(s,arguments)}function Vj(){var t=0,e=1,n=1,r=[.5],o=[0,1],s;function i(l){return l!=null&&l<=l?o[Op(r,l,0,n)]:s}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return i}return i.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,a()):[t,e]},i.range=function(l){return arguments.length?(n=(o=Array.from(l)).length-1,a()):o.slice()},i.invertExtent=function(l){var u=o.indexOf(l);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},i.unknown=function(l){return arguments.length&&(s=l),i},i.thresholds=function(){return r.slice()},i.copy=function(){return Vj().domain([t,e]).range(o).unknown(s)},zo.apply(Ha(i),arguments)}function Uj(){var t=[.5],e=[0,1],n,r=1;function o(s){return s!=null&&s<=s?e[Op(t,s,0,r)]:n}return o.domain=function(s){return arguments.length?(t=Array.from(s),r=Math.min(t.length,e.length-1),o):t.slice()},o.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(t.length,e.length-1),o):e.slice()},o.invertExtent=function(s){var i=e.indexOf(s);return[t[i-1],t[i]]},o.unknown=function(s){return arguments.length?(n=s,o):n},o.copy=function(){return Uj().domain(t).range(e).unknown(n)},zo.apply(o,arguments)}const cw=new Date,dw=new Date;function Nn(t,e,n,r){function o(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return o.floor=s=>(t(s=new Date(+s)),s),o.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),o.round=s=>{const i=o(s),a=o.ceil(s);return s-i<a-s?i:a},o.offset=(s,i)=>(e(s=new Date(+s),i==null?1:Math.floor(i)),s),o.range=(s,i,a)=>{const l=[];if(s=o.ceil(s),a=a==null?1:Math.floor(a),!(s<i)||!(a>0))return l;let u;do l.push(u=new Date(+s)),e(s,a),t(s);while(u<s&&s<i);return l},o.filter=s=>Nn(i=>{if(i>=i)for(;t(i),!s(i);)i.setTime(i-1)},(i,a)=>{if(i>=i)if(a<0)for(;++a<=0;)for(;e(i,-1),!s(i););else for(;--a>=0;)for(;e(i,1),!s(i););}),n&&(o.count=(s,i)=>(cw.setTime(+s),dw.setTime(+i),t(cw),t(dw),Math.floor(n(cw,dw))),o.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?o.filter(r?i=>r(i)%s===0:i=>o.count(0,i)%s===0):o)),o}const gv=Nn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);gv.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Nn(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):gv);gv.range;const mi=1e3,To=mi*60,gi=To*60,Ni=gi*24,cT=Ni*7,SR=Ni*30,fw=Ni*365,Tl=Nn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*mi)},(t,e)=>(e-t)/mi,t=>t.getUTCSeconds());Tl.range;const dT=Nn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*mi)},(t,e)=>{t.setTime(+t+e*To)},(t,e)=>(e-t)/To,t=>t.getMinutes());dT.range;const fT=Nn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*To)},(t,e)=>(e-t)/To,t=>t.getUTCMinutes());fT.range;const hT=Nn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*mi-t.getMinutes()*To)},(t,e)=>{t.setTime(+t+e*gi)},(t,e)=>(e-t)/gi,t=>t.getHours());hT.range;const pT=Nn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*gi)},(t,e)=>(e-t)/gi,t=>t.getUTCHours());pT.range;const Pp=Nn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*To)/Ni,t=>t.getDate()-1);Pp.range;const yx=Nn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ni,t=>t.getUTCDate()-1);yx.range;const Gj=Nn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ni,t=>Math.floor(t/Ni));Gj.range;function mu(t){return Nn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*To)/cT)}const vx=mu(0),yv=mu(1),spe=mu(2),ipe=mu(3),Kc=mu(4),ape=mu(5),lpe=mu(6);vx.range;yv.range;spe.range;ipe.range;Kc.range;ape.range;lpe.range;function gu(t){return Nn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/cT)}const xx=gu(0),vv=gu(1),upe=gu(2),cpe=gu(3),qc=gu(4),dpe=gu(5),fpe=gu(6);xx.range;vv.range;upe.range;cpe.range;qc.range;dpe.range;fpe.range;const mT=Nn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());mT.range;const gT=Nn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());gT.range;const Ai=Nn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Ai.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Nn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Ai.range;const Oi=Nn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Oi.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Nn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Oi.range;function Hj(t,e,n,r,o,s){const i=[[Tl,1,mi],[Tl,5,5*mi],[Tl,15,15*mi],[Tl,30,30*mi],[s,1,To],[s,5,5*To],[s,15,15*To],[s,30,30*To],[o,1,gi],[o,3,3*gi],[o,6,6*gi],[o,12,12*gi],[r,1,Ni],[r,2,2*Ni],[n,1,cT],[e,1,SR],[e,3,3*SR],[t,1,fw]];function a(u,c,d){const f=c<u;f&&([u,c]=[c,u]);const h=d&&typeof d.range=="function"?d:l(u,c,d),p=h?h.range(u,+c+1):[];return f?p.reverse():p}function l(u,c,d){const f=Math.abs(c-u)/d,h=ZI(([,,g])=>g).right(i,f);if(h===i.length)return t.every(MC(u/fw,c/fw,d));if(h===0)return gv.every(Math.max(MC(u,c,d),1));const[p,m]=i[f/i[h-1][2]<i[h][2]/f?h-1:h];return p.every(m)}return[a,l]}const[hpe,ppe]=Hj(Oi,gT,xx,Gj,pT,fT),[mpe,gpe]=Hj(Ai,mT,vx,Pp,hT,dT);function hw(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function pw(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function vf(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function ype(t){var e=t.dateTime,n=t.date,r=t.time,o=t.periods,s=t.days,i=t.shortDays,a=t.months,l=t.shortMonths,u=xf(o),c=bf(o),d=xf(s),f=bf(s),h=xf(i),p=bf(i),m=xf(a),g=bf(a),y=xf(l),v=bf(l),b={a:L,A:N,b:D,B:U,c:null,d:ER,e:ER,f:zpe,g:Ype,G:Zpe,H:Fpe,I:Lpe,j:Bpe,L:Kj,m:jpe,M:Wpe,p:B,q:W,Q:OR,s:_R,S:Vpe,u:Upe,U:Gpe,V:Hpe,w:Kpe,W:qpe,x:null,X:null,y:Xpe,Y:Qpe,Z:Jpe,"%":AR},x={a:V,A:ee,b:ne,B:se,c:null,d:NR,e:NR,f:rme,g:hme,G:mme,H:eme,I:tme,j:nme,L:Xj,m:ome,M:sme,p:de,q:ue,Q:OR,s:_R,S:ime,u:ame,U:lme,V:ume,w:cme,W:dme,x:null,X:null,y:fme,Y:pme,Z:gme,"%":AR},w={a:I,A:T,b:E,B:_,c:O,d:IR,e:IR,f:Rpe,g:kR,G:$R,H:TR,I:TR,j:Npe,L:_pe,m:Epe,M:Ape,p:k,q:Tpe,Q:Dpe,s:Mpe,S:Ope,u:Spe,U:Cpe,V:$pe,w:wpe,W:kpe,x:F,X:M,y:kR,Y:$R,Z:Ipe,"%":Ppe};b.x=S(n,b),b.X=S(r,b),b.c=S(e,b),x.x=S(n,x),x.X=S(r,x),x.c=S(e,x);function S(Y,ae){return function(oe){var Z=[],be=-1,me=0,xe=Y.length,fe,Oe,ye;for(oe instanceof Date||(oe=new Date(+oe));++be<xe;)Y.charCodeAt(be)===37&&(Z.push(Y.slice(me,be)),(Oe=CR[fe=Y.charAt(++be)])!=null?fe=Y.charAt(++be):Oe=fe==="e"?" ":"0",(ye=ae[fe])&&(fe=ye(oe,Oe)),Z.push(fe),me=be+1);return Z.push(Y.slice(me,be)),Z.join("")}}function $(Y,ae){return function(oe){var Z=vf(1900,void 0,1),be=C(Z,Y,oe+="",0),me,xe;if(be!=oe.length)return null;if("Q"in Z)return new Date(Z.Q);if("s"in Z)return new Date(Z.s*1e3+("L"in Z?Z.L:0));if(ae&&!("Z"in Z)&&(Z.Z=0),"p"in Z&&(Z.H=Z.H%12+Z.p*12),Z.m===void 0&&(Z.m="q"in Z?Z.q:0),"V"in Z){if(Z.V<1||Z.V>53)return null;"w"in Z||(Z.w=1),"Z"in Z?(me=pw(vf(Z.y,0,1)),xe=me.getUTCDay(),me=xe>4||xe===0?vv.ceil(me):vv(me),me=yx.offset(me,(Z.V-1)*7),Z.y=me.getUTCFullYear(),Z.m=me.getUTCMonth(),Z.d=me.getUTCDate()+(Z.w+6)%7):(me=hw(vf(Z.y,0,1)),xe=me.getDay(),me=xe>4||xe===0?yv.ceil(me):yv(me),me=Pp.offset(me,(Z.V-1)*7),Z.y=me.getFullYear(),Z.m=me.getMonth(),Z.d=me.getDate()+(Z.w+6)%7)}else("W"in Z||"U"in Z)&&("w"in Z||(Z.w="u"in Z?Z.u%7:"W"in Z?1:0),xe="Z"in Z?pw(vf(Z.y,0,1)).getUTCDay():hw(vf(Z.y,0,1)).getDay(),Z.m=0,Z.d="W"in Z?(Z.w+6)%7+Z.W*7-(xe+5)%7:Z.w+Z.U*7-(xe+6)%7);return"Z"in Z?(Z.H+=Z.Z/100|0,Z.M+=Z.Z%100,pw(Z)):hw(Z)}}function C(Y,ae,oe,Z){for(var be=0,me=ae.length,xe=oe.length,fe,Oe;be<me;){if(Z>=xe)return-1;if(fe=ae.charCodeAt(be++),fe===37){if(fe=ae.charAt(be++),Oe=w[fe in CR?ae.charAt(be++):fe],!Oe||(Z=Oe(Y,oe,Z))<0)return-1}else if(fe!=oe.charCodeAt(Z++))return-1}return Z}function k(Y,ae,oe){var Z=u.exec(ae.slice(oe));return Z?(Y.p=c.get(Z[0].toLowerCase()),oe+Z[0].length):-1}function I(Y,ae,oe){var Z=h.exec(ae.slice(oe));return Z?(Y.w=p.get(Z[0].toLowerCase()),oe+Z[0].length):-1}function T(Y,ae,oe){var Z=d.exec(ae.slice(oe));return Z?(Y.w=f.get(Z[0].toLowerCase()),oe+Z[0].length):-1}function E(Y,ae,oe){var Z=y.exec(ae.slice(oe));return Z?(Y.m=v.get(Z[0].toLowerCase()),oe+Z[0].length):-1}function _(Y,ae,oe){var Z=m.exec(ae.slice(oe));return Z?(Y.m=g.get(Z[0].toLowerCase()),oe+Z[0].length):-1}function O(Y,ae,oe){return C(Y,e,ae,oe)}function F(Y,ae,oe){return C(Y,n,ae,oe)}function M(Y,ae,oe){return C(Y,r,ae,oe)}function L(Y){return i[Y.getDay()]}function N(Y){return s[Y.getDay()]}function D(Y){return l[Y.getMonth()]}function U(Y){return a[Y.getMonth()]}function B(Y){return o[+(Y.getHours()>=12)]}function W(Y){return 1+~~(Y.getMonth()/3)}function V(Y){return i[Y.getUTCDay()]}function ee(Y){return s[Y.getUTCDay()]}function ne(Y){return l[Y.getUTCMonth()]}function se(Y){return a[Y.getUTCMonth()]}function de(Y){return o[+(Y.getUTCHours()>=12)]}function ue(Y){return 1+~~(Y.getUTCMonth()/3)}return{format:function(Y){var ae=S(Y+="",b);return ae.toString=function(){return Y},ae},parse:function(Y){var ae=$(Y+="",!1);return ae.toString=function(){return Y},ae},utcFormat:function(Y){var ae=S(Y+="",x);return ae.toString=function(){return Y},ae},utcParse:function(Y){var ae=$(Y+="",!0);return ae.toString=function(){return Y},ae}}}var CR={"-":"",_:" ",0:"0"},Mn=/^\s*\d+/,vpe=/^%/,xpe=/[\\^$*+?|[\]().{}]/g;function it(t,e,n){var r=t<0?"-":"",o=(r?-t:t)+"",s=o.length;return r+(s<n?new Array(n-s+1).join(e)+o:o)}function bpe(t){return t.replace(xpe,"\\$&")}function xf(t){return new RegExp("^(?:"+t.map(bpe).join("|")+")","i")}function bf(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function wpe(t,e,n){var r=Mn.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Spe(t,e,n){var r=Mn.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Cpe(t,e,n){var r=Mn.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function $pe(t,e,n){var r=Mn.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function kpe(t,e,n){var r=Mn.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function $R(t,e,n){var r=Mn.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function kR(t,e,n){var r=Mn.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Ipe(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Tpe(t,e,n){var r=Mn.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Epe(t,e,n){var r=Mn.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function IR(t,e,n){var r=Mn.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Npe(t,e,n){var r=Mn.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function TR(t,e,n){var r=Mn.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Ape(t,e,n){var r=Mn.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Ope(t,e,n){var r=Mn.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function _pe(t,e,n){var r=Mn.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Rpe(t,e,n){var r=Mn.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Ppe(t,e,n){var r=vpe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Dpe(t,e,n){var r=Mn.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Mpe(t,e,n){var r=Mn.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function ER(t,e){return it(t.getDate(),e,2)}function Fpe(t,e){return it(t.getHours(),e,2)}function Lpe(t,e){return it(t.getHours()%12||12,e,2)}function Bpe(t,e){return it(1+Pp.count(Ai(t),t),e,3)}function Kj(t,e){return it(t.getMilliseconds(),e,3)}function zpe(t,e){return Kj(t,e)+"000"}function jpe(t,e){return it(t.getMonth()+1,e,2)}function Wpe(t,e){return it(t.getMinutes(),e,2)}function Vpe(t,e){return it(t.getSeconds(),e,2)}function Upe(t){var e=t.getDay();return e===0?7:e}function Gpe(t,e){return it(vx.count(Ai(t)-1,t),e,2)}function qj(t){var e=t.getDay();return e>=4||e===0?Kc(t):Kc.ceil(t)}function Hpe(t,e){return t=qj(t),it(Kc.count(Ai(t),t)+(Ai(t).getDay()===4),e,2)}function Kpe(t){return t.getDay()}function qpe(t,e){return it(yv.count(Ai(t)-1,t),e,2)}function Xpe(t,e){return it(t.getFullYear()%100,e,2)}function Ype(t,e){return t=qj(t),it(t.getFullYear()%100,e,2)}function Qpe(t,e){return it(t.getFullYear()%1e4,e,4)}function Zpe(t,e){var n=t.getDay();return t=n>=4||n===0?Kc(t):Kc.ceil(t),it(t.getFullYear()%1e4,e,4)}function Jpe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+it(e/60|0,"0",2)+it(e%60,"0",2)}function NR(t,e){return it(t.getUTCDate(),e,2)}function eme(t,e){return it(t.getUTCHours(),e,2)}function tme(t,e){return it(t.getUTCHours()%12||12,e,2)}function nme(t,e){return it(1+yx.count(Oi(t),t),e,3)}function Xj(t,e){return it(t.getUTCMilliseconds(),e,3)}function rme(t,e){return Xj(t,e)+"000"}function ome(t,e){return it(t.getUTCMonth()+1,e,2)}function sme(t,e){return it(t.getUTCMinutes(),e,2)}function ime(t,e){return it(t.getUTCSeconds(),e,2)}function ame(t){var e=t.getUTCDay();return e===0?7:e}function lme(t,e){return it(xx.count(Oi(t)-1,t),e,2)}function Yj(t){var e=t.getUTCDay();return e>=4||e===0?qc(t):qc.ceil(t)}function ume(t,e){return t=Yj(t),it(qc.count(Oi(t),t)+(Oi(t).getUTCDay()===4),e,2)}function cme(t){return t.getUTCDay()}function dme(t,e){return it(vv.count(Oi(t)-1,t),e,2)}function fme(t,e){return it(t.getUTCFullYear()%100,e,2)}function hme(t,e){return t=Yj(t),it(t.getUTCFullYear()%100,e,2)}function pme(t,e){return it(t.getUTCFullYear()%1e4,e,4)}function mme(t,e){var n=t.getUTCDay();return t=n>=4||n===0?qc(t):qc.ceil(t),it(t.getUTCFullYear()%1e4,e,4)}function gme(){return"+0000"}function AR(){return"%"}function OR(t){return+t}function _R(t){return Math.floor(+t/1e3)}var Ru,Qj,Zj;yme({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function yme(t){return Ru=ype(t),Qj=Ru.format,Ru.parse,Zj=Ru.utcFormat,Ru.utcParse,Ru}function vme(t){return new Date(t)}function xme(t){return t instanceof Date?+t:+new Date(+t)}function yT(t,e,n,r,o,s,i,a,l,u){var c=rT(),d=c.invert,f=c.domain,h=u(".%L"),p=u(":%S"),m=u("%I:%M"),g=u("%I %p"),y=u("%a %d"),v=u("%b %d"),b=u("%B"),x=u("%Y");function w(S){return(l(S)<S?h:a(S)<S?p:i(S)<S?m:s(S)<S?g:r(S)<S?o(S)<S?y:v:n(S)<S?b:x)(S)}return c.invert=function(S){return new Date(d(S))},c.domain=function(S){return arguments.length?f(Array.from(S,xme)):f().map(vme)},c.ticks=function(S){var $=f();return t($[0],$[$.length-1],S??10)},c.tickFormat=function(S,$){return $==null?w:u($)},c.nice=function(S){var $=f();return(!S||typeof S.range!="function")&&(S=e($[0],$[$.length-1],S??10)),S?f(Lj($,S)):c},c.copy=function(){return Rp(c,yT(t,e,n,r,o,s,i,a,l,u))},c}function bme(){return zo.apply(yT(mpe,gpe,Ai,mT,vx,Pp,hT,dT,Tl,Qj).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function wme(){return zo.apply(yT(hpe,ppe,Oi,gT,xx,yx,pT,fT,Tl,Zj).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function bx(){var t=0,e=1,n,r,o,s,i=vr,a=!1,l;function u(d){return d==null||isNaN(d=+d)?l:i(o===0?.5:(d=(s(d)-n)*o,a?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([t,e]=d,n=s(t=+t),r=s(e=+e),o=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(d){return arguments.length?(a=!!d,u):a},u.interpolator=function(d){return arguments.length?(i=d,u):i};function c(d){return function(f){var h,p;return arguments.length?([h,p]=f,i=d(h,p),u):[i(0),i(1)]}}return u.range=c(Md),u.rangeRound=c(nT),u.unknown=function(d){return arguments.length?(l=d,u):l},function(d){return s=d,n=d(t),r=d(e),o=n===r?0:1/(r-n),u}}function Ka(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Jj(){var t=Ha(bx()(vr));return t.copy=function(){return Ka(t,Jj())},Bi.apply(t,arguments)}function e4(){var t=iT(bx()).domain([1,10]);return t.copy=function(){return Ka(t,e4()).base(t.base())},Bi.apply(t,arguments)}function t4(){var t=aT(bx());return t.copy=function(){return Ka(t,t4()).constant(t.constant())},Bi.apply(t,arguments)}function vT(){var t=lT(bx());return t.copy=function(){return Ka(t,vT()).exponent(t.exponent())},Bi.apply(t,arguments)}function Sme(){return vT.apply(null,arguments).exponent(.5)}function n4(){var t=[],e=vr;function n(r){if(r!=null&&!isNaN(r=+r))return e((Op(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let o of r)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(Sa),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,o)=>e(o/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(o,s)=>lhe(t,s/r))},n.copy=function(){return n4(e).domain(t)},Bi.apply(n,arguments)}function wx(){var t=0,e=.5,n=1,r=1,o,s,i,a,l,u=vr,c,d=!1,f;function h(m){return isNaN(m=+m)?f:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:l),u(d?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([t,e,n]=m,o=c(t=+t),s=c(e=+e),i=c(n=+n),a=o===s?0:.5/(s-o),l=s===i?0:.5/(i-s),r=s<o?-1:1,h):[t,e,n]},h.clamp=function(m){return arguments.length?(d=!!m,h):d},h.interpolator=function(m){return arguments.length?(u=m,h):u};function p(m){return function(g){var y,v,b;return arguments.length?([y,v,b]=g,u=Phe(m,[y,v,b]),h):[u(0),u(.5),u(1)]}}return h.range=p(Md),h.rangeRound=p(nT),h.unknown=function(m){return arguments.length?(f=m,h):f},function(m){return c=m,o=m(t),s=m(e),i=m(n),a=o===s?0:.5/(s-o),l=s===i?0:.5/(i-s),r=s<o?-1:1,h}}function r4(){var t=Ha(wx()(vr));return t.copy=function(){return Ka(t,r4())},Bi.apply(t,arguments)}function o4(){var t=iT(wx()).domain([.1,1,10]);return t.copy=function(){return Ka(t,o4()).base(t.base())},Bi.apply(t,arguments)}function s4(){var t=aT(wx());return t.copy=function(){return Ka(t,s4()).constant(t.constant())},Bi.apply(t,arguments)}function xT(){var t=lT(wx());return t.copy=function(){return Ka(t,xT()).exponent(t.exponent())},Bi.apply(t,arguments)}function Cme(){return xT.apply(null,arguments).exponent(.5)}const RR=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Dh,scaleDiverging:r4,scaleDivergingLog:o4,scaleDivergingPow:xT,scaleDivergingSqrt:Cme,scaleDivergingSymlog:s4,scaleIdentity:Fj,scaleImplicit:FC,scaleLinear:mv,scaleLog:Bj,scaleOrdinal:JI,scalePoint:Zf,scalePow:uT,scaleQuantile:Wj,scaleQuantize:Vj,scaleRadial:jj,scaleSequential:Jj,scaleSequentialLog:e4,scaleSequentialPow:vT,scaleSequentialQuantile:n4,scaleSequentialSqrt:Sme,scaleSequentialSymlog:t4,scaleSqrt:rpe,scaleSymlog:zj,scaleThreshold:Uj,scaleTime:bme,scaleUtc:wme,tickFormat:Mj},Symbol.toStringTag,{value:"Module"}));var $me=Ed;function kme(t,e,n){for(var r=-1,o=t.length;++r<o;){var s=t[r],i=e(s);if(i!=null&&(a===void 0?i===i&&!$me(i):n(i,a)))var a=i,l=s}return l}var Sx=kme;function Ime(t,e){return t>e}var i4=Ime,Tme=Sx,Eme=i4,Nme=Dd;function Ame(t){return t&&t.length?Tme(t,Nme,Eme):void 0}var Ome=Ame;const Cx=ut(Ome);function _me(t,e){return t<e}var a4=_me,Rme=Sx,Pme=a4,Dme=Dd;function Mme(t){return t&&t.length?Rme(t,Dme,Pme):void 0}var Fme=Mme;const $x=ut(Fme);var Lme=_I,Bme=Ga,zme=mj,jme=Wr;function Wme(t,e){var n=jme(t)?Lme:zme;return n(t,Bme(e))}var Vme=Wme,Ume=hj,Gme=Vme;function Hme(t,e){return Ume(Gme(t,e),1)}var Kme=Hme;const qme=ut(Kme);var Xme=qI;function Yme(t,e){return Xme(t,e)}var Qme=Yme;const bT=ut(Qme);var Fd=1e9,Zme={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},ST,Wt=!0,Mo="[DecimalError] ",Bl=Mo+"Invalid argument: ",wT=Mo+"Exponent out of range: ",Ld=Math.floor,ml=Math.pow,Jme=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Yr,On=1e7,Ft=7,l4=9007199254740991,xv=Ld(l4/Ft),ke={};ke.absoluteValue=ke.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};ke.comparedTo=ke.cmp=function(t){var e,n,r,o,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(r=s.d.length,o=t.d.length,e=0,n=r<o?r:o;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return r===o?0:r>o^s.s<0?1:-1};ke.decimalPlaces=ke.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Ft;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};ke.dividedBy=ke.div=function(t){return wi(this,new this.constructor(t))};ke.dividedToIntegerBy=ke.idiv=function(t){var e=this,n=e.constructor;return St(wi(e,new n(t),0,1),n.precision)};ke.equals=ke.eq=function(t){return!this.cmp(t)};ke.exponent=function(){return yn(this)};ke.greaterThan=ke.gt=function(t){return this.cmp(t)>0};ke.greaterThanOrEqualTo=ke.gte=function(t){return this.cmp(t)>=0};ke.isInteger=ke.isint=function(){return this.e>this.d.length-2};ke.isNegative=ke.isneg=function(){return this.s<0};ke.isPositive=ke.ispos=function(){return this.s>0};ke.isZero=function(){return this.s===0};ke.lessThan=ke.lt=function(t){return this.cmp(t)<0};ke.lessThanOrEqualTo=ke.lte=function(t){return this.cmp(t)<1};ke.logarithm=ke.log=function(t){var e,n=this,r=n.constructor,o=r.precision,s=o+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Yr))throw Error(Mo+"NaN");if(n.s<1)throw Error(Mo+(n.s?"NaN":"-Infinity"));return n.eq(Yr)?new r(0):(Wt=!1,e=wi(zh(n,s),zh(t,s),s),Wt=!0,St(e,o))};ke.minus=ke.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?d4(e,t):u4(e,(t.s=-t.s,t))};ke.modulo=ke.mod=function(t){var e,n=this,r=n.constructor,o=r.precision;if(t=new r(t),!t.s)throw Error(Mo+"NaN");return n.s?(Wt=!1,e=wi(n,t,0,1).times(t),Wt=!0,n.minus(e)):St(new r(n),o)};ke.naturalExponential=ke.exp=function(){return c4(this)};ke.naturalLogarithm=ke.ln=function(){return zh(this)};ke.negated=ke.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};ke.plus=ke.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?u4(e,t):d4(e,(t.s=-t.s,t))};ke.precision=ke.sd=function(t){var e,n,r,o=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Bl+t);if(e=yn(o)+1,r=o.d.length-1,n=r*Ft+1,r=o.d[r],r){for(;r%10==0;r/=10)n--;for(r=o.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};ke.squareRoot=ke.sqrt=function(){var t,e,n,r,o,s,i,a=this,l=a.constructor;if(a.s<1){if(!a.s)return new l(0);throw Error(Mo+"NaN")}for(t=yn(a),Wt=!1,o=Math.sqrt(+a),o==0||o==1/0?(e=Rs(a.d),(e.length+t)%2==0&&(e+="0"),o=Math.sqrt(e),t=Ld((t+1)/2)-(t<0||t%2),o==1/0?e="5e"+t:(e=o.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(o.toString()),n=l.precision,o=i=n+3;;)if(s=r,r=s.plus(wi(a,s,i+2)).times(.5),Rs(s.d).slice(0,i)===(e=Rs(r.d)).slice(0,i)){if(e=e.slice(i-3,i+1),o==i&&e=="4999"){if(St(s,n+1,0),s.times(s).eq(a)){r=s;break}}else if(e!="9999")break;i+=4}return Wt=!0,St(r,n)};ke.times=ke.mul=function(t){var e,n,r,o,s,i,a,l,u,c=this,d=c.constructor,f=c.d,h=(t=new d(t)).d;if(!c.s||!t.s)return new d(0);for(t.s*=c.s,n=c.e+t.e,l=f.length,u=h.length,l<u&&(s=f,f=h,h=s,i=l,l=u,u=i),s=[],i=l+u,r=i;r--;)s.push(0);for(r=u;--r>=0;){for(e=0,o=l+r;o>r;)a=s[o]+h[r]*f[o-r-1]+e,s[o--]=a%On|0,e=a/On|0;s[o]=(s[o]+e)%On|0}for(;!s[--i];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,Wt?St(t,d.precision):t};ke.toDecimalPlaces=ke.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Ks(t,0,Fd),e===void 0?e=r.rounding:Ks(e,0,8),St(n,t+yn(n)+1,e))};ke.toExponential=function(t,e){var n,r=this,o=r.constructor;return t===void 0?n=Zl(r,!0):(Ks(t,0,Fd),e===void 0?e=o.rounding:Ks(e,0,8),r=St(new o(r),t+1,e),n=Zl(r,!0,t+1)),n};ke.toFixed=function(t,e){var n,r,o=this,s=o.constructor;return t===void 0?Zl(o):(Ks(t,0,Fd),e===void 0?e=s.rounding:Ks(e,0,8),r=St(new s(o),t+yn(o)+1,e),n=Zl(r.abs(),!1,t+yn(r)+1),o.isneg()&&!o.isZero()?"-"+n:n)};ke.toInteger=ke.toint=function(){var t=this,e=t.constructor;return St(new e(t),yn(t)+1,e.rounding)};ke.toNumber=function(){return+this};ke.toPower=ke.pow=function(t){var e,n,r,o,s,i,a=this,l=a.constructor,u=12,c=+(t=new l(t));if(!t.s)return new l(Yr);if(a=new l(a),!a.s){if(t.s<1)throw Error(Mo+"Infinity");return a}if(a.eq(Yr))return a;if(r=l.precision,t.eq(Yr))return St(a,r);if(e=t.e,n=t.d.length-1,i=e>=n,s=a.s,i){if((n=c<0?-c:c)<=l4){for(o=new l(Yr),e=Math.ceil(r/Ft+4),Wt=!1;n%2&&(o=o.times(a),DR(o.d,e)),n=Ld(n/2),n!==0;)a=a.times(a),DR(a.d,e);return Wt=!0,t.s<0?new l(Yr).div(o):St(o,r)}}else if(s<0)throw Error(Mo+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,a.s=1,Wt=!1,o=t.times(zh(a,r+u)),Wt=!0,o=c4(o),o.s=s,o};ke.toPrecision=function(t,e){var n,r,o=this,s=o.constructor;return t===void 0?(n=yn(o),r=Zl(o,n<=s.toExpNeg||n>=s.toExpPos)):(Ks(t,1,Fd),e===void 0?e=s.rounding:Ks(e,0,8),o=St(new s(o),t,e),n=yn(o),r=Zl(o,t<=n||n<=s.toExpNeg,t)),r};ke.toSignificantDigits=ke.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Ks(t,1,Fd),e===void 0?e=r.rounding:Ks(e,0,8)),St(new r(n),t,e)};ke.toString=ke.valueOf=ke.val=ke.toJSON=ke[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=yn(t),n=t.constructor;return Zl(t,e<=n.toExpNeg||e>=n.toExpPos)};function u4(t,e){var n,r,o,s,i,a,l,u,c=t.constructor,d=c.precision;if(!t.s||!e.s)return e.s||(e=new c(t)),Wt?St(e,d):e;if(l=t.d,u=e.d,i=t.e,o=e.e,l=l.slice(),s=i-o,s){for(s<0?(r=l,s=-s,a=u.length):(r=u,o=i,a=l.length),i=Math.ceil(d/Ft),a=i>a?i+1:a+1,s>a&&(s=a,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(a=l.length,s=u.length,a-s<0&&(s=a,r=u,u=l,l=r),n=0;s;)n=(l[--s]=l[s]+u[s]+n)/On|0,l[s]%=On;for(n&&(l.unshift(n),++o),a=l.length;l[--a]==0;)l.pop();return e.d=l,e.e=o,Wt?St(e,d):e}function Ks(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Bl+t)}function Rs(t){var e,n,r,o=t.length-1,s="",i=t[0];if(o>0){for(s+=i,e=1;e<o;e++)r=t[e]+"",n=Ft-r.length,n&&(s+=Zi(n)),s+=r;i=t[e],r=i+"",n=Ft-r.length,n&&(s+=Zi(n))}else if(i===0)return"0";for(;i%10===0;)i/=10;return s+i}var wi=function(){function t(r,o){var s,i=0,a=r.length;for(r=r.slice();a--;)s=r[a]*o+i,r[a]=s%On|0,i=s/On|0;return i&&r.unshift(i),r}function e(r,o,s,i){var a,l;if(s!=i)l=s>i?1:-1;else for(a=l=0;a<s;a++)if(r[a]!=o[a]){l=r[a]>o[a]?1:-1;break}return l}function n(r,o,s){for(var i=0;s--;)r[s]-=i,i=r[s]<o[s]?1:0,r[s]=i*On+r[s]-o[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,o,s,i){var a,l,u,c,d,f,h,p,m,g,y,v,b,x,w,S,$,C,k=r.constructor,I=r.s==o.s?1:-1,T=r.d,E=o.d;if(!r.s)return new k(r);if(!o.s)throw Error(Mo+"Division by zero");for(l=r.e-o.e,$=E.length,w=T.length,h=new k(I),p=h.d=[],u=0;E[u]==(T[u]||0);)++u;if(E[u]>(T[u]||0)&&--l,s==null?v=s=k.precision:i?v=s+(yn(r)-yn(o))+1:v=s,v<0)return new k(0);if(v=v/Ft+2|0,u=0,$==1)for(c=0,E=E[0],v++;(u<w||c)&&v--;u++)b=c*On+(T[u]||0),p[u]=b/E|0,c=b%E|0;else{for(c=On/(E[0]+1)|0,c>1&&(E=t(E,c),T=t(T,c),$=E.length,w=T.length),x=$,m=T.slice(0,$),g=m.length;g<$;)m[g++]=0;C=E.slice(),C.unshift(0),S=E[0],E[1]>=On/2&&++S;do c=0,a=e(E,m,$,g),a<0?(y=m[0],$!=g&&(y=y*On+(m[1]||0)),c=y/S|0,c>1?(c>=On&&(c=On-1),d=t(E,c),f=d.length,g=m.length,a=e(d,m,f,g),a==1&&(c--,n(d,$<f?C:E,f))):(c==0&&(a=c=1),d=E.slice()),f=d.length,f<g&&d.unshift(0),n(m,d,g),a==-1&&(g=m.length,a=e(E,m,$,g),a<1&&(c++,n(m,$<g?C:E,g))),g=m.length):a===0&&(c++,m=[0]),p[u++]=c,a&&m[0]?m[g++]=T[x]||0:(m=[T[x]],g=1);while((x++<w||m[0]!==void 0)&&v--)}return p[0]||p.shift(),h.e=l,St(h,i?s+yn(h)+1:s)}}();function c4(t,e){var n,r,o,s,i,a,l=0,u=0,c=t.constructor,d=c.precision;if(yn(t)>16)throw Error(wT+yn(t));if(!t.s)return new c(Yr);for(e==null?(Wt=!1,a=d):a=e,i=new c(.03125);t.abs().gte(.1);)t=t.times(i),u+=5;for(r=Math.log(ml(2,u))/Math.LN10*2+5|0,a+=r,n=o=s=new c(Yr),c.precision=a;;){if(o=St(o.times(t),a),n=n.times(++l),i=s.plus(wi(o,n,a)),Rs(i.d).slice(0,a)===Rs(s.d).slice(0,a)){for(;u--;)s=St(s.times(s),a);return c.precision=d,e==null?(Wt=!0,St(s,d)):s}s=i}}function yn(t){for(var e=t.e*Ft,n=t.d[0];n>=10;n/=10)e++;return e}function mw(t,e,n){if(e>t.LN10.sd())throw Wt=!0,n&&(t.precision=n),Error(Mo+"LN10 precision limit exceeded");return St(new t(t.LN10),e)}function Zi(t){for(var e="";t--;)e+="0";return e}function zh(t,e){var n,r,o,s,i,a,l,u,c,d=1,f=10,h=t,p=h.d,m=h.constructor,g=m.precision;if(h.s<1)throw Error(Mo+(h.s?"NaN":"-Infinity"));if(h.eq(Yr))return new m(0);if(e==null?(Wt=!1,u=g):u=e,h.eq(10))return e==null&&(Wt=!0),mw(m,u);if(u+=f,m.precision=u,n=Rs(p),r=n.charAt(0),s=yn(h),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)h=h.times(t),n=Rs(h.d),r=n.charAt(0),d++;s=yn(h),r>1?(h=new m("0."+n),s++):h=new m(r+"."+n.slice(1))}else return l=mw(m,u+2,g).times(s+""),h=zh(new m(r+"."+n.slice(1)),u-f).plus(l),m.precision=g,e==null?(Wt=!0,St(h,g)):h;for(a=i=h=wi(h.minus(Yr),h.plus(Yr),u),c=St(h.times(h),u),o=3;;){if(i=St(i.times(c),u),l=a.plus(wi(i,new m(o),u)),Rs(l.d).slice(0,u)===Rs(a.d).slice(0,u))return a=a.times(2),s!==0&&(a=a.plus(mw(m,u+2,g).times(s+""))),a=wi(a,new m(d),u),m.precision=g,e==null?(Wt=!0,St(a,g)):a;a=l,o+=2}}function PR(t,e){var n,r,o;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(o=e.length;e.charCodeAt(o-1)===48;)--o;if(e=e.slice(r,o),e){if(o-=r,n=n-r-1,t.e=Ld(n/Ft),t.d=[],r=(n+1)%Ft,n<0&&(r+=Ft),r<o){for(r&&t.d.push(+e.slice(0,r)),o-=Ft;r<o;)t.d.push(+e.slice(r,r+=Ft));e=e.slice(r),r=Ft-e.length}else r-=o;for(;r--;)e+="0";if(t.d.push(+e),Wt&&(t.e>xv||t.e<-xv))throw Error(wT+n)}else t.s=0,t.e=0,t.d=[0];return t}function St(t,e,n){var r,o,s,i,a,l,u,c,d=t.d;for(i=1,s=d[0];s>=10;s/=10)i++;if(r=e-i,r<0)r+=Ft,o=e,u=d[c=0];else{if(c=Math.ceil((r+1)/Ft),s=d.length,c>=s)return t;for(u=s=d[c],i=1;s>=10;s/=10)i++;r%=Ft,o=r-Ft+i}if(n!==void 0&&(s=ml(10,i-o-1),a=u/s%10|0,l=e<0||d[c+1]!==void 0||u%s,l=n<4?(a||l)&&(n==0||n==(t.s<0?3:2)):a>5||a==5&&(n==4||l||n==6&&(r>0?o>0?u/ml(10,i-o):0:d[c-1])%10&1||n==(t.s<0?8:7))),e<1||!d[0])return l?(s=yn(t),d.length=1,e=e-s-1,d[0]=ml(10,(Ft-e%Ft)%Ft),t.e=Ld(-e/Ft)||0):(d.length=1,d[0]=t.e=t.s=0),t;if(r==0?(d.length=c,s=1,c--):(d.length=c+1,s=ml(10,Ft-r),d[c]=o>0?(u/ml(10,i-o)%ml(10,o)|0)*s:0),l)for(;;)if(c==0){(d[0]+=s)==On&&(d[0]=1,++t.e);break}else{if(d[c]+=s,d[c]!=On)break;d[c--]=0,s=1}for(r=d.length;d[--r]===0;)d.pop();if(Wt&&(t.e>xv||t.e<-xv))throw Error(wT+yn(t));return t}function d4(t,e){var n,r,o,s,i,a,l,u,c,d,f=t.constructor,h=f.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new f(t),Wt?St(e,h):e;if(l=t.d,d=e.d,r=e.e,u=t.e,l=l.slice(),i=u-r,i){for(c=i<0,c?(n=l,i=-i,a=d.length):(n=d,r=u,a=l.length),o=Math.max(Math.ceil(h/Ft),a)+2,i>o&&(i=o,n.length=1),n.reverse(),o=i;o--;)n.push(0);n.reverse()}else{for(o=l.length,a=d.length,c=o<a,c&&(a=o),o=0;o<a;o++)if(l[o]!=d[o]){c=l[o]<d[o];break}i=0}for(c&&(n=l,l=d,d=n,e.s=-e.s),a=l.length,o=d.length-a;o>0;--o)l[a++]=0;for(o=d.length;o>i;){if(l[--o]<d[o]){for(s=o;s&&l[--s]===0;)l[s]=On-1;--l[s],l[o]+=On}l[o]-=d[o]}for(;l[--a]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,Wt?St(e,h):e):new f(0)}function Zl(t,e,n){var r,o=yn(t),s=Rs(t.d),i=s.length;return e?(n&&(r=n-i)>0?s=s.charAt(0)+"."+s.slice(1)+Zi(r):i>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(o<0?"e":"e+")+o):o<0?(s="0."+Zi(-o-1)+s,n&&(r=n-i)>0&&(s+=Zi(r))):o>=i?(s+=Zi(o+1-i),n&&(r=n-o-1)>0&&(s=s+"."+Zi(r))):((r=o+1)<i&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-i)>0&&(o+1===i&&(s+="."),s+=Zi(r))),t.s<0?"-"+s:s}function DR(t,e){if(t.length>e)return t.length=e,!0}function f4(t){var e,n,r;function o(s){var i=this;if(!(i instanceof o))return new o(s);if(i.constructor=o,s instanceof o){i.s=s.s,i.e=s.e,i.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Bl+s);if(s>0)i.s=1;else if(s<0)s=-s,i.s=-1;else{i.s=0,i.e=0,i.d=[0];return}if(s===~~s&&s<1e7){i.e=0,i.d=[s];return}return PR(i,s.toString())}else if(typeof s!="string")throw Error(Bl+s);if(s.charCodeAt(0)===45?(s=s.slice(1),i.s=-1):i.s=1,Jme.test(s))PR(i,s);else throw Error(Bl+s)}if(o.prototype=ke,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.clone=f4,o.config=o.set=ege,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return o.config(t),o}function ege(t){if(!t||typeof t!="object")throw Error(Mo+"Object expected");var e,n,r,o=["precision",1,Fd,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<o.length;e+=3)if((r=t[n=o[e]])!==void 0)if(Ld(r)===r&&r>=o[e+1]&&r<=o[e+2])this[n]=r;else throw Error(Bl+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Bl+n+": "+r);return this}var ST=f4(Zme);Yr=new ST(1);const vt=ST;function tge(t){return sge(t)||oge(t)||rge(t)||nge()}function nge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rge(t,e){if(t){if(typeof t=="string")return jC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jC(t,e)}}function oge(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function sge(t){if(Array.isArray(t))return jC(t)}function jC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var ige=function(e){return e},h4={"@@functional/placeholder":!0},p4=function(e){return e===h4},MR=function(e){return function n(){return arguments.length===0||arguments.length===1&&p4(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},age=function t(e,n){return e===1?n:MR(function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];var i=o.filter(function(a){return a!==h4}).length;return i>=e?n.apply(void 0,o):t(e-i,MR(function(){for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];var c=o.map(function(d){return p4(d)?l.shift():d});return n.apply(void 0,tge(c).concat(l))}))})},kx=function(e){return age(e.length,e)},WC=function(e,n){for(var r=[],o=e;o<n;++o)r[o-e]=o;return r},lge=kx(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),uge=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return ige;var o=n.reverse(),s=o[0],i=o.slice(1);return function(){return i.reduce(function(a,l){return l(a)},s.apply(void 0,arguments))}},VC=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},m4=function(e){var n=null,r=null;return function(){for(var o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];return n&&s.every(function(a,l){return a===n[l]})||(n=s,r=e.apply(void 0,s)),r}};function cge(t){var e;return t===0?e=1:e=Math.floor(new vt(t).abs().log(10).toNumber())+1,e}function dge(t,e,n){for(var r=new vt(t),o=0,s=[];r.lt(e)&&o<1e5;)s.push(r.toNumber()),r=r.add(n),o++;return s}var fge=kx(function(t,e,n){var r=+t,o=+e;return r+n*(o-r)}),hge=kx(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),pge=kx(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const Ix={rangeStep:dge,getDigitCount:cge,interpolateNumber:fge,uninterpolateNumber:hge,uninterpolateTruncation:pge};function UC(t){return yge(t)||gge(t)||g4(t)||mge()}function mge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gge(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function yge(t){if(Array.isArray(t))return GC(t)}function jh(t,e){return bge(t)||xge(t,e)||g4(t,e)||vge()}function vge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g4(t,e){if(t){if(typeof t=="string")return GC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GC(t,e)}}function GC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function xge(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,o=!1,s=void 0;try{for(var i=t[Symbol.iterator](),a;!(r=(a=i.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(l){o=!0,s=l}finally{try{!r&&i.return!=null&&i.return()}finally{if(o)throw s}}return n}}function bge(t){if(Array.isArray(t))return t}function y4(t){var e=jh(t,2),n=e[0],r=e[1],o=n,s=r;return n>r&&(o=r,s=n),[o,s]}function v4(t,e,n){if(t.lte(0))return new vt(0);var r=Ix.getDigitCount(t.toNumber()),o=new vt(10).pow(r),s=t.div(o),i=r!==1?.05:.1,a=new vt(Math.ceil(s.div(i).toNumber())).add(n).mul(i),l=a.mul(o);return e?l:new vt(Math.ceil(l))}function wge(t,e,n){var r=1,o=new vt(t);if(!o.isint()&&n){var s=Math.abs(t);s<1?(r=new vt(10).pow(Ix.getDigitCount(t)-1),o=new vt(Math.floor(o.div(r).toNumber())).mul(r)):s>1&&(o=new vt(Math.floor(t)))}else t===0?o=new vt(Math.floor((e-1)/2)):n||(o=new vt(Math.floor(t)));var i=Math.floor((e-1)/2),a=uge(lge(function(l){return o.add(new vt(l-i).mul(r)).toNumber()}),WC);return a(0,e)}function x4(t,e,n,r){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new vt(0),tickMin:new vt(0),tickMax:new vt(0)};var s=v4(new vt(e).sub(t).div(n-1),r,o),i;t<=0&&e>=0?i=new vt(0):(i=new vt(t).add(e).div(2),i=i.sub(new vt(i).mod(s)));var a=Math.ceil(i.sub(t).div(s).toNumber()),l=Math.ceil(new vt(e).sub(i).div(s).toNumber()),u=a+l+1;return u>n?x4(t,e,n,r,o+1):(u<n&&(l=e>0?l+(n-u):l,a=e>0?a:a+(n-u)),{step:s,tickMin:i.sub(new vt(a).mul(s)),tickMax:i.add(new vt(l).mul(s))})}function Sge(t){var e=jh(t,2),n=e[0],r=e[1],o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(o,2),a=y4([n,r]),l=jh(a,2),u=l[0],c=l[1];if(u===-1/0||c===1/0){var d=c===1/0?[u].concat(UC(WC(0,o-1).map(function(){return 1/0}))):[].concat(UC(WC(0,o-1).map(function(){return-1/0})),[c]);return n>r?VC(d):d}if(u===c)return wge(u,o,s);var f=x4(u,c,i,s),h=f.step,p=f.tickMin,m=f.tickMax,g=Ix.rangeStep(p,m.add(new vt(.1).mul(h)),h);return n>r?VC(g):g}function Cge(t,e){var n=jh(t,2),r=n[0],o=n[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=y4([r,o]),a=jh(i,2),l=a[0],u=a[1];if(l===-1/0||u===1/0)return[r,o];if(l===u)return[l];var c=Math.max(e,2),d=v4(new vt(u).sub(l).div(c-1),s,0),f=[].concat(UC(Ix.rangeStep(new vt(l),new vt(u).sub(new vt(.99).mul(d)),d)),[u]);return r>o?VC(f):f}var $ge=m4(Sge),kge=m4(Cge),Ige="Invariant failed";function Xc(t,e){throw new Error(Ige)}var Tge=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Yc(t){"@babel/helpers - typeof";return Yc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yc(t)}function bv(){return bv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bv.apply(this,arguments)}function Ege(t,e){return _ge(t)||Oge(t,e)||Age(t,e)||Nge()}function Nge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Age(t,e){if(t){if(typeof t=="string")return FR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FR(t,e)}}function FR(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Oge(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,s,i,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,o=c}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return a}}function _ge(t){if(Array.isArray(t))return t}function Rge(t,e){if(t==null)return{};var n=Pge(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Pge(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Dge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mge(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,S4(r.key),r)}}function Fge(t,e,n){return e&&Mge(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Lge(t,e,n){return e=wv(e),Bge(t,b4()?Reflect.construct(e,n||[],wv(t).constructor):e.apply(t,n))}function Bge(t,e){if(e&&(Yc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zge(t)}function zge(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(b4=function(){return!!t})()}function wv(t){return wv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},wv(t)}function jge(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&HC(t,e)}function HC(t,e){return HC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},HC(t,e)}function w4(t,e,n){return e=S4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function S4(t){var e=Wge(t,"string");return Yc(e)=="symbol"?e:e+""}function Wge(t,e){if(Yc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Yc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var CT=function(t){function e(){return Dge(this,e),Lge(this,e,arguments)}return jge(e,t),Fge(e,[{key:"render",value:function(){var r=this.props,o=r.offset,s=r.layout,i=r.width,a=r.dataKey,l=r.data,u=r.dataPointFormatter,c=r.xAxis,d=r.yAxis,f=Rge(r,Tge),h=Ve(f,!1);this.props.direction==="x"&&c.type!=="number"&&Xc();var p=l.map(function(m){var g=u(m,a),y=g.x,v=g.y,b=g.value,x=g.errorVal;if(!x)return null;var w=[],S,$;if(Array.isArray(x)){var C=Ege(x,2);S=C[0],$=C[1]}else S=$=x;if(s==="vertical"){var k=c.scale,I=v+o,T=I+i,E=I-i,_=k(b-S),O=k(b+$);w.push({x1:O,y1:T,x2:O,y2:E}),w.push({x1:_,y1:I,x2:O,y2:I}),w.push({x1:_,y1:T,x2:_,y2:E})}else if(s==="horizontal"){var F=d.scale,M=y+o,L=M-i,N=M+i,D=F(b-S),U=F(b+$);w.push({x1:L,y1:U,x2:N,y2:U}),w.push({x1:M,y1:D,x2:M,y2:U}),w.push({x1:L,y1:D,x2:N,y2:D})}return z.createElement(Jt,bv({className:"recharts-errorBar",key:"bar-".concat(w.map(function(B){return"".concat(B.x1,"-").concat(B.x2,"-").concat(B.y1,"-").concat(B.y2)}))},h),w.map(function(B){return z.createElement("line",bv({},B,{key:"line-".concat(B.x1,"-").concat(B.x2,"-").concat(B.y1,"-").concat(B.y2)}))}))});return z.createElement(Jt,{className:"recharts-errorBars"},p)}}])}(z.Component);w4(CT,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});w4(CT,"displayName","ErrorBar");function Wh(t){"@babel/helpers - typeof";return Wh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wh(t)}function LR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function sl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LR(Object(n),!0).forEach(function(r){Vge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Vge(t,e,n){return e=Uge(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uge(t){var e=Gge(t,"string");return Wh(e)=="symbol"?e:e+""}function Gge(t,e){if(Wh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Wh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var C4=function(e){var n=e.children,r=e.formattedGraphicalItems,o=e.legendWidth,s=e.legendContent,i=xo(n,wa);if(!i)return null;var a=wa.defaultProps,l=a!==void 0?sl(sl({},a),i.props):{},u;return i.props&&i.props.payload?u=i.props&&i.props.payload:s==="children"?u=(r||[]).reduce(function(c,d){var f=d.item,h=d.props,p=h.sectors||h.data||[];return c.concat(p.map(function(m){return{type:i.props.iconType||f.props.legendType,value:m.name,color:m.fill,payload:m}}))},[]):u=(r||[]).map(function(c){var d=c.item,f=d.type.defaultProps,h=f!==void 0?sl(sl({},f),d.props):{},p=h.dataKey,m=h.name,g=h.legendType,y=h.hide;return{inactive:y,dataKey:p,type:l.iconType||g||"square",color:$T(d),value:m||p,payload:h}}),sl(sl(sl({},l),wa.getWithHeight(i,o)),{},{payload:u,item:i})};function Vh(t){"@babel/helpers - typeof";return Vh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vh(t)}function BR(t){return Xge(t)||qge(t)||Kge(t)||Hge()}function Hge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kge(t,e){if(t){if(typeof t=="string")return KC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return KC(t,e)}}function qge(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Xge(t){if(Array.isArray(t))return KC(t)}function KC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function zR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Zt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zR(Object(n),!0).forEach(function(r){fc(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fc(t,e,n){return e=Yge(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yge(t){var e=Qge(t,"string");return Vh(e)=="symbol"?e:e+""}function Qge(t,e){if(Vh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Vh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qr(t,e,n){return Ye(t)||Ye(e)?n:Tn(e)?is(t,e,n):qe(e)?e(t):n}function Jf(t,e,n,r){var o=qme(t,function(a){return Qr(a,e)});if(n==="number"){var s=o.filter(function(a){return Ce(a)||parseFloat(a)});return s.length?[$x(s),Cx(s)]:[1/0,-1/0]}var i=r?o.filter(function(a){return!Ye(a)}):o;return i.map(function(a){return Tn(a)||a instanceof Date?a:""})}var Zge=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,i=-1,a=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(a<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var l=s.range,u=0;u<a;u++){var c=u>0?o[u-1].coordinate:o[a-1].coordinate,d=o[u].coordinate,f=u>=a-1?o[0].coordinate:o[u+1].coordinate,h=void 0;if(Io(d-c)!==Io(f-d)){var p=[];if(Io(f-d)===Io(l[1]-l[0])){h=f;var m=d+l[1]-l[0];p[0]=Math.min(m,(m+c)/2),p[1]=Math.max(m,(m+c)/2)}else{h=c;var g=f+l[1]-l[0];p[0]=Math.min(d,(g+d)/2),p[1]=Math.max(d,(g+d)/2)}var y=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>y[0]&&e<=y[1]||e>=p[0]&&e<=p[1]){i=o[u].index;break}}else{var v=Math.min(c,f),b=Math.max(c,f);if(e>(v+d)/2&&e<=(b+d)/2){i=o[u].index;break}}}else for(var x=0;x<a;x++)if(x===0&&e<=(r[x].coordinate+r[x+1].coordinate)/2||x>0&&x<a-1&&e>(r[x].coordinate+r[x-1].coordinate)/2&&e<=(r[x].coordinate+r[x+1].coordinate)/2||x===a-1&&e>(r[x].coordinate+r[x-1].coordinate)/2){i=r[x].index;break}return i},$T=function(e){var n,r=e,o=r.type.displayName,s=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Zt(Zt({},e.type.defaultProps),e.props):e.props,i=s.stroke,a=s.fill,l;switch(o){case"Line":l=i;break;case"Area":case"Radar":l=i&&i!=="none"?i:a;break;default:l=a;break}return l},Jge=function(e){var n=e.barSize,r=e.totalSize,o=e.stackGroups,s=o===void 0?{}:o;if(!s)return{};for(var i={},a=Object.keys(s),l=0,u=a.length;l<u;l++)for(var c=s[a[l]].stackGroups,d=Object.keys(c),f=0,h=d.length;f<h;f++){var p=c[d[f]],m=p.items,g=p.cateAxisId,y=m.filter(function($){return xi($.type).indexOf("Bar")>=0});if(y&&y.length){var v=y[0].type.defaultProps,b=v!==void 0?Zt(Zt({},v),y[0].props):y[0].props,x=b.barSize,w=b[g];i[w]||(i[w]=[]);var S=Ye(x)?n:x;i[w].push({item:y[0],stackList:y.slice(1),barSize:Ye(S)?void 0:Or(S,r,0)})}}return i},eye=function(e){var n=e.barGap,r=e.barCategoryGap,o=e.bandSize,s=e.sizeList,i=s===void 0?[]:s,a=e.maxBarSize,l=i.length;if(l<1)return null;var u=Or(n,o,0,!0),c,d=[];if(i[0].barSize===+i[0].barSize){var f=!1,h=o/l,p=i.reduce(function(x,w){return x+w.barSize||0},0);p+=(l-1)*u,p>=o&&(p-=(l-1)*u,u=0),p>=o&&h>0&&(f=!0,h*=.9,p=l*h);var m=(o-p)/2>>0,g={offset:m-u,size:0};c=i.reduce(function(x,w){var S={item:w.item,position:{offset:g.offset+g.size+u,size:f?h:w.barSize}},$=[].concat(BR(x),[S]);return g=$[$.length-1].position,w.stackList&&w.stackList.length&&w.stackList.forEach(function(C){$.push({item:C,position:g})}),$},d)}else{var y=Or(r,o,0,!0);o-2*y-(l-1)*u<=0&&(u=0);var v=(o-2*y-(l-1)*u)/l;v>1&&(v>>=0);var b=a===+a?Math.min(v,a):v;c=i.reduce(function(x,w,S){var $=[].concat(BR(x),[{item:w.item,position:{offset:y+(v+u)*S+(v-b)/2,size:b}}]);return w.stackList&&w.stackList.length&&w.stackList.forEach(function(C){$.push({item:C,position:$[$.length-1].position})}),$},d)}return c},tye=function(e,n,r,o){var s=r.children,i=r.width,a=r.margin,l=i-(a.left||0)-(a.right||0),u=C4({children:s,legendWidth:l});if(u){var c=o||{},d=c.width,f=c.height,h=u.align,p=u.verticalAlign,m=u.layout;if((m==="vertical"||m==="horizontal"&&p==="middle")&&h!=="center"&&Ce(e[h]))return Zt(Zt({},e),{},fc({},h,e[h]+(d||0)));if((m==="horizontal"||m==="vertical"&&h==="center")&&p!=="middle"&&Ce(e[p]))return Zt(Zt({},e),{},fc({},p,e[p]+(f||0)))}return e},nye=function(e,n,r){return Ye(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},$4=function(e,n,r,o,s){var i=n.props.children,a=Fs(i,CT).filter(function(u){return nye(o,s,u.props.direction)});if(a&&a.length){var l=a.map(function(u){return u.props.dataKey});return e.reduce(function(u,c){var d=Qr(c,r);if(Ye(d))return u;var f=Array.isArray(d)?[$x(d),Cx(d)]:[d,d],h=l.reduce(function(p,m){var g=Qr(c,m,0),y=f[0]-Math.abs(Array.isArray(g)?g[0]:g),v=f[1]+Math.abs(Array.isArray(g)?g[1]:g);return[Math.min(y,p[0]),Math.max(v,p[1])]},[1/0,-1/0]);return[Math.min(h[0],u[0]),Math.max(h[1],u[1])]},[1/0,-1/0])}return null},rye=function(e,n,r,o,s){var i=n.map(function(a){return $4(e,a,r,s,o)}).filter(function(a){return!Ye(a)});return i&&i.length?i.reduce(function(a,l){return[Math.min(a[0],l[0]),Math.max(a[1],l[1])]},[1/0,-1/0]):null},k4=function(e,n,r,o,s){var i=n.map(function(l){var u=l.props.dataKey;return r==="number"&&u&&$4(e,l,u,o)||Jf(e,u,r,s)});if(r==="number")return i.reduce(function(l,u){return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]);var a={};return i.reduce(function(l,u){for(var c=0,d=u.length;c<d;c++)a[u[c]]||(a[u[c]]=!0,l.push(u[c]));return l},[])},I4=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},Pf=function(e,n,r){if(!e)return null;var o=e.scale,s=e.duplicateDomain,i=e.type,a=e.range,l=e.realScaleType==="scaleBand"?o.bandwidth()/2:2,u=(n||r)&&i==="category"&&o.bandwidth?o.bandwidth()/l:0;if(u=e.axisType==="angleAxis"&&(a==null?void 0:a.length)>=2?Io(a[0]-a[1])*2*u:u,n&&(e.ticks||e.niceTicks)){var c=(e.ticks||e.niceTicks).map(function(d){var f=s?s.indexOf(d):d;return{coordinate:o(f)+u,value:d,offset:u}});return c.filter(function(d){return!Ap(d.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(d,f){return{coordinate:o(d)+u,value:d,index:f,offset:u}}):o.ticks&&!r?o.ticks(e.tickCount).map(function(d){return{coordinate:o(d)+u,value:d,offset:u}}):o.domain().map(function(d,f){return{coordinate:o(d)+u,value:s?s[d]:d,index:f,offset:u}})},gw=new WeakMap,_g=function(e,n){if(typeof n!="function")return e;gw.has(e)||gw.set(e,new WeakMap);var r=gw.get(e);if(r.has(n))return r.get(n);var o=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,o),o},oye=function(e,n,r){var o=e.scale,s=e.type,i=e.layout,a=e.axisType;if(o==="auto")return i==="radial"&&a==="radiusAxis"?{scale:Dh(),realScaleType:"band"}:i==="radial"&&a==="angleAxis"?{scale:mv(),realScaleType:"linear"}:s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Zf(),realScaleType:"point"}:s==="category"?{scale:Dh(),realScaleType:"band"}:{scale:mv(),realScaleType:"linear"};if(Np(o)){var l="scale".concat(ux(o));return{scale:(RR[l]||Zf)(),realScaleType:RR[l]?l:"point"}}return qe(o)?{scale:o}:{scale:Zf(),realScaleType:"point"}},jR=1e-4,sye=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,o=e.range(),s=Math.min(o[0],o[1])-jR,i=Math.max(o[0],o[1])+jR,a=e(n[0]),l=e(n[r-1]);(a<s||a>i||l<s||l>i)&&e.domain([n[0],n[r-1]])}},iye=function(e){var n=e.length;if(!(n<=0))for(var r=0,o=e[0].length;r<o;++r)for(var s=0,i=0,a=0;a<n;++a){var l=Ap(e[a][r][1])?e[a][r][0]:e[a][r][1];l>=0?(e[a][r][0]=s,e[a][r][1]=s+l,s=e[a][r][1]):(e[a][r][0]=i,e[a][r][1]=i+l,i=e[a][r][1])}},aye=function(e){var n=e.length;if(!(n<=0))for(var r=0,o=e[0].length;r<o;++r)for(var s=0,i=0;i<n;++i){var a=Ap(e[i][r][1])?e[i][r][0]:e[i][r][1];a>=0?(e[i][r][0]=s,e[i][r][1]=s+a,s=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},lye={sign:iye,expand:Ire,none:zc,silhouette:Tre,wiggle:Ere,positive:aye},uye=function(e,n,r){var o=n.map(function(a){return a.props.dataKey}),s=lye[r],i=kre().keys(o).value(function(a,l){return+Qr(a,l,0)}).order(vC).offset(s);return i(e)},cye=function(e,n,r,o,s,i){if(!e)return null;var a=i?n.reverse():n,l={},u=a.reduce(function(d,f){var h,p=(h=f.type)!==null&&h!==void 0&&h.defaultProps?Zt(Zt({},f.type.defaultProps),f.props):f.props,m=p.stackId,g=p.hide;if(g)return d;var y=p[r],v=d[y]||{hasStack:!1,stackGroups:{}};if(Tn(m)){var b=v.stackGroups[m]||{numericAxisId:r,cateAxisId:o,items:[]};b.items.push(f),v.hasStack=!0,v.stackGroups[m]=b}else v.stackGroups[ax("_stackId_")]={numericAxisId:r,cateAxisId:o,items:[f]};return Zt(Zt({},d),{},fc({},y,v))},l),c={};return Object.keys(u).reduce(function(d,f){var h=u[f];if(h.hasStack){var p={};h.stackGroups=Object.keys(h.stackGroups).reduce(function(m,g){var y=h.stackGroups[g];return Zt(Zt({},m),{},fc({},g,{numericAxisId:r,cateAxisId:o,items:y.items,stackedData:uye(e,y.items,s)}))},p)}return Zt(Zt({},d),{},fc({},f,h))},c)},dye=function(e,n){var r=n.realScaleType,o=n.type,s=n.tickCount,i=n.originalDomain,a=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(s&&o==="number"&&i&&(i[0]==="auto"||i[1]==="auto")){var u=e.domain();if(!u.length)return null;var c=$ge(u,s,a);return e.domain([$x(c),Cx(c)]),{niceTicks:c}}if(s&&o==="number"){var d=e.domain(),f=kge(d,s,a);return{niceTicks:f}}return null},fye=function(e,n){var r,o=(r=e.type)!==null&&r!==void 0&&r.defaultProps?Zt(Zt({},e.type.defaultProps),e.props):e.props,s=o.stackId;if(Tn(s)){var i=n[s];if(i){var a=i.items.indexOf(e);return a>=0?i.stackedData[a]:null}}return null},hye=function(e){return e.reduce(function(n,r){return[$x(r.concat([n[0]]).filter(Ce)),Cx(r.concat([n[1]]).filter(Ce))]},[1/0,-1/0])},T4=function(e,n,r){return Object.keys(e).reduce(function(o,s){var i=e[s],a=i.stackedData,l=a.reduce(function(u,c){var d=hye(c.slice(n,r+1));return[Math.min(u[0],d[0]),Math.max(u[1],d[1])]},[1/0,-1/0]);return[Math.min(l[0],o[0]),Math.max(l[1],o[1])]},[1/0,-1/0]).map(function(o){return o===1/0||o===-1/0?0:o})},WR=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,VR=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,qC=function(e,n,r){if(qe(e))return e(n,r);if(!Array.isArray(e))return n;var o=[];if(Ce(e[0]))o[0]=r?e[0]:Math.min(e[0],n[0]);else if(WR.test(e[0])){var s=+WR.exec(e[0])[1];o[0]=n[0]-s}else qe(e[0])?o[0]=e[0](n[0]):o[0]=n[0];if(Ce(e[1]))o[1]=r?e[1]:Math.max(e[1],n[1]);else if(VR.test(e[1])){var i=+VR.exec(e[1])[1];o[1]=n[1]+i}else qe(e[1])?o[1]=e[1](n[1]):o[1]=n[1];return o},XC=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var o=e.scale.bandwidth();if(!r||o>0)return o}if(e&&n&&n.length>=2){for(var s=YI(n,function(d){return d.coordinate}),i=1/0,a=1,l=s.length;a<l;a++){var u=s[a],c=s[a-1];i=Math.min((u.coordinate||0)-(c.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0},UR=function(e,n,r){return!e||!e.length||bT(e,is(r,"type.defaultProps.domain"))?n:e},pye=function(e,n){var r=e.type.defaultProps?Zt(Zt({},e.type.defaultProps),e.props):e.props,o=r.dataKey,s=r.name,i=r.unit,a=r.formatter,l=r.tooltipType,u=r.chartType,c=r.hide;return Zt(Zt({},Ve(e,!1)),{},{dataKey:o,unit:i,formatter:a,name:s||o,color:$T(e),value:Qr(n,o),type:l,payload:n,chartType:u,hide:c})};function Uh(t){"@babel/helpers - typeof";return Uh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uh(t)}function GR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function ui(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GR(Object(n),!0).forEach(function(r){E4(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function E4(t,e,n){return e=mye(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mye(t){var e=gye(t,"string");return Uh(e)=="symbol"?e:e+""}function gye(t,e){if(Uh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Uh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yye(t,e){return wye(t)||bye(t,e)||xye(t,e)||vye()}function vye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xye(t,e){if(t){if(typeof t=="string")return HR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HR(t,e)}}function HR(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function bye(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,s,i,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,o=c}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return a}}function wye(t){if(Array.isArray(t))return t}var Sv=Math.PI/180,Sye=function(e){return e*180/Math.PI},Et=function(e,n,r,o){return{x:e+Math.cos(-Sv*o)*r,y:n+Math.sin(-Sv*o)*r}},N4=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},Cye=function(e,n,r,o,s){var i=e.width,a=e.height,l=e.startAngle,u=e.endAngle,c=Or(e.cx,i,i/2),d=Or(e.cy,a,a/2),f=N4(i,a,r),h=Or(e.innerRadius,f,0),p=Or(e.outerRadius,f,f*.8),m=Object.keys(n);return m.reduce(function(g,y){var v=n[y],b=v.domain,x=v.reversed,w;if(Ye(v.range))o==="angleAxis"?w=[l,u]:o==="radiusAxis"&&(w=[h,p]),x&&(w=[w[1],w[0]]);else{w=v.range;var S=w,$=yye(S,2);l=$[0],u=$[1]}var C=oye(v,s),k=C.realScaleType,I=C.scale;I.domain(b).range(w),sye(I);var T=dye(I,ui(ui({},v),{},{realScaleType:k})),E=ui(ui(ui({},v),T),{},{range:w,radius:p,realScaleType:k,scale:I,cx:c,cy:d,innerRadius:h,outerRadius:p,startAngle:l,endAngle:u});return ui(ui({},g),{},E4({},y,E))},{})},$ye=function(e,n){var r=e.x,o=e.y,s=n.x,i=n.y;return Math.sqrt(Math.pow(r-s,2)+Math.pow(o-i,2))},kye=function(e,n){var r=e.x,o=e.y,s=n.cx,i=n.cy,a=$ye({x:r,y:o},{x:s,y:i});if(a<=0)return{radius:a};var l=(r-s)/a,u=Math.acos(l);return o>i&&(u=2*Math.PI-u),{radius:a,angle:Sye(u),angleInRadian:u}},Iye=function(e){var n=e.startAngle,r=e.endAngle,o=Math.floor(n/360),s=Math.floor(r/360),i=Math.min(o,s);return{startAngle:n-i*360,endAngle:r-i*360}},Tye=function(e,n){var r=n.startAngle,o=n.endAngle,s=Math.floor(r/360),i=Math.floor(o/360),a=Math.min(s,i);return e+a*360},KR=function(e,n){var r=e.x,o=e.y,s=kye({x:r,y:o},n),i=s.radius,a=s.angle,l=n.innerRadius,u=n.outerRadius;if(i<l||i>u)return!1;if(i===0)return!0;var c=Iye(n),d=c.startAngle,f=c.endAngle,h=a,p;if(d<=f){for(;h>f;)h-=360;for(;h<d;)h+=360;p=h>=d&&h<=f}else{for(;h>d;)h-=360;for(;h<f;)h+=360;p=h>=f&&h<=d}return p?ui(ui({},n),{},{radius:i,angle:Tye(h,n)}):null},A4=function(e){return!A.isValidElement(e)&&!qe(e)&&typeof e!="boolean"?e.className:""};function Gh(t){"@babel/helpers - typeof";return Gh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gh(t)}var Eye=["offset"];function Nye(t){return Rye(t)||_ye(t)||Oye(t)||Aye()}function Aye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oye(t,e){if(t){if(typeof t=="string")return YC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YC(t,e)}}function _ye(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Rye(t){if(Array.isArray(t))return YC(t)}function YC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Pye(t,e){if(t==null)return{};var n=Dye(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Dye(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function qR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Sn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qR(Object(n),!0).forEach(function(r){Mye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mye(t,e,n){return e=Fye(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fye(t){var e=Lye(t,"string");return Gh(e)=="symbol"?e:e+""}function Lye(t,e){if(Gh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Gh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hh(){return Hh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hh.apply(this,arguments)}var Bye=function(e){var n=e.value,r=e.formatter,o=Ye(e.children)?n:e.children;return qe(r)?r(o):o},zye=function(e,n){var r=Io(n-e),o=Math.min(Math.abs(n-e),360);return r*o},jye=function(e,n,r){var o=e.position,s=e.viewBox,i=e.offset,a=e.className,l=s,u=l.cx,c=l.cy,d=l.innerRadius,f=l.outerRadius,h=l.startAngle,p=l.endAngle,m=l.clockWise,g=(d+f)/2,y=zye(h,p),v=y>=0?1:-1,b,x;o==="insideStart"?(b=h+v*i,x=m):o==="insideEnd"?(b=p-v*i,x=!m):o==="end"&&(b=p+v*i,x=m),x=y<=0?x:!x;var w=Et(u,c,g,b),S=Et(u,c,g,b+(x?1:-1)*359),$="M".concat(w.x,",").concat(w.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(x?0:1,`,
    `).concat(S.x,",").concat(S.y),C=Ye(e.id)?ax("recharts-radial-line-"):e.id;return z.createElement("text",Hh({},r,{dominantBaseline:"central",className:et("recharts-radial-bar-label",a)}),z.createElement("defs",null,z.createElement("path",{id:C,d:$})),z.createElement("textPath",{xlinkHref:"#".concat(C)},n))},Wye=function(e){var n=e.viewBox,r=e.offset,o=e.position,s=n,i=s.cx,a=s.cy,l=s.innerRadius,u=s.outerRadius,c=s.startAngle,d=s.endAngle,f=(c+d)/2;if(o==="outside"){var h=Et(i,a,u+r,f),p=h.x,m=h.y;return{x:p,y:m,textAnchor:p>=i?"start":"end",verticalAnchor:"middle"}}if(o==="center")return{x:i,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(o==="centerTop")return{x:i,y:a,textAnchor:"middle",verticalAnchor:"start"};if(o==="centerBottom")return{x:i,y:a,textAnchor:"middle",verticalAnchor:"end"};var g=(l+u)/2,y=Et(i,a,g,f),v=y.x,b=y.y;return{x:v,y:b,textAnchor:"middle",verticalAnchor:"middle"}},Vye=function(e){var n=e.viewBox,r=e.parentViewBox,o=e.offset,s=e.position,i=n,a=i.x,l=i.y,u=i.width,c=i.height,d=c>=0?1:-1,f=d*o,h=d>0?"end":"start",p=d>0?"start":"end",m=u>=0?1:-1,g=m*o,y=m>0?"end":"start",v=m>0?"start":"end";if(s==="top"){var b={x:a+u/2,y:l-d*o,textAnchor:"middle",verticalAnchor:h};return Sn(Sn({},b),r?{height:Math.max(l-r.y,0),width:u}:{})}if(s==="bottom"){var x={x:a+u/2,y:l+c+f,textAnchor:"middle",verticalAnchor:p};return Sn(Sn({},x),r?{height:Math.max(r.y+r.height-(l+c),0),width:u}:{})}if(s==="left"){var w={x:a-g,y:l+c/2,textAnchor:y,verticalAnchor:"middle"};return Sn(Sn({},w),r?{width:Math.max(w.x-r.x,0),height:c}:{})}if(s==="right"){var S={x:a+u+g,y:l+c/2,textAnchor:v,verticalAnchor:"middle"};return Sn(Sn({},S),r?{width:Math.max(r.x+r.width-S.x,0),height:c}:{})}var $=r?{width:u,height:c}:{};return s==="insideLeft"?Sn({x:a+g,y:l+c/2,textAnchor:v,verticalAnchor:"middle"},$):s==="insideRight"?Sn({x:a+u-g,y:l+c/2,textAnchor:y,verticalAnchor:"middle"},$):s==="insideTop"?Sn({x:a+u/2,y:l+f,textAnchor:"middle",verticalAnchor:p},$):s==="insideBottom"?Sn({x:a+u/2,y:l+c-f,textAnchor:"middle",verticalAnchor:h},$):s==="insideTopLeft"?Sn({x:a+g,y:l+f,textAnchor:v,verticalAnchor:p},$):s==="insideTopRight"?Sn({x:a+u-g,y:l+f,textAnchor:y,verticalAnchor:p},$):s==="insideBottomLeft"?Sn({x:a+g,y:l+c-f,textAnchor:v,verticalAnchor:h},$):s==="insideBottomRight"?Sn({x:a+u-g,y:l+c-f,textAnchor:y,verticalAnchor:h},$):Nd(s)&&(Ce(s.x)||kl(s.x))&&(Ce(s.y)||kl(s.y))?Sn({x:a+Or(s.x,u),y:l+Or(s.y,c),textAnchor:"end",verticalAnchor:"end"},$):Sn({x:a+u/2,y:l+c/2,textAnchor:"middle",verticalAnchor:"middle"},$)},Uye=function(e){return"cx"in e&&Ce(e.cx)};function Wn(t){var e=t.offset,n=e===void 0?5:e,r=Pye(t,Eye),o=Sn({offset:n},r),s=o.viewBox,i=o.position,a=o.value,l=o.children,u=o.content,c=o.className,d=c===void 0?"":c,f=o.textBreakAll;if(!s||Ye(a)&&Ye(l)&&!A.isValidElement(u)&&!qe(u))return null;if(A.isValidElement(u))return A.cloneElement(u,o);var h;if(qe(u)){if(h=A.createElement(u,o),A.isValidElement(h))return h}else h=Bye(o);var p=Uye(s),m=Ve(o,!0);if(p&&(i==="insideStart"||i==="insideEnd"||i==="end"))return jye(o,h,m);var g=p?Wye(o):Vye(o);return z.createElement(Gc,Hh({className:et("recharts-label",d)},m,g,{breakAll:f}),h)}Wn.displayName="Label";var O4=function(e){var n=e.cx,r=e.cy,o=e.angle,s=e.startAngle,i=e.endAngle,a=e.r,l=e.radius,u=e.innerRadius,c=e.outerRadius,d=e.x,f=e.y,h=e.top,p=e.left,m=e.width,g=e.height,y=e.clockWise,v=e.labelViewBox;if(v)return v;if(Ce(m)&&Ce(g)){if(Ce(d)&&Ce(f))return{x:d,y:f,width:m,height:g};if(Ce(h)&&Ce(p))return{x:h,y:p,width:m,height:g}}return Ce(d)&&Ce(f)?{x:d,y:f,width:0,height:0}:Ce(n)&&Ce(r)?{cx:n,cy:r,startAngle:s||o||0,endAngle:i||o||0,innerRadius:u||0,outerRadius:c||l||a||0,clockWise:y}:e.viewBox?e.viewBox:{}},Gye=function(e,n){return e?e===!0?z.createElement(Wn,{key:"label-implicit",viewBox:n}):Tn(e)?z.createElement(Wn,{key:"label-implicit",viewBox:n,value:e}):A.isValidElement(e)?e.type===Wn?A.cloneElement(e,{key:"label-implicit",viewBox:n}):z.createElement(Wn,{key:"label-implicit",content:e,viewBox:n}):qe(e)?z.createElement(Wn,{key:"label-implicit",content:e,viewBox:n}):Nd(e)?z.createElement(Wn,Hh({viewBox:n},e,{key:"label-implicit"})):null:null},Hye=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var o=e.children,s=O4(e),i=Fs(o,Wn).map(function(l,u){return A.cloneElement(l,{viewBox:n||s,key:"label-".concat(u)})});if(!r)return i;var a=Gye(e.label,n||s);return[a].concat(Nye(i))};Wn.parseViewBox=O4;Wn.renderCallByParent=Hye;function Kye(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var qye=Kye;const Xye=ut(qye);function Kh(t){"@babel/helpers - typeof";return Kh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kh(t)}var Yye=["valueAccessor"],Qye=["data","dataKey","clockWise","id","textBreakAll"];function Zye(t){return nve(t)||tve(t)||eve(t)||Jye()}function Jye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eve(t,e){if(t){if(typeof t=="string")return QC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QC(t,e)}}function tve(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function nve(t){if(Array.isArray(t))return QC(t)}function QC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Cv(){return Cv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cv.apply(this,arguments)}function XR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function YR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XR(Object(n),!0).forEach(function(r){rve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rve(t,e,n){return e=ove(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ove(t){var e=sve(t,"string");return Kh(e)=="symbol"?e:e+""}function sve(t,e){if(Kh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Kh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function QR(t,e){if(t==null)return{};var n=ive(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ive(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var ave=function(e){return Array.isArray(e.value)?Xye(e.value):e.value};function zl(t){var e=t.valueAccessor,n=e===void 0?ave:e,r=QR(t,Yye),o=r.data,s=r.dataKey,i=r.clockWise,a=r.id,l=r.textBreakAll,u=QR(r,Qye);return!o||!o.length?null:z.createElement(Jt,{className:"recharts-label-list"},o.map(function(c,d){var f=Ye(s)?n(c,d):Qr(c&&c.payload,s),h=Ye(a)?{}:{id:"".concat(a,"-").concat(d)};return z.createElement(Wn,Cv({},Ve(c,!0),u,h,{parentViewBox:c.parentViewBox,value:f,textBreakAll:l,viewBox:Wn.parseViewBox(Ye(i)?c:YR(YR({},c),{},{clockWise:i})),key:"label-".concat(d),index:d}))}))}zl.displayName="LabelList";function lve(t,e){return t?t===!0?z.createElement(zl,{key:"labelList-implicit",data:e}):z.isValidElement(t)||qe(t)?z.createElement(zl,{key:"labelList-implicit",data:e,content:t}):Nd(t)?z.createElement(zl,Cv({data:e},t,{key:"labelList-implicit"})):null:null}function uve(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,o=Fs(r,zl).map(function(i,a){return A.cloneElement(i,{data:e,key:"labelList-".concat(a)})});if(!n)return o;var s=lve(t.label,e);return[s].concat(Zye(o))}zl.renderCallByParent=uve;function qh(t){"@babel/helpers - typeof";return qh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qh(t)}function ZC(){return ZC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ZC.apply(this,arguments)}function ZR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function JR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZR(Object(n),!0).forEach(function(r){cve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cve(t,e,n){return e=dve(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dve(t){var e=fve(t,"string");return qh(e)=="symbol"?e:e+""}function fve(t,e){if(qh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(qh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hve=function(e,n){var r=Io(n-e),o=Math.min(Math.abs(n-e),359.999);return r*o},Rg=function(e){var n=e.cx,r=e.cy,o=e.radius,s=e.angle,i=e.sign,a=e.isExternal,l=e.cornerRadius,u=e.cornerIsExternal,c=l*(a?1:-1)+o,d=Math.asin(l/c)/Sv,f=u?s:s+i*d,h=Et(n,r,c,f),p=Et(n,r,o,f),m=u?s-i*d:s,g=Et(n,r,c*Math.cos(d*Sv),m);return{center:h,circleTangency:p,lineTangency:g,theta:d}},_4=function(e){var n=e.cx,r=e.cy,o=e.innerRadius,s=e.outerRadius,i=e.startAngle,a=e.endAngle,l=hve(i,a),u=i+l,c=Et(n,r,s,i),d=Et(n,r,s,u),f="M ".concat(c.x,",").concat(c.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(i>u),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(o>0){var h=Et(n,r,o,i),p=Et(n,r,o,u);f+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(o,",").concat(o,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(i<=u),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(n,",").concat(r," Z");return f},pve=function(e){var n=e.cx,r=e.cy,o=e.innerRadius,s=e.outerRadius,i=e.cornerRadius,a=e.forceCornerRadius,l=e.cornerIsExternal,u=e.startAngle,c=e.endAngle,d=Io(c-u),f=Rg({cx:n,cy:r,radius:s,angle:u,sign:d,cornerRadius:i,cornerIsExternal:l}),h=f.circleTangency,p=f.lineTangency,m=f.theta,g=Rg({cx:n,cy:r,radius:s,angle:c,sign:-d,cornerRadius:i,cornerIsExternal:l}),y=g.circleTangency,v=g.lineTangency,b=g.theta,x=l?Math.abs(u-c):Math.abs(u-c)-m-b;if(x<0)return a?"M ".concat(p.x,",").concat(p.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):_4({cx:n,cy:r,innerRadius:o,outerRadius:s,startAngle:u,endAngle:c});var w="M ".concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(x>180),",").concat(+(d<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(v.x,",").concat(v.y,`
  `);if(o>0){var S=Rg({cx:n,cy:r,radius:o,angle:u,sign:d,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),$=S.circleTangency,C=S.lineTangency,k=S.theta,I=Rg({cx:n,cy:r,radius:o,angle:c,sign:-d,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),T=I.circleTangency,E=I.lineTangency,_=I.theta,O=l?Math.abs(u-c):Math.abs(u-c)-k-_;if(O<0&&i===0)return"".concat(w,"L").concat(n,",").concat(r,"Z");w+="L".concat(E.x,",").concat(E.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(T.x,",").concat(T.y,`
      A`).concat(o,",").concat(o,",0,").concat(+(O>180),",").concat(+(d>0),",").concat($.x,",").concat($.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(C.x,",").concat(C.y,"Z")}else w+="L".concat(n,",").concat(r,"Z");return w},mve={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},R4=function(e){var n=JR(JR({},mve),e),r=n.cx,o=n.cy,s=n.innerRadius,i=n.outerRadius,a=n.cornerRadius,l=n.forceCornerRadius,u=n.cornerIsExternal,c=n.startAngle,d=n.endAngle,f=n.className;if(i<s||c===d)return null;var h=et("recharts-sector",f),p=i-s,m=Or(a,p,0,!0),g;return m>0&&Math.abs(c-d)<360?g=pve({cx:r,cy:o,innerRadius:s,outerRadius:i,cornerRadius:Math.min(m,p/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:c,endAngle:d}):g=_4({cx:r,cy:o,innerRadius:s,outerRadius:i,startAngle:c,endAngle:d}),z.createElement("path",ZC({},Ve(n,!0),{className:h,d:g,role:"img"}))};function Xh(t){"@babel/helpers - typeof";return Xh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xh(t)}function JC(){return JC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},JC.apply(this,arguments)}function eP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function tP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eP(Object(n),!0).forEach(function(r){gve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gve(t,e,n){return e=yve(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yve(t){var e=vve(t,"string");return Xh(e)=="symbol"?e:e+""}function vve(t,e){if(Xh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Xh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nP={curveBasisClosed:pre,curveBasisOpen:mre,curveBasis:hre,curveBumpX:Jne,curveBumpY:ere,curveLinearClosed:gre,curveLinear:dx,curveMonotoneX:yre,curveMonotoneY:vre,curveNatural:xre,curveStep:bre,curveStepAfter:Sre,curveStepBefore:wre},Pg=function(e){return e.x===+e.x&&e.y===+e.y},wf=function(e){return e.x},Sf=function(e){return e.y},xve=function(e,n){if(qe(e))return e;var r="curve".concat(ux(e));return(r==="curveMonotone"||r==="curveBump")&&n?nP["".concat(r).concat(n==="vertical"?"Y":"X")]:nP[r]||dx},bve=function(e){var n=e.type,r=n===void 0?"linear":n,o=e.points,s=o===void 0?[]:o,i=e.baseLine,a=e.layout,l=e.connectNulls,u=l===void 0?!1:l,c=xve(r,a),d=u?s.filter(function(m){return Pg(m)}):s,f;if(Array.isArray(i)){var h=u?i.filter(function(m){return Pg(m)}):i,p=d.map(function(m,g){return tP(tP({},m),{},{base:h[g]})});return a==="vertical"?f=$g().y(Sf).x1(wf).x0(function(m){return m.base.x}):f=$g().x(wf).y1(Sf).y0(function(m){return m.base.y}),f.defined(Pg).curve(c),f(p)}return a==="vertical"&&Ce(i)?f=$g().y(Sf).x1(wf).x0(i):Ce(i)?f=$g().x(wf).y1(Sf).y0(i):f=Rz().x(wf).y(Sf),f.defined(Pg).curve(c),f(d)},e$=function(e){var n=e.className,r=e.points,o=e.path,s=e.pathRef;if((!r||!r.length)&&!o)return null;var i=r&&r.length?bve(e):o;return z.createElement("path",JC({},Ve(e,!1),qy(e),{className:et("recharts-curve",n),d:i,ref:s}))},P4={exports:{}},wve="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Sve=wve,Cve=Sve;function D4(){}function M4(){}M4.resetWarningCache=D4;var $ve=function(){function t(r,o,s,i,a,l){if(l!==Cve){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:M4,resetWarningCache:D4};return n.PropTypes=n,n};P4.exports=$ve();var kve=P4.exports;const je=ut(kve);var Ive=Object.getOwnPropertyNames,Tve=Object.getOwnPropertySymbols,Eve=Object.prototype.hasOwnProperty;function rP(t,e){return function(r,o,s){return t(r,o,s)&&e(r,o,s)}}function Dg(t){return function(n,r,o){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,o);var s=o.cache,i=s.get(n),a=s.get(r);if(i&&a)return i===r&&a===n;s.set(n,r),s.set(r,n);var l=t(n,r,o);return s.delete(n),s.delete(r),l}}function oP(t){return Ive(t).concat(Tve(t))}var F4=Object.hasOwn||function(t,e){return Eve.call(t,e)};function Bd(t,e){return t||e?t===e:t===e||t!==t&&e!==e}var L4="_owner",sP=Object.getOwnPropertyDescriptor,iP=Object.keys;function Nve(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function Ave(t,e){return Bd(t.getTime(),e.getTime())}function aP(t,e,n){if(t.size!==e.size)return!1;for(var r={},o=t.entries(),s=0,i,a;(i=o.next())&&!i.done;){for(var l=e.entries(),u=!1,c=0;(a=l.next())&&!a.done;){var d=i.value,f=d[0],h=d[1],p=a.value,m=p[0],g=p[1];!u&&!r[c]&&(u=n.equals(f,m,s,c,t,e,n)&&n.equals(h,g,f,m,t,e,n))&&(r[c]=!0),c++}if(!u)return!1;s++}return!0}function Ove(t,e,n){var r=iP(t),o=r.length;if(iP(e).length!==o)return!1;for(var s;o-- >0;)if(s=r[o],s===L4&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!F4(e,s)||!n.equals(t[s],e[s],s,s,t,e,n))return!1;return!0}function Cf(t,e,n){var r=oP(t),o=r.length;if(oP(e).length!==o)return!1;for(var s,i,a;o-- >0;)if(s=r[o],s===L4&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!F4(e,s)||!n.equals(t[s],e[s],s,s,t,e,n)||(i=sP(t,s),a=sP(e,s),(i||a)&&(!i||!a||i.configurable!==a.configurable||i.enumerable!==a.enumerable||i.writable!==a.writable)))return!1;return!0}function _ve(t,e){return Bd(t.valueOf(),e.valueOf())}function Rve(t,e){return t.source===e.source&&t.flags===e.flags}function lP(t,e,n){if(t.size!==e.size)return!1;for(var r={},o=t.values(),s,i;(s=o.next())&&!s.done;){for(var a=e.values(),l=!1,u=0;(i=a.next())&&!i.done;)!l&&!r[u]&&(l=n.equals(s.value,i.value,s.value,i.value,t,e,n))&&(r[u]=!0),u++;if(!l)return!1}return!0}function Pve(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}var Dve="[object Arguments]",Mve="[object Boolean]",Fve="[object Date]",Lve="[object Map]",Bve="[object Number]",zve="[object Object]",jve="[object RegExp]",Wve="[object Set]",Vve="[object String]",Uve=Array.isArray,uP=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,cP=Object.assign,Gve=Object.prototype.toString.call.bind(Object.prototype.toString);function Hve(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areMapsEqual,o=t.areObjectsEqual,s=t.arePrimitiveWrappersEqual,i=t.areRegExpsEqual,a=t.areSetsEqual,l=t.areTypedArraysEqual;return function(c,d,f){if(c===d)return!0;if(c==null||d==null||typeof c!="object"||typeof d!="object")return c!==c&&d!==d;var h=c.constructor;if(h!==d.constructor)return!1;if(h===Object)return o(c,d,f);if(Uve(c))return e(c,d,f);if(uP!=null&&uP(c))return l(c,d,f);if(h===Date)return n(c,d,f);if(h===RegExp)return i(c,d,f);if(h===Map)return r(c,d,f);if(h===Set)return a(c,d,f);var p=Gve(c);return p===Fve?n(c,d,f):p===jve?i(c,d,f):p===Lve?r(c,d,f):p===Wve?a(c,d,f):p===zve?typeof c.then!="function"&&typeof d.then!="function"&&o(c,d,f):p===Dve?o(c,d,f):p===Mve||p===Bve||p===Vve?s(c,d,f):!1}}function Kve(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,o={areArraysEqual:r?Cf:Nve,areDatesEqual:Ave,areMapsEqual:r?rP(aP,Cf):aP,areObjectsEqual:r?Cf:Ove,arePrimitiveWrappersEqual:_ve,areRegExpsEqual:Rve,areSetsEqual:r?rP(lP,Cf):lP,areTypedArraysEqual:r?Cf:Pve};if(n&&(o=cP({},o,n(o))),e){var s=Dg(o.areArraysEqual),i=Dg(o.areMapsEqual),a=Dg(o.areObjectsEqual),l=Dg(o.areSetsEqual);o=cP({},o,{areArraysEqual:s,areMapsEqual:i,areObjectsEqual:a,areSetsEqual:l})}return o}function qve(t){return function(e,n,r,o,s,i,a){return t(e,n,a)}}function Xve(t){var e=t.circular,n=t.comparator,r=t.createState,o=t.equals,s=t.strict;if(r)return function(l,u){var c=r(),d=c.cache,f=d===void 0?e?new WeakMap:void 0:d,h=c.meta;return n(l,u,{cache:f,equals:o,meta:h,strict:s})};if(e)return function(l,u){return n(l,u,{cache:new WeakMap,equals:o,meta:void 0,strict:s})};var i={cache:void 0,equals:o,meta:void 0,strict:s};return function(l,u){return n(l,u,i)}}var Yve=qa();qa({strict:!0});qa({circular:!0});qa({circular:!0,strict:!0});qa({createInternalComparator:function(){return Bd}});qa({strict:!0,createInternalComparator:function(){return Bd}});qa({circular:!0,createInternalComparator:function(){return Bd}});qa({circular:!0,createInternalComparator:function(){return Bd},strict:!0});function qa(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,o=t.createState,s=t.strict,i=s===void 0?!1:s,a=Kve(t),l=Hve(a),u=r?r(l):qve(l);return Xve({circular:n,comparator:l,createState:o,equals:u,strict:i})}function Qve(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function dP(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function o(s){n<0&&(n=s),s-n>e?(t(s),n=-1):Qve(o)};requestAnimationFrame(r)}function t$(t){"@babel/helpers - typeof";return t$=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t$(t)}function Zve(t){return n0e(t)||t0e(t)||e0e(t)||Jve()}function Jve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e0e(t,e){if(t){if(typeof t=="string")return fP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fP(t,e)}}function fP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function t0e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function n0e(t){if(Array.isArray(t))return t}function r0e(){var t={},e=function(){return null},n=!1,r=function o(s){if(!n){if(Array.isArray(s)){if(!s.length)return;var i=s,a=Zve(i),l=a[0],u=a.slice(1);if(typeof l=="number"){dP(o.bind(null,u),l);return}o(l),dP(o.bind(null,u));return}t$(s)==="object"&&(t=s,e(t)),typeof s=="function"&&s()}};return{stop:function(){n=!0},start:function(s){n=!1,r(s)},subscribe:function(s){return e=s,function(){e=function(){return null}}}}}function Yh(t){"@babel/helpers - typeof";return Yh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yh(t)}function hP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function pP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hP(Object(n),!0).forEach(function(r){B4(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function B4(t,e,n){return e=o0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o0e(t){var e=s0e(t,"string");return Yh(e)==="symbol"?e:String(e)}function s0e(t,e){if(Yh(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Yh(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var i0e=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,o){return r.filter(function(s){return o.includes(s)})})},a0e=function(e){return e},l0e=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},eh=function(e,n){return Object.keys(n).reduce(function(r,o){return pP(pP({},r),{},B4({},o,e(o,n[o])))},{})},mP=function(e,n,r){return e.map(function(o){return"".concat(l0e(o)," ").concat(n,"ms ").concat(r)}).join(",")};function u0e(t,e){return f0e(t)||d0e(t,e)||z4(t,e)||c0e()}function c0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d0e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,s,i,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,o=c}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return a}}function f0e(t){if(Array.isArray(t))return t}function h0e(t){return g0e(t)||m0e(t)||z4(t)||p0e()}function p0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z4(t,e){if(t){if(typeof t=="string")return n$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return n$(t,e)}}function m0e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function g0e(t){if(Array.isArray(t))return n$(t)}function n$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var $v=1e-4,j4=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},W4=function(e,n){return e.map(function(r,o){return r*Math.pow(n,o)}).reduce(function(r,o){return r+o})},gP=function(e,n){return function(r){var o=j4(e,n);return W4(o,r)}},y0e=function(e,n){return function(r){var o=j4(e,n),s=[].concat(h0e(o.map(function(i,a){return i*a}).slice(1)),[0]);return W4(s,r)}},yP=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=n[0],s=n[1],i=n[2],a=n[3];if(n.length===1)switch(n[0]){case"linear":o=0,s=0,i=1,a=1;break;case"ease":o=.25,s=.1,i=.25,a=1;break;case"ease-in":o=.42,s=0,i=1,a=1;break;case"ease-out":o=.42,s=0,i=.58,a=1;break;case"ease-in-out":o=0,s=0,i=.58,a=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var u=l[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),c=u0e(u,4);o=c[0],s=c[1],i=c[2],a=c[3]}}}var d=gP(o,i),f=gP(s,a),h=y0e(o,i),p=function(y){return y>1?1:y<0?0:y},m=function(y){for(var v=y>1?1:y,b=v,x=0;x<8;++x){var w=d(b)-v,S=h(b);if(Math.abs(w-v)<$v||S<$v)return f(b);b=p(b-w/S)}return f(b)};return m.isStepper=!1,m},v0e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,o=e.damping,s=o===void 0?8:o,i=e.dt,a=i===void 0?17:i,l=function(c,d,f){var h=-(c-d)*r,p=f*s,m=f+(h-p)*a/1e3,g=f*a/1e3+c;return Math.abs(g-d)<$v&&Math.abs(m)<$v?[d,0]:[g,m]};return l.isStepper=!0,l.dt=a,l},x0e=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=n[0];if(typeof o=="string")switch(o){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return yP(o);case"spring":return v0e();default:if(o.split("(")[0]==="cubic-bezier")return yP(o)}return typeof o=="function"?o:null};function Qh(t){"@babel/helpers - typeof";return Qh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qh(t)}function vP(t){return S0e(t)||w0e(t)||V4(t)||b0e()}function b0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w0e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function S0e(t){if(Array.isArray(t))return o$(t)}function xP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function zn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xP(Object(n),!0).forEach(function(r){r$(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function r$(t,e,n){return e=C0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C0e(t){var e=$0e(t,"string");return Qh(e)==="symbol"?e:String(e)}function $0e(t,e){if(Qh(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Qh(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function k0e(t,e){return E0e(t)||T0e(t,e)||V4(t,e)||I0e()}function I0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V4(t,e){if(t){if(typeof t=="string")return o$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o$(t,e)}}function o$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function T0e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,s,i,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,o=c}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return a}}function E0e(t){if(Array.isArray(t))return t}var kv=function(e,n,r){return e+(n-e)*r},s$=function(e){var n=e.from,r=e.to;return n!==r},N0e=function t(e,n,r){var o=eh(function(s,i){if(s$(i)){var a=e(i.from,i.to,i.velocity),l=k0e(a,2),u=l[0],c=l[1];return zn(zn({},i),{},{from:u,velocity:c})}return i},n);return r<1?eh(function(s,i){return s$(i)?zn(zn({},i),{},{velocity:kv(i.velocity,o[s].velocity,r),from:kv(i.from,o[s].from,r)}):i},n):t(e,o,r-1)};const A0e=function(t,e,n,r,o){var s=i0e(t,e),i=s.reduce(function(g,y){return zn(zn({},g),{},r$({},y,[t[y],e[y]]))},{}),a=s.reduce(function(g,y){return zn(zn({},g),{},r$({},y,{from:t[y],velocity:0,to:e[y]}))},{}),l=-1,u,c,d=function(){return null},f=function(){return eh(function(y,v){return v.from},a)},h=function(){return!Object.values(a).filter(s$).length},p=function(y){u||(u=y);var v=y-u,b=v/n.dt;a=N0e(n,a,b),o(zn(zn(zn({},t),e),f())),u=y,h()||(l=requestAnimationFrame(d))},m=function(y){c||(c=y);var v=(y-c)/r,b=eh(function(w,S){return kv.apply(void 0,vP(S).concat([n(v)]))},i);if(o(zn(zn(zn({},t),e),b)),v<1)l=requestAnimationFrame(d);else{var x=eh(function(w,S){return kv.apply(void 0,vP(S).concat([n(1)]))},i);o(zn(zn(zn({},t),e),x))}};return d=n.isStepper?p:m,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(l)}}};function Qc(t){"@babel/helpers - typeof";return Qc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qc(t)}var O0e=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function _0e(t,e){if(t==null)return{};var n=R0e(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function R0e(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,s;for(s=0;s<r.length;s++)o=r[s],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function yw(t){return F0e(t)||M0e(t)||D0e(t)||P0e()}function P0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D0e(t,e){if(t){if(typeof t=="string")return i$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i$(t,e)}}function M0e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function F0e(t){if(Array.isArray(t))return i$(t)}function i$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function bP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Go(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bP(Object(n),!0).forEach(function(r){Df(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Df(t,e,n){return e=U4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function L0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function B0e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,U4(r.key),r)}}function z0e(t,e,n){return e&&B0e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function U4(t){var e=j0e(t,"string");return Qc(e)==="symbol"?e:String(e)}function j0e(t,e){if(Qc(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Qc(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function W0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a$(t,e)}function a$(t,e){return a$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},a$(t,e)}function V0e(t){var e=U0e();return function(){var r=Iv(t),o;if(e){var s=Iv(this).constructor;o=Reflect.construct(r,arguments,s)}else o=r.apply(this,arguments);return l$(this,o)}}function l$(t,e){if(e&&(Qc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return u$(t)}function u$(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function U0e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Iv(t){return Iv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Iv(t)}var Pa=function(t){W0e(n,t);var e=V0e(n);function n(r,o){var s;L0e(this,n),s=e.call(this,r,o);var i=s.props,a=i.isActive,l=i.attributeName,u=i.from,c=i.to,d=i.steps,f=i.children,h=i.duration;if(s.handleStyleChange=s.handleStyleChange.bind(u$(s)),s.changeStyle=s.changeStyle.bind(u$(s)),!a||h<=0)return s.state={style:{}},typeof f=="function"&&(s.state={style:c}),l$(s);if(d&&d.length)s.state={style:d[0].style};else if(u){if(typeof f=="function")return s.state={style:u},l$(s);s.state={style:l?Df({},l,u):u}}else s.state={style:{}};return s}return z0e(n,[{key:"componentDidMount",value:function(){var o=this.props,s=o.isActive,i=o.canBegin;this.mounted=!0,!(!s||!i)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(o){var s=this.props,i=s.isActive,a=s.canBegin,l=s.attributeName,u=s.shouldReAnimate,c=s.to,d=s.from,f=this.state.style;if(a){if(!i){var h={style:l?Df({},l,c):c};this.state&&f&&(l&&f[l]!==c||!l&&f!==c)&&this.setState(h);return}if(!(Yve(o.to,c)&&o.canBegin&&o.isActive)){var p=!o.canBegin||!o.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var m=p||u?d:o.to;if(this.state&&f){var g={style:l?Df({},l,m):m};(l&&f[l]!==m||!l&&f!==m)&&this.setState(g)}this.runAnimation(Go(Go({},this.props),{},{from:m,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var o=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),o&&o()}},{key:"handleStyleChange",value:function(o){this.changeStyle(o)}},{key:"changeStyle",value:function(o){this.mounted&&this.setState({style:o})}},{key:"runJSAnimation",value:function(o){var s=this,i=o.from,a=o.to,l=o.duration,u=o.easing,c=o.begin,d=o.onAnimationEnd,f=o.onAnimationStart,h=A0e(i,a,x0e(u),l,this.changeStyle),p=function(){s.stopJSAnimation=h()};this.manager.start([f,c,p,l,d])}},{key:"runStepAnimation",value:function(o){var s=this,i=o.steps,a=o.begin,l=o.onAnimationStart,u=i[0],c=u.style,d=u.duration,f=d===void 0?0:d,h=function(m,g,y){if(y===0)return m;var v=g.duration,b=g.easing,x=b===void 0?"ease":b,w=g.style,S=g.properties,$=g.onAnimationEnd,C=y>0?i[y-1]:g,k=S||Object.keys(w);if(typeof x=="function"||x==="spring")return[].concat(yw(m),[s.runJSAnimation.bind(s,{from:C.style,to:w,duration:v,easing:x}),v]);var I=mP(k,v,x),T=Go(Go(Go({},C.style),w),{},{transition:I});return[].concat(yw(m),[T,v,$]).filter(a0e)};return this.manager.start([l].concat(yw(i.reduce(h,[c,Math.max(f,a)])),[o.onAnimationEnd]))}},{key:"runAnimation",value:function(o){this.manager||(this.manager=r0e());var s=o.begin,i=o.duration,a=o.attributeName,l=o.to,u=o.easing,c=o.onAnimationStart,d=o.onAnimationEnd,f=o.steps,h=o.children,p=this.manager;if(this.unSubscribe=p.subscribe(this.handleStyleChange),typeof u=="function"||typeof h=="function"||u==="spring"){this.runJSAnimation(o);return}if(f.length>1){this.runStepAnimation(o);return}var m=a?Df({},a,l):l,g=mP(Object.keys(m),i,u);p.start([c,s,Go(Go({},m),{},{transition:g}),i,d])}},{key:"render",value:function(){var o=this.props,s=o.children;o.begin;var i=o.duration;o.attributeName,o.easing;var a=o.isActive;o.steps,o.from,o.to,o.canBegin,o.onAnimationEnd,o.shouldReAnimate,o.onAnimationReStart;var l=_0e(o,O0e),u=A.Children.count(s),c=this.state.style;if(typeof s=="function")return s(c);if(!a||u===0||i<=0)return s;var d=function(h){var p=h.props,m=p.style,g=m===void 0?{}:m,y=p.className,v=A.cloneElement(h,Go(Go({},l),{},{style:Go(Go({},g),c),className:y}));return v};return u===1?d(A.Children.only(s)):z.createElement("div",null,A.Children.map(s,function(f){return d(f)}))}}]),n}(A.PureComponent);Pa.displayName="Animate";Pa.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Pa.propTypes={from:je.oneOfType([je.object,je.string]),to:je.oneOfType([je.object,je.string]),attributeName:je.string,duration:je.number,begin:je.number,easing:je.oneOfType([je.string,je.func]),steps:je.arrayOf(je.shape({duration:je.number.isRequired,style:je.object.isRequired,easing:je.oneOfType([je.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),je.func]),properties:je.arrayOf("string"),onAnimationEnd:je.func})),children:je.oneOfType([je.node,je.func]),isActive:je.bool,canBegin:je.bool,onAnimationEnd:je.func,shouldReAnimate:je.bool,onAnimationStart:je.func,onAnimationReStart:je.func};je.object,je.object,je.object,je.element;je.object,je.object,je.object,je.oneOfType([je.array,je.element]),je.any;function Zh(t){"@babel/helpers - typeof";return Zh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zh(t)}function Tv(){return Tv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Tv.apply(this,arguments)}function G0e(t,e){return X0e(t)||q0e(t,e)||K0e(t,e)||H0e()}function H0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K0e(t,e){if(t){if(typeof t=="string")return wP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wP(t,e)}}function wP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function q0e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,s,i,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,o=c}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return a}}function X0e(t){if(Array.isArray(t))return t}function SP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function CP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SP(Object(n),!0).forEach(function(r){Y0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Y0e(t,e,n){return e=Q0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Q0e(t){var e=Z0e(t,"string");return Zh(e)=="symbol"?e:e+""}function Z0e(t,e){if(Zh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Zh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $P=function(e,n,r,o,s){var i=Math.min(Math.abs(r)/2,Math.abs(o)/2),a=o>=0?1:-1,l=r>=0?1:-1,u=o>=0&&r>=0||o<0&&r<0?1:0,c;if(i>0&&s instanceof Array){for(var d=[0,0,0,0],f=0,h=4;f<h;f++)d[f]=s[f]>i?i:s[f];c="M".concat(e,",").concat(n+a*d[0]),d[0]>0&&(c+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(u,",").concat(e+l*d[0],",").concat(n)),c+="L ".concat(e+r-l*d[1],",").concat(n),d[1]>0&&(c+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(u,`,
        `).concat(e+r,",").concat(n+a*d[1])),c+="L ".concat(e+r,",").concat(n+o-a*d[2]),d[2]>0&&(c+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(u,`,
        `).concat(e+r-l*d[2],",").concat(n+o)),c+="L ".concat(e+l*d[3],",").concat(n+o),d[3]>0&&(c+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(n+o-a*d[3])),c+="Z"}else if(i>0&&s===+s&&s>0){var p=Math.min(i,s);c="M ".concat(e,",").concat(n+a*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(u,",").concat(e+l*p,",").concat(n,`
            L `).concat(e+r-l*p,",").concat(n,`
            A `).concat(p,",").concat(p,",0,0,").concat(u,",").concat(e+r,",").concat(n+a*p,`
            L `).concat(e+r,",").concat(n+o-a*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(u,",").concat(e+r-l*p,",").concat(n+o,`
            L `).concat(e+l*p,",").concat(n+o,`
            A `).concat(p,",").concat(p,",0,0,").concat(u,",").concat(e,",").concat(n+o-a*p," Z")}else c="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(o," h ").concat(-r," Z");return c},J0e=function(e,n){if(!e||!n)return!1;var r=e.x,o=e.y,s=n.x,i=n.y,a=n.width,l=n.height;if(Math.abs(a)>0&&Math.abs(l)>0){var u=Math.min(s,s+a),c=Math.max(s,s+a),d=Math.min(i,i+l),f=Math.max(i,i+l);return r>=u&&r<=c&&o>=d&&o<=f}return!1},exe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},kT=function(e){var n=CP(CP({},exe),e),r=A.useRef(),o=A.useState(-1),s=G0e(o,2),i=s[0],a=s[1];A.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var x=r.current.getTotalLength();x&&a(x)}catch{}},[]);var l=n.x,u=n.y,c=n.width,d=n.height,f=n.radius,h=n.className,p=n.animationEasing,m=n.animationDuration,g=n.animationBegin,y=n.isAnimationActive,v=n.isUpdateAnimationActive;if(l!==+l||u!==+u||c!==+c||d!==+d||c===0||d===0)return null;var b=et("recharts-rectangle",h);return v?z.createElement(Pa,{canBegin:i>0,from:{width:c,height:d,x:l,y:u},to:{width:c,height:d,x:l,y:u},duration:m,animationEasing:p,isActive:v},function(x){var w=x.width,S=x.height,$=x.x,C=x.y;return z.createElement(Pa,{canBegin:i>0,from:"0px ".concat(i===-1?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:m,isActive:y,easing:p},z.createElement("path",Tv({},Ve(n,!0),{className:b,d:$P($,C,w,S,f),ref:r})))}):z.createElement("path",Tv({},Ve(n,!0),{className:b,d:$P(l,u,c,d,f)}))},txe=["points","className","baseLinePoints","connectNulls"];function Ju(){return Ju=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ju.apply(this,arguments)}function nxe(t,e){if(t==null)return{};var n=rxe(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function rxe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function kP(t){return axe(t)||ixe(t)||sxe(t)||oxe()}function oxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sxe(t,e){if(t){if(typeof t=="string")return c$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c$(t,e)}}function ixe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function axe(t){if(Array.isArray(t))return c$(t)}function c$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var IP=function(e){return e&&e.x===+e.x&&e.y===+e.y},lxe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(r){IP(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),IP(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},th=function(e,n){var r=lxe(e);n&&(r=[r.reduce(function(s,i){return[].concat(kP(s),kP(i))},[])]);var o=r.map(function(s){return s.reduce(function(i,a,l){return"".concat(i).concat(l===0?"M":"L").concat(a.x,",").concat(a.y)},"")}).join("");return r.length===1?"".concat(o,"Z"):o},uxe=function(e,n,r){var o=th(e,r);return"".concat(o.slice(-1)==="Z"?o.slice(0,-1):o,"L").concat(th(n.reverse(),r).slice(1))},cxe=function(e){var n=e.points,r=e.className,o=e.baseLinePoints,s=e.connectNulls,i=nxe(e,txe);if(!n||!n.length)return null;var a=et("recharts-polygon",r);if(o&&o.length){var l=i.stroke&&i.stroke!=="none",u=uxe(n,o,s);return z.createElement("g",{className:a},z.createElement("path",Ju({},Ve(i,!0),{fill:u.slice(-1)==="Z"?i.fill:"none",stroke:"none",d:u})),l?z.createElement("path",Ju({},Ve(i,!0),{fill:"none",d:th(n,s)})):null,l?z.createElement("path",Ju({},Ve(i,!0),{fill:"none",d:th(o,s)})):null)}var c=th(n,s);return z.createElement("path",Ju({},Ve(i,!0),{fill:c.slice(-1)==="Z"?i.fill:"none",className:a,d:c}))};function d$(){return d$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},d$.apply(this,arguments)}var IT=function(e){var n=e.cx,r=e.cy,o=e.r,s=e.className,i=et("recharts-dot",s);return n===+n&&r===+r&&o===+o?z.createElement("circle",d$({},Ve(e,!1),qy(e),{className:i,cx:n,cy:r,r:o})):null};function Jh(t){"@babel/helpers - typeof";return Jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jh(t)}var dxe=["x","y","top","left","width","height","className"];function f$(){return f$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},f$.apply(this,arguments)}function TP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function fxe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TP(Object(n),!0).forEach(function(r){hxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hxe(t,e,n){return e=pxe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pxe(t){var e=mxe(t,"string");return Jh(e)=="symbol"?e:e+""}function mxe(t,e){if(Jh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Jh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gxe(t,e){if(t==null)return{};var n=yxe(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function yxe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var vxe=function(e,n,r,o,s,i){return"M".concat(e,",").concat(s,"v").concat(o,"M").concat(i,",").concat(n,"h").concat(r)},xxe=function(e){var n=e.x,r=n===void 0?0:n,o=e.y,s=o===void 0?0:o,i=e.top,a=i===void 0?0:i,l=e.left,u=l===void 0?0:l,c=e.width,d=c===void 0?0:c,f=e.height,h=f===void 0?0:f,p=e.className,m=gxe(e,dxe),g=fxe({x:r,y:s,top:a,left:u,width:d,height:h},m);return!Ce(r)||!Ce(s)||!Ce(d)||!Ce(h)||!Ce(a)||!Ce(u)?null:z.createElement("path",f$({},Ve(g,!0),{className:et("recharts-cross",p),d:vxe(r,s,d,h,a,u)}))},bxe=Sx,wxe=i4,Sxe=Ga;function Cxe(t,e){return t&&t.length?bxe(t,Sxe(e),wxe):void 0}var $xe=Cxe;const kxe=ut($xe);var Ixe=Sx,Txe=Ga,Exe=a4;function Nxe(t,e){return t&&t.length?Ixe(t,Txe(e),Exe):void 0}var Axe=Nxe;const Oxe=ut(Axe);var _xe=["cx","cy","angle","ticks","axisLine"],Rxe=["ticks","tick","angle","tickFormatter","stroke"];function Zc(t){"@babel/helpers - typeof";return Zc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zc(t)}function nh(){return nh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nh.apply(this,arguments)}function EP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function il(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EP(Object(n),!0).forEach(function(r){Tx(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function NP(t,e){if(t==null)return{};var n=Pxe(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Pxe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Dxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function AP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,H4(r.key),r)}}function Mxe(t,e,n){return e&&AP(t.prototype,e),n&&AP(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Fxe(t,e,n){return e=Ev(e),Lxe(t,G4()?Reflect.construct(e,n||[],Ev(t).constructor):e.apply(t,n))}function Lxe(t,e){if(e&&(Zc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bxe(t)}function Bxe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function G4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(G4=function(){return!!t})()}function Ev(t){return Ev=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ev(t)}function zxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h$(t,e)}function h$(t,e){return h$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},h$(t,e)}function Tx(t,e,n){return e=H4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function H4(t){var e=jxe(t,"string");return Zc(e)=="symbol"?e:e+""}function jxe(t,e){if(Zc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Zc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ex=function(t){function e(){return Dxe(this,e),Fxe(this,e,arguments)}return zxe(e,t),Mxe(e,[{key:"getTickValueCoord",value:function(r){var o=r.coordinate,s=this.props,i=s.angle,a=s.cx,l=s.cy;return Et(a,l,o,i)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,o;switch(r){case"left":o="end";break;case"right":o="start";break;default:o="middle";break}return o}},{key:"getViewBox",value:function(){var r=this.props,o=r.cx,s=r.cy,i=r.angle,a=r.ticks,l=kxe(a,function(c){return c.coordinate||0}),u=Oxe(a,function(c){return c.coordinate||0});return{cx:o,cy:s,startAngle:i,endAngle:i,innerRadius:u.coordinate||0,outerRadius:l.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,o=r.cx,s=r.cy,i=r.angle,a=r.ticks,l=r.axisLine,u=NP(r,_xe),c=a.reduce(function(p,m){return[Math.min(p[0],m.coordinate),Math.max(p[1],m.coordinate)]},[1/0,-1/0]),d=Et(o,s,c[0],i),f=Et(o,s,c[1],i),h=il(il(il({},Ve(u,!1)),{},{fill:"none"},Ve(l,!1)),{},{x1:d.x,y1:d.y,x2:f.x,y2:f.y});return z.createElement("line",nh({className:"recharts-polar-radius-axis-line"},h))}},{key:"renderTicks",value:function(){var r=this,o=this.props,s=o.ticks,i=o.tick,a=o.angle,l=o.tickFormatter,u=o.stroke,c=NP(o,Rxe),d=this.getTickTextAnchor(),f=Ve(c,!1),h=Ve(i,!1),p=s.map(function(m,g){var y=r.getTickValueCoord(m),v=il(il(il(il({textAnchor:d,transform:"rotate(".concat(90-a,", ").concat(y.x,", ").concat(y.y,")")},f),{},{stroke:"none",fill:u},h),{},{index:g},y),{},{payload:m});return z.createElement(Jt,nh({className:et("recharts-polar-radius-axis-tick",A4(i)),key:"tick-".concat(m.coordinate)},lx(r.props,m,g)),e.renderTickItem(i,v,l?l(m.value,g):m.value))});return z.createElement(Jt,{className:"recharts-polar-radius-axis-ticks"},p)}},{key:"render",value:function(){var r=this.props,o=r.ticks,s=r.axisLine,i=r.tick;return!o||!o.length?null:z.createElement(Jt,{className:et("recharts-polar-radius-axis",this.props.className)},s&&this.renderAxisLine(),i&&this.renderTicks(),Wn.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,o,s){var i;return z.isValidElement(r)?i=z.cloneElement(r,o):qe(r)?i=r(o):i=z.createElement(Gc,nh({},o,{className:"recharts-polar-radius-axis-tick-value"}),s),i}}])}(A.PureComponent);Tx(Ex,"displayName","PolarRadiusAxis");Tx(Ex,"axisType","radiusAxis");Tx(Ex,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Jc(t){"@babel/helpers - typeof";return Jc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jc(t)}function vl(){return vl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vl.apply(this,arguments)}function OP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function al(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OP(Object(n),!0).forEach(function(r){Nx(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,q4(r.key),r)}}function Vxe(t,e,n){return e&&_P(t.prototype,e),n&&_P(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Uxe(t,e,n){return e=Nv(e),Gxe(t,K4()?Reflect.construct(e,n||[],Nv(t).constructor):e.apply(t,n))}function Gxe(t,e){if(e&&(Jc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hxe(t)}function Hxe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function K4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(K4=function(){return!!t})()}function Nv(t){return Nv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Nv(t)}function Kxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p$(t,e)}function p$(t,e){return p$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},p$(t,e)}function Nx(t,e,n){return e=q4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q4(t){var e=qxe(t,"string");return Jc(e)=="symbol"?e:e+""}function qxe(t,e){if(Jc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Jc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Xxe=Math.PI/180,RP=1e-5,Ax=function(t){function e(){return Wxe(this,e),Uxe(this,e,arguments)}return Kxe(e,t),Vxe(e,[{key:"getTickLineCoord",value:function(r){var o=this.props,s=o.cx,i=o.cy,a=o.radius,l=o.orientation,u=o.tickSize,c=u||8,d=Et(s,i,a,r.coordinate),f=Et(s,i,a+(l==="inner"?-1:1)*c,r.coordinate);return{x1:d.x,y1:d.y,x2:f.x,y2:f.y}}},{key:"getTickTextAnchor",value:function(r){var o=this.props.orientation,s=Math.cos(-r.coordinate*Xxe),i;return s>RP?i=o==="outer"?"start":"end":s<-RP?i=o==="outer"?"end":"start":i="middle",i}},{key:"renderAxisLine",value:function(){var r=this.props,o=r.cx,s=r.cy,i=r.radius,a=r.axisLine,l=r.axisLineType,u=al(al({},Ve(this.props,!1)),{},{fill:"none"},Ve(a,!1));if(l==="circle")return z.createElement(IT,vl({className:"recharts-polar-angle-axis-line"},u,{cx:o,cy:s,r:i}));var c=this.props.ticks,d=c.map(function(f){return Et(o,s,i,f.coordinate)});return z.createElement(cxe,vl({className:"recharts-polar-angle-axis-line"},u,{points:d}))}},{key:"renderTicks",value:function(){var r=this,o=this.props,s=o.ticks,i=o.tick,a=o.tickLine,l=o.tickFormatter,u=o.stroke,c=Ve(this.props,!1),d=Ve(i,!1),f=al(al({},c),{},{fill:"none"},Ve(a,!1)),h=s.map(function(p,m){var g=r.getTickLineCoord(p),y=r.getTickTextAnchor(p),v=al(al(al({textAnchor:y},c),{},{stroke:"none",fill:u},d),{},{index:m,payload:p,x:g.x2,y:g.y2});return z.createElement(Jt,vl({className:et("recharts-polar-angle-axis-tick",A4(i)),key:"tick-".concat(p.coordinate)},lx(r.props,p,m)),a&&z.createElement("line",vl({className:"recharts-polar-angle-axis-tick-line"},f,g)),i&&e.renderTickItem(i,v,l?l(p.value,m):p.value))});return z.createElement(Jt,{className:"recharts-polar-angle-axis-ticks"},h)}},{key:"render",value:function(){var r=this.props,o=r.ticks,s=r.radius,i=r.axisLine;return s<=0||!o||!o.length?null:z.createElement(Jt,{className:et("recharts-polar-angle-axis",this.props.className)},i&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,o,s){var i;return z.isValidElement(r)?i=z.cloneElement(r,o):qe(r)?i=r(o):i=z.createElement(Gc,vl({},o,{className:"recharts-polar-angle-axis-tick-value"}),s),i}}])}(A.PureComponent);Nx(Ax,"displayName","PolarAngleAxis");Nx(Ax,"axisType","angleAxis");Nx(Ax,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Yxe=rj,Qxe=Yxe(Object.getPrototypeOf,Object),Zxe=Qxe,Jxe=Fi,ebe=Zxe,tbe=Li,nbe="[object Object]",rbe=Function.prototype,obe=Object.prototype,X4=rbe.toString,sbe=obe.hasOwnProperty,ibe=X4.call(Object);function abe(t){if(!tbe(t)||Jxe(t)!=nbe)return!1;var e=ebe(t);if(e===null)return!0;var n=sbe.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&X4.call(n)==ibe}var lbe=abe;const ube=ut(lbe);var cbe=Fi,dbe=Li,fbe="[object Boolean]";function hbe(t){return t===!0||t===!1||dbe(t)&&cbe(t)==fbe}var pbe=hbe;const mbe=ut(pbe);function ep(t){"@babel/helpers - typeof";return ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ep(t)}function Av(){return Av=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Av.apply(this,arguments)}function gbe(t,e){return bbe(t)||xbe(t,e)||vbe(t,e)||ybe()}function ybe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vbe(t,e){if(t){if(typeof t=="string")return PP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PP(t,e)}}function PP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function xbe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,s,i,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,o=c}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return a}}function bbe(t){if(Array.isArray(t))return t}function DP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function MP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DP(Object(n),!0).forEach(function(r){wbe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wbe(t,e,n){return e=Sbe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sbe(t){var e=Cbe(t,"string");return ep(e)=="symbol"?e:e+""}function Cbe(t,e){if(ep(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ep(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var FP=function(e,n,r,o,s){var i=r-o,a;return a="M ".concat(e,",").concat(n),a+="L ".concat(e+r,",").concat(n),a+="L ".concat(e+r-i/2,",").concat(n+s),a+="L ".concat(e+r-i/2-o,",").concat(n+s),a+="L ".concat(e,",").concat(n," Z"),a},$be={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},kbe=function(e){var n=MP(MP({},$be),e),r=A.useRef(),o=A.useState(-1),s=gbe(o,2),i=s[0],a=s[1];A.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var b=r.current.getTotalLength();b&&a(b)}catch{}},[]);var l=n.x,u=n.y,c=n.upperWidth,d=n.lowerWidth,f=n.height,h=n.className,p=n.animationEasing,m=n.animationDuration,g=n.animationBegin,y=n.isUpdateAnimationActive;if(l!==+l||u!==+u||c!==+c||d!==+d||f!==+f||c===0&&d===0||f===0)return null;var v=et("recharts-trapezoid",h);return y?z.createElement(Pa,{canBegin:i>0,from:{upperWidth:0,lowerWidth:0,height:f,x:l,y:u},to:{upperWidth:c,lowerWidth:d,height:f,x:l,y:u},duration:m,animationEasing:p,isActive:y},function(b){var x=b.upperWidth,w=b.lowerWidth,S=b.height,$=b.x,C=b.y;return z.createElement(Pa,{canBegin:i>0,from:"0px ".concat(i===-1?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:m,easing:p},z.createElement("path",Av({},Ve(n,!0),{className:v,d:FP($,C,x,w,S),ref:r})))}):z.createElement("g",null,z.createElement("path",Av({},Ve(n,!0),{className:v,d:FP(l,u,c,d,f)})))},Ibe=["option","shapeType","propTransformer","activeClassName","isActive"];function tp(t){"@babel/helpers - typeof";return tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tp(t)}function Tbe(t,e){if(t==null)return{};var n=Ebe(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Ebe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function LP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Ov(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LP(Object(n),!0).forEach(function(r){Nbe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Nbe(t,e,n){return e=Abe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Abe(t){var e=Obe(t,"string");return tp(e)=="symbol"?e:e+""}function Obe(t,e){if(tp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(tp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _be(t,e){return Ov(Ov({},e),t)}function Rbe(t,e){return t==="symbols"}function BP(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return z.createElement(kT,n);case"trapezoid":return z.createElement(kbe,n);case"sector":return z.createElement(R4,n);case"symbols":if(Rbe(e))return z.createElement(jI,n);break;default:return null}}function Pbe(t){return A.isValidElement(t)?t.props:t}function Dbe(t){var e=t.option,n=t.shapeType,r=t.propTransformer,o=r===void 0?_be:r,s=t.activeClassName,i=s===void 0?"recharts-active-shape":s,a=t.isActive,l=Tbe(t,Ibe),u;if(A.isValidElement(e))u=A.cloneElement(e,Ov(Ov({},l),Pbe(e)));else if(qe(e))u=e(l);else if(ube(e)&&!mbe(e)){var c=o(e,l);u=z.createElement(BP,{shapeType:n,elementProps:c})}else{var d=l;u=z.createElement(BP,{shapeType:n,elementProps:d})}return a?z.createElement(Jt,{className:i},u):u}function Ox(t,e){return e!=null&&"trapezoids"in t.props}function _x(t,e){return e!=null&&"sectors"in t.props}function np(t,e){return e!=null&&"points"in t.props}function Mbe(t,e){var n,r,o=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,s=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return o&&s}function Fbe(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function Lbe(t,e){var n=t.x===e.x,r=t.y===e.y,o=t.z===e.z;return n&&r&&o}function Bbe(t,e){var n;return Ox(t,e)?n=Mbe:_x(t,e)?n=Fbe:np(t,e)&&(n=Lbe),n}function zbe(t,e){var n;return Ox(t,e)?n="trapezoids":_x(t,e)?n="sectors":np(t,e)&&(n="points"),n}function jbe(t,e){if(Ox(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(_x(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return np(t,e)?e.payload:{}}function Wbe(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,o=zbe(n,e),s=jbe(n,e),i=r.filter(function(l,u){var c=bT(s,l),d=n.props[o].filter(function(p){var m=Bbe(n,e);return m(p,e)}),f=n.props[o].indexOf(d[d.length-1]),h=u===f;return c&&h}),a=r.indexOf(i[i.length-1]);return a}var hy;function ed(t){"@babel/helpers - typeof";return ed=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ed(t)}function ec(){return ec=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ec.apply(this,arguments)}function zP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function kt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zP(Object(n),!0).forEach(function(r){So(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Vbe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Q4(r.key),r)}}function Ube(t,e,n){return e&&jP(t.prototype,e),n&&jP(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Gbe(t,e,n){return e=_v(e),Hbe(t,Y4()?Reflect.construct(e,n||[],_v(t).constructor):e.apply(t,n))}function Hbe(t,e){if(e&&(ed(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kbe(t)}function Kbe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Y4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Y4=function(){return!!t})()}function _v(t){return _v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_v(t)}function qbe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m$(t,e)}function m$(t,e){return m$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},m$(t,e)}function So(t,e,n){return e=Q4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Q4(t){var e=Xbe(t,"string");return ed(e)=="symbol"?e:e+""}function Xbe(t,e){if(ed(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ed(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qs=function(t){function e(n){var r;return Vbe(this,e),r=Gbe(this,e,[n]),So(r,"pieRef",null),So(r,"sectorRefs",[]),So(r,"id",ax("recharts-pie-")),So(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),qe(o)&&o()}),So(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),qe(o)&&o()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return qbe(e,t),Ube(e,[{key:"isActiveIndex",value:function(r){var o=this.props.activeIndex;return Array.isArray(o)?o.indexOf(r)!==-1:r===o}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var s=this.props,i=s.label,a=s.labelLine,l=s.dataKey,u=s.valueKey,c=Ve(this.props,!1),d=Ve(i,!1),f=Ve(a,!1),h=i&&i.offsetRadius||20,p=r.map(function(m,g){var y=(m.startAngle+m.endAngle)/2,v=Et(m.cx,m.cy,m.outerRadius+h,y),b=kt(kt(kt(kt({},c),m),{},{stroke:"none"},d),{},{index:g,textAnchor:e.getTextAnchor(v.x,m.cx)},v),x=kt(kt(kt(kt({},c),m),{},{fill:"none",stroke:m.fill},f),{},{index:g,points:[Et(m.cx,m.cy,m.outerRadius,y),v]}),w=l;return Ye(l)&&Ye(u)?w="value":Ye(l)&&(w=u),z.createElement(Jt,{key:"label-".concat(m.startAngle,"-").concat(m.endAngle,"-").concat(m.midAngle,"-").concat(g)},a&&e.renderLabelLineItem(a,x,"line"),e.renderLabelItem(i,b,Qr(m,w)))});return z.createElement(Jt,{className:"recharts-pie-labels"},p)}},{key:"renderSectorsStatically",value:function(r){var o=this,s=this.props,i=s.activeShape,a=s.blendStroke,l=s.inactiveShape;return r.map(function(u,c){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&r.length!==1)return null;var d=o.isActiveIndex(c),f=l&&o.hasActiveIndex()?l:null,h=d?i:f,p=kt(kt({},u),{},{stroke:a?u.fill:u.stroke,tabIndex:-1});return z.createElement(Jt,ec({ref:function(g){g&&!o.sectorRefs.includes(g)&&o.sectorRefs.push(g)},tabIndex:-1,className:"recharts-pie-sector"},lx(o.props,u,c),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(c)}),z.createElement(Dbe,ec({option:h,isActive:d,shapeType:"sector"},p)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,o=this.props,s=o.sectors,i=o.isAnimationActive,a=o.animationBegin,l=o.animationDuration,u=o.animationEasing,c=o.animationId,d=this.state,f=d.prevSectors,h=d.prevIsAnimationActive;return z.createElement(Pa,{begin:a,duration:l,isActive:i,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(c,"-").concat(h),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(p){var m=p.t,g=[],y=s&&s[0],v=y.startAngle;return s.forEach(function(b,x){var w=f&&f[x],S=x>0?is(b,"paddingAngle",0):0;if(w){var $=_O(w.endAngle-w.startAngle,b.endAngle-b.startAngle),C=kt(kt({},b),{},{startAngle:v+S,endAngle:v+$(m)+S});g.push(C),v=C.endAngle}else{var k=b.endAngle,I=b.startAngle,T=_O(0,k-I),E=T(m),_=kt(kt({},b),{},{startAngle:v+S,endAngle:v+E+S});g.push(_),v=_.endAngle}}),z.createElement(Jt,null,r.renderSectorsStatically(g))})}},{key:"attachKeyboardHandlers",value:function(r){var o=this;r.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var i=++o.state.sectorToFocus%o.sectorRefs.length;o.sectorRefs[i].focus(),o.setState({sectorToFocus:i});break}case"ArrowRight":{var a=--o.state.sectorToFocus<0?o.sectorRefs.length-1:o.state.sectorToFocus%o.sectorRefs.length;o.sectorRefs[a].focus(),o.setState({sectorToFocus:a});break}case"Escape":{o.sectorRefs[o.state.sectorToFocus].blur(),o.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,o=r.sectors,s=r.isAnimationActive,i=this.state.prevSectors;return s&&o&&o.length&&(!i||!bT(i,o))?this.renderSectorsWithAnimation():this.renderSectorsStatically(o)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,o=this.props,s=o.hide,i=o.sectors,a=o.className,l=o.label,u=o.cx,c=o.cy,d=o.innerRadius,f=o.outerRadius,h=o.isAnimationActive,p=this.state.isAnimationFinished;if(s||!i||!i.length||!Ce(u)||!Ce(c)||!Ce(d)||!Ce(f))return null;var m=et("recharts-pie",a);return z.createElement(Jt,{tabIndex:this.props.rootTabIndex,className:m,ref:function(y){r.pieRef=y}},this.renderSectors(),l&&this.renderLabels(i),Wn.renderCallByParent(this.props,null,!1),(!h||p)&&zl.renderCallByParent(this.props,i,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,o){return o.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==o.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:o.curSectors,isAnimationFinished:!0}:r.sectors!==o.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,o){return r>o?"start":r<o?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,o,s){if(z.isValidElement(r))return z.cloneElement(r,o);if(qe(r))return r(o);var i=et("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return z.createElement(e$,ec({},o,{key:s,type:"linear",className:i}))}},{key:"renderLabelItem",value:function(r,o,s){if(z.isValidElement(r))return z.cloneElement(r,o);var i=s;if(qe(r)&&(i=r(o),z.isValidElement(i)))return i;var a=et("recharts-pie-label-text",typeof r!="boolean"&&!qe(r)?r.className:"");return z.createElement(Gc,ec({},o,{alignmentBaseline:"middle",className:a}),i)}}])}(A.PureComponent);hy=qs;So(qs,"displayName","Pie");So(qs,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Fl.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});So(qs,"parseDeltaAngle",function(t,e){var n=Io(e-t),r=Math.min(Math.abs(e-t),360);return n*r});So(qs,"getRealPieData",function(t){var e=t.data,n=t.children,r=Ve(t,!1),o=Fs(n,av);return e&&e.length?e.map(function(s,i){return kt(kt(kt({payload:s},r),s),o&&o[i]&&o[i].props)}):o&&o.length?o.map(function(s){return kt(kt({},r),s.props)}):[]});So(qs,"parseCoordinateOfPie",function(t,e){var n=e.top,r=e.left,o=e.width,s=e.height,i=N4(o,s),a=r+Or(t.cx,o,o/2),l=n+Or(t.cy,s,s/2),u=Or(t.innerRadius,i,0),c=Or(t.outerRadius,i,i*.8),d=t.maxRadius||Math.sqrt(o*o+s*s)/2;return{cx:a,cy:l,innerRadius:u,outerRadius:c,maxRadius:d}});So(qs,"getComposedData",function(t){var e=t.item,n=t.offset,r=e.type.defaultProps!==void 0?kt(kt({},e.type.defaultProps),e.props):e.props,o=hy.getRealPieData(r);if(!o||!o.length)return null;var s=r.cornerRadius,i=r.startAngle,a=r.endAngle,l=r.paddingAngle,u=r.dataKey,c=r.nameKey,d=r.valueKey,f=r.tooltipType,h=Math.abs(r.minAngle),p=hy.parseCoordinateOfPie(r,n),m=hy.parseDeltaAngle(i,a),g=Math.abs(m),y=u;Ye(u)&&Ye(d)?(bi(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),y="value"):Ye(u)&&(bi(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),y=d);var v=o.filter(function(C){return Qr(C,y,0)!==0}).length,b=(g>=360?v:v-1)*l,x=g-v*h-b,w=o.reduce(function(C,k){var I=Qr(k,y,0);return C+(Ce(I)?I:0)},0),S;if(w>0){var $;S=o.map(function(C,k){var I=Qr(C,y,0),T=Qr(C,c,k),E=(Ce(I)?I:0)/w,_;k?_=$.endAngle+Io(m)*l*(I!==0?1:0):_=i;var O=_+Io(m)*((I!==0?h:0)+E*x),F=(_+O)/2,M=(p.innerRadius+p.outerRadius)/2,L=[{name:T,value:I,payload:C,dataKey:y,type:f}],N=Et(p.cx,p.cy,M,F);return $=kt(kt(kt({percent:E,cornerRadius:s,name:T,tooltipPayload:L,midAngle:F,middleRadius:M,tooltipPosition:N},C),p),{},{value:Qr(C,y),startAngle:_,endAngle:O,payload:C,paddingAngle:Io(m)*l}),$})}return kt(kt({},p),{},{sectors:S,data:o})});var Ybe=Math.ceil,Qbe=Math.max;function Zbe(t,e,n,r){for(var o=-1,s=Qbe(Ybe((e-t)/(n||1)),0),i=Array(s);s--;)i[r?s:++o]=t,t+=n;return i}var Jbe=Zbe,e1e=wj,WP=1/0,t1e=17976931348623157e292;function n1e(t){if(!t)return t===0?t:0;if(t=e1e(t),t===WP||t===-WP){var e=t<0?-1:1;return e*t1e}return t===t?t:0}var r1e=n1e,o1e=Jbe,s1e=mx,vw=r1e;function i1e(t){return function(e,n,r){return r&&typeof r!="number"&&s1e(e,n,r)&&(n=r=void 0),e=vw(e),n===void 0?(n=e,e=0):n=vw(n),r=r===void 0?e<n?1:-1:vw(r),o1e(e,n,r,t)}}var a1e=i1e,l1e=a1e,u1e=l1e(),c1e=u1e;const Rv=ut(c1e);function rp(t){"@babel/helpers - typeof";return rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rp(t)}function VP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function UP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VP(Object(n),!0).forEach(function(r){Z4(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Z4(t,e,n){return e=d1e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d1e(t){var e=f1e(t,"string");return rp(e)=="symbol"?e:e+""}function f1e(t,e){if(rp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(rp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var h1e=["Webkit","Moz","O","ms"],p1e=function(e,n){var r=e.replace(/(\w)/,function(s){return s.toUpperCase()}),o=h1e.reduce(function(s,i){return UP(UP({},s),{},Z4({},i+r,n))},{});return o[e]=n,o};function td(t){"@babel/helpers - typeof";return td=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},td(t)}function Pv(){return Pv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pv.apply(this,arguments)}function GP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function xw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GP(Object(n),!0).forEach(function(r){Gr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function m1e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function HP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,eW(r.key),r)}}function g1e(t,e,n){return e&&HP(t.prototype,e),n&&HP(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function y1e(t,e,n){return e=Dv(e),v1e(t,J4()?Reflect.construct(e,n||[],Dv(t).constructor):e.apply(t,n))}function v1e(t,e){if(e&&(td(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return x1e(t)}function x1e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function J4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(J4=function(){return!!t})()}function Dv(t){return Dv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Dv(t)}function b1e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g$(t,e)}function g$(t,e){return g$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},g$(t,e)}function Gr(t,e,n){return e=eW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eW(t){var e=w1e(t,"string");return td(e)=="symbol"?e:e+""}function w1e(t,e){if(td(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(td(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var S1e=function(e){var n=e.data,r=e.startIndex,o=e.endIndex,s=e.x,i=e.width,a=e.travellerWidth;if(!n||!n.length)return{};var l=n.length,u=Zf().domain(Rv(0,l)).range([s,s+i-a]),c=u.domain().map(function(d){return u(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(o),scale:u,scaleValues:c}},KP=function(e){return e.changedTouches&&!!e.changedTouches.length},nd=function(t){function e(n){var r;return m1e(this,e),r=y1e(this,e,[n]),Gr(r,"handleDrag",function(o){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(o):r.state.isSlideMoving&&r.handleSlideDrag(o)}),Gr(r,"handleTouchMove",function(o){o.changedTouches!=null&&o.changedTouches.length>0&&r.handleDrag(o.changedTouches[0])}),Gr(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var o=r.props,s=o.endIndex,i=o.onDragEnd,a=o.startIndex;i==null||i({endIndex:s,startIndex:a})}),r.detachDragEndListener()}),Gr(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Gr(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Gr(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Gr(r,"handleSlideDragStart",function(o){var s=KP(o)?o.changedTouches[0]:o;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return b1e(e,t),g1e(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var o=r.startX,s=r.endX,i=this.state.scaleValues,a=this.props,l=a.gap,u=a.data,c=u.length-1,d=Math.min(o,s),f=Math.max(o,s),h=e.getIndexInRange(i,d),p=e.getIndexInRange(i,f);return{startIndex:h-h%l,endIndex:p===c?c:p-p%l}}},{key:"getTextOfTick",value:function(r){var o=this.props,s=o.data,i=o.tickFormatter,a=o.dataKey,l=Qr(s[r],a,r);return qe(i)?i(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var o=this.state,s=o.slideMoveStartX,i=o.startX,a=o.endX,l=this.props,u=l.x,c=l.width,d=l.travellerWidth,f=l.startIndex,h=l.endIndex,p=l.onChange,m=r.pageX-s;m>0?m=Math.min(m,u+c-d-a,u+c-d-i):m<0&&(m=Math.max(m,u-i,u-a));var g=this.getIndex({startX:i+m,endX:a+m});(g.startIndex!==f||g.endIndex!==h)&&p&&p(g),this.setState({startX:i+m,endX:a+m,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,o){var s=KP(o)?o.changedTouches[0]:o;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var o=this.state,s=o.brushMoveStartX,i=o.movingTravellerId,a=o.endX,l=o.startX,u=this.state[i],c=this.props,d=c.x,f=c.width,h=c.travellerWidth,p=c.onChange,m=c.gap,g=c.data,y={startX:this.state.startX,endX:this.state.endX},v=r.pageX-s;v>0?v=Math.min(v,d+f-h-u):v<0&&(v=Math.max(v,d-u)),y[i]=u+v;var b=this.getIndex(y),x=b.startIndex,w=b.endIndex,S=function(){var C=g.length-1;return i==="startX"&&(a>l?x%m===0:w%m===0)||a<l&&w===C||i==="endX"&&(a>l?w%m===0:x%m===0)||a>l&&w===C};this.setState(Gr(Gr({},i,u+v),"brushMoveStartX",r.pageX),function(){p&&S()&&p(b)})}},{key:"handleTravellerMoveKeyboard",value:function(r,o){var s=this,i=this.state,a=i.scaleValues,l=i.startX,u=i.endX,c=this.state[o],d=a.indexOf(c);if(d!==-1){var f=d+r;if(!(f===-1||f>=a.length)){var h=a[f];o==="startX"&&h>=u||o==="endX"&&h<=l||this.setState(Gr({},o,h),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,o=r.x,s=r.y,i=r.width,a=r.height,l=r.fill,u=r.stroke;return z.createElement("rect",{stroke:u,fill:l,x:o,y:s,width:i,height:a})}},{key:"renderPanorama",value:function(){var r=this.props,o=r.x,s=r.y,i=r.width,a=r.height,l=r.data,u=r.children,c=r.padding,d=A.Children.only(u);return d?z.cloneElement(d,{x:o,y:s,width:i,height:a,margin:c,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,o){var s,i,a=this,l=this.props,u=l.y,c=l.travellerWidth,d=l.height,f=l.traveller,h=l.ariaLabel,p=l.data,m=l.startIndex,g=l.endIndex,y=Math.max(r,this.props.x),v=xw(xw({},Ve(this.props,!1)),{},{x:y,y:u,width:c,height:d}),b=h||"Min value: ".concat((s=p[m])===null||s===void 0?void 0:s.name,", Max value: ").concat((i=p[g])===null||i===void 0?void 0:i.name);return z.createElement(Jt,{tabIndex:0,role:"slider","aria-label":b,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[o],onTouchStart:this.travellerDragStartHandlers[o],onKeyDown:function(w){["ArrowLeft","ArrowRight"].includes(w.key)&&(w.preventDefault(),w.stopPropagation(),a.handleTravellerMoveKeyboard(w.key==="ArrowRight"?1:-1,o))},onFocus:function(){a.setState({isTravellerFocused:!0})},onBlur:function(){a.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(f,v))}},{key:"renderSlide",value:function(r,o){var s=this.props,i=s.y,a=s.height,l=s.stroke,u=s.travellerWidth,c=Math.min(r,o)+u,d=Math.max(Math.abs(o-r)-u,0);return z.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:c,y:i,width:d,height:a})}},{key:"renderText",value:function(){var r=this.props,o=r.startIndex,s=r.endIndex,i=r.y,a=r.height,l=r.travellerWidth,u=r.stroke,c=this.state,d=c.startX,f=c.endX,h=5,p={pointerEvents:"none",fill:u};return z.createElement(Jt,{className:"recharts-brush-texts"},z.createElement(Gc,Pv({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,f)-h,y:i+a/2},p),this.getTextOfTick(o)),z.createElement(Gc,Pv({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,f)+l+h,y:i+a/2},p),this.getTextOfTick(s)))}},{key:"render",value:function(){var r=this.props,o=r.data,s=r.className,i=r.children,a=r.x,l=r.y,u=r.width,c=r.height,d=r.alwaysShowText,f=this.state,h=f.startX,p=f.endX,m=f.isTextActive,g=f.isSlideMoving,y=f.isTravellerMoving,v=f.isTravellerFocused;if(!o||!o.length||!Ce(a)||!Ce(l)||!Ce(u)||!Ce(c)||u<=0||c<=0)return null;var b=et("recharts-brush",s),x=z.Children.count(i)===1,w=p1e("userSelect","none");return z.createElement(Jt,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),x&&this.renderPanorama(),this.renderSlide(h,p),this.renderTravellerLayer(h,"startX"),this.renderTravellerLayer(p,"endX"),(m||g||y||v||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var o=r.x,s=r.y,i=r.width,a=r.height,l=r.stroke,u=Math.floor(s+a/2)-1;return z.createElement(z.Fragment,null,z.createElement("rect",{x:o,y:s,width:i,height:a,fill:l,stroke:"none"}),z.createElement("line",{x1:o+1,y1:u,x2:o+i-1,y2:u,fill:"none",stroke:"#fff"}),z.createElement("line",{x1:o+1,y1:u+2,x2:o+i-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,o){var s;return z.isValidElement(r)?s=z.cloneElement(r,o):qe(r)?s=r(o):s=e.renderDefaultTraveller(o),s}},{key:"getDerivedStateFromProps",value:function(r,o){var s=r.data,i=r.width,a=r.x,l=r.travellerWidth,u=r.updateId,c=r.startIndex,d=r.endIndex;if(s!==o.prevData||u!==o.prevUpdateId)return xw({prevData:s,prevTravellerWidth:l,prevUpdateId:u,prevX:a,prevWidth:i},s&&s.length?S1e({data:s,width:i,x:a,travellerWidth:l,startIndex:c,endIndex:d}):{scale:null,scaleValues:null});if(o.scale&&(i!==o.prevWidth||a!==o.prevX||l!==o.prevTravellerWidth)){o.scale.range([a,a+i-l]);var f=o.scale.domain().map(function(h){return o.scale(h)});return{prevData:s,prevTravellerWidth:l,prevUpdateId:u,prevX:a,prevWidth:i,startX:o.scale(r.startIndex),endX:o.scale(r.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(r,o){for(var s=r.length,i=0,a=s-1;a-i>1;){var l=Math.floor((i+a)/2);r[l]>o?a=l:i=l}return o>=r[a]?a:i}}])}(A.PureComponent);Gr(nd,"displayName","Brush");Gr(nd,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var C1e=XI;function $1e(t,e){var n;return C1e(t,function(r,o,s){return n=e(r,o,s),!n}),!!n}var k1e=$1e,I1e=Xz,T1e=Ga,E1e=k1e,N1e=Wr,A1e=mx;function O1e(t,e,n){var r=N1e(t)?I1e:E1e;return n&&A1e(t,e,n)&&(e=void 0),r(t,T1e(e))}var _1e=O1e;const R1e=ut(_1e);var Bs=function(e,n){var r=e.alwaysShow,o=e.ifOverflow;return r&&(o="extendDomain"),o===n},qP=gj;function P1e(t,e,n){e=="__proto__"&&qP?qP(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var D1e=P1e,M1e=D1e,F1e=pj,L1e=Ga;function B1e(t,e){var n={};return e=L1e(e),F1e(t,function(r,o,s){M1e(n,o,e(r,o,s))}),n}var z1e=B1e;const j1e=ut(z1e);function W1e(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var V1e=W1e,U1e=XI;function G1e(t,e){var n=!0;return U1e(t,function(r,o,s){return n=!!e(r,o,s),n}),n}var H1e=G1e,K1e=V1e,q1e=H1e,X1e=Ga,Y1e=Wr,Q1e=mx;function Z1e(t,e,n){var r=Y1e(t)?K1e:q1e;return n&&Q1e(t,e,n)&&(e=void 0),r(t,X1e(e))}var J1e=Z1e;const ewe=ut(J1e);function op(t){"@babel/helpers - typeof";return op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},op(t)}function twe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function XP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,tW(r.key),r)}}function nwe(t,e,n){return e&&XP(t.prototype,e),n&&XP(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function YP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Mg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YP(Object(n),!0).forEach(function(r){TT(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TT(t,e,n){return e=tW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tW(t){var e=rwe(t,"string");return op(e)=="symbol"?e:e+""}function rwe(t,e){if(op(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(op(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nW=function(e,n){var r=e.x,o=e.y,s=n.x,i=n.y;return{x:Math.min(r,s),y:Math.min(o,i),width:Math.abs(s-r),height:Math.abs(i-o)}},owe=function(e){var n=e.x1,r=e.y1,o=e.x2,s=e.y2;return nW({x:n,y:r},{x:o,y:s})},rW=function(){function t(e){twe(this,t),this.scale=e}return nwe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=r.bandAware,s=r.position;if(n!==void 0){if(s)switch(s){case"start":return this.scale(n);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+i}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(n)+a}default:return this.scale(n)}if(o){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),o=r[0],s=r[r.length-1];return o<=s?n>=o&&n<=s:n>=s&&n<=o}}],[{key:"create",value:function(n){return new t(n)}}])}();TT(rW,"EPS",1e-4);var ET=function(e){var n=Object.keys(e).reduce(function(r,o){return Mg(Mg({},r),{},TT({},o,rW.create(e[o])))},{});return Mg(Mg({},n),{},{apply:function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=s.bandAware,a=s.position;return j1e(o,function(l,u){return n[u].apply(l,{bandAware:i,position:a})})},isInRange:function(o){return ewe(o,function(s,i){return n[i].isInRange(s)})}})},swe=Hee(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),oW=A.createContext(void 0),sW=A.createContext(void 0),iW=A.createContext(void 0),iwe=A.createContext({}),aW=A.createContext(void 0),awe=A.createContext(0),lwe=A.createContext(0),QP=function(e){var n=e.state,r=n.xAxisMap,o=n.yAxisMap,s=n.offset,i=e.clipPathId,a=e.children,l=e.width,u=e.height,c=swe(s);return z.createElement(oW.Provider,{value:r},z.createElement(sW.Provider,{value:o},z.createElement(iwe.Provider,{value:s},z.createElement(iW.Provider,{value:c},z.createElement(aW.Provider,{value:i},z.createElement(awe.Provider,{value:u},z.createElement(lwe.Provider,{value:l},a)))))))},uwe=function(){return A.useContext(aW)},cwe=function(e){var n=A.useContext(oW);n==null&&Xc();var r=n[e];return r==null&&Xc(),r},dwe=function(e){var n=A.useContext(sW);n==null&&Xc();var r=n[e];return r==null&&Xc(),r},fwe=function(){var e=A.useContext(iW);return e};function rd(t){"@babel/helpers - typeof";return rd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rd(t)}function hwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pwe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,uW(r.key),r)}}function mwe(t,e,n){return e&&pwe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function gwe(t,e,n){return e=Mv(e),ywe(t,lW()?Reflect.construct(e,n||[],Mv(t).constructor):e.apply(t,n))}function ywe(t,e){if(e&&(rd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vwe(t)}function vwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lW=function(){return!!t})()}function Mv(t){return Mv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Mv(t)}function xwe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y$(t,e)}function y$(t,e){return y$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},y$(t,e)}function ZP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function JP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZP(Object(n),!0).forEach(function(r){NT(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function NT(t,e,n){return e=uW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uW(t){var e=bwe(t,"string");return rd(e)=="symbol"?e:e+""}function bwe(t,e){if(rd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(rd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wwe(t,e){return kwe(t)||$we(t,e)||Cwe(t,e)||Swe()}function Swe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cwe(t,e){if(t){if(typeof t=="string")return eD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eD(t,e)}}function eD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $we(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,s,i,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,o=c}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return a}}function kwe(t){if(Array.isArray(t))return t}function v$(){return v$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},v$.apply(this,arguments)}var Iwe=function(e,n){var r;return z.isValidElement(e)?r=z.cloneElement(e,n):qe(e)?r=e(n):r=z.createElement("line",v$({},n,{className:"recharts-reference-line-line"})),r},Twe=function(e,n,r,o,s,i,a,l,u){var c=s.x,d=s.y,f=s.width,h=s.height;if(r){var p=u.y,m=e.y.apply(p,{position:i});if(Bs(u,"discard")&&!e.y.isInRange(m))return null;var g=[{x:c+f,y:m},{x:c,y:m}];return l==="left"?g.reverse():g}if(n){var y=u.x,v=e.x.apply(y,{position:i});if(Bs(u,"discard")&&!e.x.isInRange(v))return null;var b=[{x:v,y:d+h},{x:v,y:d}];return a==="top"?b.reverse():b}if(o){var x=u.segment,w=x.map(function(S){return e.apply(S,{position:i})});return Bs(u,"discard")&&R1e(w,function(S){return!e.isInRange(S)})?null:w}return null};function Ewe(t){var e=t.x,n=t.y,r=t.segment,o=t.xAxisId,s=t.yAxisId,i=t.shape,a=t.className,l=t.alwaysShow,u=uwe(),c=cwe(o),d=dwe(s),f=fwe();if(!u||!f)return null;bi(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=ET({x:c.scale,y:d.scale}),p=Tn(e),m=Tn(n),g=r&&r.length===2,y=Twe(h,p,m,g,f,t.position,c.orientation,d.orientation,t);if(!y)return null;var v=wwe(y,2),b=v[0],x=b.x,w=b.y,S=v[1],$=S.x,C=S.y,k=Bs(t,"hidden")?"url(#".concat(u,")"):void 0,I=JP(JP({clipPath:k},Ve(t,!0)),{},{x1:x,y1:w,x2:$,y2:C});return z.createElement(Jt,{className:et("recharts-reference-line",a)},Iwe(i,I),Wn.renderCallByParent(t,owe({x1:x,y1:w,x2:$,y2:C})))}var AT=function(t){function e(){return hwe(this,e),gwe(this,e,arguments)}return xwe(e,t),mwe(e,[{key:"render",value:function(){return z.createElement(Ewe,this.props)}}])}(z.Component);NT(AT,"displayName","ReferenceLine");NT(AT,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function x$(){return x$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},x$.apply(this,arguments)}function od(t){"@babel/helpers - typeof";return od=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},od(t)}function tD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function nD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tD(Object(n),!0).forEach(function(r){Rx(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Nwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Awe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,dW(r.key),r)}}function Owe(t,e,n){return e&&Awe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _we(t,e,n){return e=Fv(e),Rwe(t,cW()?Reflect.construct(e,n||[],Fv(t).constructor):e.apply(t,n))}function Rwe(t,e){if(e&&(od(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pwe(t)}function Pwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cW=function(){return!!t})()}function Fv(t){return Fv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Fv(t)}function Dwe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b$(t,e)}function b$(t,e){return b$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},b$(t,e)}function Rx(t,e,n){return e=dW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dW(t){var e=Mwe(t,"string");return od(e)=="symbol"?e:e+""}function Mwe(t,e){if(od(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(od(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Fwe=function(e){var n=e.x,r=e.y,o=e.xAxis,s=e.yAxis,i=ET({x:o.scale,y:s.scale}),a=i.apply({x:n,y:r},{bandAware:!0});return Bs(e,"discard")&&!i.isInRange(a)?null:a},Px=function(t){function e(){return Nwe(this,e),_we(this,e,arguments)}return Dwe(e,t),Owe(e,[{key:"render",value:function(){var r=this.props,o=r.x,s=r.y,i=r.r,a=r.alwaysShow,l=r.clipPathId,u=Tn(o),c=Tn(s);if(bi(a===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!c)return null;var d=Fwe(this.props);if(!d)return null;var f=d.x,h=d.y,p=this.props,m=p.shape,g=p.className,y=Bs(this.props,"hidden")?"url(#".concat(l,")"):void 0,v=nD(nD({clipPath:y},Ve(this.props,!0)),{},{cx:f,cy:h});return z.createElement(Jt,{className:et("recharts-reference-dot",g)},e.renderDot(m,v),Wn.renderCallByParent(this.props,{x:f-i,y:h-i,width:2*i,height:2*i}))}}])}(z.Component);Rx(Px,"displayName","ReferenceDot");Rx(Px,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Rx(Px,"renderDot",function(t,e){var n;return z.isValidElement(t)?n=z.cloneElement(t,e):qe(t)?n=t(e):n=z.createElement(IT,x$({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function w$(){return w$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},w$.apply(this,arguments)}function sd(t){"@babel/helpers - typeof";return sd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sd(t)}function rD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function oD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rD(Object(n),!0).forEach(function(r){Dx(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bwe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,hW(r.key),r)}}function zwe(t,e,n){return e&&Bwe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function jwe(t,e,n){return e=Lv(e),Wwe(t,fW()?Reflect.construct(e,n||[],Lv(t).constructor):e.apply(t,n))}function Wwe(t,e){if(e&&(sd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vwe(t)}function Vwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fW=function(){return!!t})()}function Lv(t){return Lv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Lv(t)}function Uwe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S$(t,e)}function S$(t,e){return S$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},S$(t,e)}function Dx(t,e,n){return e=hW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hW(t){var e=Gwe(t,"string");return sd(e)=="symbol"?e:e+""}function Gwe(t,e){if(sd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(sd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Hwe=function(e,n,r,o,s){var i=s.x1,a=s.x2,l=s.y1,u=s.y2,c=s.xAxis,d=s.yAxis;if(!c||!d)return null;var f=ET({x:c.scale,y:d.scale}),h={x:e?f.x.apply(i,{position:"start"}):f.x.rangeMin,y:r?f.y.apply(l,{position:"start"}):f.y.rangeMin},p={x:n?f.x.apply(a,{position:"end"}):f.x.rangeMax,y:o?f.y.apply(u,{position:"end"}):f.y.rangeMax};return Bs(s,"discard")&&(!f.isInRange(h)||!f.isInRange(p))?null:nW(h,p)},Mx=function(t){function e(){return Lwe(this,e),jwe(this,e,arguments)}return Uwe(e,t),zwe(e,[{key:"render",value:function(){var r=this.props,o=r.x1,s=r.x2,i=r.y1,a=r.y2,l=r.className,u=r.alwaysShow,c=r.clipPathId;bi(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=Tn(o),f=Tn(s),h=Tn(i),p=Tn(a),m=this.props.shape;if(!d&&!f&&!h&&!p&&!m)return null;var g=Hwe(d,f,h,p,this.props);if(!g&&!m)return null;var y=Bs(this.props,"hidden")?"url(#".concat(c,")"):void 0;return z.createElement(Jt,{className:et("recharts-reference-area",l)},e.renderRect(m,oD(oD({clipPath:y},Ve(this.props,!0)),g)),Wn.renderCallByParent(this.props,g))}}])}(z.Component);Dx(Mx,"displayName","ReferenceArea");Dx(Mx,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Dx(Mx,"renderRect",function(t,e){var n;return z.isValidElement(t)?n=z.cloneElement(t,e):qe(t)?n=t(e):n=z.createElement(kT,w$({},e,{className:"recharts-reference-area-rect"})),n});function sD(t){return Ywe(t)||Xwe(t)||qwe(t)||Kwe()}function Kwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qwe(t,e){if(t){if(typeof t=="string")return C$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C$(t,e)}}function Xwe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ywe(t){if(Array.isArray(t))return C$(t)}function C$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var $$=function(e,n,r,o,s){var i=Fs(e,AT),a=Fs(e,Px),l=[].concat(sD(i),sD(a)),u=Fs(e,Mx),c="".concat(o,"Id"),d=o[0],f=n;if(l.length&&(f=l.reduce(function(m,g){if(g.props[c]===r&&Bs(g.props,"extendDomain")&&Ce(g.props[d])){var y=g.props[d];return[Math.min(m[0],y),Math.max(m[1],y)]}return m},f)),u.length){var h="".concat(d,"1"),p="".concat(d,"2");f=u.reduce(function(m,g){if(g.props[c]===r&&Bs(g.props,"extendDomain")&&Ce(g.props[h])&&Ce(g.props[p])){var y=g.props[h],v=g.props[p];return[Math.min(m[0],y,v),Math.max(m[1],y,v)]}return m},f)}return s&&s.length&&(f=s.reduce(function(m,g){return Ce(g)?[Math.min(m[0],g),Math.max(m[1],g)]:m},f)),f},pW={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function o(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function s(l,u,c,d,f){if(typeof c!="function")throw new TypeError("The listener must be a function");var h=new o(c,d||l,f),p=n?n+u:u;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],h]:l._events[p].push(h):(l._events[p]=h,l._eventsCount++),l}function i(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],c,d;if(this._eventsCount===0)return u;for(d in c=this._events)e.call(c,d)&&u.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},a.prototype.listeners=function(u){var c=n?n+u:u,d=this._events[c];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,h=d.length,p=new Array(h);f<h;f++)p[f]=d[f].fn;return p},a.prototype.listenerCount=function(u){var c=n?n+u:u,d=this._events[c];return d?d.fn?1:d.length:0},a.prototype.emit=function(u,c,d,f,h,p){var m=n?n+u:u;if(!this._events[m])return!1;var g=this._events[m],y=arguments.length,v,b;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),y){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,c),!0;case 3:return g.fn.call(g.context,c,d),!0;case 4:return g.fn.call(g.context,c,d,f),!0;case 5:return g.fn.call(g.context,c,d,f,h),!0;case 6:return g.fn.call(g.context,c,d,f,h,p),!0}for(b=1,v=new Array(y-1);b<y;b++)v[b-1]=arguments[b];g.fn.apply(g.context,v)}else{var x=g.length,w;for(b=0;b<x;b++)switch(g[b].once&&this.removeListener(u,g[b].fn,void 0,!0),y){case 1:g[b].fn.call(g[b].context);break;case 2:g[b].fn.call(g[b].context,c);break;case 3:g[b].fn.call(g[b].context,c,d);break;case 4:g[b].fn.call(g[b].context,c,d,f);break;default:if(!v)for(w=1,v=new Array(y-1);w<y;w++)v[w-1]=arguments[w];g[b].fn.apply(g[b].context,v)}}return!0},a.prototype.on=function(u,c,d){return s(this,u,c,d,!1)},a.prototype.once=function(u,c,d){return s(this,u,c,d,!0)},a.prototype.removeListener=function(u,c,d,f){var h=n?n+u:u;if(!this._events[h])return this;if(!c)return i(this,h),this;var p=this._events[h];if(p.fn)p.fn===c&&(!f||p.once)&&(!d||p.context===d)&&i(this,h);else{for(var m=0,g=[],y=p.length;m<y;m++)(p[m].fn!==c||f&&!p[m].once||d&&p[m].context!==d)&&g.push(p[m]);g.length?this._events[h]=g.length===1?g[0]:g:i(this,h)}return this},a.prototype.removeAllListeners=function(u){var c;return u?(c=n?n+u:u,this._events[c]&&i(this,c)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(pW);var Qwe=pW.exports;const Zwe=ut(Qwe);var bw=new Zwe,ww="recharts.syncMouseEvents";function sp(t){"@babel/helpers - typeof";return sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sp(t)}function Jwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eSe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,mW(r.key),r)}}function tSe(t,e,n){return e&&eSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Sw(t,e,n){return e=mW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mW(t){var e=nSe(t,"string");return sp(e)=="symbol"?e:e+""}function nSe(t,e){if(sp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(sp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var rSe=function(){function t(){Jwe(this,t),Sw(this,"activeIndex",0),Sw(this,"coordinateList",[]),Sw(this,"layout","horizontal")}return tSe(t,[{key:"setDetails",value:function(n){var r,o=n.coordinateList,s=o===void 0?null:o,i=n.container,a=i===void 0?null:i,l=n.layout,u=l===void 0?null:l,c=n.offset,d=c===void 0?null:c,f=n.mouseHandlerCallback,h=f===void 0?null:f;this.coordinateList=(r=s??this.coordinateList)!==null&&r!==void 0?r:[],this.container=a??this.container,this.layout=u??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=h??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var o=this.container.getBoundingClientRect(),s=o.x,i=o.y,a=o.height,l=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,c=((r=window)===null||r===void 0?void 0:r.scrollY)||0,d=s+l+u,f=i+this.offset.top+a/2+c;this.mouseHandlerCallback({pageX:d,pageY:f})}}}])}();function oSe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],o=t==null?void 0:t[1];if(r&&o&&Ce(r)&&Ce(o))return!0}return!1}function sSe(t,e,n,r){var o=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-o:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-o,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function gW(t){var e=t.cx,n=t.cy,r=t.radius,o=t.startAngle,s=t.endAngle,i=Et(e,n,r,o),a=Et(e,n,r,s);return{points:[i,a],cx:e,cy:n,radius:r,startAngle:o,endAngle:s}}function iSe(t,e,n){var r,o,s,i;if(t==="horizontal")r=e.x,s=r,o=n.top,i=n.top+n.height;else if(t==="vertical")o=e.y,i=o,r=n.left,s=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var a=e.cx,l=e.cy,u=e.innerRadius,c=e.outerRadius,d=e.angle,f=Et(a,l,u,d),h=Et(a,l,c,d);r=f.x,o=f.y,s=h.x,i=h.y}else return gW(e);return[{x:r,y:o},{x:s,y:i}]}function ip(t){"@babel/helpers - typeof";return ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ip(t)}function iD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Fg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iD(Object(n),!0).forEach(function(r){aSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aSe(t,e,n){return e=lSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lSe(t){var e=uSe(t,"string");return ip(e)=="symbol"?e:e+""}function uSe(t,e){if(ip(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ip(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cSe(t){var e,n,r=t.element,o=t.tooltipEventType,s=t.isActive,i=t.activeCoordinate,a=t.activePayload,l=t.offset,u=t.activeTooltipIndex,c=t.tooltipAxisBandSize,d=t.layout,f=t.chartName,h=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!h||!s||!i||f!=="ScatterChart"&&o!=="axis")return null;var p,m=e$;if(f==="ScatterChart")p=i,m=xxe;else if(f==="BarChart")p=sSe(d,i,l,c),m=kT;else if(d==="radial"){var g=gW(i),y=g.cx,v=g.cy,b=g.radius,x=g.startAngle,w=g.endAngle;p={cx:y,cy:v,startAngle:x,endAngle:w,innerRadius:b,outerRadius:b},m=R4}else p={points:iSe(d,i,l)},m=e$;var S=Fg(Fg(Fg(Fg({stroke:"#ccc",pointerEvents:"none"},l),p),Ve(h,!1)),{},{payload:a,payloadIndex:u,className:et("recharts-tooltip-cursor",h.className)});return A.isValidElement(h)?A.cloneElement(h,S):A.createElement(m,S)}var dSe=["item"],fSe=["children","className","width","height","style","compact","title","desc"];function id(t){"@babel/helpers - typeof";return id=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},id(t)}function rh(){return rh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rh.apply(this,arguments)}function aD(t,e){return mSe(t)||pSe(t,e)||vW(t,e)||hSe()}function hSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pSe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,s,i,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,o=c}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return a}}function mSe(t){if(Array.isArray(t))return t}function lD(t,e){if(t==null)return{};var n=gSe(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function gSe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ySe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vSe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xW(r.key),r)}}function xSe(t,e,n){return e&&vSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function bSe(t,e,n){return e=Bv(e),wSe(t,yW()?Reflect.construct(e,n||[],Bv(t).constructor):e.apply(t,n))}function wSe(t,e){if(e&&(id(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SSe(t)}function SSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yW=function(){return!!t})()}function Bv(t){return Bv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Bv(t)}function CSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k$(t,e)}function k$(t,e){return k$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},k$(t,e)}function ad(t){return ISe(t)||kSe(t)||vW(t)||$Se()}function $Se(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vW(t,e){if(t){if(typeof t=="string")return I$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I$(t,e)}}function kSe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ISe(t){if(Array.isArray(t))return I$(t)}function I$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function uD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function ie(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uD(Object(n),!0).forEach(function(r){De(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function De(t,e,n){return e=xW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xW(t){var e=TSe(t,"string");return id(e)=="symbol"?e:e+""}function TSe(t,e){if(id(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(id(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ESe={xAxis:["bottom","top"],yAxis:["left","right"]},NSe={width:"100%",height:"100%"},bW={x:0,y:0};function Lg(t){return t}var ASe=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},OSe=function(e,n,r,o){var s=n.find(function(c){return c&&c.index===r});if(s){if(e==="horizontal")return{x:s.coordinate,y:o.y};if(e==="vertical")return{x:o.x,y:s.coordinate};if(e==="centric"){var i=s.coordinate,a=o.radius;return ie(ie(ie({},o),Et(o.cx,o.cy,a,i)),{},{angle:i,radius:a})}var l=s.coordinate,u=o.angle;return ie(ie(ie({},o),Et(o.cx,o.cy,l,u)),{},{angle:u,radius:l})}return bW},Fx=function(e,n){var r=n.graphicalItems,o=n.dataStartIndex,s=n.dataEndIndex,i=(r??[]).reduce(function(a,l){var u=l.props.data;return u&&u.length?[].concat(ad(a),ad(u)):a},[]);return i.length>0?i:e&&e.length&&Ce(o)&&Ce(s)?e.slice(o,s+1):[]};function wW(t){return t==="number"?[0,"auto"]:void 0}var T$=function(e,n,r,o){var s=e.graphicalItems,i=e.tooltipAxis,a=Fx(n,e);return r<0||!s||!s.length||r>=a.length?null:s.reduce(function(l,u){var c,d=(c=u.props.data)!==null&&c!==void 0?c:n;d&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(d=d.slice(e.dataStartIndex,e.dataEndIndex+1));var f;if(i.dataKey&&!i.allowDuplicatedCategory){var h=d===void 0?a:d;f=iC(h,i.dataKey,o)}else f=d&&d[r]||a[r];return f?[].concat(ad(l),[pye(u,f)]):l},[])},cD=function(e,n,r,o){var s=o||{x:e.chartX,y:e.chartY},i=ASe(s,r),a=e.orderedTooltipTicks,l=e.tooltipAxis,u=e.tooltipTicks,c=Zge(i,a,u,l);if(c>=0&&u){var d=u[c]&&u[c].value,f=T$(e,n,c,d),h=OSe(r,a,c,s);return{activeTooltipIndex:c,activeLabel:d,activePayload:f,activeCoordinate:h}}return null},_Se=function(e,n){var r=n.axes,o=n.graphicalItems,s=n.axisType,i=n.axisIdKey,a=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,c=e.layout,d=e.children,f=e.stackOffset,h=I4(c,s);return r.reduce(function(p,m){var g,y=m.type.defaultProps!==void 0?ie(ie({},m.type.defaultProps),m.props):m.props,v=y.type,b=y.dataKey,x=y.allowDataOverflow,w=y.allowDuplicatedCategory,S=y.scale,$=y.ticks,C=y.includeHidden,k=y[i];if(p[k])return p;var I=Fx(e.data,{graphicalItems:o.filter(function(W){var V,ee=i in W.props?W.props[i]:(V=W.type.defaultProps)===null||V===void 0?void 0:V[i];return ee===k}),dataStartIndex:l,dataEndIndex:u}),T=I.length,E,_,O;oSe(y.domain,x,v)&&(E=qC(y.domain,null,x),h&&(v==="number"||S!=="auto")&&(O=Jf(I,b,"category")));var F=wW(v);if(!E||E.length===0){var M,L=(M=y.domain)!==null&&M!==void 0?M:F;if(b){if(E=Jf(I,b,v),v==="category"&&h){var N=Wte(E);w&&N?(_=E,E=Rv(0,T)):w||(E=UR(L,E,m).reduce(function(W,V){return W.indexOf(V)>=0?W:[].concat(ad(W),[V])},[]))}else if(v==="category")w?E=E.filter(function(W){return W!==""&&!Ye(W)}):E=UR(L,E,m).reduce(function(W,V){return W.indexOf(V)>=0||V===""||Ye(V)?W:[].concat(ad(W),[V])},[]);else if(v==="number"){var D=rye(I,o.filter(function(W){var V,ee,ne=i in W.props?W.props[i]:(V=W.type.defaultProps)===null||V===void 0?void 0:V[i],se="hide"in W.props?W.props.hide:(ee=W.type.defaultProps)===null||ee===void 0?void 0:ee.hide;return ne===k&&(C||!se)}),b,s,c);D&&(E=D)}h&&(v==="number"||S!=="auto")&&(O=Jf(I,b,"category"))}else h?E=Rv(0,T):a&&a[k]&&a[k].hasStack&&v==="number"?E=f==="expand"?[0,1]:T4(a[k].stackGroups,l,u):E=k4(I,o.filter(function(W){var V=i in W.props?W.props[i]:W.type.defaultProps[i],ee="hide"in W.props?W.props.hide:W.type.defaultProps.hide;return V===k&&(C||!ee)}),v,c,!0);if(v==="number")E=$$(d,E,k,s,$),L&&(E=qC(L,E,x));else if(v==="category"&&L){var U=L,B=E.every(function(W){return U.indexOf(W)>=0});B&&(E=U)}}return ie(ie({},p),{},De({},k,ie(ie({},y),{},{axisType:s,domain:E,categoricalDomain:O,duplicateDomain:_,originalDomain:(g=y.domain)!==null&&g!==void 0?g:F,isCategorical:h,layout:c})))},{})},RSe=function(e,n){var r=n.graphicalItems,o=n.Axis,s=n.axisType,i=n.axisIdKey,a=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,c=e.layout,d=e.children,f=Fx(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:u}),h=f.length,p=I4(c,s),m=-1;return r.reduce(function(g,y){var v=y.type.defaultProps!==void 0?ie(ie({},y.type.defaultProps),y.props):y.props,b=v[i],x=wW("number");if(!g[b]){m++;var w;return p?w=Rv(0,h):a&&a[b]&&a[b].hasStack?(w=T4(a[b].stackGroups,l,u),w=$$(d,w,b,s)):(w=qC(x,k4(f,r.filter(function(S){var $,C,k=i in S.props?S.props[i]:($=S.type.defaultProps)===null||$===void 0?void 0:$[i],I="hide"in S.props?S.props.hide:(C=S.type.defaultProps)===null||C===void 0?void 0:C.hide;return k===b&&!I}),"number",c),o.defaultProps.allowDataOverflow),w=$$(d,w,b,s)),ie(ie({},g),{},De({},b,ie(ie({axisType:s},o.defaultProps),{},{hide:!0,orientation:is(ESe,"".concat(s,".").concat(m%2),null),domain:w,originalDomain:x,isCategorical:p,layout:c})))}return g},{})},PSe=function(e,n){var r=n.axisType,o=r===void 0?"xAxis":r,s=n.AxisComp,i=n.graphicalItems,a=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,c=e.children,d="".concat(o,"Id"),f=Fs(c,s),h={};return f&&f.length?h=_Se(e,{axes:f,graphicalItems:i,axisType:o,axisIdKey:d,stackGroups:a,dataStartIndex:l,dataEndIndex:u}):i&&i.length&&(h=RSe(e,{Axis:s,graphicalItems:i,axisType:o,axisIdKey:d,stackGroups:a,dataStartIndex:l,dataEndIndex:u})),h},DSe=function(e){var n=Mu(e),r=Pf(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:YI(r,function(o){return o.coordinate}),tooltipAxis:n,tooltipAxisBandSize:XC(n,r)}},dD=function(e){var n=e.children,r=e.defaultShowTooltip,o=xo(n,nd),s=0,i=0;return e.data&&e.data.length!==0&&(i=e.data.length-1),o&&o.props&&(o.props.startIndex>=0&&(s=o.props.startIndex),o.props.endIndex>=0&&(i=o.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:i,activeTooltipIndex:-1,isTooltipActive:!!r}},MSe=function(e){return!e||!e.length?!1:e.some(function(n){var r=xi(n&&n.type);return r&&r.indexOf("Bar")>=0})},fD=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},FSe=function(e,n){var r=e.props,o=e.graphicalItems,s=e.xAxisMap,i=s===void 0?{}:s,a=e.yAxisMap,l=a===void 0?{}:a,u=r.width,c=r.height,d=r.children,f=r.margin||{},h=xo(d,nd),p=xo(d,wa),m=Object.keys(l).reduce(function(w,S){var $=l[S],C=$.orientation;return!$.mirror&&!$.hide?ie(ie({},w),{},De({},C,w[C]+$.width)):w},{left:f.left||0,right:f.right||0}),g=Object.keys(i).reduce(function(w,S){var $=i[S],C=$.orientation;return!$.mirror&&!$.hide?ie(ie({},w),{},De({},C,is(w,"".concat(C))+$.height)):w},{top:f.top||0,bottom:f.bottom||0}),y=ie(ie({},g),m),v=y.bottom;h&&(y.bottom+=h.props.height||nd.defaultProps.height),p&&n&&(y=tye(y,o,r,n));var b=u-y.left-y.right,x=c-y.top-y.bottom;return ie(ie({brushBottom:v},y),{},{width:Math.max(b,0),height:Math.max(x,0)})},LSe=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},BSe=function(e){var n=e.chartName,r=e.GraphicalChild,o=e.defaultTooltipEventType,s=o===void 0?"axis":o,i=e.validateTooltipEventTypes,a=i===void 0?["axis"]:i,l=e.axisComponents,u=e.legendContent,c=e.formatAxisMap,d=e.defaultProps,f=function(g,y){var v=y.graphicalItems,b=y.stackGroups,x=y.offset,w=y.updateId,S=y.dataStartIndex,$=y.dataEndIndex,C=g.barSize,k=g.layout,I=g.barGap,T=g.barCategoryGap,E=g.maxBarSize,_=fD(k),O=_.numericAxisName,F=_.cateAxisName,M=MSe(v),L=[];return v.forEach(function(N,D){var U=Fx(g.data,{graphicalItems:[N],dataStartIndex:S,dataEndIndex:$}),B=N.type.defaultProps!==void 0?ie(ie({},N.type.defaultProps),N.props):N.props,W=B.dataKey,V=B.maxBarSize,ee=B["".concat(O,"Id")],ne=B["".concat(F,"Id")],se={},de=l.reduce(function(Fe,_t){var ct=y["".concat(_t.axisType,"Map")],an=B["".concat(_t.axisType,"Id")];ct&&ct[an]||_t.axisType==="zAxis"||Xc();var nt=ct[an];return ie(ie({},Fe),{},De(De({},_t.axisType,nt),"".concat(_t.axisType,"Ticks"),Pf(nt)))},se),ue=de[F],Y=de["".concat(F,"Ticks")],ae=b&&b[ee]&&b[ee].hasStack&&fye(N,b[ee].stackGroups),oe=xi(N.type).indexOf("Bar")>=0,Z=XC(ue,Y),be=[],me=M&&Jge({barSize:C,stackGroups:b,totalSize:LSe(de,F)});if(oe){var xe,fe,Oe=Ye(V)?E:V,ye=(xe=(fe=XC(ue,Y,!0))!==null&&fe!==void 0?fe:Oe)!==null&&xe!==void 0?xe:0;be=eye({barGap:I,barCategoryGap:T,bandSize:ye!==Z?ye:Z,sizeList:me[ne],maxBarSize:Oe}),ye!==Z&&(be=be.map(function(Fe){return ie(ie({},Fe),{},{position:ie(ie({},Fe.position),{},{offset:Fe.position.offset-ye/2})})}))}var Ne=N&&N.type&&N.type.getComposedData;Ne&&L.push({props:ie(ie({},Ne(ie(ie({},de),{},{displayedData:U,props:g,dataKey:W,item:N,bandSize:Z,barPosition:be,offset:x,stackedData:ae,layout:k,dataStartIndex:S,dataEndIndex:$}))),{},De(De(De({key:N.key||"item-".concat(D)},O,de[O]),F,de[F]),"animationId",w)),childIndex:Jte(N,g.children),item:N})}),L},h=function(g,y){var v=g.props,b=g.dataStartIndex,x=g.dataEndIndex,w=g.updateId;if(!FO({props:v}))return null;var S=v.children,$=v.layout,C=v.stackOffset,k=v.data,I=v.reverseStackOrder,T=fD($),E=T.numericAxisName,_=T.cateAxisName,O=Fs(S,r),F=cye(k,O,"".concat(E,"Id"),"".concat(_,"Id"),C,I),M=l.reduce(function(B,W){var V="".concat(W.axisType,"Map");return ie(ie({},B),{},De({},V,PSe(v,ie(ie({},W),{},{graphicalItems:O,stackGroups:W.axisType===E&&F,dataStartIndex:b,dataEndIndex:x}))))},{}),L=FSe(ie(ie({},M),{},{props:v,graphicalItems:O}),y==null?void 0:y.legendBBox);Object.keys(M).forEach(function(B){M[B]=c(v,M[B],L,B.replace("Map",""),n)});var N=M["".concat(_,"Map")],D=DSe(N),U=f(v,ie(ie({},M),{},{dataStartIndex:b,dataEndIndex:x,updateId:w,graphicalItems:O,stackGroups:F,offset:L}));return ie(ie({formattedGraphicalItems:U,graphicalItems:O,offset:L,stackGroups:F},D),M)},p=function(m){function g(y){var v,b,x;return ySe(this,g),x=bSe(this,g,[y]),De(x,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),De(x,"accessibilityManager",new rSe),De(x,"handleLegendBBoxUpdate",function(w){if(w){var S=x.state,$=S.dataStartIndex,C=S.dataEndIndex,k=S.updateId;x.setState(ie({legendBBox:w},h({props:x.props,dataStartIndex:$,dataEndIndex:C,updateId:k},ie(ie({},x.state),{},{legendBBox:w}))))}}),De(x,"handleReceiveSyncEvent",function(w,S,$){if(x.props.syncId===w){if($===x.eventEmitterSymbol&&typeof x.props.syncMethod!="function")return;x.applySyncEvent(S)}}),De(x,"handleBrushChange",function(w){var S=w.startIndex,$=w.endIndex;if(S!==x.state.dataStartIndex||$!==x.state.dataEndIndex){var C=x.state.updateId;x.setState(function(){return ie({dataStartIndex:S,dataEndIndex:$},h({props:x.props,dataStartIndex:S,dataEndIndex:$,updateId:C},x.state))}),x.triggerSyncEvent({dataStartIndex:S,dataEndIndex:$})}}),De(x,"handleMouseEnter",function(w){var S=x.getMouseInfo(w);if(S){var $=ie(ie({},S),{},{isTooltipActive:!0});x.setState($),x.triggerSyncEvent($);var C=x.props.onMouseEnter;qe(C)&&C($,w)}}),De(x,"triggeredAfterMouseMove",function(w){var S=x.getMouseInfo(w),$=S?ie(ie({},S),{},{isTooltipActive:!0}):{isTooltipActive:!1};x.setState($),x.triggerSyncEvent($);var C=x.props.onMouseMove;qe(C)&&C($,w)}),De(x,"handleItemMouseEnter",function(w){x.setState(function(){return{isTooltipActive:!0,activeItem:w,activePayload:w.tooltipPayload,activeCoordinate:w.tooltipPosition||{x:w.cx,y:w.cy}}})}),De(x,"handleItemMouseLeave",function(){x.setState(function(){return{isTooltipActive:!1}})}),De(x,"handleMouseMove",function(w){w.persist(),x.throttleTriggeredAfterMouseMove(w)}),De(x,"handleMouseLeave",function(w){x.throttleTriggeredAfterMouseMove.cancel();var S={isTooltipActive:!1};x.setState(S),x.triggerSyncEvent(S);var $=x.props.onMouseLeave;qe($)&&$(S,w)}),De(x,"handleOuterEvent",function(w){var S=Zte(w),$=is(x.props,"".concat(S));if(S&&qe($)){var C,k;/.*touch.*/i.test(S)?k=x.getMouseInfo(w.changedTouches[0]):k=x.getMouseInfo(w),$((C=k)!==null&&C!==void 0?C:{},w)}}),De(x,"handleClick",function(w){var S=x.getMouseInfo(w);if(S){var $=ie(ie({},S),{},{isTooltipActive:!0});x.setState($),x.triggerSyncEvent($);var C=x.props.onClick;qe(C)&&C($,w)}}),De(x,"handleMouseDown",function(w){var S=x.props.onMouseDown;if(qe(S)){var $=x.getMouseInfo(w);S($,w)}}),De(x,"handleMouseUp",function(w){var S=x.props.onMouseUp;if(qe(S)){var $=x.getMouseInfo(w);S($,w)}}),De(x,"handleTouchMove",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&x.throttleTriggeredAfterMouseMove(w.changedTouches[0])}),De(x,"handleTouchStart",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&x.handleMouseDown(w.changedTouches[0])}),De(x,"handleTouchEnd",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&x.handleMouseUp(w.changedTouches[0])}),De(x,"triggerSyncEvent",function(w){x.props.syncId!==void 0&&bw.emit(ww,x.props.syncId,w,x.eventEmitterSymbol)}),De(x,"applySyncEvent",function(w){var S=x.props,$=S.layout,C=S.syncMethod,k=x.state.updateId,I=w.dataStartIndex,T=w.dataEndIndex;if(w.dataStartIndex!==void 0||w.dataEndIndex!==void 0)x.setState(ie({dataStartIndex:I,dataEndIndex:T},h({props:x.props,dataStartIndex:I,dataEndIndex:T,updateId:k},x.state)));else if(w.activeTooltipIndex!==void 0){var E=w.chartX,_=w.chartY,O=w.activeTooltipIndex,F=x.state,M=F.offset,L=F.tooltipTicks;if(!M)return;if(typeof C=="function")O=C(L,w);else if(C==="value"){O=-1;for(var N=0;N<L.length;N++)if(L[N].value===w.activeLabel){O=N;break}}var D=ie(ie({},M),{},{x:M.left,y:M.top}),U=Math.min(E,D.x+D.width),B=Math.min(_,D.y+D.height),W=L[O]&&L[O].value,V=T$(x.state,x.props.data,O),ee=L[O]?{x:$==="horizontal"?L[O].coordinate:U,y:$==="horizontal"?B:L[O].coordinate}:bW;x.setState(ie(ie({},w),{},{activeLabel:W,activeCoordinate:ee,activePayload:V,activeTooltipIndex:O}))}else x.setState(w)}),De(x,"renderCursor",function(w){var S,$=x.state,C=$.isTooltipActive,k=$.activeCoordinate,I=$.activePayload,T=$.offset,E=$.activeTooltipIndex,_=$.tooltipAxisBandSize,O=x.getTooltipEventType(),F=(S=w.props.active)!==null&&S!==void 0?S:C,M=x.props.layout,L=w.key||"_recharts-cursor";return z.createElement(cSe,{key:L,activeCoordinate:k,activePayload:I,activeTooltipIndex:E,chartName:n,element:w,isActive:F,layout:M,offset:T,tooltipAxisBandSize:_,tooltipEventType:O})}),De(x,"renderPolarAxis",function(w,S,$){var C=is(w,"type.axisType"),k=is(x.state,"".concat(C,"Map")),I=w.type.defaultProps,T=I!==void 0?ie(ie({},I),w.props):w.props,E=k&&k[T["".concat(C,"Id")]];return A.cloneElement(w,ie(ie({},E),{},{className:et(C,E.className),key:w.key||"".concat(S,"-").concat($),ticks:Pf(E,!0)}))}),De(x,"renderPolarGrid",function(w){var S=w.props,$=S.radialLines,C=S.polarAngles,k=S.polarRadius,I=x.state,T=I.radiusAxisMap,E=I.angleAxisMap,_=Mu(T),O=Mu(E),F=O.cx,M=O.cy,L=O.innerRadius,N=O.outerRadius;return A.cloneElement(w,{polarAngles:Array.isArray(C)?C:Pf(O,!0).map(function(D){return D.coordinate}),polarRadius:Array.isArray(k)?k:Pf(_,!0).map(function(D){return D.coordinate}),cx:F,cy:M,innerRadius:L,outerRadius:N,key:w.key||"polar-grid",radialLines:$})}),De(x,"renderLegend",function(){var w=x.state.formattedGraphicalItems,S=x.props,$=S.children,C=S.width,k=S.height,I=x.props.margin||{},T=C-(I.left||0)-(I.right||0),E=C4({children:$,formattedGraphicalItems:w,legendWidth:T,legendContent:u});if(!E)return null;var _=E.item,O=lD(E,dSe);return A.cloneElement(_,ie(ie({},O),{},{chartWidth:C,chartHeight:k,margin:I,onBBoxUpdate:x.handleLegendBBoxUpdate}))}),De(x,"renderTooltip",function(){var w,S=x.props,$=S.children,C=S.accessibilityLayer,k=xo($,Zo);if(!k)return null;var I=x.state,T=I.isTooltipActive,E=I.activeCoordinate,_=I.activePayload,O=I.activeLabel,F=I.offset,M=(w=k.props.active)!==null&&w!==void 0?w:T;return A.cloneElement(k,{viewBox:ie(ie({},F),{},{x:F.left,y:F.top}),active:M,label:O,payload:M?_:[],coordinate:E,accessibilityLayer:C})}),De(x,"renderBrush",function(w){var S=x.props,$=S.margin,C=S.data,k=x.state,I=k.offset,T=k.dataStartIndex,E=k.dataEndIndex,_=k.updateId;return A.cloneElement(w,{key:w.key||"_recharts-brush",onChange:_g(x.handleBrushChange,w.props.onChange),data:C,x:Ce(w.props.x)?w.props.x:I.left,y:Ce(w.props.y)?w.props.y:I.top+I.height+I.brushBottom-($.bottom||0),width:Ce(w.props.width)?w.props.width:I.width,startIndex:T,endIndex:E,updateId:"brush-".concat(_)})}),De(x,"renderReferenceElement",function(w,S,$){if(!w)return null;var C=x,k=C.clipPathId,I=x.state,T=I.xAxisMap,E=I.yAxisMap,_=I.offset,O=w.type.defaultProps||{},F=w.props,M=F.xAxisId,L=M===void 0?O.xAxisId:M,N=F.yAxisId,D=N===void 0?O.yAxisId:N;return A.cloneElement(w,{key:w.key||"".concat(S,"-").concat($),xAxis:T[L],yAxis:E[D],viewBox:{x:_.left,y:_.top,width:_.width,height:_.height},clipPathId:k})}),De(x,"renderActivePoints",function(w){var S=w.item,$=w.activePoint,C=w.basePoint,k=w.childIndex,I=w.isRange,T=[],E=S.props.key,_=S.item.type.defaultProps!==void 0?ie(ie({},S.item.type.defaultProps),S.item.props):S.item.props,O=_.activeDot,F=_.dataKey,M=ie(ie({index:k,dataKey:F,cx:$.x,cy:$.y,r:4,fill:$T(S.item),strokeWidth:2,stroke:"#fff",payload:$.payload,value:$.value},Ve(O,!1)),qy(O));return T.push(g.renderActiveDot(O,M,"".concat(E,"-activePoint-").concat(k))),C?T.push(g.renderActiveDot(O,ie(ie({},M),{},{cx:C.x,cy:C.y}),"".concat(E,"-basePoint-").concat(k))):I&&T.push(null),T}),De(x,"renderGraphicChild",function(w,S,$){var C=x.filterFormatItem(w,S,$);if(!C)return null;var k=x.getTooltipEventType(),I=x.state,T=I.isTooltipActive,E=I.tooltipAxis,_=I.activeTooltipIndex,O=I.activeLabel,F=x.props.children,M=xo(F,Zo),L=C.props,N=L.points,D=L.isRange,U=L.baseLine,B=C.item.type.defaultProps!==void 0?ie(ie({},C.item.type.defaultProps),C.item.props):C.item.props,W=B.activeDot,V=B.hide,ee=B.activeBar,ne=B.activeShape,se=!!(!V&&T&&M&&(W||ee||ne)),de={};k!=="axis"&&M&&M.props.trigger==="click"?de={onClick:_g(x.handleItemMouseEnter,w.props.onClick)}:k!=="axis"&&(de={onMouseLeave:_g(x.handleItemMouseLeave,w.props.onMouseLeave),onMouseEnter:_g(x.handleItemMouseEnter,w.props.onMouseEnter)});var ue=A.cloneElement(w,ie(ie({},C.props),de));function Y(_t){return typeof E.dataKey=="function"?E.dataKey(_t.payload):null}if(se)if(_>=0){var ae,oe;if(E.dataKey&&!E.allowDuplicatedCategory){var Z=typeof E.dataKey=="function"?Y:"payload.".concat(E.dataKey.toString());ae=iC(N,Z,O),oe=D&&U&&iC(U,Z,O)}else ae=N==null?void 0:N[_],oe=D&&U&&U[_];if(ne||ee){var be=w.props.activeIndex!==void 0?w.props.activeIndex:_;return[A.cloneElement(w,ie(ie(ie({},C.props),de),{},{activeIndex:be})),null,null]}if(!Ye(ae))return[ue].concat(ad(x.renderActivePoints({item:C,activePoint:ae,basePoint:oe,childIndex:_,isRange:D})))}else{var me,xe=(me=x.getItemByXY(x.state.activeCoordinate))!==null&&me!==void 0?me:{graphicalItem:ue},fe=xe.graphicalItem,Oe=fe.item,ye=Oe===void 0?w:Oe,Ne=fe.childIndex,Fe=ie(ie(ie({},C.props),de),{},{activeIndex:Ne});return[A.cloneElement(ye,Fe),null,null]}return D?[ue,null,null]:[ue,null]}),De(x,"renderCustomized",function(w,S,$){return A.cloneElement(w,ie(ie({key:"recharts-customized-".concat($)},x.props),x.state))}),De(x,"renderMap",{CartesianGrid:{handler:Lg,once:!0},ReferenceArea:{handler:x.renderReferenceElement},ReferenceLine:{handler:Lg},ReferenceDot:{handler:x.renderReferenceElement},XAxis:{handler:Lg},YAxis:{handler:Lg},Brush:{handler:x.renderBrush,once:!0},Bar:{handler:x.renderGraphicChild},Line:{handler:x.renderGraphicChild},Area:{handler:x.renderGraphicChild},Radar:{handler:x.renderGraphicChild},RadialBar:{handler:x.renderGraphicChild},Scatter:{handler:x.renderGraphicChild},Pie:{handler:x.renderGraphicChild},Funnel:{handler:x.renderGraphicChild},Tooltip:{handler:x.renderCursor,once:!0},PolarGrid:{handler:x.renderPolarGrid,once:!0},PolarAngleAxis:{handler:x.renderPolarAxis},PolarRadiusAxis:{handler:x.renderPolarAxis},Customized:{handler:x.renderCustomized}}),x.clipPathId="".concat((v=y.id)!==null&&v!==void 0?v:ax("recharts"),"-clip"),x.throttleTriggeredAfterMouseMove=Sj(x.triggeredAfterMouseMove,(b=y.throttleDelay)!==null&&b!==void 0?b:1e3/60),x.state={},x}return CSe(g,m),xSe(g,[{key:"componentDidMount",value:function(){var v,b;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(v=this.props.margin.left)!==null&&v!==void 0?v:0,top:(b=this.props.margin.top)!==null&&b!==void 0?b:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var v=this.props,b=v.children,x=v.data,w=v.height,S=v.layout,$=xo(b,Zo);if($){var C=$.props.defaultIndex;if(!(typeof C!="number"||C<0||C>this.state.tooltipTicks.length-1)){var k=this.state.tooltipTicks[C]&&this.state.tooltipTicks[C].value,I=T$(this.state,x,C,k),T=this.state.tooltipTicks[C].coordinate,E=(this.state.offset.top+w)/2,_=S==="horizontal",O=_?{x:T,y:E}:{y:T,x:E},F=this.state.formattedGraphicalItems.find(function(L){var N=L.item;return N.type.name==="Scatter"});F&&(O=ie(ie({},O),F.props.points[C].tooltipPosition),I=F.props.points[C].tooltipPayload);var M={activeTooltipIndex:C,isTooltipActive:!0,activeLabel:k,activePayload:I,activeCoordinate:O};this.setState(M),this.renderCursor($),this.accessibilityManager.setIndex(C)}}}},{key:"getSnapshotBeforeUpdate",value:function(v,b){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==b.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==v.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==v.margin){var x,w;this.accessibilityManager.setDetails({offset:{left:(x=this.props.margin.left)!==null&&x!==void 0?x:0,top:(w=this.props.margin.top)!==null&&w!==void 0?w:0}})}return null}},{key:"componentDidUpdate",value:function(v){uC([xo(v.children,Zo)],[xo(this.props.children,Zo)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var v=xo(this.props.children,Zo);if(v&&typeof v.props.shared=="boolean"){var b=v.props.shared?"axis":"item";return a.indexOf(b)>=0?b:s}return s}},{key:"getMouseInfo",value:function(v){if(!this.container)return null;var b=this.container,x=b.getBoundingClientRect(),w=Ife(x),S={chartX:Math.round(v.pageX-w.left),chartY:Math.round(v.pageY-w.top)},$=x.width/b.offsetWidth||1,C=this.inRange(S.chartX,S.chartY,$);if(!C)return null;var k=this.state,I=k.xAxisMap,T=k.yAxisMap,E=this.getTooltipEventType();if(E!=="axis"&&I&&T){var _=Mu(I).scale,O=Mu(T).scale,F=_&&_.invert?_.invert(S.chartX):null,M=O&&O.invert?O.invert(S.chartY):null;return ie(ie({},S),{},{xValue:F,yValue:M})}var L=cD(this.state,this.props.data,this.props.layout,C);return L?ie(ie({},S),L):null}},{key:"inRange",value:function(v,b){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,w=this.props.layout,S=v/x,$=b/x;if(w==="horizontal"||w==="vertical"){var C=this.state.offset,k=S>=C.left&&S<=C.left+C.width&&$>=C.top&&$<=C.top+C.height;return k?{x:S,y:$}:null}var I=this.state,T=I.angleAxisMap,E=I.radiusAxisMap;if(T&&E){var _=Mu(T);return KR({x:S,y:$},_)}return null}},{key:"parseEventsOfWrapper",value:function(){var v=this.props.children,b=this.getTooltipEventType(),x=xo(v,Zo),w={};x&&b==="axis"&&(x.props.trigger==="click"?w={onClick:this.handleClick}:w={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var S=qy(this.props,this.handleOuterEvent);return ie(ie({},S),w)}},{key:"addListener",value:function(){bw.on(ww,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){bw.removeListener(ww,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(v,b,x){for(var w=this.state.formattedGraphicalItems,S=0,$=w.length;S<$;S++){var C=w[S];if(C.item===v||C.props.key===v.key||b===xi(C.item.type)&&x===C.childIndex)return C}return null}},{key:"renderClipPath",value:function(){var v=this.clipPathId,b=this.state.offset,x=b.left,w=b.top,S=b.height,$=b.width;return z.createElement("defs",null,z.createElement("clipPath",{id:v},z.createElement("rect",{x,y:w,height:S,width:$})))}},{key:"getXScales",value:function(){var v=this.state.xAxisMap;return v?Object.entries(v).reduce(function(b,x){var w=aD(x,2),S=w[0],$=w[1];return ie(ie({},b),{},De({},S,$.scale))},{}):null}},{key:"getYScales",value:function(){var v=this.state.yAxisMap;return v?Object.entries(v).reduce(function(b,x){var w=aD(x,2),S=w[0],$=w[1];return ie(ie({},b),{},De({},S,$.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(v){var b;return(b=this.state.xAxisMap)===null||b===void 0||(b=b[v])===null||b===void 0?void 0:b.scale}},{key:"getYScaleByAxisId",value:function(v){var b;return(b=this.state.yAxisMap)===null||b===void 0||(b=b[v])===null||b===void 0?void 0:b.scale}},{key:"getItemByXY",value:function(v){var b=this.state,x=b.formattedGraphicalItems,w=b.activeItem;if(x&&x.length)for(var S=0,$=x.length;S<$;S++){var C=x[S],k=C.props,I=C.item,T=I.type.defaultProps!==void 0?ie(ie({},I.type.defaultProps),I.props):I.props,E=xi(I.type);if(E==="Bar"){var _=(k.data||[]).find(function(L){return J0e(v,L)});if(_)return{graphicalItem:C,payload:_}}else if(E==="RadialBar"){var O=(k.data||[]).find(function(L){return KR(v,L)});if(O)return{graphicalItem:C,payload:O}}else if(Ox(C,w)||_x(C,w)||np(C,w)){var F=Wbe({graphicalItem:C,activeTooltipItem:w,itemData:T.data}),M=T.activeIndex===void 0?F:T.activeIndex;return{graphicalItem:ie(ie({},C),{},{childIndex:M}),payload:np(C,w)?T.data[F]:C.props.data[F]}}}return null}},{key:"render",value:function(){var v=this;if(!FO(this))return null;var b=this.props,x=b.children,w=b.className,S=b.width,$=b.height,C=b.style,k=b.compact,I=b.title,T=b.desc,E=lD(b,fSe),_=Ve(E,!1);if(k)return z.createElement(QP,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},z.createElement(dC,rh({},_,{width:S,height:$,title:I,desc:T}),this.renderClipPath(),BO(x,this.renderMap)));if(this.props.accessibilityLayer){var O,F;_.tabIndex=(O=this.props.tabIndex)!==null&&O!==void 0?O:0,_.role=(F=this.props.role)!==null&&F!==void 0?F:"application",_.onKeyDown=function(L){v.accessibilityManager.keyboardEvent(L)},_.onFocus=function(){v.accessibilityManager.focus()}}var M=this.parseEventsOfWrapper();return z.createElement(QP,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},z.createElement("div",rh({className:et("recharts-wrapper",w),style:ie({position:"relative",cursor:"default",width:S,height:$},C)},M,{ref:function(N){v.container=N}}),z.createElement(dC,rh({},_,{width:S,height:$,title:I,desc:T,style:NSe}),this.renderClipPath(),BO(x,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(A.Component);return De(p,"displayName",n),De(p,"defaultProps",ie({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),De(p,"getDerivedStateFromProps",function(m,g){var y=m.dataKey,v=m.data,b=m.children,x=m.width,w=m.height,S=m.layout,$=m.stackOffset,C=m.margin,k=g.dataStartIndex,I=g.dataEndIndex;if(g.updateId===void 0){var T=dD(m);return ie(ie(ie({},T),{},{updateId:0},h(ie(ie({props:m},T),{},{updateId:0}),g)),{},{prevDataKey:y,prevData:v,prevWidth:x,prevHeight:w,prevLayout:S,prevStackOffset:$,prevMargin:C,prevChildren:b})}if(y!==g.prevDataKey||v!==g.prevData||x!==g.prevWidth||w!==g.prevHeight||S!==g.prevLayout||$!==g.prevStackOffset||!aC(C,g.prevMargin)){var E=dD(m),_={chartX:g.chartX,chartY:g.chartY,isTooltipActive:g.isTooltipActive},O=ie(ie({},cD(g,v,S)),{},{updateId:g.updateId+1}),F=ie(ie(ie({},E),_),O);return ie(ie(ie({},F),h(ie({props:m},F),g)),{},{prevDataKey:y,prevData:v,prevWidth:x,prevHeight:w,prevLayout:S,prevStackOffset:$,prevMargin:C,prevChildren:b})}if(!uC(b,g.prevChildren)){var M,L,N,D,U=xo(b,nd),B=U&&(M=(L=U.props)===null||L===void 0?void 0:L.startIndex)!==null&&M!==void 0?M:k,W=U&&(N=(D=U.props)===null||D===void 0?void 0:D.endIndex)!==null&&N!==void 0?N:I,V=B!==k||W!==I,ee=!Ye(v),ne=ee&&!V?g.updateId:g.updateId+1;return ie(ie({updateId:ne},h(ie(ie({props:m},g),{},{updateId:ne,dataStartIndex:B,dataEndIndex:W}),g)),{},{prevChildren:b,dataStartIndex:B,dataEndIndex:W})}return null}),De(p,"renderActiveDot",function(m,g,y){var v;return A.isValidElement(m)?v=A.cloneElement(m,g):qe(m)?v=m(g):v=z.createElement(IT,g),z.createElement(Jt,{className:"recharts-active-dot",key:y},v)}),function(g){return z.createElement(p,g)}},hD=BSe({chartName:"PieChart",GraphicalChild:qs,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Ax},{axisType:"radiusAxis",AxisComp:Ex}],formatAxisMap:Cye,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const zSe=({results:t})=>{const e=A.useMemo(()=>{if(!t.length)return[];const s=t.filter(i=>i.default_indicator===1).length;return[{name:"Default Risk",value:s},{name:"No Default Risk",value:t.length-s}]},[t]),n=A.useMemo(()=>{if(!t.length)return[];const s=t.filter(l=>l.probability_default>=.7).length,i=t.filter(l=>l.probability_default>=.3&&l.probability_default<.7).length,a=t.filter(l=>l.probability_default<.3).length;return[{name:"High Risk",value:s},{name:"Medium Risk",value:i},{name:"Low Risk",value:a}]},[t]),r=["#DA1E28","#0F62FE"],o=["#DA1E28","#F1C21B","#24A148"];return t.length?R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 w-full animate-fade-in",children:[R.jsxs(Yl,{children:[R.jsxs(Fc,{children:[R.jsx(Lc,{children:"Default Prediction"}),R.jsx(Bc,{children:"Distribution of default vs. non-default"})]}),R.jsx(Ql,{children:R.jsx(M_,{width:"100%",height:250,children:R.jsxs(hD,{children:[R.jsx(qs,{data:e,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:"value",nameKey:"name",label:({name:s,percent:i})=>`${s}: ${(i*100).toFixed(0)}%`,children:e.map((s,i)=>R.jsx(av,{fill:r[i]},`cell-${i}`))}),R.jsx(Zo,{formatter:s=>[`${s} clients`,""]}),R.jsx(wa,{})]})})})]}),R.jsxs(Yl,{children:[R.jsxs(Fc,{children:[R.jsx(Lc,{children:"Risk Level Distribution"}),R.jsx(Bc,{children:"Breakdown by risk category"})]}),R.jsx(Ql,{children:R.jsx(M_,{width:"100%",height:250,children:R.jsxs(hD,{children:[R.jsx(qs,{data:n,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:"value",nameKey:"name",label:({name:s,percent:i})=>`${s}: ${(i*100).toFixed(0)}%`,children:n.map((s,i)=>R.jsx(av,{fill:o[i]},`cell-${i}`))}),R.jsx(Zo,{formatter:s=>[`${s} clients`,""]}),R.jsx(wa,{})]})})})]})]}):null};var SW={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){((n,r)=>{t.exports=r()})($o,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},o,s=!r.document&&!!r.postMessage,i=r.IS_PAPA_WORKER||!1,a={},l=0,u={};function c(C){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(k){var I=w(k);I.chunkSize=parseInt(I.chunkSize),k.step||k.chunk||(I.chunkSize=null),this._handle=new m(I),(this._handle.streamer=this)._config=I}).call(this,C),this.parseChunk=function(k,I){var T=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<T){let _=this._config.newline;_||(E=this._config.quoteChar||'"',_=this._handle.guessLineEndings(k,E)),k=[...k.split(_).slice(T)].join(_)}this.isFirstChunk&&$(this._config.beforeFirstChunk)&&(E=this._config.beforeFirstChunk(k))!==void 0&&(k=E),this.isFirstChunk=!1,this._halted=!1;var T=this._partialLine+k,E=(this._partialLine="",this._handle.parse(T,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(k=E.meta.cursor,T=(this._finished||(this._partialLine=T.substring(k-this._baseIndex),this._baseIndex=k),E&&E.data&&(this._rowCount+=E.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),i)r.postMessage({results:E,workerId:u.WORKER_ID,finished:T});else if($(this._config.chunk)&&!I){if(this._config.chunk(E,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=E=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(E.data),this._completeResults.errors=this._completeResults.errors.concat(E.errors),this._completeResults.meta=E.meta),this._completed||!T||!$(this._config.complete)||E&&E.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),T||E&&E.meta.paused||this._nextChunk(),E}this._halted=!0},this._sendError=function(k){$(this._config.error)?this._config.error(k):i&&this._config.error&&r.postMessage({workerId:u.WORKER_ID,error:k,finished:!1})}}function d(C){var k;(C=C||{}).chunkSize||(C.chunkSize=u.RemoteChunkSize),c.call(this,C),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(I){this._input=I,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(k=new XMLHttpRequest,this._config.withCredentials&&(k.withCredentials=this._config.withCredentials),s||(k.onload=S(this._chunkLoaded,this),k.onerror=S(this._chunkError,this)),k.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var I,T=this._config.downloadRequestHeaders;for(I in T)k.setRequestHeader(I,T[I])}var E;this._config.chunkSize&&(E=this._start+this._config.chunkSize-1,k.setRequestHeader("Range","bytes="+this._start+"-"+E));try{k.send(this._config.downloadRequestBody)}catch(_){this._chunkError(_.message)}s&&k.status===0&&this._chunkError()}},this._chunkLoaded=function(){k.readyState===4&&(k.status<200||400<=k.status?this._chunkError():(this._start+=this._config.chunkSize||k.responseText.length,this._finished=!this._config.chunkSize||this._start>=(I=>(I=I.getResponseHeader("Content-Range"))!==null?parseInt(I.substring(I.lastIndexOf("/")+1)):-1)(k),this.parseChunk(k.responseText)))},this._chunkError=function(I){I=k.statusText||I,this._sendError(new Error(I))}}function f(C){(C=C||{}).chunkSize||(C.chunkSize=u.LocalChunkSize),c.call(this,C);var k,I,T=typeof FileReader<"u";this.stream=function(E){this._input=E,I=E.slice||E.webkitSlice||E.mozSlice,T?((k=new FileReader).onload=S(this._chunkLoaded,this),k.onerror=S(this._chunkError,this)):k=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var E=this._input,_=(this._config.chunkSize&&(_=Math.min(this._start+this._config.chunkSize,this._input.size),E=I.call(E,this._start,_)),k.readAsText(E,this._config.encoding));T||this._chunkLoaded({target:{result:_}})},this._chunkLoaded=function(E){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(E.target.result)},this._chunkError=function(){this._sendError(k.error)}}function h(C){var k;c.call(this,C=C||{}),this.stream=function(I){return k=I,this._nextChunk()},this._nextChunk=function(){var I,T;if(!this._finished)return I=this._config.chunkSize,k=I?(T=k.substring(0,I),k.substring(I)):(T=k,""),this._finished=!k,this.parseChunk(T)}}function p(C){c.call(this,C=C||{});var k=[],I=!0,T=!1;this.pause=function(){c.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){c.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(E){this._input=E,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){T&&k.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),k.length?this.parseChunk(k.shift()):I=!0},this._streamData=S(function(E){try{k.push(typeof E=="string"?E:E.toString(this._config.encoding)),I&&(I=!1,this._checkIsFinished(),this.parseChunk(k.shift()))}catch(_){this._streamError(_)}},this),this._streamError=S(function(E){this._streamCleanUp(),this._sendError(E)},this),this._streamEnd=S(function(){this._streamCleanUp(),T=!0,this._streamData("")},this),this._streamCleanUp=S(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function m(C){var k,I,T,E,_=Math.pow(2,53),O=-_,F=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,M=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,L=this,N=0,D=0,U=!1,B=!1,W=[],V={data:[],errors:[],meta:{}};function ee(ue){return C.skipEmptyLines==="greedy"?ue.join("").trim()==="":ue.length===1&&ue[0].length===0}function ne(){if(V&&T&&(de("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+u.DefaultDelimiter+"'"),T=!1),C.skipEmptyLines&&(V.data=V.data.filter(function(oe){return!ee(oe)})),se()){let oe=function(Z,be){$(C.transformHeader)&&(Z=C.transformHeader(Z,be)),W.push(Z)};if(V)if(Array.isArray(V.data[0])){for(var ue=0;se()&&ue<V.data.length;ue++)V.data[ue].forEach(oe);V.data.splice(0,1)}else V.data.forEach(oe)}function Y(oe,Z){for(var be=C.header?{}:[],me=0;me<oe.length;me++){var xe=me,fe=oe[me],fe=((Oe,ye)=>(Ne=>(C.dynamicTypingFunction&&C.dynamicTyping[Ne]===void 0&&(C.dynamicTyping[Ne]=C.dynamicTypingFunction(Ne)),(C.dynamicTyping[Ne]||C.dynamicTyping)===!0))(Oe)?ye==="true"||ye==="TRUE"||ye!=="false"&&ye!=="FALSE"&&((Ne=>{if(F.test(Ne)&&(Ne=parseFloat(Ne),O<Ne&&Ne<_))return 1})(ye)?parseFloat(ye):M.test(ye)?new Date(ye):ye===""?null:ye):ye)(xe=C.header?me>=W.length?"__parsed_extra":W[me]:xe,fe=C.transform?C.transform(fe,xe):fe);xe==="__parsed_extra"?(be[xe]=be[xe]||[],be[xe].push(fe)):be[xe]=fe}return C.header&&(me>W.length?de("FieldMismatch","TooManyFields","Too many fields: expected "+W.length+" fields but parsed "+me,D+Z):me<W.length&&de("FieldMismatch","TooFewFields","Too few fields: expected "+W.length+" fields but parsed "+me,D+Z)),be}var ae;V&&(C.header||C.dynamicTyping||C.transform)&&(ae=1,!V.data.length||Array.isArray(V.data[0])?(V.data=V.data.map(Y),ae=V.data.length):V.data=Y(V.data,0),C.header&&V.meta&&(V.meta.fields=W),D+=ae)}function se(){return C.header&&W.length===0}function de(ue,Y,ae,oe){ue={type:ue,code:Y,message:ae},oe!==void 0&&(ue.row=oe),V.errors.push(ue)}$(C.step)&&(E=C.step,C.step=function(ue){V=ue,se()?ne():(ne(),V.data.length!==0&&(N+=ue.data.length,C.preview&&N>C.preview?I.abort():(V.data=V.data[0],E(V,L))))}),this.parse=function(ue,Y,ae){var oe=C.quoteChar||'"',oe=(C.newline||(C.newline=this.guessLineEndings(ue,oe)),T=!1,C.delimiter?$(C.delimiter)&&(C.delimiter=C.delimiter(ue),V.meta.delimiter=C.delimiter):((oe=((Z,be,me,xe,fe)=>{var Oe,ye,Ne,Fe;fe=fe||[",","	","|",";",u.RECORD_SEP,u.UNIT_SEP];for(var _t=0;_t<fe.length;_t++){for(var ct,an=fe[_t],nt=0,Ht=0,lt=0,dt=(Ne=void 0,new y({comments:xe,delimiter:an,newline:be,preview:10}).parse(Z)),ln=0;ln<dt.data.length;ln++)me&&ee(dt.data[ln])?lt++:(ct=dt.data[ln].length,Ht+=ct,Ne===void 0?Ne=ct:0<ct&&(nt+=Math.abs(ct-Ne),Ne=ct));0<dt.data.length&&(Ht/=dt.data.length-lt),(ye===void 0||nt<=ye)&&(Fe===void 0||Fe<Ht)&&1.99<Ht&&(ye=nt,Oe=an,Fe=Ht)}return{successful:!!(C.delimiter=Oe),bestDelimiter:Oe}})(ue,C.newline,C.skipEmptyLines,C.comments,C.delimitersToGuess)).successful?C.delimiter=oe.bestDelimiter:(T=!0,C.delimiter=u.DefaultDelimiter),V.meta.delimiter=C.delimiter),w(C));return C.preview&&C.header&&oe.preview++,k=ue,I=new y(oe),V=I.parse(k,Y,ae),ne(),U?{meta:{paused:!0}}:V||{meta:{paused:!1}}},this.paused=function(){return U},this.pause=function(){U=!0,I.abort(),k=$(C.chunk)?"":k.substring(I.getCharIndex())},this.resume=function(){L.streamer._halted?(U=!1,L.streamer.parseChunk(k,!0)):setTimeout(L.resume,3)},this.aborted=function(){return B},this.abort=function(){B=!0,I.abort(),V.meta.aborted=!0,$(C.complete)&&C.complete(V),k=""},this.guessLineEndings=function(Z,oe){Z=Z.substring(0,1048576);var oe=new RegExp(g(oe)+"([^]*?)"+g(oe),"gm"),ae=(Z=Z.replace(oe,"")).split("\r"),oe=Z.split(`
`),Z=1<oe.length&&oe[0].length<ae[0].length;if(ae.length===1||Z)return`
`;for(var be=0,me=0;me<ae.length;me++)ae[me][0]===`
`&&be++;return be>=ae.length/2?`\r
`:"\r"}}function g(C){return C.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function y(C){var k=(C=C||{}).delimiter,I=C.newline,T=C.comments,E=C.step,_=C.preview,O=C.fastMode,F=null,M=!1,L=C.quoteChar==null?'"':C.quoteChar,N=L;if(C.escapeChar!==void 0&&(N=C.escapeChar),(typeof k!="string"||-1<u.BAD_DELIMITERS.indexOf(k))&&(k=","),T===k)throw new Error("Comment character same as delimiter");T===!0?T="#":(typeof T!="string"||-1<u.BAD_DELIMITERS.indexOf(T))&&(T=!1),I!==`
`&&I!=="\r"&&I!==`\r
`&&(I=`
`);var D=0,U=!1;this.parse=function(B,W,V){if(typeof B!="string")throw new Error("Input must be a string");var ee=B.length,ne=k.length,se=I.length,de=T.length,ue=$(E),Y=[],ae=[],oe=[],Z=D=0;if(!B)return nt();if(O||O!==!1&&B.indexOf(L)===-1){for(var be=B.split(I),me=0;me<be.length;me++){if(oe=be[me],D+=oe.length,me!==be.length-1)D+=I.length;else if(V)return nt();if(!T||oe.substring(0,de)!==T){if(ue){if(Y=[],Fe(oe.split(k)),Ht(),U)return nt()}else Fe(oe.split(k));if(_&&_<=me)return Y=Y.slice(0,_),nt(!0)}}return nt()}for(var xe=B.indexOf(k,D),fe=B.indexOf(I,D),Oe=new RegExp(g(N)+g(L),"g"),ye=B.indexOf(L,D);;)if(B[D]===L)for(ye=D,D++;;){if((ye=B.indexOf(L,ye+1))===-1)return V||ae.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Y.length,index:D}),ct();if(ye===ee-1)return ct(B.substring(D,ye).replace(Oe,L));if(L===N&&B[ye+1]===N)ye++;else if(L===N||ye===0||B[ye-1]!==N){xe!==-1&&xe<ye+1&&(xe=B.indexOf(k,ye+1));var Ne=_t((fe=fe!==-1&&fe<ye+1?B.indexOf(I,ye+1):fe)===-1?xe:Math.min(xe,fe));if(B.substr(ye+1+Ne,ne)===k){oe.push(B.substring(D,ye).replace(Oe,L)),B[D=ye+1+Ne+ne]!==L&&(ye=B.indexOf(L,D)),xe=B.indexOf(k,D),fe=B.indexOf(I,D);break}if(Ne=_t(fe),B.substring(ye+1+Ne,ye+1+Ne+se)===I){if(oe.push(B.substring(D,ye).replace(Oe,L)),an(ye+1+Ne+se),xe=B.indexOf(k,D),ye=B.indexOf(L,D),ue&&(Ht(),U))return nt();if(_&&Y.length>=_)return nt(!0);break}ae.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Y.length,index:D}),ye++}}else if(T&&oe.length===0&&B.substring(D,D+de)===T){if(fe===-1)return nt();D=fe+se,fe=B.indexOf(I,D),xe=B.indexOf(k,D)}else if(xe!==-1&&(xe<fe||fe===-1))oe.push(B.substring(D,xe)),D=xe+ne,xe=B.indexOf(k,D);else{if(fe===-1)break;if(oe.push(B.substring(D,fe)),an(fe+se),ue&&(Ht(),U))return nt();if(_&&Y.length>=_)return nt(!0)}return ct();function Fe(lt){Y.push(lt),Z=D}function _t(lt){var dt=0;return dt=lt!==-1&&(lt=B.substring(ye+1,lt))&&lt.trim()===""?lt.length:dt}function ct(lt){return V||(lt===void 0&&(lt=B.substring(D)),oe.push(lt),D=ee,Fe(oe),ue&&Ht()),nt()}function an(lt){D=lt,Fe(oe),oe=[],fe=B.indexOf(I,D)}function nt(lt){if(C.header&&!W&&Y.length&&!M){var dt=Y[0],ln={},Xn=new Set(dt);let oi=!1;for(let co=0;co<dt.length;co++){let dr=dt[co];if(ln[dr=$(C.transformHeader)?C.transformHeader(dr,co):dr]){let Ur,Nu=ln[dr];for(;Ur=dr+"_"+Nu,Nu++,Xn.has(Ur););Xn.add(Ur),dt[co]=Ur,ln[dr]++,oi=!0,(F=F===null?{}:F)[Ur]=dr}else ln[dr]=1,dt[co]=dr;Xn.add(dr)}oi&&console.warn("Duplicate headers found and renamed."),M=!0}return{data:Y,errors:ae,meta:{delimiter:k,linebreak:I,aborted:U,truncated:!!lt,cursor:Z+(W||0),renamedHeaders:F}}}function Ht(){E(nt()),Y=[],ae=[]}},this.abort=function(){U=!0},this.getCharIndex=function(){return D}}function v(C){var k=C.data,I=a[k.workerId],T=!1;if(k.error)I.userError(k.error,k.file);else if(k.results&&k.results.data){var E={abort:function(){T=!0,b(k.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:x,resume:x};if($(I.userStep)){for(var _=0;_<k.results.data.length&&(I.userStep({data:k.results.data[_],errors:k.results.errors,meta:k.results.meta},E),!T);_++);delete k.results}else $(I.userChunk)&&(I.userChunk(k.results,E,k.file),delete k.results)}k.finished&&!T&&b(k.workerId,k.results)}function b(C,k){var I=a[C];$(I.userComplete)&&I.userComplete(k),I.terminate(),delete a[C]}function x(){throw new Error("Not implemented.")}function w(C){if(typeof C!="object"||C===null)return C;var k,I=Array.isArray(C)?[]:{};for(k in C)I[k]=w(C[k]);return I}function S(C,k){return function(){C.apply(k,arguments)}}function $(C){return typeof C=="function"}return u.parse=function(C,k){var I=(k=k||{}).dynamicTyping||!1;if($(I)&&(k.dynamicTypingFunction=I,I={}),k.dynamicTyping=I,k.transform=!!$(k.transform)&&k.transform,!k.worker||!u.WORKERS_SUPPORTED)return I=null,u.NODE_STREAM_INPUT,typeof C=="string"?(C=(T=>T.charCodeAt(0)!==65279?T:T.slice(1))(C),I=new(k.download?d:h)(k)):C.readable===!0&&$(C.read)&&$(C.on)?I=new p(k):(r.File&&C instanceof File||C instanceof Object)&&(I=new f(k)),I.stream(C);(I=(()=>{var T;return!!u.WORKERS_SUPPORTED&&(T=(()=>{var E=r.URL||r.webkitURL||null,_=n.toString();return u.BLOB_URL||(u.BLOB_URL=E.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",_,")();"],{type:"text/javascript"})))})(),(T=new r.Worker(T)).onmessage=v,T.id=l++,a[T.id]=T)})()).userStep=k.step,I.userChunk=k.chunk,I.userComplete=k.complete,I.userError=k.error,k.step=$(k.step),k.chunk=$(k.chunk),k.complete=$(k.complete),k.error=$(k.error),delete k.worker,I.postMessage({input:C,config:k,workerId:I.id})},u.unparse=function(C,k){var I=!1,T=!0,E=",",_=`\r
`,O='"',F=O+O,M=!1,L=null,N=!1,D=((()=>{if(typeof k=="object"){if(typeof k.delimiter!="string"||u.BAD_DELIMITERS.filter(function(W){return k.delimiter.indexOf(W)!==-1}).length||(E=k.delimiter),typeof k.quotes!="boolean"&&typeof k.quotes!="function"&&!Array.isArray(k.quotes)||(I=k.quotes),typeof k.skipEmptyLines!="boolean"&&typeof k.skipEmptyLines!="string"||(M=k.skipEmptyLines),typeof k.newline=="string"&&(_=k.newline),typeof k.quoteChar=="string"&&(O=k.quoteChar),typeof k.header=="boolean"&&(T=k.header),Array.isArray(k.columns)){if(k.columns.length===0)throw new Error("Option columns is empty");L=k.columns}k.escapeChar!==void 0&&(F=k.escapeChar+O),k.escapeFormulae instanceof RegExp?N=k.escapeFormulae:typeof k.escapeFormulae=="boolean"&&k.escapeFormulae&&(N=/^[=+\-@\t\r].*$/)}})(),new RegExp(g(O),"g"));if(typeof C=="string"&&(C=JSON.parse(C)),Array.isArray(C)){if(!C.length||Array.isArray(C[0]))return U(null,C,M);if(typeof C[0]=="object")return U(L||Object.keys(C[0]),C,M)}else if(typeof C=="object")return typeof C.data=="string"&&(C.data=JSON.parse(C.data)),Array.isArray(C.data)&&(C.fields||(C.fields=C.meta&&C.meta.fields||L),C.fields||(C.fields=Array.isArray(C.data[0])?C.fields:typeof C.data[0]=="object"?Object.keys(C.data[0]):[]),Array.isArray(C.data[0])||typeof C.data[0]=="object"||(C.data=[C.data])),U(C.fields||[],C.data||[],M);throw new Error("Unable to serialize unrecognized input");function U(W,V,ee){var ne="",se=(typeof W=="string"&&(W=JSON.parse(W)),typeof V=="string"&&(V=JSON.parse(V)),Array.isArray(W)&&0<W.length),de=!Array.isArray(V[0]);if(se&&T){for(var ue=0;ue<W.length;ue++)0<ue&&(ne+=E),ne+=B(W[ue],ue);0<V.length&&(ne+=_)}for(var Y=0;Y<V.length;Y++){var ae=(se?W:V[Y]).length,oe=!1,Z=se?Object.keys(V[Y]).length===0:V[Y].length===0;if(ee&&!se&&(oe=ee==="greedy"?V[Y].join("").trim()==="":V[Y].length===1&&V[Y][0].length===0),ee==="greedy"&&se){for(var be=[],me=0;me<ae;me++){var xe=de?W[me]:me;be.push(V[Y][xe])}oe=be.join("").trim()===""}if(!oe){for(var fe=0;fe<ae;fe++){0<fe&&!Z&&(ne+=E);var Oe=se&&de?W[fe]:fe;ne+=B(V[Y][Oe],fe)}Y<V.length-1&&(!ee||0<ae&&!Z)&&(ne+=_)}}return ne}function B(W,V){var ee,ne;return W==null?"":W.constructor===Date?JSON.stringify(W).slice(1,25):(ne=!1,N&&typeof W=="string"&&N.test(W)&&(W="'"+W,ne=!0),ee=W.toString().replace(D,F),(ne=ne||I===!0||typeof I=="function"&&I(W,V)||Array.isArray(I)&&I[V]||((se,de)=>{for(var ue=0;ue<de.length;ue++)if(-1<se.indexOf(de[ue]))return!0;return!1})(ee,u.BAD_DELIMITERS)||-1<ee.indexOf(E)||ee.charAt(0)===" "||ee.charAt(ee.length-1)===" ")?O+ee+O:ee)}},u.RECORD_SEP="",u.UNIT_SEP="",u.BYTE_ORDER_MARK="\uFEFF",u.BAD_DELIMITERS=["\r",`
`,'"',u.BYTE_ORDER_MARK],u.WORKERS_SUPPORTED=!s&&!!r.Worker,u.NODE_STREAM_INPUT=1,u.LocalChunkSize=10485760,u.RemoteChunkSize=5242880,u.DefaultDelimiter=",",u.Parser=y,u.ParserHandle=m,u.NetworkStreamer=d,u.FileStreamer=f,u.StringStreamer=h,u.ReadableStreamStreamer=p,r.jQuery&&((o=r.jQuery).fn.parse=function(C){var k=C.config||{},I=[];return this.each(function(_){if(!(o(this).prop("tagName").toUpperCase()==="INPUT"&&o(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var O=0;O<this.files.length;O++)I.push({file:this.files[O],inputElem:this,instanceConfig:o.extend({},k)})}),T(),this;function T(){if(I.length===0)$(C.complete)&&C.complete();else{var _,O,F,M,L=I[0];if($(C.before)){var N=C.before(L.file,L.inputElem);if(typeof N=="object"){if(N.action==="abort")return _="AbortError",O=L.file,F=L.inputElem,M=N.reason,void($(C.error)&&C.error({name:_},O,F,M));if(N.action==="skip")return void E();typeof N.config=="object"&&(L.instanceConfig=o.extend(L.instanceConfig,N.config))}else if(N==="skip")return void E()}var D=L.instanceConfig.complete;L.instanceConfig.complete=function(U){$(D)&&D(U,L.file,L.inputElem),E()},u.parse(L.file,L.instanceConfig)}}function E(){I.splice(0,1),T()}}),i&&(r.onmessage=function(C){C=C.data,u.WORKER_ID===void 0&&C&&(u.WORKER_ID=C.workerId),typeof C.input=="string"?r.postMessage({workerId:u.WORKER_ID,results:u.parse(C.input,C.config),finished:!0}):(r.File&&C.input instanceof File||C.input instanceof Object)&&(C=u.parse(C.input,C.config))&&r.postMessage({workerId:u.WORKER_ID,results:C,finished:!0})}),(d.prototype=Object.create(c.prototype)).constructor=d,(f.prototype=Object.create(c.prototype)).constructor=f,(h.prototype=Object.create(h.prototype)).constructor=h,(p.prototype=Object.create(c.prototype)).constructor=p,u})})(SW);var jSe=SW.exports;const WSe=ut(jSe);let Cw=null;const VSe=()=>(!Cw&&typeof Worker<"u"&&(Cw=new Worker(new URL("/Risk-Detector-ML/assets/csvWorker-BgR1uiZC.js",import.meta.url),{type:"module"})),Cw),pD=async t=>{const e=VSe();return e?new Promise((n,r)=>{const o=s=>{s.data.status==="success"?(e.removeEventListener("message",o),n(s.data.data)):s.data.status==="error"&&(e.removeEventListener("message",o),r(new Error(s.data.error)))};e.addEventListener("message",o),e.postMessage({file:t,fileType:"generic"})}):new Promise((n,r)=>{const o=[",",";","	","|"];let s=0,i=null;const a=()=>{const l=o[s];console.log(`Trying delimiter: ${l}`),WSe.parse(t,{header:!0,delimiter:l,skipEmptyLines:!0,dynamicTyping:!0,transformHeader:u=>u.trim(),transform:u=>typeof u=="string"?u.trim():u,complete:u=>{console.log(`Parse results with delimiter ${l}:`,u),u.errors&&u.errors.length>0&&(u.data.length===0||Object.keys(u.data[0]).length<=1)?(console.warn(`Parsing with delimiter ${l} failed:`,u.errors),s++,s<o.length?a():r(new Error(`CSV parsing failed with all delimiters. Last error: ${i||"Could not determine CSV format"}`))):!u.data||u.data.length===0?r(new Error("CSV file appears to be empty or invalid")):(console.log(`Successfully parsed with delimiter: ${l}`),n(u.data))},error:u=>{console.error(`CSV parse error with delimiter ${l}:`,u),i=u.message,s++,s<o.length?a():r(new Error(`CSV parsing error: ${u.message}`))}})};a()})},USe=t=>{if(!t||t.length===0)throw new Error("No data found in payment_default.csv");console.log("Default CSV data sample:",t[0]);const e=["client_id","credit_given","gender","education","marital_status","month","default"],n=Object.keys(t[0]||{});console.log("Found headers:",n);const r=e.filter(o=>!n.includes(o));if(r.length>0)throw new Error(`Invalid payment_default.csv format. Missing required columns: ${r.join(", ")}`);return t},GSe=t=>{if(!t||t.length===0)throw new Error("No data found in payment_history.csv");console.log("History CSV data sample:",t[0]);const e=["client_id","payment_status","bill_amt","paid_amt","month"],n=Object.keys(t[0]||{});console.log("Found headers:",n);const r=e.filter(o=>!n.includes(o));if(r.length>0)throw new Error(`Invalid payment_history.csv format. Missing required columns: ${r.join(", ")}`);return t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HSe=1e-7,KSe=1e-4;class CW{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class OT{refCount(e){return Tr("refCount")}incRef(e){return Tr("incRef")}timerAvailable(){return!0}time(e){return Tr("time")}read(e){return Tr("read")}readSync(e){return Tr("readSync")}readToGPU(e,n){return Tr("readToGPU")}numDataIds(){return Tr("numDataIds")}disposeData(e,n){return Tr("disposeData")}write(e,n,r){return Tr("write")}move(e,n,r,o,s){return Tr("move")}createTensorFromGPUData(e,n,r){return Tr("createTensorFromGPUData")}memory(){return Tr("memory")}floatPrecision(){return Tr("floatPrecision")}epsilon(){return this.floatPrecision()===32?HSe:KSe}dispose(){return Tr("dispose")}}function Tr(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qSe(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,Fu(t,e,n)}function Jl(t,e,n){return Math.max(t,Math.min(e,n))}function _T(t){return t%2===0?t:t+1}function Fu(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function XSe(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function P(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function RT(t,e,n=""){P(at(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function $W(t){P(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function re(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function at(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function ld(t){return t%1===0}function E$(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function hc(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function mD(t,e=o=>0,n,r){return new Promise((o,s)=>{let i=0;const a=()=>{if(t()){o();return}i++;const l=e(i);if(n!=null&&i>=n){s();return}r!=null?r(a,l):setTimeout(a,l)};a()})}function kW(t,e){let n=1,r=-1;for(let s=0;s<t.length;++s)if(t[s]>=0)n*=t[s];else if(t[s]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${s}`);r=s}else if(t[s]<0)throw Error(`Shapes can not be < 0. Found ${t[s]} at dim ${s}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const o=t.slice();return o[r]=e/n,o}function Ge(t,e){const n=e.length;return t=t==null?e.map((r,o)=>o):[].concat(t),P(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),P(t.every(r=>ld(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function Xa(t,e){const n=[],r=[],o=e!=null&&Array.isArray(e)&&e.length===0,s=e==null||o?null:Ge(e,t).sort();let i=0;for(let a=0;a<t.length;++a){if(s!=null){if(s[i]===a&&t[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(s[i]==null||s[i]>a)&&t[a]===1&&(n.push(t[a]),r.push(a)),s[i]<=a&&i++}t[a]!==1&&(n.push(t[a]),r.push(a))}return{newShape:n,keptDims:r}}function Gn(t,e){return en(t,e)}function en(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function YSe(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function QSe(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function IW(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function zv(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function ZSe(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function Dp(t){return typeof t=="string"||t instanceof String}function JSe(t){return typeof t=="boolean"}function N$(t){return typeof t=="number"}function zd(t){return Array.isArray(t)?zd(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":N$(t)?"float32":Dp(t)?"string":JSe(t)?"bool":"float32"}function A$(t){return!!(t&&t.constructor&&t.call&&t.apply)}function O$(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function Ee(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function TW(t,e,n,r=!1){const o=new Array;if(e.length===1){const s=e[0]*(r?2:1);for(let i=0;i<s;i++)o[i]=n[t+i]}else{const s=e[0],i=e.slice(1),a=i.reduce((l,u)=>l*u)*(r?2:1);for(let l=0;l<s;l++)o[l]=TW(t+l*a,i,n,r)}return o}function as(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((o,s)=>o*s)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return TW(0,t,e,n)}function eCe(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function PT(t,e){const n=Hn(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function Hn(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function EW(t,e){const n=t.reduce((r,o)=>r*o,1);if(e==null||e==="float32")return as(t,new Float32Array(n));if(e==="int32")return as(t,new Int32Array(n));if(e==="bool")return as(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function zi(t){t.forEach(e=>{P(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function zs(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let o=0;o<t.length-1;++o)r+=n[o]*t[o];return r}function jd(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let o=0;o<r.length-1;++o)r[o]=Math.floor(t/n[o]),t-=r[o]*n[o];return r[r.length-1]=t,r}function DT(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gD="tfjsflags";class tCe{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=nCe,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(J().getBool("IS_TEST")||J().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const o=this.urlFlags[e];J().getBool("IS_TEST")||J().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${o}.`),this.set(e,o)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(DT(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);gD in e&&e[gD].split(",").forEach(r=>{const[o,s]=r.split(":");this.urlFlags[o]=oCe(o,s)})}}function nCe(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(rCe(e,r[0],r[1]),r.join("="))),e}function rCe(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function oCe(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function J(){return NW}let NW=null;function sCe(t){NW=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let $w;function AW(){if($w==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");$w=t}return $w}function iCe(){const t=AW();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function MT(t,e){const n=iCe();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const Lx="Abs",Mp="Acos",Fp="Acosh",Wd="Add",FT="AddN",LT="All",BT="Any",Bx="ArgMax",zx="ArgMin",Lp="Asin",Bp="Asinh",zp="Atan",jp="Atanh",Wp="Atan2",jx="AvgPool",zT="AvgPoolGrad",Wx="AvgPool3D",jT="AvgPool3DGrad",Vx="BatchMatMul",Ux="BatchToSpaceND",WT="Bincount",VT="BitwiseAnd",aCe="BroadcastTo",OW="BroadcastArgs",Vp="Cast",Up="Ceil",Gp="ClipByValue",UT="Complex",Gx="ComplexAbs",Hx="Concat",Kx="Conv2D",GT="Conv2DBackpropFilter",qx="Conv2DBackpropInput",Xx="Conv3D",HT="Conv3DBackpropFilterV2",KT="Conv3DBackpropInputV2",Hp="Cos",Kp="Cosh",qT="Cumprod",Yx="Cumsum",XT="CropAndResize",YT="DenseBincount",QT="DepthToSpace",Qx="DepthwiseConv2dNative",ZT="DepthwiseConv2dNativeBackpropFilter",JT="DepthwiseConv2dNativeBackpropInput",_W="Diag",Zx="Dilation2D",_$="Dilation2DBackpropInput",R$="Dilation2DBackpropFilter",lCe="Draw",qp="RealDiv",eE="Einsum",Xp="Elu",tE="EluGrad",Yp="Erf",Jx="Equal",Qp="Exp",eb="ExpandDims",Zp="Expm1",nE="FFT",rE="Fill",oE="FlipLeftRight",Jp="Floor",em="FloorDiv",tb="FusedBatchNorm",nb="GatherV2",RW="GatherNd",rb="Greater",tm="GreaterEqual",nm="Identity",sE="IFFT",iE="Imag",rm="IsFinite",om="IsInf",sm="IsNan",ob="LeakyRelu",sb="Less",ib="LessEqual",PW="LinSpace",im="Log",am="Log1p",ab="LogicalAnd",lb="LogicalNot",ub="LogicalOr",uCe="LogSoftmax",cb="LRN",aE="LRNGrad",db="Max",lm="Maximum",fb="MaxPool",lE="MaxPoolGrad",hb="MaxPool3D",uE="MaxPool3DGrad",DW="MaxPoolWithArgmax",pb="Mean",mb="Min",um="Minimum",gb="MirrorPad",cm="Mod",MW="Multinomial",dm="Multiply",yb="Neg",vb="NotEqual",cE="NonMaxSuppressionV3",dE="NonMaxSuppressionV4",fE="NonMaxSuppressionV5",xb="OnesLike",bb="OneHot",wb="Pack",Sb="PadV2",fm="Pow",Cb="Prelu",$b="Prod",FW="RaggedGather",LW="RaggedRange",BW="RaggedTensorToTensor",hE="Range",pE="Real",hm="Reciprocal",pm="Relu",kb="Reshape",Ib="ResizeNearestNeighbor",mE="ResizeNearestNeighborGrad",Tb="ResizeBilinear",gE="ResizeBilinearGrad",mm="Relu6",Eb="Reverse",gm="Round",ym="Rsqrt",zW="ScatterNd",jW="TensorScatterUpdate",WW="SearchSorted",Nb="Select",vm="Selu",Ab="Slice",xm="Sin",bm="Sinh",wm="Sign",Sm="Sigmoid",Cm="Softplus",$m="Sqrt",Ob="Sum",_b="SpaceToBatchND",Rb="SplitV",Pb="Softmax",VW="SparseFillEmptyRows",UW="SparseReshape",GW="SparseSegmentMean",HW="SparseSegmentSum",KW="SparseToDense",km="SquaredDifference",yE="Square",vE="StaticRegexReplace",xE="StridedSlice",qW="StringNGrams",XW="StringSplit",YW="StringToHashBucketFast",Im="Sub",Tm="Tan",Em="Tanh",Nm="Tile",bE="TopK",wE="Transform",pc="Transpose",SE="Unique",Db="Unpack",Mb="UnsortedSegmentSum",Fb="ZerosLike",Am="Step",cCe="FromPixels",CE="RotateWithOffset",jv="_FusedMatMul",Wv="FusedConv2D",QW="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zr(...t){J().getBool("IS_TEST")||J().getBool("PROD")||console.warn(...t)}function dCe(...t){J().getBool("IS_TEST")||J().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vv=MT("kernelRegistry",()=>new Map),P$=MT("gradRegistry",()=>new Map);function yD(t,e){const n=JW(t,e);return Vv.get(n)}function vD(t){return P$.get(t)}function xD(t){const e=Vv.entries(),n=[];for(;;){const{done:r,value:o}=e.next();if(r)break;const[s,i]=o,[a]=s.split("_");a===t&&n.push(i)}return n}function ZW(t){const{kernelName:e,backendName:n}=t,r=JW(e,n);Vv.has(r)&&Zr(`The kernel '${e}' for backend '${n}' is already registered`),Vv.set(r,t)}function fCe(t){const{kernelName:e}=t;P$.has(e)&&J().getBool("DEBUG")&&Zr(`Overriding the gradient for '${e}'`),P$.set(e,t)}function JW(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eV(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var tV=At,Eo=null;try{Eo=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function At(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}At.prototype.__isLong__;Object.defineProperty(At.prototype,"__isLong__",{value:!0});function Vr(t){return(t&&t.__isLong__)===!0}At.isLong=Vr;var bD={},wD={};function yu(t,e){var n,r,o;return e?(t>>>=0,(o=0<=t&&t<256)&&(r=wD[t],r)?r:(n=Ot(t,(t|0)<0?-1:0,!0),o&&(wD[t]=n),n)):(t|=0,(o=-128<=t&&t<128)&&(r=bD[t],r)?r:(n=Ot(t,t<0?-1:0,!1),o&&(bD[t]=n),n))}At.fromInt=yu;function No(t,e){if(isNaN(t))return e?El:Ao;if(e){if(t<0)return El;if(t>=nV)return sV}else{if(t<=-CD)return Rr;if(t+1>=CD)return oV}return t<0?No(-t,e).neg():Ot(t%ud|0,t/ud|0,e)}At.fromNumber=No;function Ot(t,e,n){return new At(t,e,n)}At.fromBits=Ot;var Uv=Math.pow;function $E(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return Ao;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return $E(t.substring(1),e,n).neg();for(var o=No(Uv(n,8)),s=Ao,i=0;i<t.length;i+=8){var a=Math.min(8,t.length-i),l=parseInt(t.substring(i,i+a),n);if(a<8){var u=No(Uv(n,a));s=s.mul(u).add(No(l))}else s=s.mul(o),s=s.add(No(l))}return s.unsigned=e,s}At.fromString=$E;function vs(t,e){return typeof t=="number"?No(t,e):typeof t=="string"?$E(t,e):Ot(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}At.fromValue=vs;var SD=65536,hCe=1<<24,ud=SD*SD,nV=ud*ud,CD=nV/2,$D=yu(hCe),Ao=yu(0);At.ZERO=Ao;var El=yu(0,!0);At.UZERO=El;var tc=yu(1);At.ONE=tc;var rV=yu(1,!0);At.UONE=rV;var D$=yu(-1);At.NEG_ONE=D$;var oV=Ot(-1,2147483647,!1);At.MAX_VALUE=oV;var sV=Ot(-1,-1,!0);At.MAX_UNSIGNED_VALUE=sV;var Rr=Ot(0,-2147483648,!1);At.MIN_VALUE=Rr;var ve=At.prototype;ve.toInt=function(){return this.unsigned?this.low>>>0:this.low};ve.toNumber=function(){return this.unsigned?(this.high>>>0)*ud+(this.low>>>0):this.high*ud+(this.low>>>0)};ve.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Rr)){var n=No(e),r=this.div(n),o=r.mul(n).sub(this);return r.toString(e)+o.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var s=No(Uv(e,6),this.unsigned),i=this,a="";;){var l=i.div(s),u=i.sub(l.mul(s)).toInt()>>>0,c=u.toString(e);if(i=l,i.isZero())return c+a;for(;c.length<6;)c="0"+c;a=""+c+a}};ve.getHighBits=function(){return this.high};ve.getHighBitsUnsigned=function(){return this.high>>>0};ve.getLowBits=function(){return this.low};ve.getLowBitsUnsigned=function(){return this.low>>>0};ve.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Rr)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&!(e&1<<n);n--);return this.high!=0?n+33:n+1};ve.isZero=function(){return this.high===0&&this.low===0};ve.eqz=ve.isZero;ve.isNegative=function(){return!this.unsigned&&this.high<0};ve.isPositive=function(){return this.unsigned||this.high>=0};ve.isOdd=function(){return(this.low&1)===1};ve.isEven=function(){return(this.low&1)===0};ve.equals=function(e){return Vr(e)||(e=vs(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};ve.eq=ve.equals;ve.notEquals=function(e){return!this.eq(e)};ve.neq=ve.notEquals;ve.ne=ve.notEquals;ve.lessThan=function(e){return this.comp(e)<0};ve.lt=ve.lessThan;ve.lessThanOrEqual=function(e){return this.comp(e)<=0};ve.lte=ve.lessThanOrEqual;ve.le=ve.lessThanOrEqual;ve.greaterThan=function(e){return this.comp(e)>0};ve.gt=ve.greaterThan;ve.greaterThanOrEqual=function(e){return this.comp(e)>=0};ve.gte=ve.greaterThanOrEqual;ve.ge=ve.greaterThanOrEqual;ve.compare=function(e){if(Vr(e)||(e=vs(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};ve.comp=ve.compare;ve.negate=function(){return!this.unsigned&&this.eq(Rr)?Rr:this.not().add(tc)};ve.neg=ve.negate;ve.add=function(e){Vr(e)||(e=vs(e));var n=this.high>>>16,r=this.high&65535,o=this.low>>>16,s=this.low&65535,i=e.high>>>16,a=e.high&65535,l=e.low>>>16,u=e.low&65535,c=0,d=0,f=0,h=0;return h+=s+u,f+=h>>>16,h&=65535,f+=o+l,d+=f>>>16,f&=65535,d+=r+a,c+=d>>>16,d&=65535,c+=n+i,c&=65535,Ot(f<<16|h,c<<16|d,this.unsigned)};ve.subtract=function(e){return Vr(e)||(e=vs(e)),this.add(e.neg())};ve.sub=ve.subtract;ve.multiply=function(e){if(this.isZero())return Ao;if(Vr(e)||(e=vs(e)),Eo){var n=Eo.mul(this.low,this.high,e.low,e.high);return Ot(n,Eo.get_high(),this.unsigned)}if(e.isZero())return Ao;if(this.eq(Rr))return e.isOdd()?Rr:Ao;if(e.eq(Rr))return this.isOdd()?Rr:Ao;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt($D)&&e.lt($D))return No(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,o=this.high&65535,s=this.low>>>16,i=this.low&65535,a=e.high>>>16,l=e.high&65535,u=e.low>>>16,c=e.low&65535,d=0,f=0,h=0,p=0;return p+=i*c,h+=p>>>16,p&=65535,h+=s*c,f+=h>>>16,h&=65535,h+=i*u,f+=h>>>16,h&=65535,f+=o*c,d+=f>>>16,f&=65535,f+=s*u,d+=f>>>16,f&=65535,f+=i*l,d+=f>>>16,f&=65535,d+=r*c+o*u+s*l+i*a,d&=65535,Ot(h<<16|p,d<<16|f,this.unsigned)};ve.mul=ve.multiply;ve.divide=function(e){if(Vr(e)||(e=vs(e)),e.isZero())throw Error("division by zero");if(Eo){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?Eo.div_u:Eo.div_s)(this.low,this.high,e.low,e.high);return Ot(n,Eo.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?El:Ao;var r,o,s;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return El;if(e.gt(this.shru(1)))return rV;s=El}else{if(this.eq(Rr)){if(e.eq(tc)||e.eq(D$))return Rr;if(e.eq(Rr))return tc;var i=this.shr(1);return r=i.div(e).shl(1),r.eq(Ao)?e.isNegative()?tc:D$:(o=this.sub(e.mul(r)),s=r.add(o.div(e)),s)}else if(e.eq(Rr))return this.unsigned?El:Ao;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=Ao}for(o=this;o.gte(e);){r=Math.max(1,Math.floor(o.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),l=a<=48?1:Uv(2,a-48),u=No(r),c=u.mul(e);c.isNegative()||c.gt(o);)r-=l,u=No(r,this.unsigned),c=u.mul(e);u.isZero()&&(u=tc),s=s.add(u),o=o.sub(c)}return s};ve.div=ve.divide;ve.modulo=function(e){if(Vr(e)||(e=vs(e)),Eo){var n=(this.unsigned?Eo.rem_u:Eo.rem_s)(this.low,this.high,e.low,e.high);return Ot(n,Eo.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};ve.mod=ve.modulo;ve.rem=ve.modulo;ve.not=function(){return Ot(~this.low,~this.high,this.unsigned)};ve.and=function(e){return Vr(e)||(e=vs(e)),Ot(this.low&e.low,this.high&e.high,this.unsigned)};ve.or=function(e){return Vr(e)||(e=vs(e)),Ot(this.low|e.low,this.high|e.high,this.unsigned)};ve.xor=function(e){return Vr(e)||(e=vs(e)),Ot(this.low^e.low,this.high^e.high,this.unsigned)};ve.shiftLeft=function(e){return Vr(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Ot(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):Ot(0,this.low<<e-32,this.unsigned)};ve.shl=ve.shiftLeft;ve.shiftRight=function(e){return Vr(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Ot(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):Ot(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};ve.shr=ve.shiftRight;ve.shiftRightUnsigned=function(e){if(Vr(e)&&(e=e.toInt()),e&=63,e===0)return this;var n=this.high;if(e<32){var r=this.low;return Ot(r>>>e|n<<32-e,n>>>e,this.unsigned)}else return e===32?Ot(n,0,this.unsigned):Ot(n>>>e-32,0,this.unsigned)};ve.shru=ve.shiftRightUnsigned;ve.shr_u=ve.shiftRightUnsigned;ve.toSigned=function(){return this.unsigned?Ot(this.low,this.high,!1):this};ve.toUnsigned=function(){return this.unsigned?this:Ot(this.low,this.high,!0)};ve.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};ve.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};ve.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};At.fromBytes=function(e,n,r){return r?At.fromBytesLE(e,n):At.fromBytesBE(e,n)};At.fromBytesLE=function(e,n){return new At(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};At.fromBytesBE=function(e,n){return new At(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)};const iV=ut(tV),pCe=aF({__proto__:null,default:iV},[tV]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xl=iV||pCe;function Lb(t){return xl.fromString(t,!0,16)}const aV=Lb("c3a5c85c97cb3127"),gl=Lb("b492b66fbe98f273"),rr=Lb("9ae16a3b2f90404f");function M$(t){return t.xor(t.shru(47))}function lV(t,e,n){const r=t.slice(e,e+n);return xl.fromBytes(Array.from(r),!0,!0)}function bt(t,e){return lV(t,e,8)}function kD(t,e){return lV(t,e,4)}function kn(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function Ca(t,e,n=Lb("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let o=e.xor(r).mul(n);return o=o.xor(o.shru(47)),o=o.mul(n),o}function mCe(t,e,n,r,o,s){o=o.add(t),s=kn(s.add(o).add(r),21);const i=o;return o=o.add(e),o=o.add(n),s=s.add(kn(o,44)),[o.add(r),s.add(i)]}function Bg(t,e,n,r){return mCe(bt(t,e),bt(t,e+8),bt(t,e+16),bt(t,e+24),n,r)}function gCe(t,e=t.length){if(e>=8){const n=rr.add(e*2),r=bt(t,0).add(rr),o=bt(t,e-8),s=kn(o,37).mul(n).add(r),i=kn(r,25).add(o).mul(n);return Ca(s,i,n)}if(e>=4){const n=rr.add(e*2),r=kD(t,0);return Ca(r.shl(3).add(e),kD(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],o=t[e-1],s=n+(r<<8),i=e+(o<<2);return M$(rr.mul(s).xor(aV.mul(i))).mul(rr)}return rr}function yCe(t,e=t.length){const n=rr.add(e*2),r=bt(t,0).mul(gl),o=bt(t,8),s=bt(t,e-8).mul(n),i=bt(t,e-16).mul(rr);return Ca(kn(r.add(o),43).add(kn(s,30)).add(i),r.add(kn(o.add(rr),18)).add(s),n)}function vCe(t,e=t.length){const n=rr.add(e*2),r=bt(t,0).mul(rr),o=bt(t,8),s=bt(t,e-8).mul(n),i=bt(t,e-16).mul(rr),a=kn(r.add(o),43).add(kn(s,30)).add(i),l=Ca(a,r.add(kn(o.add(rr),18)).add(s),n),u=bt(t,16).mul(n),c=bt(t,24),d=a.add(bt(t,e-32)).mul(n),f=l.add(bt(t,e-24)).mul(n);return Ca(kn(u.add(c),43).add(kn(d,30)).add(f),u.add(kn(c.add(r),18)).add(d),n)}function xCe(t,e=t.length){const n=xl.fromNumber(81,!0);if(e<=32)return e<=16?gCe(t,e):yCe(t,e);if(e<=64)return vCe(t,e);let r=n,o=n.mul(gl).add(113),s=M$(o.mul(rr).add(113)).mul(rr),i=[xl.UZERO,xl.UZERO],a=[xl.UZERO,xl.UZERO];r=r.mul(rr).add(bt(t,0));let l=0;const u=(e-1>>6)*64,c=u+(e-1&63)-63;do r=kn(r.add(o).add(i[0]).add(bt(t,l+8)),37).mul(gl),o=kn(o.add(i[1]).add(bt(t,l+48)),42).mul(gl),r=r.xor(a[1]),o=o.add(i[0]).add(bt(t,l+40)),s=kn(s.add(a[0]),33).mul(gl),i=Bg(t,l,i[1].mul(gl),r.add(a[0])),a=Bg(t,l+32,s.add(a[1]),o.add(bt(t,l+16))),[s,r]=[r,s],l+=64;while(l!==u);const d=gl.add(s.and(255).shl(1));return l=c,a[0]=a[0].add(e-1&63),i[0]=i[0].add(a[0]),a[0]=a[0].add(i[0]),r=kn(r.add(o).add(i[0]).add(bt(t,l+8)),37).mul(d),o=kn(o.add(i[1]).add(bt(t,l+48)),42).mul(d),r=r.xor(a[1].mul(9)),o=o.add(i[0].mul(9).add(bt(t,l+40))),s=kn(s.add(a[0]),33).mul(d),i=Bg(t,l,i[1].mul(d),r.add(a[0])),a=Bg(t,l+32,s.add(a[1]),o.add(bt(t,l+16))),[s,r]=[r,s],Ca(Ca(i[0],a[0],d).add(M$(o).mul(aV)).add(s),Ca(i[1],a[1],d).add(r),d)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ya(t,e){return e==="string"?$a(t):vu([t],e)}function bCe(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function vu(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=eu(t)),J().getBool("DEBUG")&&YSe(t,e),bCe(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function pr(){return J().platform.now()}function $a(t,e="utf-8"){return e=e||"utf-8",J().platform.encode(t,e)}function Da(t,e="utf-8"){return e=e||"utf-8",J().platform.decode(t,e)}function Fo(t){return J().platform.isTypedArray!=null?J().platform.isTypedArray(t):eV(t)}function eu(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||DT(t)||t==null||Fo(t)&&n)e.push(t);else if(Array.isArray(t)||Fo(t))for(let r=0;r<t.length;++r)eu(t[r],e,n);else{let r=-1;for(const o of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(o)&&(r=Math.max(r,Number(o)));for(let o=0;o<=r;o++)eu(t[o],e,n)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wCe{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new CCe)}profileKernel(e,n,r){let o;const s=()=>{o=r()};let i;const a=pr();if(this.backendTimer.timerAvailable())i=this.backendTimer.time(s);else{s();for(const u of o)u.dataSync();i=Promise.resolve({kernelMs:pr()-a})}if(J().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let u=0;u<o.length;u++){const c=o[u];c.data().then(d=>{SCe(d,c.dtype,e)})}return{kernelName:e,outputs:o,inputs:n,timeMs:i.then(u=>u.kernelMs),extraInfo:i.then(u=>u.getExtraProfileInfo!=null?u.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:o,inputs:s,extraInfo:i}=e;r.forEach(a=>{Promise.all([a.data(),o,i]).then(l=>{this.logger.logKernelProfile(n,a,l[0],l[1],s,l[2])})})}}function SCe(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const o=t[r];if(isNaN(o)||!isFinite(o))return console.warn(`Found ${o} in the result of '${n}'`),!0}return!1}class CCe{logKernelProfile(e,n,r,o,s,i){const a=typeof o=="number"?hc(`${o}ms`,9):o.error,l=hc(e,25),u=n.rank,c=n.size,d=hc(n.shape.toString(),14);let f="";for(const h in s){const p=s[h];if(p!=null){const m=p.shape||n.shape,g=m.length;f+=`${h}: ${g}D ${g>0?m:""} `}}console.log(`%c${l}	%c${a}	%c${u}D ${d}	%c${c}	%c${f}	%c${i}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ce(t,e,n){const r={},o={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const u=t[l],c=u.inputs;for(const d in c){const f=c[d];let h=!1;for(let p=0;p<e.length;p++)if(r[f.id]){u.outputs.forEach(m=>r[m.id]=!0),h=!0,o[u.id]=!0;break}if(h)break}}const s={};s[n.id]=!0;const i={};for(let l=t.length-1;l>=0;l--){const u=t[l],c=u.inputs;for(let d=0;d<u.outputs.length;d++)if(s[u.outputs[d].id]){for(const f in c)s[c[f].id]=!0,i[u.id]=!0;break}}const a=[];for(let l=0;l<t.length;l++){const u=t[l];if(o[u.id]&&i[u.id]){const c={};for(const f in u.inputs){const h=u.inputs[f];r[h.id]&&(c[f]=h)}const d=Object.assign({},u);d.inputs=c,d.outputs=u.outputs,a.push(d)}}return a}function kCe(t,e,n,r){for(let o=e.length-1;o>=0;o--){const s=e[o],i=[];if(s.outputs.forEach(l=>{const u=t[l.id];u!=null?i.push(u):i.push(null)}),s.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${s.kernelName}.`);const a=s.gradient(i);for(const l in s.inputs){if(!(l in a))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(a)}.`);const u=n(()=>a[l]());if(u.dtype!=="float32")throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${u.dtype}'`);const c=s.inputs[l];if(!at(u.shape,c.shape))throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input '${l}' has shape '${u.shape}', which does not match the shape of the input '${c.shape}'`);if(t[c.id]==null)t[c.id]=u;else{const d=t[c.id];t[c.id]=r(d,u),d.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ID=20,$f=3,kw=7;function ICe(t,e,n,r){const o=Ee(e),s=TCe(t,e,n,o),i=e.length,a=py(t,e,n,o,s),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${i}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(a.map(u=>"    "+u).join(`
`)),l.join(`
`)}function TCe(t,e,n,r){const o=re(e),s=r[r.length-1],i=new Array(s).fill(0),a=e.length,l=n==="complex64"?Ff(t):t;if(a>1)for(let u=0;u<o/s;u++){const c=u*s;for(let d=0;d<s;d++)i[d]=Math.max(i[d],Mf(l[c+d],0,n).length)}return i}function Mf(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(kw))} + ${parseFloat(t[1].toFixed(kw))}j`:Dp(t)?r=`'${t}'`:n==="bool"?r=uV(t):r=parseFloat(t.toFixed(kw)).toString(),hc(r,e)}function uV(t){return t===0?"false":"true"}function py(t,e,n,r,o,s=!0){const i=n==="complex64"?2:1,a=e[0],l=e.length;if(l===0){if(n==="complex64"){const m=Ff(t);return[Mf(m[0],0,n)]}return n==="bool"?[uV(t[0])]:[t[0].toString()]}if(l===1){if(a>ID){const g=$f*i;let y=Array.from(t.slice(0,g)),v=Array.from(t.slice((a-$f)*i,a*i));return n==="complex64"&&(y=Ff(y),v=Ff(v)),["["+y.map((b,x)=>Mf(b,o[x],n)).join(", ")+", ..., "+v.map((b,x)=>Mf(b,o[a-$f+x],n)).join(", ")+"]"]}return["["+(n==="complex64"?Ff(t):Array.from(t)).map((g,y)=>Mf(g,o[y],n)).join(", ")+"]"]}const u=e.slice(1),c=r.slice(1),d=r[0]*i,f=[];if(a>ID){for(let m=0;m<$f;m++){const g=m*d,y=g+d;f.push(...py(t.slice(g,y),u,n,c,o,!1))}f.push("...");for(let m=a-$f;m<a;m++){const g=m*d,y=g+d;f.push(...py(t.slice(g,y),u,n,c,o,m===a-1))}}else for(let m=0;m<a;m++){const g=m*d,y=g+d;f.push(...py(t.slice(g,y),u,n,c,o,m===a-1))}const h=l===2?",":"";f[0]="["+(a>0?f[0]+h:"");for(let m=1;m<f.length-1;m++)f[m]=" "+f[m]+h;let p=`,
`;for(let m=2;m<l;m++)p+=`
`;return f[f.length-1]=" "+f[f.length-1]+"]"+(s?"":p),f}function Ff(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Dn{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=re(e),r!=null){const o=r.length;P(o===this.size,()=>`Length of values '${o}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||en(n,this.size),this.strides=Ee(e)}set(e,...n){n.length===0&&(n=[0]),P(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const o of e){if(o<0||o>=this.shape[n]){const s=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(s)}n++}let r=e[e.length-1];for(let o=0;o<e.length-1;++o)r+=this.strides[o]*e[o];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return es().makeTensor(this.values,this.shape,this.dtype)}}let es=null,Lu=null;function ECe(t){es=t}function NCe(t){Lu=t}class fn{constructor(e,n,r,o){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=re(e),this.strides=Ee(e),this.dataId=r,this.id=o,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return Lu.buffer(this.shape,this.dtype,e)}bufferSync(){return Lu.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return as(this.shape,e,this.dtype==="complex64")}arraySync(){return as(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=es().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>Da(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),es().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=es().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>Da(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await es().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),es().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Lu.print(this,e)}clone(){return this.throwIfDisposed(),Lu.clone(this)}toString(e=!1){const n=this.dataSync();return ICe(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Lu.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),es().makeVariable(this,e,n,r)}}Object.defineProperty(fn,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function te(){return MT("Tensor",()=>fn)}te();class Gv extends fn{constructor(e,n,r,o){super(e.shape,e.dtype,e.dataId,o),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!at(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);es().disposeTensor(this),this.dataId=e.dataId,es().incRef(this,null)}dispose(){es().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(Gv,Symbol.hasInstance,{value:t=>t instanceof fn&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var TD;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(TD||(TD={}));var F$;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(F$||(F$={}));var L$;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(L$||(L$={}));var B$;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(B$||(B$={}));var z$;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(z$||(z$={}));const ACe={float32:B$,int32:F$,bool:L$,complex64:z$};function Br(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return ACe[t][e]}function kE(t){return Br(t,"int32")}function cV(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function dV(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nn(t,e){if(t.dtype===e.dtype)return[t,e];const n=Br(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function fV(t){const e=[];return hV(t,e,new Set),e}function hV(t,e,n){if(t==null)return;if(t instanceof fn){e.push(t);return}if(!OCe(t))return;const r=t;for(const o in r){const s=r[o];n.has(s)||(n.add(s),hV(s,e,n))}}function OCe(t){return Array.isArray(t)||typeof t=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iw(t){return t.kernelName!=null}class ED{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class cd{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new ED}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(Zr(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new wCe(this.backendInstance),!0}setupRegisteredKernels(){xD(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){xD(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof OT)&&typeof r.then=="function"){const o=++this.pendingBackendInitId,s=r.then(i=>o<this.pendingBackendInitId?!1:(this.registry[e]=i,this.pendingBackendInit=null,!0)).catch(i=>(o<this.pendingBackendInitId||(this.pendingBackendInit=null,Zr(`Initialization of backend ${e} failed`),Zr(i.stack||i.message)),!1));return this.pendingBackendInit=s,{success:s,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return Zr(`Initialization of backend ${e} failed`),Zr(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:o,asyncInit:s}=this.initializeBackend(r);if(s||o)return{name:r,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),o=r.backend,s=this.readSync(n),i=o.refCount(n);o.disposeData(n,!0),r.backend=e,e.move(n,s,r.shape,r.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let o;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(o),()=>(o=n(),o instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),o))}scopedRun(e,n,r){e();try{const o=r();return n(),o}catch(o){throw n(),o}}nextTensorId(){return cd.nextTensorId++}nextVariableId(){return cd.nextVariableId++}clone(e){const n=H.runKernel(nm,{x:e}),r={x:e},o=i=>({x:()=>{const a="float32",l={x:i},u={dtype:a};return H.runKernel(Vp,l,u)}}),s=[];return this.addTapeNode(this.state.activeScope.name,r,[n],o,s,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(yD(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const o=this.backend.numDataIds();let s=0;r.forEach(l=>{s+=l.dtype==="complex64"?3:1});const i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=o-n-s-i;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const o=this.isTapeOn(),s=this.state.numBytes,i=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let a;this.backendName==null&&this.backend;let l;const u=Iw(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(Iw(e)){const{kernelName:p,inputs:m,attrs:g}=e;this.backendName==null&&this.backend;const y=yD(p,this.backendName);P(y!=null,()=>`Cannot find registered kernel '${p}' for backend '${this.backendName}'`),a=()=>{const v=this.backend.numDataIds();l=y.kernelFunc({inputs:m,attrs:g,backend:this.backend});const b=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(p,v,b);const x=b.map(w=>w.rank!=null?w:this.makeTensorFromTensorInfo(w));if(o){const w=this.getTensorsForGradient(p,m,x);r=this.saveTensorsForBackwardMode(w)}return x}}else{const{forwardFunc:p}=e,m=g=>{o&&(r=g.map(y=>this.keep(this.clone(y))))};a=()=>{const g=this.backend.numDataIds();l=this.tidy(()=>p(this.backend,m));const y=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,g,y),y}}const{inputs:c,attrs:d}=e,f=Iw(e)?null:e.backwardsFunc;let h;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=a():(h=this.profiler.profileKernel(u,c,()=>a()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(h),n=h.outputs)}),o&&this.addTapeNode(u,c,n,f,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-i,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(p=>c[p]!=null?c[p].shape:null),outputShapes:n.map(p=>p.shape),kernelTimeMs:h.timeMs,extraInfo:h.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const o=vD(e);if(o!=null){const s=o.inputsToSave||[],i=o.outputsToSave||[];let a;o.saveAllInputs?(P(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(n).map(u=>n[u])):a=s.map(u=>n[u]);const l=r.filter((u,c)=>i[c]);return a.concat(l)}return[]}makeTensor(e,n,r,o){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",o=o||this.backend;let s=e;r==="string"&&Dp(e[0])&&(s=e.map(l=>$a(l)));const i=o.write(s,n,r),a=new fn(n,r,i,this.nextTensorId());if(this.trackTensor(a,o),r==="string"){const l=this.state.tensorInfo.get(i),u=ZSe(s);this.state.numBytes+=u-l.bytes,l.bytes=u}return a}makeTensorFromDataId(e,n,r,o){r=r||"float32";const s={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(s,o)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:o,dtype:s}=e,i=new fn(o,s,r,this.nextTensorId());return this.trackTensor(i,n),i}makeVariable(e,n=!0,r,o){r=r||this.nextVariableId().toString(),o!=null&&o!==e.dtype&&(e=e.cast(o));const s=new Gv(e,n,r,this.nextTensorId());if(this.state.registeredVariables[s.name]!=null)throw new Error(`Variable with name ${s.name} was already registered`);return this.state.registeredVariables[s.name]=s,this.incRef(s,this.backend),s}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*zv(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof Gv||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*zv(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(o=>o.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const o of this.state.activeProfile.kernels)o.kernelTimeMs=await o.kernelTimeMs,o.extraInfo=await o.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,o,s,i){const a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:s},l=vD(e);l!=null&&(o=l.gradFunc),o!=null&&(a.gradient=u=>(u=u.map((c,d)=>{if(c==null){const f=r[d],h=Hn(f.size,f.dtype);return this.makeTensor(h,f.shape,f.dtype)}return c}),o(u.length>1?u:u[0],s,i))),this.state.activeTape.push(a)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=fV(e),r=new Set(n.map(s=>s.id));for(let s=0;s<this.state.activeScope.track.length;s++){const i=this.state.activeScope.track[s];!i.kept&&!r.has(i.id)&&i.dispose()}const o=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(s=>{!s.kept&&s.scopeId===o.id&&this.track(s)})}gradients(e,n,r,o=!1){if(P(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const s=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));P(s instanceof fn,()=>"The result y returned by f() must be a tensor.");const i=$Ce(this.state.activeTape,n,s);if(!o&&i.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const a={};a[s.id]=r??_Ce(s.shape),kCe(a,i,u=>this.tidy(u),RCe);const l=n.map(u=>a[u.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(u=>{for(const c of u.saved)c.dispose()}),this.state.activeTape=null),{value:s,grads:l}})}customGrad(e){return P(A$(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{P(n.every(a=>a instanceof fn),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const o={};n.forEach((a,l)=>{o[l]=a});const s=(a,l)=>(r=e(...n,l),P(r.value instanceof fn,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),P(A$(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),i=(a,l)=>{const u=r.gradFunc(a,l),c=Array.isArray(u)?u:[u];P(c.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),P(c.every(f=>f instanceof fn),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const d={};return c.forEach((f,h)=>{d[h]=()=>f}),d};return this.runKernelFunc({forwardFunc:s,backwardsFunc:i,inputs:o})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=pr(),r=await this.backend.time(e);return r.wallMs=pr()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new ED;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}cd.nextTensorId=0;cd.nextVariableId=0;function _Ce(t){const e=PT(re(t),"float32");return H.makeTensor(e,t,"float32")}function pV(){const t=AW();if(t._tfengine==null){const e=new tCe(t);t._tfengine=new cd(e)}return sCe(t._tfengine.ENV),ECe(()=>t._tfengine),t._tfengine}const H=pV();function RCe(t,e){const n={a:t,b:e};return H.runKernel(Wd,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PCe(){return typeof navigator<"u"&&navigator!=null}function mV(t){if(t||PCe()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function gV(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wr=J();wr.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});wr.registerFlag("IS_BROWSER",()=>gV());wr.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");wr.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));wr.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));wr.registerFlag("PROD",()=>!1);wr.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>wr.getBool("DEBUG"));wr.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);wr.registerFlag("IS_TEST",()=>!1);wr.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>wr.getBool("DEBUG"));wr.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);wr.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);wr.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bb(t,e){let n=t;if(Fo(t))return e==="string"?[]:[t.length];if(cV(t)){const o=t.channels||"RGBA";return[t.height,t.width*o.length]}else if(dV(t))return[t.buffer.size/(e==null?4:zv(e))];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||Fo(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&J().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&yV(t,r,[]),r}function yV(t,e,n){if(n=n||[],!Array.isArray(t)&&!Fo(t)){P(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}P(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),P(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let o=0;o<t.length;++o)yV(t[o],r,n.concat(o))}function ND(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function j(t,e,n,r="numeric"){if(t instanceof te())return ND(r,t.dtype,e,n),t;let o=zd(t);if(o!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(o=r),ND(r,o,e,n),t==null||!Fo(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const l=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const s=Bb(t,o);!Fo(t)&&!Array.isArray(t)&&(t=[t]);const a=o!=="string"?vu(t,o):eu(t,[],!0);return H.makeTensor(a,s,o)}function vV(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((s,i)=>j(s,`${e}[${i}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DCe="__op";function X(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+DCe;const o=(...s)=>{H.startScope(n);try{const i=r(...s);return DT(i)&&console.error("Cannot return a Promise inside of tidy."),H.endScope(i),i}catch(i){throw H.endScope(null),i}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MCe(t,e){const n=j(t,"real","complex"),r=j(e,"imag","complex");RT(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const o={real:n,imag:r};return H.runKernel(UT,o)}const dd=X({complex_:MCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zb(t,e,n,r){if(r==null)r=zd(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(dV(t)||cV(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return H.backend.createTensorFromGPUData(t,e||n,r)}if(!Fo(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){zi(e);const o=re(e),s=re(n);P(o===s,()=>`Based on the provided shape, [${e}], the tensor should have ${o} values but has ${s}`);for(let i=0;i<n.length;++i){const a=n[i],l=i===n.length-1?a!==re(e.slice(i)):!0;P(n[i]===e[i]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!Fo(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?vu(t,r):eu(t,[],!0),H.makeTensor(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xV(t,e,n){const r=Bb(t,n);return zb(t,e,r,n)}class Vd{static join(e){return new Vd(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>Fo(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){const o=e[r];r!==e.length-1&&o.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const s=n+o.byteLength;this.shards.push({buffer:o,start:n,end:s}),n=s}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const o=n-e,s=new ArrayBuffer(o),i=new Uint8Array(s);let a=0;for(let l=r;l<this.shards.length;l++){const u=this.shards[l],d=e+a-u.start,f=a,p=Math.min(n,u.end)-u.start,m=new Uint8Array(u.buffer,d,p-d);if(i.set(m,f),a+=m.length,n<u.end)break}return s}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(o){return e<o.start?-1:e>=o.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=FCe(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function FCe(t,e){let n=0,r=t.length;for(;n<=r;){const o=Math.floor((r-n)/2)+n,s=e(t[o]);if(s===0)return o;s<0?r=o:n=o+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $s(){return H}function AD(){return H.memory()}function Q(t,e){return H.tidy(t,e)}function Ke(t){fV(t).forEach(n=>n.dispose())}function js(t){return H.keep(t)}function LCe(t){return H.setBackend(t)}function BCe(){return H.ready()}function zCe(){return H.backendName}function bV(t,e,n=1){return H.registerBackend(t,e,n)}function jCe(){return H.backend}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OD=4;async function _D(t,e){const n=[],r=[],o=Array.isArray(t)?t.map(i=>i.name):Object.keys(t);for(let i=0;i<o.length;++i){const a=o[i],l=Array.isArray(t)?t[i].tensor:t[a];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${l.dtype}`);const u={name:a,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const c=new Promise(async d=>{const f=await l.bytes(),h=f.reduce((g,y)=>g+y.length,0)+OD*f.length,p=new Uint8Array(h);let m=0;for(let g=0;g<f.length;g++){const y=f[g],v=new Uint8Array(new Uint32Array([y.length]).buffer);p.set(v,m),m+=OD,p.set(y,m),m+=y.length}d(p)});r.push(c)}else r.push(l.data());e!=null&&(u.group=e),n.push(u)}const s=await Promise.all(r);return{data:WCe(s),specs:n}}function WCe(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(s=>{if(e+=s.byteLength,n.push(s.byteLength===s.buffer.byteLength?s:new s.constructor(s)),!(s instanceof Float32Array||s instanceof Int32Array||s instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${s.constructor.name}`)});const r=new Uint8Array(e);let o=0;return n.forEach(s=>{r.set(new Uint8Array(s.buffer),o),o+=s.byteLength}),r.buffer}const IE=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function RD(t){return IE?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function VCe(t){if(IE)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,o=e.length;r<o;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function UCe(t){if(IE){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function GCe(t){return Vd.join(t)}function wV(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:RD(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:RD(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new Vd(t.weightData).byteLength}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class er{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return er.instance==null&&(er.instance=new er),er.instance}static registerSaveRouter(e){er.getInstance().saveRouters.push(e)}static registerLoadRouter(e){er.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return er.getHandlers(e,"save")}static getLoadHandlers(e,n){return er.getHandlers(e,"load",n)}static getHandlers(e,n,r){const o=[];return(n==="load"?er.getInstance().loadRouters:er.getInstance().saveRouters).forEach(i=>{const a=i(e,r);a!==null&&o.push(a)}),o}}const HCe=t=>er.getSaveHandlers(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j$="tensorflowjs",W$=1,Nl="models_store",ca="model_info_store";function SV(){if(!J().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function V$(t){const e=t.result;e.createObjectStore(Nl,{keyPath:"modelPath"}),e.createObjectStore(ca,{keyPath:"modelPath"})}class tu{constructor(e){if(this.indexedDB=SV(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,o)=>{const s=this.indexedDB.open(j$,W$);s.onupgradeneeded=()=>V$(s),s.onsuccess=()=>{const i=s.result;if(n==null){const a=i.transaction(Nl,"readonly"),u=a.objectStore(Nl).get(this.modelPath);u.onsuccess=()=>{if(u.result==null)return i.close(),o(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(u.result.modelArtifacts)},u.onerror=c=>(i.close(),o(u.error)),a.oncomplete=()=>i.close()}else{n.weightData=Vd.join(n.weightData);const a=wV(n),l=i.transaction(ca,"readwrite");let u=l.objectStore(ca),c;try{c=u.put({modelPath:this.modelPath,modelArtifactsInfo:a})}catch(f){return o(f)}let d;c.onsuccess=()=>{d=i.transaction(Nl,"readwrite");const f=d.objectStore(Nl);let h;try{h=f.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:a})}catch(p){return o(p)}h.onsuccess=()=>r({modelArtifactsInfo:a}),h.onerror=p=>{u=l.objectStore(ca);const m=u.delete(this.modelPath);m.onsuccess=()=>(i.close(),o(h.error)),m.onerror=g=>(i.close(),o(h.error))}},c.onerror=f=>(i.close(),o(c.error)),l.oncomplete=()=>{d==null?i.close():d.oncomplete=()=>i.close()}}},s.onerror=i=>o(s.error)})}}tu.URL_SCHEME="indexeddb://";const CV=t=>J().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(tu.URL_SCHEME)?KCe(t.slice(tu.URL_SCHEME.length)):null;er.registerSaveRouter(CV);er.registerLoadRouter(CV);function KCe(t){return new tu(t)}function qCe(t){return t.startsWith(tu.URL_SCHEME)?t.slice(tu.URL_SCHEME.length):t}class XCe{constructor(){this.indexedDB=SV()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(j$,W$);r.onupgradeneeded=()=>V$(r),r.onsuccess=()=>{const o=r.result,s=o.transaction(ca,"readonly"),a=s.objectStore(ca).getAll();a.onsuccess=()=>{const l={};for(const u of a.result)l[u.modelPath]=u.modelArtifactsInfo;e(l)},a.onerror=l=>(o.close(),n(a.error)),s.oncomplete=()=>o.close()},r.onerror=o=>n(r.error)})}async removeModel(e){return e=qCe(e),new Promise((n,r)=>{const o=this.indexedDB.open(j$,W$);o.onupgradeneeded=()=>V$(o),o.onsuccess=()=>{const s=o.result,i=s.transaction(ca,"readwrite"),a=i.objectStore(ca),l=a.get(e);let u;l.onsuccess=()=>{if(l.result==null)return s.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const c=a.delete(e),d=()=>{u=s.transaction(Nl,"readwrite");const h=u.objectStore(Nl).delete(e);h.onsuccess=()=>n(l.result.modelArtifactsInfo),h.onerror=p=>r(l.error)};c.onsuccess=d,c.onerror=f=>(d(),s.close(),r(l.error))}},l.onerror=c=>(s.close(),r(l.error)),i.oncomplete=()=>{u==null?s.close():u.oncomplete=()=>s.close()}},o.onerror=s=>r(o.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fi="/",Bu="tensorflowjs_models",$V="info",YCe="model_topology",QCe="weight_specs",ZCe="weight_data",JCe="model_metadata";function kV(t){return{info:[Bu,t,$V].join(fi),topology:[Bu,t,YCe].join(fi),weightSpecs:[Bu,t,QCe].join(fi),weightData:[Bu,t,ZCe].join(fi),modelMetadata:[Bu,t,JCe].join(fi)}}function IV(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function e$e(t){const e=t.split(fi);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(fi)}function t$e(t){return t.startsWith(nu.URL_SCHEME)?t.slice(nu.URL_SCHEME.length):t}class nu{constructor(e){if(!J().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=kV(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),o=wV(e),s=Vd.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(o)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,VCe(s));const i={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),{modelArtifactsInfo:o}}catch{throw IV(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${o.modelTopologyBytes}, weightSpecsBytes=${o.weightSpecsBytes}, weightDataBytes=${o.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const o=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(o==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=o;const s=this.LS.getItem(this.keys.modelMetadata);if(s!=null){const a=JSON.parse(s);n.format=a.format,n.generatedBy=a.generatedBy,n.convertedBy=a.convertedBy,a.signature!=null&&(n.signature=a.signature),a.userDefinedMetadata!=null&&(n.userDefinedMetadata=a.userDefinedMetadata),a.modelInitializer!=null&&(n.modelInitializer=a.modelInitializer),a.initializerSignature!=null&&(n.initializerSignature=a.initializerSignature),a.trainingConfig!=null&&(n.trainingConfig=a.trainingConfig)}const i=this.LS.getItem(this.keys.weightData);if(i==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=UCe(i),n}}nu.URL_SCHEME="localstorage://";const TV=t=>J().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(nu.URL_SCHEME)?n$e(t.slice(nu.URL_SCHEME.length)):null;er.registerSaveRouter(TV);er.registerLoadRouter(TV);function n$e(t){return new nu(t)}class r$e{constructor(){P(J().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),P(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=Bu+fi,r=fi+$V;for(let o=0;o<this.LS.length;++o){const s=this.LS.key(o);if(s.startsWith(n)&&s.endsWith(r)){const i=e$e(s);e[i]=JSON.parse(this.LS.getItem(s))}}return e}async removeModel(e){e=t$e(e);const n=kV(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return IV(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PD="://";class ks{constructor(){this.managers={}}static getInstance(){return ks.instance==null&&(ks.instance=new ks),ks.instance}static registerManager(e,n){P(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(PD)&&(e=e.slice(0,e.indexOf(PD))),P(e.length>0,()=>"scheme must not be an empty string.");const r=ks.getInstance();P(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=ks.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(ks.getInstance().managers)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class o$e{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!J().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const o=this.functionRefs[r.data.index];o(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return eV(e)}}if(J().get("IS_BROWSER")){J().setPlatform("browser",new o$e);try{ks.registerManager(nu.URL_SCHEME,new r$e)}catch{}try{ks.registerManager(tu.URL_SCHEME,new XCe)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s$e={importFetch:()=>require("node-fetch")};let Tw;class i$e{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return J().global.fetch!=null?J().global.fetch(e,n):(Tw==null&&(Tw=s$e.importFetch()),Tw(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}J().get("IS_NODE")&&!J().get("IS_BROWSER")&&J().setPlatform("node",new i$e);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ue(t,e="float32",n){return e=e||"float32",zi(t),new Dn(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a$e(t,e){const n=j(t,"x","cast");if(!QSe(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},o={dtype:e};return H.runKernel(Vp,r,o)}const Se=X({cast_:a$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l$e(t){const n={x:j(t,"x","clone","string_or_numeric")};return H.runKernel(nm,n)}const jl=X({clone_:l$e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u$e(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pV();const c$e={buffer:Ue,cast:Se,clone:jl,print:u$e};NCe(c$e);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d$e(t,e){let n=j(t,"a","add"),r=j(e,"b","add");[n,r]=nn(n,r);const o={a:n,b:r};return H.runKernel(Wd,o)}const he=X({add_:d$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f$e(t,e){let n=j(t,"a","floorDiv"),r=j(e,"b","floorDiv");[n,r]=nn(n,r);const o={a:n,b:r};return H.runKernel(em,o)}const EV=X({floorDiv_:f$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h$e(t,e){let n=j(t,"a","div"),r=j(e,"b","div");if([n,r]=nn(n,r),n.dtype==="int32"&&r.dtype==="int32")return EV(n,r);const o={a:n,b:r},s={};return H.runKernel(qp,o,s)}const _e=X({div_:h$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p$e(t,e){let n=j(t,"a","mul"),r=j(e,"b","mul");[n,r]=nn(n,r);const o={a:n,b:r};return H.runKernel(dm,o)}const K=X({mul_:p$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m$e(t){const e=j(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return H.runKernel(Gx,n)}else{const n={x:e};return H.runKernel(Lx,n)}}const tr=X({abs_:m$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g$e(t){const n={x:j(t,"x","acos")};return H.runKernel(Mp,n)}const y$e=X({acos_:g$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v$e(t){const n={x:j(t,"x","acosh")};return H.runKernel(Fp,n)}const x$e=X({acosh_:v$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b$e(t,e=null,n=!1){const o={x:j(t,"x","all","bool")},s={axis:e,keepDims:n};return H.runKernel(LT,o,s)}const NV=X({all_:b$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w$e(t,e=null,n=!1){const o={x:j(t,"x","any","bool")},s={axis:e,keepDims:n};return H.runKernel(BT,o,s)}const U$=X({any_:w$e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S$e(t,e=0){const r={x:j(t,"x","argMax")},o={axis:e};return H.runKernel(Bx,r,o)}const ap=X({argMax_:S$e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C$e(t,e=0){const r={x:j(t,"x","argMin")},o={axis:e};return H.runKernel(zx,r,o)}const $$e=X({argMin_:C$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k$e(t){const n={x:j(t,"x","asin")};return H.runKernel(Lp,n)}const I$e=X({asin_:k$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T$e(t){const n={x:j(t,"x","asinh")};return H.runKernel(Bp,n)}const E$e=X({asinh_:T$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N$e(t){const n={x:j(t,"x","atan")};return H.runKernel(zp,n)}const A$e=X({atan_:N$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O$e(t,e){let n=j(t,"a","atan2"),r=j(e,"b","atan2");[n,r]=nn(n,r);const o={a:n,b:r};return H.runKernel(Wp,o)}const _$e=X({atan2_:O$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R$e(t){const n={x:j(t,"x","atanh")};return H.runKernel(jp,n)}const P$e=X({atanh_:R$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Om(t,e,n,r,o="NHWC",s){const i=t[3],a=[...e,i],l=Wi(o);return Fn(t,a,n,s,r,null,null,l)}function jo(t,e,n,r,o,s,i="channelsLast"){const[a,l]=lp(e);let u;if(i==="channelsLast")u=[a,l,t[3],t[3]];else if(i==="channelsFirst")u=[a,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${i}`);return Fn(t,u,n,r,o,s,!1,i)}function ji(t,e,n,r,o,s,i="NDHWC"){const[a,l,u]=G$(e);let c,d;if(i==="NDHWC")d="channelsLast",c=[a,l,u,t[4],t[4]];else if(i==="NCDHW")d="channelsFirst",c=[a,l,u,t[1],t[1]];else throw new Error(`Unknown dataFormat ${i}`);return Qa(t,c,n,r,o,!1,d,s)}function Fn(t,e,n,r,o,s,i=!1,a="channelsLast"){let[l,u,c,d]=[-1,-1,-1,-1];if(a==="channelsLast")[l,u,c,d]=t;else if(a==="channelsFirst")[l,d,u,c]=t;else throw new Error(`Unknown dataFormat ${a}`);const[f,h,,p]=e,[m,g]=lp(n),[y,v]=lp(r),b=mc(f,y),x=mc(h,v),{padInfo:w,outHeight:S,outWidth:$}=F$e(o,u,c,m,g,b,x,s,a),C=i?p*d:p;let k;return a==="channelsFirst"?k=[l,C,S,$]:a==="channelsLast"&&(k=[l,S,$,C]),{batchSize:l,dataFormat:a,inHeight:u,inWidth:c,inChannels:d,outHeight:S,outWidth:$,outChannels:C,padInfo:w,strideHeight:m,strideWidth:g,filterHeight:f,filterWidth:h,effectiveFilterHeight:b,effectiveFilterWidth:x,dilationHeight:y,dilationWidth:v,inShape:t,outShape:k,filterShape:e}}function Qa(t,e,n,r,o,s=!1,i="channelsLast",a){let[l,u,c,d,f]=[-1,-1,-1,-1,-1];if(i==="channelsLast")[l,u,c,d,f]=t;else if(i==="channelsFirst")[l,f,u,c,d]=t;else throw new Error(`Unknown dataFormat ${i}`);const[h,p,m,,g]=e,[y,v,b]=G$(n),[x,w,S]=G$(r),$=mc(h,x),C=mc(p,w),k=mc(m,S),{padInfo:I,outDepth:T,outHeight:E,outWidth:_}=L$e(o,u,c,d,y,v,b,$,C,k,a),O=s?g*f:g;let F;return i==="channelsFirst"?F=[l,O,T,E,_]:i==="channelsLast"&&(F=[l,T,E,_,O]),{batchSize:l,dataFormat:i,inDepth:u,inHeight:c,inWidth:d,inChannels:f,outDepth:T,outHeight:E,outWidth:_,outChannels:O,padInfo:I,strideDepth:y,strideHeight:v,strideWidth:b,filterDepth:h,filterHeight:p,filterWidth:m,effectiveFilterDepth:$,effectiveFilterHeight:C,effectiveFilterWidth:k,dilationDepth:x,dilationHeight:w,dilationWidth:S,inShape:t,outShape:F,filterShape:e}}function D$e(t,e,n,r,o){r==null&&(r=TE(t,e,n));const s=t[0],i=t[1],a=up((s-e+2*r)/n+1,o),l=up((i-e+2*r)/n+1,o);return[a,l]}function M$e(t,e,n,r,o,s){o==null&&(o=TE(t,e[0],r[0]));const i=[0,0,0,n];for(let a=0;a<3;a++)t[a]+2*o>=e[a]&&(i[a]=up((t[a]-e[a]+2*o)/r[a]+1,s));return i}function TE(t,e,n,r=1){const o=mc(e,r);return Math.floor((t[0]*(n-1)-n+o)/2)}function lp(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function G$(t){return typeof t=="number"?[t,t,t]:t}function mc(t,e){return e<=1?t:t+(t-1)*(e-1)}function F$e(t,e,n,r,o,s,i,a,l){let u,c,d;if(typeof t=="number"){u={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const h=D$e([e,n],s,r,t,a);c=h[0],d=h[1]}else if(t==="same"){c=Math.ceil(e/r),d=Math.ceil(n/o);const f=Math.max(0,(c-1)*r+s-e),h=Math.max(0,(d-1)*o+i-n),p=Math.floor(f/2),m=f-p,g=Math.floor(h/2),y=h-g;u={top:p,bottom:m,left:g,right:y,type:"SAME"}}else if(t==="valid")u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((e-s+1)/r),d=Math.ceil((n-i+1)/o);else if(typeof t=="object"){const f=l==="channelsLast"?t[1][0]:t[2][0],h=l==="channelsLast"?t[1][1]:t[2][1],p=l==="channelsLast"?t[2][0]:t[3][0],m=l==="channelsLast"?t[2][1]:t[3][1];u={top:f,bottom:h,left:p,right:m,type:f===0&&h===0&&p===0&&m===0?"VALID":"EXPLICIT"},c=up((e-s+f+h)/r+1,a),d=up((n-i+p+m)/o+1,a)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:u,outHeight:c,outWidth:d}}function L$e(t,e,n,r,o,s,i,a,l,u,c){let d,f,h,p;if(t==="valid"&&(t=0),typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const g=M$e([e,n,r,1],[a,l,u],1,[o,s,i],t,c);f=g[0],h=g[1],p=g[2]}else if(t==="same"){f=Math.ceil(e/o),h=Math.ceil(n/s),p=Math.ceil(r/i);const m=(f-1)*o+a-e,g=(h-1)*s+l-n,y=(p-1)*i+u-r,v=Math.floor(m/2),b=m-v,x=Math.floor(g/2),w=g-x,S=Math.floor(y/2),$=y-S;d={top:x,bottom:w,left:S,right:$,front:v,back:b,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:f,outHeight:h,outWidth:p}}function up(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function ru(t){const[e,n,r]=lp(t);return e===1&&n===1&&r===1}function Kn(t,e){return ru(t)||ru(e)}function ou(t){return lp(t).every(e=>e>0)}function Wi(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function kr(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")P(ld(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(o=>{P(ld(o),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${o}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B$e(t,e){const r={x:j(t,"x","reshape","string_or_numeric")},o={shape:e};return H.runKernel(kb,r,o)}const q=X({reshape_:B$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z$e(t,e,n,r,o){const s=j(t,"x","avgPool","float32"),i=1;P(Kn(n,i),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);let a=s,l=!1;s.rank===3&&(l=!0,a=q(s,[1,s.shape[0],s.shape[1],s.shape[2]])),P(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),kr("avgPool",r,o);const u={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:o};let d=H.runKernel(jx,u,c);return d=Se(d,s.dtype),l?q(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const EE=X({avgPool_:z$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j$e(t,e,n,r,o,s="NDHWC"){const i=j(t,"x","avgPool3d","float32");let a=i,l=!1;i.rank===4&&(l=!0,a=q(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),P(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),P(s==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),P(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),kr("avgPool3d",r,o);const u={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:o,dataFormat:s};let d=H.runKernel(Wx,u,c);return d=Se(d,a.dtype),l?q(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const W$e=X({avgPool3d_:j$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V$e(t,e=0){P(t.length>=1,()=>"Pass at least one tensor to concat");const n=vV(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(s=>{if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${s.dtype}. `)}),n.length===1)return jl(n[0]);const r=n,o={axis:e};return H.runKernel(Hx,r,o)}const br=X({concat_:V$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U$e(t,e,n=!1,r=!1){let o=j(t,"a","matMul"),s=j(e,"b","matMul");[o,s]=nn(o,s);const i={a:o,b:s},a={transposeA:n,transposeB:r};return H.runKernel(Vx,i,a)}const ot=X({matMul_:U$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G$e(t){const n={x:j(t,"x","sigmoid","float32")};return H.runKernel(Sm,n)}const Ud=X({sigmoid_:G$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H$e(t,e,n){const r=j(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const o={x:r},s={begin:e,size:n};return H.runKernel(Ab,o,s)}const wt=X({slice_:H$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K$e(t){const n={x:j(t,"x","tanh","float32")};return H.runKernel(Em,n)}const NE=X({tanh_:K$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q$e(t,e,n){const r=j(t,"x","batchToSpaceND"),o=e.reduce((a,l)=>a*l);P(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),P(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),P(r.shape[0]%o===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${o}`);const s={x:r},i={blockShape:e,crops:n};return H.runKernel(Ux,s,i)}const AE=X({batchToSpaceND_:q$e});function X$e(t){let e;return t.rank===0||t.rank===1?e=q(t,[1,1,1,t.size]):t.rank===2?e=q(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=q(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y$e(t,e,n,r,o,s){s==null&&(s=.001);const i=j(t,"x","batchNorm"),a=j(e,"mean","batchNorm"),l=j(n,"variance","batchNorm");let u;o!=null&&(u=j(o,"scale","batchNorm"));let c;r!=null&&(c=j(r,"offset","batchNorm")),P(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),P(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),P(u==null||a.rank===u.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const f={x:X$e(i),scale:u,offset:c,mean:a,variance:l},h={varianceEpsilon:s},p=H.runKernel(tb,f,h);return q(p,i.shape)}const jb=X({batchNorm_:Y$e});function Q$e(t,e,n,r,o,s){const i=j(t,"x","batchNorm"),a=j(e,"mean","batchNorm"),l=j(n,"variance","batchNorm");let u;o!=null&&(u=j(o,"scale","batchNorm"));let c;return r!=null&&(c=j(r,"offset","batchNorm")),P(i.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${i.rank}.`),P(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),P(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),u!=null&&P(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`),c!=null&&P(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`),jb(i,a,l,c,u,s)}const Z$e=X({batchNorm2d_:Q$e});function J$e(t,e,n,r,o,s){const i=j(t,"x","batchNorm"),a=j(e,"mean","batchNorm"),l=j(n,"variance","batchNorm");let u;o!=null&&(u=j(o,"scale","batchNorm"));let c;return r!=null&&(c=j(r,"offset","batchNorm")),P(i.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${i.rank}.`),P(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),P(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),u!=null&&P(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`),c!=null&&P(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`),jb(i,a,l,c,u,s)}const eke=X({batchNorm3d_:J$e});function tke(t,e,n,r,o,s){const i=j(t,"x","batchNorm"),a=j(e,"mean","batchNorm"),l=j(n,"variance","batchNorm");let u;o!=null&&(u=j(o,"scale","batchNorm"));let c;return r!=null&&(c=j(r,"offset","batchNorm")),P(i.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${i.rank}.`),P(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),P(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),u!=null&&P(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`),c!=null&&P(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`),jb(i,a,l,c,u,s)}const nke=X({batchNorm4d_:tke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rke(t,e,n){const r=j(t,"x","bincount"),o=j(e,"weights","bincount");P(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),P(n>=0,()=>`size must be non-negative, but got ${n}.`),P(o.size===r.size||o.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${o.shape}.`);const s={x:r,weights:o},i={size:n};return H.runKernel(WT,s,i)}const oke=X({bincount_:rke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ske(t,e){let n=j(t,"broadcastTo","x");const r=n.shape;if(zi(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const u=n.shape.slice();for(;u.length<e.length;)u.unshift(1);n=q(n,u)}const o=n.shape,s=Array.from(e);for(let u=e.length-1;u>=0;u--)if(o[u]===e[u])s[u]=1;else if(n.shape[u]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(s.map((u,c)=>u>1?c:-1).filter(u=>u>=0).length===0)return jl(n);const a={x:n},l={reps:s};return H.runKernel(Nm,a,l)}const oh=X({broadcastTo_:ske});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ike(t){const n={x:j(t,"x","ceil","float32")};return H.runKernel(Up,n)}const ake=X({ceil_:ike});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wb(t,e,n){zi(t),n=n||zd(e);const r={shape:t,value:e,dtype:n};return H.runKernel(rE,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lke(t,e,n){const r=j(t,"x","clipByValue");if(P(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return Wb(r.shape,e,r.dtype);const o={x:r},s={clipValueMin:e,clipValueMax:n};return H.runKernel(Gp,o,s)}const so=X({clipByValue_:lke});function uke(t){return br(t,0)}const cke=X({concat1d_:uke});function dke(t,e){return br(t,e)}const fke=X({concat2d_:dke});function hke(t,e){return br(t,e)}const pke=X({concat3d_:hke});function mke(t,e){return br(t,e)}const gke=X({concat4d_:mke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yke(t,e,n,r,o="NHWC",s=[1,1],i){const a=j(t,"x","conv2d","float32"),l=j(e,"filter","conv2d","float32");let u=a,c=!1;a.rank===3&&(c=!0,u=q(a,[1,a.shape[0],a.shape[1],a.shape[2]])),P(u.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`),P(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),kr("conv2d",r,i);const d=o==="NHWC"?u.shape[3]:u.shape[1];P(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),P(Kn(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),P(ou(s),()=>"Error in conv2D: Dilated rates should be larger than 0."),P(ou(n),()=>"Error in conv2D: Strides should be larger than 0.");const f={x:u,filter:l},h={strides:n,pad:r,dataFormat:o,dilations:s,dimRoundingMode:i},p=H.runKernel(Kx,f,h);return c?q(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const su=X({conv2d_:yke});function vke(t,e,n,r,o="NWC",s=1,i){const a=j(t,"x","conv1d"),l=j(e,"filter","conv1d");let u=a,c=!1;a.rank===2&&(c=!0,u=q(a,[1,a.shape[0],a.shape[1]])),P(u.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`),P(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),kr("conv1d",r,i),P(u.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`),P(Kn(n,s),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${s}'`),P(ou(s),()=>"Error in conv1D: Dilated rates should be larger than 0."),P(ou(n),()=>"Error in conv1D: Stride should be larger than 0."),P(o==="NWC",()=>`Error in conv1d: got dataFormat of ${o} but only NWC is currently supported.`);const d=q(l,[1,l.shape[0],l.shape[1],l.shape[2]]),f=q(u,[u.shape[0],1,u.shape[1],u.shape[2]]),g=su(f,d,[1,n],r,"NHWC",[1,s],i);return c?q(g,[g.shape[2],g.shape[3]]):q(g,[g.shape[0],g.shape[2],g.shape[3]])}const AV=X({conv1d_:vke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xke(t,e,n,r,o,s="NHWC",i){P(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let a=t,l=e,u=!1;e.rank===3&&(u=!0,l=q(e,[1,e.shape[0],e.shape[1],e.shape[2]]),a=[1,t[0],t[1],t[2]]),P(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),P(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),P(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const c=s==="NHWC"?a[3]:a[1],d=s==="NHWC"?l.shape[3]:l.shape[1];P(c===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`),P(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),kr("conv2dDerInput",o,i);const f={dy:l,filter:n},h={strides:r,pad:o,dataFormat:s,dimRoundingMode:i,inputShape:a},p=H.runKernel(qx,f,h);return u?q(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const OE=X({conv2DBackpropInput_:xke});function bke(t,e,n,r,o,s){const i=j(t,"x","conv2dTranspose"),a=j(e,"filter","conv2dTranspose");return OE(n,i,a,r,o,"NHWC",s)}const OV=X({conv2dTranspose_:bke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wke(t,e,n,r,o="NDHWC",s=[1,1,1]){const i=j(t,"x","conv3d"),a=j(e,"filter","conv3d");let l=i,u=!1;i.rank===4&&(u=!0,l=q(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),P(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),P(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),P(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),P(Kn(n,s),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),P(o==="NDHWC",()=>`Error in conv3d: got dataFormat of ${o} but only NDHWC is currently supported.`),P(ou(s),()=>"Error in conv3D: Dilated rates should be larger than 0."),P(ou(n),()=>"Error in conv3D: Strides should be larger than 0.");const c={x:l,filter:a},d={strides:n,pad:r,dataFormat:o,dilations:s},f=H.runKernel(Xx,c,d);return u?q(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const Ske=X({conv3d_:wke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cke(t,e,n,r,o){P(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let s=t,i=e,a=!1;e.rank===4&&(a=!0,i=q(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),s=[1,t[0],t[1],t[2],t[3]]);const l=s[4],u=i.shape[4];P(s.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${s.length}.`),P(i.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${i.rank}`),P(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),P(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),P(u===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${n.shape[4]}.`);const c={dy:i,filter:n},d={pad:o,strides:r,inputShape:s},f=H.runKernel(KT,c,d);return a?q(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const _V=X({conv3DBackpropInput_:Cke});function $ke(t,e,n,r,o){const s=j(t,"x","conv3dTranspose"),i=j(e,"filter","conv3dTranspose");return _V(n,s,i,r,o)}const kke=X({conv3dTranspose_:$ke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ike(t){const n={x:j(t,"x","cos","float32")};return H.runKernel(Hp,n)}const _E=X({cos_:Ike});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tke(t){const n={x:j(t,"x","cosh","float32")};return H.runKernel(Kp,n)}const RV=X({cosh_:Tke});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eke(t,e=0,n=!1,r=!1){const s={x:j(t,"x","cumprod")},i={axis:e,exclusive:n,reverse:r};return H.runKernel(qT,s,i)}const H$=X({cumprod_:Eke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nke(t,e=0,n=!1,r=!1){const s={x:j(t,"x","cumsum")},i={axis:e,exclusive:n,reverse:r};return H.runKernel(Yx,s,i)}const PV=X({cumsum_:Nke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ake(t,e,n,r=!1){const o=j(t,"x","denseBincount"),s=j(e,"weights","denseBincount");P(o.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${o.dtype}`),P(o.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${o.rank}.`),P(n>=0,()=>`size must be non-negative, but got ${n}.`),P(s.size===o.size||s.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${o.shape}, weights shape: ${s.shape}.`);const i={x:o,weights:s},a={size:n,binaryOutput:r};return H.runKernel(YT,i,a)}const DD=X({denseBincount_:Ake});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oke(t,e,n="NHWC"){const r=j(t,"x","depthToSpace","float32"),o=n==="NHWC"?r.shape[1]:r.shape[2],s=n==="NHWC"?r.shape[2]:r.shape[3],i=n==="NHWC"?r.shape[3]:r.shape[1];P(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),P(o*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${o} and ${e}  for depthToSpace with input shape
    ${r.shape}`),P(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${e} for depthToSpace with input shape
        ${r.shape}`),P(i%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${i} for depthToSpace with input shape ${r.shape}`);const a={x:r},l={blockSize:e,dataFormat:n};return H.runKernel(QT,a,l)}const _ke=X({depthToSpace_:Oke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rke(t,e,n,r,o="NHWC",s=[1,1],i){const a=j(t,"x","depthwiseConv2d","float32"),l=j(e,"filter","depthwiseConv2d","float32");let u=a,c=!1;a.rank===3&&(c=!0,u=q(a,[1,a.shape[0],a.shape[1],a.shape[2]])),P(u.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`),P(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const d=o==="NHWC"?u.shape[3]:u.shape[1];P(d===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${l.shape[2]}.`),kr("depthwiseConv2d",r,i);const f={x:u,filter:l},h={strides:n,pad:r,dataFormat:o,dilations:s,dimRoundingMode:i},p=H.runKernel(Qx,f,h);return c?q(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const RE=X({depthwiseConv2d_:Rke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pke(t,e,n,r,o=[1,1],s="NHWC"){const i=j(t,"x","dilation2d"),a=j(e,"filter","dilation2d");P(i.rank===3||i.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${i.rank}.`),P(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),P(s==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${s}`);let l=i,u=!1;i.rank===3&&(l=q(i,[1,i.shape[0],i.shape[1],i.shape[2]]),u=!0),P(l.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${a.shape[2]}`);const c={x:l,filter:a},d={strides:n,pad:r,dilations:o},f=H.runKernel(Zx,c,d);return u?q(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const Dke=X({dilation2d_:Pke});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fd(t,e){const n=t.length,r=[];for(let o=0;o<n;o++){const s=n-1-o,i=t[s]||1;(e[e.length-1-o]||1)>1&&i===1&&r.unshift(s)}return r}function bn(t,e){const n=[];for(let r=0;r<e.length;r++){const o=t[t.length-r-1],s=e.length-r-1,i=e[s];(o==null||o===1&&i>1)&&n.unshift(s)}return n}function Me(t,e){const n=Math.max(t.length,e.length),r=new Array(n);for(let o=0;o<n;o++){let s=t[t.length-o-1];s==null&&(s=1);let i=e[e.length-o-1];if(i==null&&(i=1),s===1)r[n-o-1]=i;else if(i===1)r[n-o-1]=s;else if(s!==i){const a=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(a)}else r[n-o-1]=s}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mke(t,e){let n=j(t,"a","equal","string_or_numeric"),r=j(e,"b","equal","string_or_numeric");[n,r]=nn(n,r),Me(n.shape,r.shape);const o={a:n,b:r};return H.runKernel(Jx,o)}const Xs=X({equal_:Mke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fke(t,e,n){const r=j(e,"a","where"),o=j(n,"b","where"),s=j(t,"condition","where","bool"),i=Me(Me(s.shape,r.shape),o.shape),a=oh(s,i),l=oh(r,i),u=oh(o,i),c={condition:a,t:l,e:u};return H.runKernel(Nb,c)}const sr=X({where_:Fke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lke(t){const n={x:j(t,"x","zerosLike")};return H.runKernel(Fb,n)}const Ze=X({zerosLike_:Lke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bke(t,e){let n=j(t,"a","div"),r=j(e,"b","div");[n,r]=nn(n,r);const o=_e(n,r),s=Ze(o),i=Xs(r,s);return sr(i,s,o)}const zke=X({divNoNan_:Bke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jke(t,e){const n=j(t,"t1","dot"),r=j(e,"t2","dot");P((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const o=n.rank===1?n.size:n.shape[1],s=r.rank===1?r.size:r.shape[0];if(P(o===s,()=>`Error in dot: inner dimensions of inputs must match, but got ${o} and ${s}.`),n.rank===1&&r.rank===1){const i=q(n,[1,-1]),a=q(r,[-1,1]),l=ot(i,a);return q(l,[])}else if(n.rank===1&&r.rank===2){const i=q(n,[1,-1]),a=q(r,[r.shape[0],r.shape[1]]),l=ot(i,a);return q(l,[l.size])}else if(n.rank===2&&r.rank===1){const i=q(r,[-1,1]),a=ot(n,i);return q(a,[a.size])}else{const i=q(r,[r.shape[0],r.shape[1]]);return ot(n,i)}}const Wke=X({dot_:jke});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vke(t,...e){const n=e.map((o,s)=>j(o,`tensors${s}`,"einsum")),r={equation:t};return H.runKernel(eE,n,r)}const kf=X({einsum_:Vke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uke(t){const n={x:j(t,"x","elu","float32")};return H.runKernel(Xp,n)}const Vb=X({elu_:Uke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gke(t){let e=j(t,"x","erf");P(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=Se(e,"float32"));const n={x:e};return H.runKernel(Yp,n)}const Hke=X({erf_:Gke});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PE(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function DV(t,e,n){const r=t.length+e.length,o=[];let s=0,i=0;for(let a=0;a<r;a++)n.indexOf(a)===-1?o.push(t[s++]):o.push(e[i++]);return o}function An(t,e){const n=[],r=t.length;for(let s=0;s<r;s++)e.indexOf(s)===-1&&n.push(t[s]);const o=e.map(s=>t[s]);return[n,o]}function dn(t,e){const n=e.map(r=>1);return DV(t,n,e)}function Ln(t,e,n){P(PE(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function Gt(t,e){if(PE(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function Za(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function rn(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kke(t,e=null,n=!1){const o={x:j(t,"x","max")},s={reductionIndices:e,keepDims:n};return H.runKernel(db,o,s)}const ls=X({max_:Kke});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qke(t,e=null,n=!1){const o={x:j(t,"x","min")},s={axis:e,keepDims:n};return H.runKernel(mb,o,s)}const Hv=X({min_:qke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xke(t,e){let n=j(t,"base","pow"),r=j(e,"exp","pow");[n,r]=nn(n,r);const o={a:n,b:r};return H.runKernel(fm,o)}const hd=X({pow_:Xke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function st(t,e){if((Fo(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&Fo(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return zb(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yke(t){const n={x:j(t,"x","sqrt","float32")};return H.runKernel($m,n)}const ar=X({sqrt_:Yke});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qke(t){const e=j(t,"x","square"),n={};return H.runKernel("Square",{x:e},n)}const Nt=X({square_:Qke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zke(t,e=null,n=!1){let r=j(t,"x","sum");r.dtype==="bool"&&(r=Se(r,"int32"));const o={x:r},s={axis:e,keepDims:n};return H.runKernel(Ob,o,s)}const Ae=X({sum_:Zke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jke(t,e="euclidean",n=null,r=!1){t=j(t,"x","norm");const o=MV(t,e,n);let s=o.shape;if(r){const i=Ge(n,t.shape);s=dn(o.shape,i)}return q(o,s)}function MV(t,e,n=null){if(t.rank===0)return tr(t);if(t.rank!==1&&n===null)return MV(q(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return Ae(tr(t),n);if(e===1/0)return ls(tr(t),n);if(e===-1/0)return Hv(tr(t),n);if(e==="euclidean"||e===2)return ar(Ae(hd(tr(t),st(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return ls(Ae(tr(t),n[0]),n[1]-1);if(e===1/0)return ls(Ae(tr(t),n[1]),n[0]);if(e===-1/0)return Hv(Ae(tr(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return ar(Ae(Nt(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const Ub=X({norm_:Jke});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eIe(t,e=null,n=!1){return Ub(t,"euclidean",e,n)}const tIe=X({euclideanNorm_:eIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nIe(t){const n={x:j(t,"x","exp")};return H.runKernel(Qp,n)}const Ys=X({exp_:nIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rIe(t,e=0){const n=j(t,"x","expandDims","string_or_numeric");P(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},o={dim:e};return H.runKernel(eb,r,o)}const gr=X({expandDims_:rIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oIe(t){const n={x:j(t,"x","expm1")};return H.runKernel(Zp,n)}const sIe=X({expm1_:oIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iIe(t,e){const n=j(t,"x","tile","string_or_numeric");P(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},o={reps:e};return H.runKernel(Nm,r,o)}const rs=X({tile_:iIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aIe(t,e,n,r="float32"){e==null&&(e=t);const o=Ue([t,e],r),s=t<=e?t:e;for(let a=0;a<s;++a)o.set(1,a,a);const i=q(o.toTensor(),[t,e]);if(n==null)return i;if(n.length===1)return rs(gr(i,0),[n[0],1,1]);if(n.length===2)return rs(gr(gr(i,0),0),[n[0],n[1],1,1]);if(n.length===3)return rs(gr(gr(gr(i,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const FV=X({eye_:aIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lIe(t){const n={x:j(t,"x","floor","float32")};return H.runKernel(Jp,n)}const Gb=X({floor_:lIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uIe(t,e,n=0,r=0){const o=j(t,"x","gather"),s=j(e,"indices","gather","int32"),i={x:o,indices:s},a={axis:n,batchDims:r};return H.runKernel(nb,i,a)}const DE=X({gather_:uIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cIe(t,e){let n=j(t,"a","greater","string_or_numeric"),r=j(e,"b","greater","string_or_numeric");[n,r]=nn(n,r),Me(n.shape,r.shape);const o={a:n,b:r};return H.runKernel(rb,o)}const lo=X({greater_:cIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dIe(t,e){let n=j(t,"a","greaterEqual","string_or_numeric"),r=j(e,"b","greaterEqual","string_or_numeric");[n,r]=nn(n,r),Me(n.shape,r.shape);const o={a:n,b:r};return H.runKernel(tm,o)}const xu=X({greaterEqual_:dIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fIe(t){const n={input:j(t,"input","imag")};return H.runKernel(iE,n)}const ME=X({imag_:fIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hIe(t){const n={x:j(t,"x","isFinite")};return H.runKernel(rm,n)}const pIe=X({isFinite_:hIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mIe(t){const n={x:j(t,"x","isInf")};return H.runKernel(om,n)}const gIe=X({isInf_:mIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yIe(t){const n={x:j(t,"x","isNaN")};return H.runKernel(sm,n)}const vIe=X({isNaN_:yIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xIe(t,e=.2){const r={x:j(t,"x","leakyRelu")},o={alpha:e};return H.runKernel(ob,r,o)}const FE=X({leakyRelu_:xIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bIe(t,e){let n=j(t,"a","less","string_or_numeric"),r=j(e,"b","less","string_or_numeric");[n,r]=nn(n,r),Me(n.shape,r.shape);const o={a:n,b:r};return H.runKernel(sb,o)}const Kv=X({less_:bIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wIe(t,e){let n=j(t,"a","lessEqual","string_or_numeric"),r=j(e,"b","lessEqual","string_or_numeric");[n,r]=nn(n,r),Me(n.shape,r.shape);const o={a:n,b:r};return H.runKernel(ib,o)}const Gd=X({lessEqual_:wIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SIe(t,e=5,n=1,r=1,o=.5){const s=j(t,"x","localResponseNormalization");P(s.rank===4||s.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${s.rank}.`),P(ld(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let i=s,a=!1;s.rank===3&&(a=!0,i=q(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const l={x:i},u={depthRadius:e,bias:n,alpha:r,beta:o},c=H.runKernel(cb,l,u);return a?q(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const CIe=X({localResponseNormalization_:SIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ie(t){const n={x:j(t,"x","log","float32")};return H.runKernel(im,n)}const Qs=X({log_:$Ie});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kIe(t){const n={x:j(t,"x","log1p")};return H.runKernel(am,n)}const LV=X({log1p_:kIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IIe(t,e){P(A$(t),()=>"The f passed in variableGrads(f) must be a function"),P(e==null||Array.isArray(e)&&e.every(u=>u instanceof Gv),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const u in H.registeredVariables)e.push(H.registeredVariables[u])}const r=n?e.filter(u=>!u.trainable):null,o=e.length;e=e.filter(u=>u.trainable),P(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${o} variables is trainable.`);const s=!0,{value:i,grads:a}=H.gradients(t,e,null,s);P(a.some(u=>u!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),P(i.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${i.rank} tensor`);const l={};return e.forEach((u,c)=>{a[c]!=null&&(l[u.name]=a[c])}),r!=null&&r.forEach(u=>l[u.name]=null),{value:i,grads:l}}function pd(t){return H.customGrad(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TIe(t){const n={x:j(t,"x","neg")};return H.runKernel(yb,n)}const tn=X({neg_:TIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EIe(t){const n={x:j(t,"x","softplus")};return H.runKernel(Cm,n)}const _m=X({softplus_:EIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NIe(t){const e=j(t,"x","logSigmoid");return pd(r=>({value:tn(_m(tn(r))),gradFunc:i=>K(i,Ud(tn(r)))}))(e)}const AIe=X({logSigmoid_:NIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OIe(t,e){let n=j(t,"a","sub"),r=j(e,"b","sub");[n,r]=nn(n,r);const o={a:n,b:r};return H.runKernel(Im,o)}const Re=X({sub_:OIe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ie(t,e=-1){const n=j(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return pd((o,s)=>{const a=ls(o,e,!0),l=Re(o,a),u=Re(Se(l,"float32"),Qs(Ae(Ys(l),e,!0)));return s([u]),{value:u,gradFunc:(d,f)=>{const[h]=f,p=!0,m=Ys(h);return Re(d,K(Ae(d,e,p),m))}}})(n)}const BV=X({logSoftmax_:_Ie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RIe(t,e=null,n=!1){const r=j(t,"x","logSumExp"),o=Ge(e,r.shape),s=ls(r,o,!0),i=Re(r,s),a=Ys(i),l=Ae(a,o),u=Qs(l),c=he(q(s,u.shape),u);if(n){const d=dn(c.shape,o);return q(c,d)}return c}const zV=X({logSumExp_:RIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PIe(t,e){const n=j(t,"a","logicalAnd","bool"),r=j(e,"b","logicalAnd","bool");Me(n.shape,r.shape);const o={a:n,b:r};return H.runKernel(ab,o)}const _i=X({logicalAnd_:PIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DIe(t){const n={x:j(t,"x","logicalNot","bool")};return H.runKernel(lb,n)}const LE=X({logicalNot_:DIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MIe(t,e){const n=j(t,"a","logicalOr","bool"),r=j(e,"b","logicalOr","bool");Me(n.shape,r.shape);const o={a:n,b:r};return H.runKernel(ub,o)}const jV=X({logicalOr_:MIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FIe(t,e){const n=j(t,"a","logicalXor","bool"),r=j(e,"b","logicalXor","bool");return Me(n.shape,r.shape),_i(jV(t,e),LE(_i(t,e)))}const LIe=X({logicalXor_:FIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BIe(t,e,n,r,o){const s=j(t,"x","maxPool"),i=1;let a=s,l=!1;s.rank===3&&(l=!0,a=q(s,[1,s.shape[0],s.shape[1],s.shape[2]])),P(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),P(Kn(n,i),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),kr("maxPool",r,o);const u={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:o},d=H.runKernel(fb,u,c);return l?q(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const BE=X({maxPool_:BIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zIe(t,e=[1,1,1],n,r,o,s="NDHWC"){const i=j(t,"x","maxPool3d");let a=i,l=!1;i.rank===4&&(l=!0,a=q(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),P(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),P(s==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),kr("maxPool3d",r,o);const u={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:o,dataFormat:s},d=H.runKernel(hb,u,c);return l?q(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const jIe=X({maxPool3d_:zIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WIe(t,e){let n=j(t,"a","maximum"),r=j(e,"b","maximum");[n,r]=nn(n,r),n.dtype==="bool"&&(n=Se(n,"int32"),r=Se(r,"int32")),Me(n.shape,r.shape);const o={a:n,b:r};return H.runKernel(lm,o)}const Ja=X({maximum_:WIe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VIe(t,e=null,n=!1){const o={x:j(t,"x","mean")},s={axis:e,keepDims:n};return H.runKernel(pb,o,s)}const cn=X({mean_:VIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pn(t,e="float32"){if(zi(t),e==="complex64"){const r=pn(t,"float32"),o=pn(t,"float32");return dd(r,o)}const n=Hn(re(t),e);return H.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function el(t,e="float32"){if(zi(t),e==="complex64"){const r=el(t,"float32"),o=pn(t,"float32");return dd(r,o)}const n=PT(re(t),e);return H.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UIe(t,e){let n=j(t,"a","minimum"),r=j(e,"b","minimum");[n,r]=nn(n,r),n.dtype==="bool"&&(n=Se(n,"int32"),r=Se(r,"int32")),Me(n.shape,r.shape);const o={a:n,b:r};return H.runKernel(um,o)}const cp=X({minimum_:UIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GIe(t,e,n){P(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=j(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");P(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const o=n==="reflect"?1:0;for(let a=0;a<r.rank;a++)P(e[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),P(e[a][0]>=0&&e[a][0]<=r.shape[a]-o&&e[a][1]>=0&&e[a][1]<=r.shape[a]-o,()=>`Padding in dimension ${a} cannot be greater than or equal to ${r.shape[a]-o} or less than 0 for input of shape ${r.shape}`);const s={paddings:e,mode:n},i={x:r};return H.runKernel(gb,i,s)}const HIe=X({mirrorPad_:GIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KIe(t,e){let n=j(t,"a","mod"),r=j(e,"b","mod");[n,r]=nn(n,r);const o={a:n,b:r};return H.runKernel(cm,o)}const qIe=X({mod_:KIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XIe(t,e=null,n=!1){t=j(t,"x","moments");const r=Ge(e,t.shape),o=cn(t,r,n);let s=o.shape;n||(s=dn(o.shape,r));const i=Nt(Re(Se(t,"float32"),q(o,s))),a=cn(i,r,n);return{mean:o,variance:a}}const zE=X({moments_:XIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YIe(t,e){let n=j(t,"a","notEqual","string_or_numeric"),r=j(e,"b","notEqual","string_or_numeric");[n,r]=nn(n,r),Me(n.shape,r.shape);const o={a:n,b:r};return H.runKernel(vb,o)}const qv=X({notEqual_:YIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QIe(t,e,n=1,r=0,o="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const i={indices:j(t,"indices","oneHot","int32")},a={dtype:o,depth:e,onValue:n,offValue:r};return H.runKernel(bb,i,a)}const WV=X({oneHot_:QIe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZIe(t){const n={x:j(t,"x","onesLike")};return H.runKernel(xb,n)}const Lo=X({onesLike_:ZIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JIe(t,e,n=0){const r=j(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const o={paddings:e,constantValue:n},s={x:r};return H.runKernel(Sb,s,o)}const jE=X({pad_:JIe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eTe(t,e,n){const r=j(t,"x","spaceToBatchND");P(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),P(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),P(r.shape.reduce((i,a,l)=>l>0&&l<=e.length?i&&(a+n[l-1][0]+n[l-1][1])%e[l-1]===0:i,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const o={x:r},s={blockShape:e,paddings:n};return H.runKernel(_b,o,s)}const WE=X({spaceToBatchND_:eTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tTe(t,e,n,r,o,s,i){o==null&&(o=[1,1]),s==null&&(s=1),r===0&&(r="valid");const a=j(t,"x","maxPool");let l=a,u=!1;a.rank===3&&(u=!0,l=q(a,[1,a.shape[0],a.shape[1],a.shape[2]])),P(Kn(s,o),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${s} and dilations '${o}'`);const c=jo(l.shape,e,s,o,r),d=[c.dilationHeight,c.dilationWidth];let f;r==="same"?f=rTe([c.filterHeight,c.filterWidth],d):f=[[0,0],[0,0]];const h=d[0]===1&&d[1]===1,[p,m]=nTe([c.inHeight,c.inWidth],d,f),g=h?r:"valid",y=h?l:WE(l,d,p),b=(n==="avg"?()=>EE(y,e,s,g,i):()=>BE(y,e,s,g,i))(),x=h?b:AE(b,d,m);return u?q(x,[x.shape[1],x.shape[2],x.shape[3]]):x}function nTe(t,e,n){const r=n.map(c=>c[0]),o=n.map(c=>c[1]),s=t.concat(r,o),i=e.map((c,d)=>(c-s[d]%c)%c),a=o.map((c,d)=>c+i[d]),l=e.map((c,d)=>[r[d],a[d]]),u=e.map((c,d)=>[0,i[d]]);return[l,u]}function rTe(t,e){const r=t.map((i,a)=>i+(i-1)*(e[a]-1)).map(i=>i-1),o=r.map(i=>Math.floor(i/2)),s=r.map((i,a)=>i-o[a]);return r.map((i,a)=>[o[a],s[a]])}const oTe=X({pool_:tTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sTe(t,e){const n=j(t,"x","prelu"),r=j(e,"alpha","prelu"),o={x:n,alpha:r};return H.runKernel(Cb,o)}const VE=X({prelu_:sTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iTe(t,e=null,n=!1){let r=j(t,"x","prod");r.dtype==="bool"&&(r=Se(r,"int32"));const o={x:r},s={axis:e,keepDims:n};return H.runKernel($b,o,s)}const aTe=X({prod_:iTe});var UE={exports:{}};UE.exports;(function(t){(function(e,n,r){function o(l){var u=this,c=a();u.next=function(){var d=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=d-(u.c=d|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function s(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function i(l,u){var c=new o(l),d=u&&u.state,f=c.next;return f.int32=function(){return c.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,d&&(typeof d=="object"&&s(d,c),f.state=function(){return s(c,{})}),f}function a(){var l=4022871197,u=function(c){c=String(c);for(var d=0;d<c.length;d++){l+=c.charCodeAt(d);var f=.02519603282416938*l;l=f>>>0,f-=l,f*=l,l=f>>>0,f-=l,l+=f*4294967296}return(l>>>0)*23283064365386963e-26};return u}n&&n.exports?n.exports=i:this.alea=i})($o,t)})(UE);var lTe=UE.exports,GE={exports:{}};GE.exports;(function(t){(function(e,n,r){function o(a){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function s(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function i(a,l){var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&s(c,u),d.state=function(){return s(u,{})}),d}n&&n.exports?n.exports=i:this.xor128=i})($o,t)})(GE);var uTe=GE.exports,HE={exports:{}};HE.exports;(function(t){(function(e,n,r){function o(a){var l=this,u="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function s(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function i(a,l){var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&s(c,u),d.state=function(){return s(u,{})}),d}n&&n.exports?n.exports=i:this.xorwow=i})($o,t)})(HE);var cTe=HE.exports,KE={exports:{}};KE.exports;(function(t){(function(e,n,r){function o(a){var l=this;l.next=function(){var c=l.x,d=l.i,f,h;return f=c[d],f^=f>>>7,h=f^f<<24,f=c[d+1&7],h^=f^f>>>10,f=c[d+3&7],h^=f^f>>>3,f=c[d+4&7],h^=f^f<<7,f=c[d+7&7],f=f^f<<13,h^=f^f<<9,c[d]=h,l.i=d+1&7,h};function u(c,d){var f,h=[];if(d===(d|0))h[0]=d;else for(d=""+d,f=0;f<d.length;++f)h[f&7]=h[f&7]<<15^d.charCodeAt(f)+h[f+1&7]<<13;for(;h.length<8;)h.push(0);for(f=0;f<8&&h[f]===0;++f);for(f==8?h[7]=-1:h[f],c.x=h,c.i=0,f=256;f>0;--f)c.next()}u(l,a)}function s(a,l){return l.x=a.x.slice(),l.i=a.i,l}function i(a,l){a==null&&(a=+new Date);var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(c.x&&s(c,u),d.state=function(){return s(u,{})}),d}n&&n.exports?n.exports=i:this.xorshift7=i})($o,t)})(KE);var dTe=KE.exports,qE={exports:{}};qE.exports;(function(t){(function(e,n,r){function o(a){var l=this;l.next=function(){var c=l.w,d=l.X,f=l.i,h,p;return l.w=c=c+1640531527|0,p=d[f+34&127],h=d[f=f+1&127],p^=p<<13,h^=h<<17,p^=p>>>15,h^=h>>>12,p=d[f]=p^h,l.i=f,p+(c^c>>>16)|0};function u(c,d){var f,h,p,m,g,y=[],v=128;for(d===(d|0)?(h=d,d=null):(d=d+"\0",h=0,v=Math.max(v,d.length)),p=0,m=-32;m<v;++m)d&&(h^=d.charCodeAt((m+32)%d.length)),m===0&&(g=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,m>=0&&(g=g+1640531527|0,f=y[m&127]^=h+g,p=f==0?p+1:0);for(p>=128&&(y[(d&&d.length||0)&127]=-1),p=127,m=4*128;m>0;--m)h=y[p+34&127],f=y[p=p+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,y[p]=h^f;c.w=g,c.X=y,c.i=p}u(l,a)}function s(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function i(a,l){a==null&&(a=+new Date);var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(c.X&&s(c,u),d.state=function(){return s(u,{})}),d}n&&n.exports?n.exports=i:this.xor4096=i})($o,t)})(qE);var fTe=qE.exports,XE={exports:{}};XE.exports;(function(t){(function(e,n,r){function o(a){var l=this,u="";l.next=function(){var d=l.b,f=l.c,h=l.d,p=l.a;return d=d<<25^d>>>7^f,f=f-h|0,h=h<<24^h>>>8^p,p=p-d|0,l.b=d=d<<20^d>>>12^f,l.c=f=f-h|0,l.d=h<<16^f>>>16^p,l.a=p-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):u+=a;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function s(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function i(a,l){var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&s(c,u),d.state=function(){return s(u,{})}),d}n&&n.exports?n.exports=i:this.tychei=i})($o,t)})(XE);var hTe=XE.exports,VV={exports:{}};const pTe={},mTe=Object.freeze(Object.defineProperty({__proto__:null,default:pTe},Symbol.toStringTag,{value:"Module"})),gTe=c8(mTe);(function(t){(function(e,n,r){var o=256,s=6,i=52,a="random",l=r.pow(o,s),u=r.pow(2,i),c=u*2,d=o-1,f;function h(x,w,S){var $=[];w=w==!0?{entropy:!0}:w||{};var C=y(g(w.entropy?[x,b(n)]:x??v(),3),$),k=new p($),I=function(){for(var T=k.g(s),E=l,_=0;T<u;)T=(T+_)*o,E*=o,_=k.g(1);for(;T>=c;)T/=2,E/=2,_>>>=1;return(T+_)/E};return I.int32=function(){return k.g(4)|0},I.quick=function(){return k.g(4)/4294967296},I.double=I,y(b(k.S),n),(w.pass||S||function(T,E,_,O){return O&&(O.S&&m(O,k),T.state=function(){return m(k,{})}),_?(r[a]=T,E):T})(I,C,"global"in w?w.global:this==r,w.state)}function p(x){var w,S=x.length,$=this,C=0,k=$.i=$.j=0,I=$.S=[];for(S||(x=[S++]);C<o;)I[C]=C++;for(C=0;C<o;C++)I[C]=I[k=d&k+x[C%S]+(w=I[C])],I[k]=w;($.g=function(T){for(var E,_=0,O=$.i,F=$.j,M=$.S;T--;)E=M[O=d&O+1],_=_*o+M[d&(M[O]=M[F=d&F+E])+(M[F]=E)];return $.i=O,$.j=F,_})(o)}function m(x,w){return w.i=x.i,w.j=x.j,w.S=x.S.slice(),w}function g(x,w){var S=[],$=typeof x,C;if(w&&$=="object")for(C in x)try{S.push(g(x[C],w-1))}catch{}return S.length?S:$=="string"?x:x+"\0"}function y(x,w){for(var S=x+"",$,C=0;C<S.length;)w[d&C]=d&($^=w[d&C]*19)+S.charCodeAt(C++);return b(w)}function v(){try{var x;return f&&(x=f.randomBytes)?x=x(o):(x=new Uint8Array(o),(e.crypto||e.msCrypto).getRandomValues(x)),b(x)}catch{var w=e.navigator,S=w&&w.plugins;return[+new Date,e,S,e.screen,b(n)]}}function b(x){return String.fromCharCode.apply(0,x)}if(y(r.random(),n),t.exports){t.exports=h;try{f=gTe}catch{}}else r["seed"+a]=h})(typeof self<"u"?self:$o,[],Math)})(VV);var yTe=VV.exports,vTe=lTe,xTe=uTe,bTe=cTe,wTe=dTe,STe=fTe,CTe=hTe,bu=yTe;bu.alea=vTe;bu.xor128=xTe;bu.xorwow=bTe;bu.xorshift7=wTe;bu.xor4096=STe;bu.tychei=CTe;var YE=bu;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UV{constructor(e,n,r,o,s){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const i=s||Math.random();this.random=YE.alea(i.toString())}nextValue(){if(!isNaN(this.nextVal)){const o=this.nextVal;return this.nextVal=NaN,o}let e,n,r=!1;for(;!r;){let o,s,i;do o=2*this.random()-1,s=2*this.random()-1,i=o*o+s*s;while(i>=1||i===0);const a=Math.sqrt(-2*Math.log(i)/i);e=this.mean+this.stdDev*o*a,n=this.mean+this.stdDev*s*a,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class $Te{constructor(e=0,n=1,r,o){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,o==null&&(o=Math.random()),typeof o=="number"&&(o=o.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=YE.alea(o)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kTe(t,e=0,n=1,r,o){if(zi(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const s=new UV(e,n,r,!1,o),i=Ue(t,r);for(let a=0;a<i.values.length;a++)i.values[a]=s.nextValue();return i.toTensor()}const ITe=X({randomNormal_:kTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TTe(t,e=0,n=1,r="float32",o){zi(t);const s=Ue(t,r),i=new $Te(e,n,null,o);for(let a=0;a<s.values.length;a++)s.values[a]=i.nextValue();return s.toTensor()}const Rm=X({randomUniform_:TTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dp(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const o={start:t,stop:e,step:n,dtype:r};return H.runKernel(hE,{},o)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ETe(t){const n={input:j(t,"input","real")};return H.runKernel(pE,n)}const Xv=X({real_:ETe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NTe(t){const n={x:j(t,"x","reciprocal")};return H.runKernel(hm,n)}const ATe=X({reciprocal_:NTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OTe(t){const n={x:j(t,"x","relu")};return H.runKernel(pm,n)}const wu=X({relu_:OTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Te(t){const n={x:j(t,"x","relu6")};return H.runKernel(mm,n)}const GV=X({relu6_:_Te});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RTe(t,e){const r={x:j(t,"x","reverse")},o={dims:e};return H.runKernel(Eb,r,o)}const iu=X({reverse_:RTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PTe(t){const n={x:j(t,"x","round")};return H.runKernel(gm,n)}const HV=X({round_:PTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DTe(t){const n={x:j(t,"x","rsqrt","float32")};return H.runKernel(ym,n)}const KV=X({rsqrt_:DTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MTe(t){const n={x:j(t,"x","selu")};return H.runKernel(vm,n)}const qV=X({selu_:MTe});function FTe(t,e,n,r,o,s=[1,1],i="NHWC"){const a=j(t,"x","separableConv2d"),l=j(e,"depthwiseFilter","separableConv2d"),u=j(n,"pointwiseFilter","separableConv2d");let c=a,d=!1;if(a.rank===3&&(d=!0,c=q(a,[1,a.shape[0],a.shape[1],a.shape[2]])),i==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");P(c.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`),P(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),P(u.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),P(u.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`),P(u.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`);const f=l.shape[2],h=l.shape[3];P(u.shape[2]===f*h,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${f*h}, but got ${u.shape[2]}.`);const p=RE(c,l,r,o,i,s),g=su(p,u,1,"valid",i);return d?q(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const XV=X({separableConv2d_:FTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LTe(t){const n={x:j(t,"x","sign")};return H.runKernel(wm,n)}const BTe=X({sign_:LTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zTe(t){const n={x:j(t,"x","sin","float32")};return H.runKernel(xm,n)}const YV=X({sin_:zTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jTe(t){const n={x:j(t,"x","sinh")};return H.runKernel(bm,n)}const QV=X({sinh_:jTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WTe(t,e,n){const r=j(t,"x","slice1d");return P(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),wt(r,[e],[n])}const QE=X({slice1d_:WTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VTe(t,e,n){const r=j(t,"x","slice2d");return P(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),wt(r,e,n)}const ZV=X({slice2d_:VTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UTe(t,e,n){const r=j(t,"x","slice3d");return P(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),wt(r,e,n)}const ZE=X({slice3d_:UTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GTe(t,e,n){const r=j(t,"x","slice4d");return P(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),wt(r,e,n)}const Yv=X({slice4d_:GTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HTe(t,e=-1){const n=j(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},o={dim:e};return H.runKernel(Pb,r,o)}const JE=X({softmax_:HTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KTe(t){P(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return H.runKernel(nE,e)}const JV=X({fft_:KTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qTe(t){P(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return H.runKernel(sE,e)}const K$=X({ifft_:qTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XTe(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const o=q(t,[n,e]);r=K$(o)}else{const o=[n,2*(e-1)],s=q(Xv(t),[n,e]),i=q(ME(t),[n,e]),a=iu(wt(s,[0,1],[n,e-2]),1),l=K(iu(wt(i,[0,1],[n,e-2]),1),st(-1)),u=br([s,a],1),c=br([i,l],1),d=q(dd(u,c),[o[0],o[1]]);r=K$(d)}if(r=Xv(r),t.rank===3&&t.shape[0]!==0){const o=r,s=t.shape[0];r=q(r,[s,r.shape[0]/s,r.shape[1]]),o.dispose()}return r}const YTe=X({irfft_:XTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QTe(t,e,n=0){const o={x:j(t,"x","split")},s={numOrSizeSplits:e,axis:n};return H.runKernel(Rb,o,s)}const ro=X({split_:QTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZTe(t,e){P(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let o;if(e!=null&&e<n){const p=t.shape.map(g=>0),m=t.shape.map(g=>g);m[t.shape.length-1]=e,o=wt(t,p,m),n=e}else if(e!=null&&e>n){const p=t.shape.map(m=>m);p[t.shape.length-1]=e-n,o=br([t,pn(p)],t.shape.length-1),n=e}else o=t;const s=Ze(o),i=q(dd(o,s),[r,n]),a=JV(i),l=Math.floor(n/2)+1,u=Xv(a),c=ME(a),d=ro(u,[l,n-l],u.shape.length-1),f=ro(c,[l,n-l],c.shape.length-1),h=o.shape.slice();return h[o.shape.length-1]=l,q(dd(d[0],f[0]),h)}const JTe=X({rfft_:ZTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eEe(t,e){let n=j(t,"a","squaredDifference"),r=j(e,"b","squaredDifference");[n,r]=nn(n,r),Me(n.shape,r.shape);const o={a:n,b:r},s={};return H.runKernel(km,o,s)}const tEe=X({squaredDifference_:eEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nEe(t,e){const n=j(t,"x","squeeze","string_or_numeric");return q(n,Xa(n.shape,e).newShape)}const Pm=X({squeeze_:nEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rEe(t,e=0){const n=vV(t,"tensors","stack","string_or_numeric");P(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&P(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,o={axis:e};return H.runKernel(wb,r,o)}const Ri=X({stack_:rEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oEe(t,e=0){const r={x:j(t,"x","step")},o={alpha:e};return H.runKernel(Am,r,o)}const Dm=X({step_:oEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sEe(t,e,n,r,o=0,s=0,i=0,a=0,l=0){const c={x:j(t,"x","stridedSlice","string_or_numeric")},d={begin:e,end:n,strides:r,beginMask:o,endMask:s,ellipsisMask:i,newAxisMask:a,shrinkAxisMask:l};return H.runKernel(xE,c,d)}const iEe=X({stridedSlice_:sEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aEe(t){const n={x:j(t,"x","tan","float32")};return H.runKernel(Tm,n)}const lEe=X({tan_:aEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pr(t,e){$W(t);const n=Bb(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return zb(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gc(t,e,n){if($W(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=Bb(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return zb(t,e,r,n)}function eU(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,o=e.rank>1?e.rank-1:1,s=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${o}.`;if(n.rank<o)throw new Error(s+` update.rank < ${o}. `);if(t.length<r+(n.rank-o))throw new Error(s+` Output shape length < ${r+(n.rank-o)}`);if(n.rank!==o+t.length-r)throw new Error(s+` update.rank != ${o+t.length-r}`);for(let i=0;i<o;++i)if(n.shape[i]!==e.shape[i])throw new Error(s+` updates.shape[${i}] (${n.shape[i]}) != indices.shape[${i}] (${e.shape[i]}).`);for(let i=0;i<n.rank-o;++i)if(n.shape[i+o]!==t[i+r])throw new Error(s+` updates.shape[${i+o}] (${n.shape[i+o]}) != shape[${i+o}] (${t[i+o]})`)}function uEe(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}eU(n,e,t)}function Su(t,e,n){const r=e.shape.length,o=r>1?e.shape[r-1]:1,s=n.length;let i=1;for(let d=o;d<s;++d)i*=n[d];const a=o<1?1:o,l=re(e.shape)/a,u=[...Ee(n.slice(0,o)),1],c=re(n);return{sliceRank:o,numUpdates:l,sliceSize:i,strides:u,outputSize:c}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cEe(t,e=1,n=!0){const r=j(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const o=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>o)throw new Error(`'k' passed to topk() must be <= the last dimension (${o}) but got ${e}`);const s={x:r},i={k:e,sorted:n},[a,l]=H.runKernel(bE,s,i);return{values:a,indices:l}}const dEe=X({topk_:cEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fEe(t,e=0,n=1,r,o){if(zi(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const s=new UV(e,n,r,!0,o),i=Ue(t,r);for(let a=0;a<i.values.length;a++)i.values[a]=s.nextValue();return i.toTensor()}const tU=X({truncatedNormal_:fEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hEe(t,e=0){const n=j(t,"x","unique","string_or_numeric");P(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},o={axis:e},[s,i]=H.runKernel(SE,r,o);return{values:s,indices:i}}const pEe=X({unique_:hEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mEe(t,e,n){const r=j(t,"x","unsortedSegmentSum"),o=j(e,"segmentIds","unsortedSegmentSum","int32");P(ld(n),()=>"numSegments must be of dtype int");const s={x:r,segmentIds:o},i={numSegments:n};return H.runKernel(Mb,s,i)}const nU=X({unsortedSegmentSum_:mEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gEe(t,e=0){const n=j(t,"x","unstack","string_or_numeric");P(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},o={axis:e};return H.runKernel(Db,r,o)}const au=X({unstack_:gEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yEe(t,e=!0,n,r){return H.makeVariable(t,e,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rU(t,e){const n=[];for(let s=0;s<e.length;s++)e[s]&&n.push(s);const r=Ue(t,"int32"),o=Ue([n.length,t.length],"int32");for(let s=0;s<n.length;s++){const i=r.indexToLoc(n[s]),a=s*t.length;o.values.set(i,a)}return o.toTensor()}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vEe(t,e,n){const r=j(t,"x","transpose");if(e==null&&(e=r.shape.map((i,a)=>a).reverse()),P(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(i=>{P(i>=0&&i<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const o={x:r},s={perm:e};return r.dtype==="complex64"?Q(()=>{let i=Xv(r),a=ME(r);return i=H.runKernel(pc,{x:i},s),a=H.runKernel(pc,{x:a},s),n&&(a=tn(a)),dd(i,a)}):H.runKernel(pc,o,s)}const Qe=X({transpose_:vEe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xEe(t,e){if(e==null)return t.shape.slice();if(at(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bEe(t,e,n,r){const o=j(t,"x","dropout");if(P(o.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${o.dtype} tensor instead.`),P(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof fn?o.clone():o;const s=xEe(o,n),i=1-e,a=_e(Gb(he(Rm(s,0,1,"float32",r),i)),i);return K(o,a)}const wEe=X({dropout_:bEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SEe(t,e,n,r,o,s="NHWC",i){let a=t;t.rank===3&&(a=q(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=q(e,[1,e.shape[0],e.shape[1],e.shape[2]])),P(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),P(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),P(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const u=s==="NHWC"?a.shape[3]:a.shape[1],c=s==="NHWC"?l.shape[3]:l.shape[1];P(u===n[2],()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`),P(c===n[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`),kr("conv2dDerFilter",o,i);const d={x:a,dy:l},f={strides:r,pad:o,dataFormat:s,dimRoundingMode:i,filterShape:n};return H.runKernel(GT,d,f)}const e2=X({conv2DBackpropFilter_:SEe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t2(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return K(t,Dm(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function n2(t,e){let n=e;const r=bn(t.shape,e.shape);return r.length>0&&(n=Ae(n,r)),q(n,t.shape)}function r2(t,e,n,r){if(e==="linear")return t;if(e==="relu")return wu(t);if(e==="elu")return Vb(t);if(e==="relu6")return GV(t);if(e==="prelu")return VE(t,n);if(e==="leakyrelu")return FE(t,r);if(e==="sigmoid")return Ud(t);throw new Error(`Unknown fused activation ${e}.`)}const o2=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CEe({x:t,filter:e,strides:n,pad:r,dataFormat:o="NHWC",dilations:s=[1,1],dimRoundingMode:i,bias:a,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(l=l||"linear",o2(H.state.gradientDepth,l)===!1){P(o==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${o} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let S=su(t,e,n,r,o,s,i);return a!=null&&(S=he(S,a)),r2(S,l,u,c)}const d=j(t,"x","conv2d","float32"),f=j(e,"filter","conv2d","float32");let h=d,p=!1;d.rank===3&&(p=!0,h=q(d,[1,d.shape[0],d.shape[1],d.shape[2]])),P(h.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${h.rank}.`),P(f.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${f.rank}.`),kr("fused conv2d",r,i);const m=o==="NHWC"?h.shape[3]:h.shape[1];P(f.shape[2]===m,()=>`Error in conv2d: depth of input (${m}) must match input depth for filter ${f.shape[2]}.`),P(Kn(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);const g=Fn(h.shape,f.shape,n,s,r,i);let y;a!=null&&(y=j(a,"bias","fused conv2d"),[y]=nn(y,d),o==="NHWC"?Me(g.outShape,y.shape):(P(y.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${y.shape.length}.`),P(y.shape.length===0||y.shape[0]===g.outChannels||y.shape[0]===1,()=>`Error in fused conv2d: bias shape (${y.shape}) is not compatible with the number of output channels (${g.outChannels})`)));let v;if(u!=null){const S=u.shape;if(P(S.length<=1||S.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${S.length}.`),S.length===1)P(S[0]===1||S[0]===g.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${S}) is not compatible with the number of output channels (${g.outChannels}).`);else if(S.length===3)try{Me(S,g.outShape)}catch{const C=`Error in fused conv2d: PReLU activation weights (${S}) is not compatible with the output shape of the conv2d (${g.outShape}).`;throw Error(C)}v=j(u,"prelu weights","fused conv2d")}const b=(S,$)=>{P(o==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${o} but only NHWC is currently supported.`);const[C,k,I,T]=$,E=t2(S,I,l);P(ru(s),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);const _=OE(k.shape,E,C,n,r),O=e2(k,E,C.shape,n,r),F=[_,O];if(T!=null){const M=n2(T,E);F.push(M)}return F},x={x:h,filter:f,bias:y,preluActivationWeights:v},w={strides:n,pad:r,dataFormat:o,dilations:s,dimRoundingMode:i,activation:l,leakyreluAlpha:c};return a==null?pd(($,C,k)=>{let I=H.runKernel(Wv,x,w);return k([C,$,I]),p&&(I=q(I,[I.shape[1],I.shape[2],I.shape[3]])),{value:I,gradFunc:b}})(h,f):pd(($,C,k,I)=>{let T=H.runKernel(Wv,x,w);return I([C,$,T,k]),p&&(T=q(T,[T.shape[1],T.shape[2],T.shape[3]])),{value:T,gradFunc:b}})(h,f,y)}const $Ee=X({fusedConv2d_:CEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kEe(t,e,n,r,o,s=[1,1],i){let a=t;t.rank===3&&(a=q(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=q(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={x:a,dy:l},c={strides:r,pad:o,dimRoundingMode:i,dilations:s,filterShape:n};return H.runKernel(ZT,u,c)}const IEe=X({depthwiseConv2dNativeBackpropFilter_:kEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TEe(t,e,n,r,o,s=[1,1],i){let a=e,l=!1;e.rank===3&&(l=!0,a=q(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={dy:a,filter:n},c={strides:r,pad:o,dimRoundingMode:i,dilations:s,inputShape:t},d=H.runKernel(JT,u,c);return l?q(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const EEe=X({depthwiseConv2dNativeBackpropInput_:TEe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NEe({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:o,activation:s="linear",preluActivationWeights:i,leakyreluAlpha:a=.2}){if(o2(H.state.gradientDepth,s)===!1){let T=ot(t,e,n,r);return o!=null&&(T=he(T,o)),r2(T,s,i,a)}let l=j(t,"a","fused matMul"),u=j(e,"b","fused matMul");[l,u]=nn(l,u);const c=n?l.shape[l.rank-2]:l.shape[l.rank-1],d=r?u.shape[u.rank-1]:u.shape[u.rank-2],f=n?l.shape[l.rank-1]:l.shape[l.rank-2],h=r?u.shape[u.rank-2]:u.shape[u.rank-1],p=l.shape.slice(0,-2),m=u.shape.slice(0,-2),g=re(p),y=re(m);P(c===d,()=>`Error in fused matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${l.shape} and ${u.shape} and transposeA=${n} and transposeB=${r} must match.`);const b=Me(l.shape.slice(0,-2),u.shape.slice(0,-2)).concat([f,h]),x=n?q(l,[g,c,f]):q(l,[g,f,c]),w=r?q(u,[y,h,d]):q(u,[y,d,h]);let S;o!=null&&(S=j(o,"bias","fused matMul"),[S]=nn(S,l),Me(b,S.shape));let $;i!=null&&($=j(i,"prelu weights","fused matMul"));const C=(T,E)=>{const[_,O,F,M]=E,L=t2(q(T,F.shape),F,s);let N,D;if(!n&&!r?(N=ot(L,O,!1,!0),D=ot(_,L,!0,!1)):!n&&r?(N=ot(L,O,!1,!1),D=ot(L,_,!0,!1)):n&&!r?(N=ot(O,L,!1,!0),D=ot(_,L,!1,!1)):(N=ot(O,L,!0,!0),D=ot(L,_,!0,!0)),o!=null){const U=n2(M,L);return[N,D,U]}else return[N,D]},k={a:x,b:w,bias:S,preluActivationWeights:$},I={transposeA:n,transposeB:r,activation:s,leakyreluAlpha:a};return o==null?pd((E,_,O)=>{const F=H.runKernel(jv,k,I);return O([E,_,F]),{value:q(F,b),gradFunc:C}})(x,w):pd((E,_,O,F)=>{const M=H.runKernel(jv,k,I);return F([E,_,M,O]),{value:q(M,b),gradFunc:C}})(x,w,S)}const MD=X({fusedMatMul_:NEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AEe(t,e,n,r,o="bilinear",s=0){const i=j(t,"image","cropAndResize"),a=j(e,"boxes","cropAndResize","float32"),l=j(n,"boxInd","cropAndResize","int32"),u=a.shape[0];P(i.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${i.rank}.`),P(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${a.shape}.`),P(l.rank===1&&l.shape[0]===u,()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${a.shape}.`),P(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),P(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),P(o==="bilinear"||o==="nearest",()=>`method must be bilinear or nearest, but was ${o}`);const c={image:i,boxes:a,boxInd:l},d={method:o,extrapolationValue:s,cropSize:r};return H.runKernel(XT,c,d)}const OEe=X({cropAndResize_:AEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ee(t){const e=j(t,"image","flipLeftRight","float32");P(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return H.runKernel(oE,n,{})}const REe=X({flipLeftRight_:_Ee});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PEe(t){const e=j(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];P(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),P(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const o=new Array(e.rank);return o.fill(1,0,n),o[n]=3,rs(e,o)}const DEe=X({grayscaleToRGB_:PEe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MEe(t){const e=j(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];P(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),P(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const o=e.dtype,s=Se(e,"float32"),i=Pr([.2989,.587,.114]);let a;switch(e.rank){case 2:a=kf("ij,j->i",s,i);break;case 3:a=kf("ijk,k->ij",s,i);break;case 4:a=kf("ijkl,l->ijk",s,i);break;case 5:a=kf("ijklm,m->ijkl",s,i);break;case 6:a=kf("ijklmn,n->ijklm",s,i);break;default:throw new Error("Not a valid tensor rank.")}return a=gr(a,-1),Se(a,o)}const FEe=X({rgbToGrayscale_:MEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LEe(t,e,n=0,r=.5){const o=j(t,"image","rotateWithOffset","float32");P(o.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${o.rank}.`);const s={image:o},i={radians:e,fillValue:n,center:r};return H.runKernel(CE,s,i)}const BEe=X({rotateWithOffset_:LEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hd(t,e,n,r,o,s){r==null&&(r=.5),o==null&&(o=Number.NEGATIVE_INFINITY),s==null&&(s=0);const i=t.shape[0];return n=Math.min(n,i),P(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),P(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),P(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),P(e.rank===1,()=>"scores must be a 1D tensor"),P(e.shape[0]===i,()=>`scores has incompatible shape with boxes. Expected ${i}, but was ${e.shape[0]}`),P(0<=s&&s<=1,()=>`softNmsSigma must be in [0, 1], but was '${s}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zEe(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY){const s=j(t,"boxes","nonMaxSuppression","float32"),i=j(e,"scores","nonMaxSuppression","float32"),a=Hd(s,i,n,r,o);n=a.maxOutputSize,r=a.iouThreshold,o=a.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:o};return H.runKernel(cE,{boxes:s,scores:i},l)}const jEe=X({nonMaxSuppression_:zEe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WEe(t,e,n){const r=VEe(t,e,n),o=r<0?-(r+1):r;t.splice(o,0,e)}function VEe(t,e,n){return GEe(t,e,n||UEe)}function UEe(t,e){return t>e?1:t<e?-1:0}function GEe(t,e,n){let r=0,o=t.length,s=0,i=!1;for(;r<o;){s=r+(o-r>>>1);const a=n(e,t[s]);a>0?r=s+1:(o=s,i=!a)}return i?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s2(t,e,n,r,o){return l2(t,e,n,r,o,0)}function i2(t,e,n,r,o,s){return l2(t,e,n,r,o,0,!1,s,!0)}function a2(t,e,n,r,o,s){return l2(t,e,n,r,o,s,!0)}function l2(t,e,n,r,o,s,i=!1,a=!1,l=!1){const u=[];for(let g=0;g<e.length;g++)e[g]>o&&u.push({score:e[g],boxIndex:g,suppressBeginIndex:0});u.sort(FD);const c=s>0?-.5/s:0,d=[],f=[];for(;d.length<n&&u.length>0;){const g=u.pop(),{score:y,boxIndex:v,suppressBeginIndex:b}=g;if(y<o)break;let x=!1;for(let w=d.length-1;w>=b;--w){const S=HEe(t,v,d[w]);if(S>=r){x=!0;break}if(g.score=g.score*KEe(r,c,S),g.score<=o)break}g.suppressBeginIndex=d.length,x||(g.score===y?(d.push(v),f.push(g.score)):g.score>o&&WEe(u,g,FD))}const h=d.length,p=n-h;a&&p>0&&(d.push(...new Array(p).fill(0)),f.push(...new Array(p).fill(0)));const m={selectedIndices:d};return i&&(m.selectedScores=f),l&&(m.validOutputs=h),m}function HEe(t,e,n){const r=t.subarray(e*4,e*4+4),o=t.subarray(n*4,n*4+4),s=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(o[0],o[2]),c=Math.min(o[1],o[3]),d=Math.max(o[0],o[2]),f=Math.max(o[1],o[3]),h=(a-s)*(l-i),p=(d-u)*(f-c);if(h<=0||p<=0)return 0;const m=Math.max(s,u),g=Math.max(i,c),y=Math.min(a,d),v=Math.min(l,f),b=Math.max(y-m,0)*Math.max(v-g,0);return b/(h+p-b)}function KEe(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function FD(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function qEe(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY){const s=j(t,"boxes","nonMaxSuppressionAsync"),i=j(e,"scores","nonMaxSuppressionAsync"),a=Hd(s,i,n,r,o);n=a.maxOutputSize,r=a.iouThreshold,o=a.scoreThreshold;const l=await Promise.all([s.data(),i.data()]),u=l[0],c=l[1],{selectedIndices:d}=s2(u,c,n,r,o);return s!==t&&s.dispose(),i!==e&&i.dispose(),Pr(d,"int32")}const XEe=qEe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YEe(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY,s=0){const i=j(t,"boxes","nonMaxSuppression"),a=j(e,"scores","nonMaxSuppression"),l=Hd(i,a,n,r,o,s);n=l.maxOutputSize,r=l.iouThreshold,o=l.scoreThreshold,s=l.softNmsSigma;const u={boxes:i,scores:a},c={maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:s},d=H.runKernel(fE,u,c);return{selectedIndices:d[0],selectedScores:d[1]}}const QEe=X({nonMaxSuppressionWithScore_:YEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function ZEe(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY,s=0){const i=j(t,"boxes","nonMaxSuppressionAsync"),a=j(e,"scores","nonMaxSuppressionAsync"),l=Hd(i,a,n,r,o,s);n=l.maxOutputSize,r=l.iouThreshold,o=l.scoreThreshold,s=l.softNmsSigma;const u=await Promise.all([i.data(),a.data()]),c=u[0],d=u[1],{selectedIndices:f,selectedScores:h}=a2(c,d,n,r,o,s);return i!==t&&i.dispose(),a!==e&&a.dispose(),{selectedIndices:Pr(f,"int32"),selectedScores:Pr(h)}}const JEe=ZEe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e2e(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY,s=!1){const i=j(t,"boxes","nonMaxSuppression"),a=j(e,"scores","nonMaxSuppression"),l=Hd(i,a,n,r,o,null),u=l.maxOutputSize,c=l.iouThreshold,d=l.scoreThreshold,f={boxes:i,scores:a},h={maxOutputSize:u,iouThreshold:c,scoreThreshold:d,padToMaxOutputSize:s},p=H.runKernel(dE,f,h);return{selectedIndices:p[0],validOutputs:p[1]}}const t2e=X({nonMaxSuppressionPadded_:e2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function n2e(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY,s=!1){const i=j(t,"boxes","nonMaxSuppressionAsync"),a=j(e,"scores","nonMaxSuppressionAsync"),l=Hd(i,a,n,r,o,null),u=l.maxOutputSize,c=l.iouThreshold,d=l.scoreThreshold,[f,h]=await Promise.all([i.data(),a.data()]),{selectedIndices:p,validOutputs:m}=i2(f,h,u,c,d,s);return i!==t&&i.dispose(),a!==e&&a.dispose(),{selectedIndices:Pr(p,"int32"),validOutputs:st(m,"int32")}}const r2e=n2e;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o2e(t,e,n=!1,r=!1){const o=j(t,"images","resizeBilinear");P(o.rank===3||o.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${o.rank}.`),P(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),P(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let s=o,i=!1;o.rank===3&&(i=!0,s=q(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const a={images:s},l={alignCorners:n,halfPixelCenters:r,size:e},u=H.runKernel(Tb,a,l);return i?q(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const oU=X({resizeBilinear_:o2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s2e(t,e,n=!1,r=!1){const o=j(t,"images","resizeNearestNeighbor");P(o.rank===3||o.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${o.rank}.`),P(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),P(o.dtype==="float32"||o.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),P(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let s=o,i=!1;o.rank===3&&(i=!0,s=q(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const a={images:s},l={alignCorners:n,halfPixelCenters:r,size:e},u=H.runKernel(Ib,a,l);return i?q(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const sU=X({resizeNearestNeighbor_:s2e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i2e(t,e="binary",n=!1,r=.5){const o=j(t,"image","threshold"),s=.2989,i=.587,a=.114,l=o.shape[0]*o.shape[1];let u=K(Pr([r]),255),c,d,f,h;if(P(o.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${o.rank}.`),P(o.shape[2]===3||o.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${o.shape[2]}.`),P(o.dtype==="int32"||o.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${o.dtype}.`),P(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),o.shape[2]===3){[c,d,f]=ro(o,[1,1,1],-1);const g=K(c,s),y=K(d,i),v=K(f,a);h=he(he(g,y),v)}else h=t;if(e==="otsu"){const g=oke(Se(HV(h),"int32"),xV([]),256);u=a2e(g,l)}const p=n?Gd(h,u):lo(h,u);return Se(K(p,255),"int32")}function a2e(t,e){let n=Pr([-1]),r=Pr([0]),o=Pr([0]),s,i,a,l,u,c;for(let d=0;d<t.size-1;d++){s=wt(t,0,d+1),i=wt(t,d+1),u=_e(Ae(s),e),c=_e(Ae(i),e);const f=Ae(K(s,dp(0,s.size)));a=_e(f,Ae(s));const h=Wb(i.shape,s.size),p=he(dp(0,i.size),h),m=K(i,p);l=_e(Ae(m),Ae(i));const g=Re(a,l),y=Re(a,l),v=K(u,c);o=K(K(v,g),y);const b=lo(o,r);r=sr(b,o,r),n=sr(b,Pr([d]),n)}return n}const l2e=X({threshold_:i2e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u2e(t,e,n="nearest",r="constant",o=0,s){const i=j(t,"image","transform","float32"),a=j(e,"transforms","transform","float32");P(i.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${i.rank}.`),P(a.rank===2&&(a.shape[0]===i.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),P(s==null||s.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${s}.`);const l={image:i,transforms:a},u={interpolation:n,fillMode:r,fillValue:o,outputShape:s};return H.runKernel(wE,l,u)}const c2e=X({transform_:u2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d2e(t,e,n){const r=j(t,"a","bandPart");P(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const o=r.shape,[s,i]=r.shape.slice(-2);let a,l;typeof e=="number"?(P(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),P(e<=s,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${s}).`),a=j(e<0?s:e,"numLower","bandPart")):(P(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=sr(Kv(e,0),s,cp(e,s))),typeof n=="number"?(P(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),P(n<=i,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${i}).`),l=j(n<0?i:n,"numUpper","bandPart")):(P(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=sr(Kv(n,0),i,cp(n,i)));const u=q(dp(0,s,1,"int32"),[-1,1]),c=dp(0,i,1,"int32"),d=Re(u,c),f=_i(Gd(d,a),xu(d,tn(l))),h=pn([s,i],r.dtype);return q(Ri(au(q(r,[-1,s,i])).map(p=>sr(f,p,h))),o)}const f2e=X({bandPart_:d2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h2e(t){let e;if(Array.isArray(t)){e=!1,P(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const o=t[0].shape[0];for(let s=1;s<t.length;++s)P(t[s].shape[0]===o,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[s].shape[0]} vs. ${o})`)}else e=!0,t=ro(t,t.shape[0],0).map(o=>Pm(o,[0]));P(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let o=0;o<t.length;++o)n.push(H.tidy(()=>{let s=r[o];if(o>0)for(let i=0;i<o;++i){const a=K(Ae(K(n[i],s)),n[i]);s=Re(s,a)}return _e(s,Ub(s,"euclidean"))}));return e?Ri(n,0):n}const p2e=X({gramSchmidt_:h2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m2e(t,e=!1){if(P(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return LD(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,u)=>l*u),r=au(q(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),o=[],s=[];r.forEach(l=>{const[u,c]=LD(l,e);o.push(u),s.push(c)});const i=q(Ri(o,0),t.shape),a=q(Ri(s,0),t.shape);return[i,a]}}function LD(t,e=!1){return H.tidy(()=>{P(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let o=FV(n),s=jl(t);const i=gc([[1]],[1,1]);let a=jl(i);const l=n>=r?r:n;for(let u=0;u<l;++u){const c=s,d=a,f=o;[a,s,o]=H.tidy(()=>{const h=wt(s,[u,u],[n-u,1]),p=Ub(h),m=wt(s,[u,u],[1,1]),g=sr(lo(m,0),gc([[-1]]),gc([[1]])),y=Re(m,K(g,p)),v=_e(h,y);v.shape[0]===1?a=jl(i):a=br([i,wt(v,[1,0],[v.shape[0]-1,v.shape[1]])],0);const b=tn(_e(ot(g,y),p)),x=wt(s,[u,0],[n-u,r]),w=K(b,a),S=Qe(a);if(u===0)s=Re(x,ot(w,ot(S,x)));else{const k=Re(x,ot(w,ot(S,x)));s=br([wt(s,[0,0],[u,r]),k],0)}const $=Qe(w),C=wt(o,[0,u],[n,o.shape[1]-u]);if(u===0)o=Re(C,ot(ot(C,a),$));else{const k=Re(C,ot(ot(C,a),$));o=br([wt(o,[0,0],[n,u]),k],1)}return[a,s,o]}),Ke([c,d,f])}return!e&&n>r&&(o=wt(o,[0,0],[n,r]),s=wt(s,[0,0],[r,r])),[o,s]})}const g2e=X({qr_:m2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yi={flipLeftRight:REe,grayscaleToRGB:DEe,resizeNearestNeighbor:sU,resizeBilinear:oU,rgbToGrayscale:FEe,rotateWithOffset:BEe,cropAndResize:OEe,nonMaxSuppression:jEe,nonMaxSuppressionAsync:XEe,nonMaxSuppressionWithScore:QEe,nonMaxSuppressionWithScoreAsync:JEe,nonMaxSuppressionPadded:t2e,nonMaxSuppressionPaddedAsync:r2e,threshold:l2e,transform:c2e},y2e={bandPart:f2e,gramSchmidt:p2e,qr:g2e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v2e=new Map,x2e=new Map;class Kd{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class Co{constructor(){this.classNameMap={}}static getMap(){return Co.instance==null&&(Co.instance=new Co),Co.instance}static register(e){Co.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function ce(t,e,n){P(t.className!=null,()=>"Class being registered does not have the static className property defined."),P(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),P(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const r=n,o=e+">"+r;return Co.register(t),v2e.set(o,t),x2e.set(t,o),t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tl extends Kd{minimize(e,n=!1,r){const{value:o,grads:s}=this.computeGradients(e,r);if(r!=null){const i=r.map(a=>({name:a.name,tensor:s[a.name]}));this.applyGradients(i)}else this.applyGradients(s);return Ke(s),n?o:(o.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return IIe(e,n)}dispose(){this.iterations_!=null&&Ke(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:st(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(tl,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iU extends tl{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=H.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{const s=H.registeredVariables[r],i=!1;this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${r}/accum_grad`,variable:Q(()=>Ze(s).variable(i))}),this.accumulatedUpdates[o]==null&&(this.accumulatedUpdates[o]={originalName:`${r}/accum_var`,variable:Q(()=>Ze(s).variable(i))});const a=Array.isArray(e)?e[o].tensor:e[r];if(a==null)return;const l=this.accumulatedGrads[o].variable,u=this.accumulatedUpdates[o].variable;Q(()=>{const c=he(K(l,this.rho),K(Nt(a),1-this.rho)),d=K(_e(ar(he(u,this.epsilon)),ar(he(l,this.epsilon))),a),f=he(K(u,this.rho),K(Nt(d),1-this.rho));l.assign(c),u.assign(f);const h=he(K(d,-this.learningRate),s);s.assign(h)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(Ke(this.accumulatedGrads.map(e=>e.variable)),Ke(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aU extends tl{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{const s=H.registeredVariables[r];this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${r}/accumulator`,variable:Q(()=>Wb(s.shape,this.initialAccumulatorValue).variable(!1))});const i=Array.isArray(e)?e[o].tensor:e[r];if(i==null)return;const a=this.accumulatedGrads[o].variable;Q(()=>{const l=he(a,Nt(i));a.assign(l);const u=he(K(_e(i,ar(he(l,H.backend.epsilon()))),-this.learningRate),s);s.assign(u)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&Ke(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lU extends tl{static get className(){return"Adam"}constructor(e,n,r,o=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=o,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Q(()=>{this.accBeta1=st(n).variable(),this.accBeta2=st(r).variable()}),o==null&&(this.epsilon=H.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Q(()=>{const r=Re(1,this.accBeta1),o=Re(1,this.accBeta2);n.forEach((s,i)=>{const a=H.registeredVariables[s],l=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${s}/m`,variable:Q(()=>Ze(a).variable(l))}),this.accumulatedSecondMoment[i]==null&&(this.accumulatedSecondMoment[i]={originalName:`${s}/v`,variable:Q(()=>Ze(a).variable(l))});const u=Array.isArray(e)?e[i].tensor:e[s];if(u==null)return;const c=this.accumulatedFirstMoment[i].variable,d=this.accumulatedSecondMoment[i].variable,f=he(K(c,this.beta1),K(u,1-this.beta1)),h=he(K(d,this.beta2),K(Nt(u),1-this.beta2)),p=_e(f,r),m=_e(h,o);c.assign(f),d.assign(h);const g=he(K(_e(p,he(ar(m),this.epsilon)),-this.learningRate),a);a.assign(g)}),this.accBeta1.assign(K(this.accBeta1,this.beta1)),this.accBeta2.assign(K(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Ke(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&Ke(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),Q(()=>{this.accBeta1.assign(hd(this.beta1,this.iterations_+1)),this.accBeta2.assign(hd(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uU extends tl{static get className(){return"Adamax"}constructor(e,n,r,o=null,s=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=o,this.decay=s,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Q(()=>{this.iteration=st(0).variable(),this.accBeta1=st(n).variable()}),o==null&&(this.epsilon=H.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Q(()=>{const r=Re(1,this.accBeta1),o=_e(-this.learningRate,he(K(this.iteration,this.decay),1));n.forEach((s,i)=>{const a=H.registeredVariables[s],l=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${s}/m`,variable:Ze(a).variable(l)}),this.accumulatedWeightedInfNorm[i]==null&&(this.accumulatedWeightedInfNorm[i]={originalName:`${s}/v`,variable:Ze(a).variable(l)});const u=Array.isArray(e)?e[i].tensor:e[s];if(u==null)return;const c=this.accumulatedFirstMoment[i].variable,d=this.accumulatedWeightedInfNorm[i].variable,f=he(K(c,this.beta1),K(u,1-this.beta1)),h=K(d,this.beta2),p=tr(u),m=Ja(h,p);c.assign(f),d.assign(m);const g=he(K(_e(o,r),_e(f,he(m,this.epsilon))),a);a.assign(g)}),this.iteration.assign(he(this.iteration,1)),this.accBeta1.assign(K(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Ke(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&Ke(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class u2 extends tl{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{const s=Array.isArray(e)?e[o].tensor:e[r];if(s==null)return;const i=H.registeredVariables[r];Q(()=>{const a=he(K(this.c,s),i);i.assign(a)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=js(st(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cU extends u2{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=st(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{const s=H.registeredVariables[r];this.accumulations[o]==null&&(this.accumulations[o]={originalName:`${r}/momentum`,variable:Q(()=>Ze(s).variable(!1))});const i=this.accumulations[o].variable,a=Array.isArray(e)?e[o].tensor:e[r];a!=null&&Q(()=>{let l;const u=he(K(this.m,i),a);this.useNesterov?l=he(K(this.c,he(a,K(u,this.m))),s):l=he(K(this.c,u),s),i.assign(u),s.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&Ke(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dU extends tl{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,o=null,s=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=o,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=s,o==null&&(this.epsilon=H.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{const s=H.registeredVariables[r],i=!1;this.accumulatedMeanSquares[o]==null&&(this.accumulatedMeanSquares[o]={originalName:`${r}/rms`,variable:Q(()=>Ze(s).variable(i))}),this.accumulatedMoments[o]==null&&(this.accumulatedMoments[o]={originalName:`${r}/momentum`,variable:Q(()=>Ze(s).variable(i))}),this.accumulatedMeanGrads[o]==null&&this.centered&&(this.accumulatedMeanGrads[o]={originalName:`${r}/mg`,variable:Q(()=>Ze(s).variable(i))});const a=Array.isArray(e)?e[o].tensor:e[r];if(a==null)return;const l=this.accumulatedMeanSquares[o].variable,u=this.accumulatedMoments[o].variable;Q(()=>{const c=he(K(l,this.decay),K(Nt(a),1-this.decay));if(this.centered){const d=this.accumulatedMeanGrads[o].variable,f=he(K(d,this.decay),K(a,1-this.decay)),h=_e(K(a,this.learningRate),ar(Re(c,he(Nt(f),this.epsilon)))),p=he(K(u,this.momentum),h);l.assign(c),d.assign(f),u.assign(p);const m=Re(s,p);s.assign(m)}else{const d=he(K(l,this.decay),K(Nt(a),1-this.decay)),f=he(K(u,this.momentum),_e(K(a,this.learningRate),ar(he(d,this.epsilon))));l.assign(d),u.assign(f);const h=Re(s,f);s.assign(h)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&Ke(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&Ke(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&Ke(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b2e=[iU,aU,lU,uU,cU,dU,u2];function w2e(){for(const t of b2e)ce(t)}function c2(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(re(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const o=e.shape,s=o[o.length-1];let i=1;for(let d=0;d<o.length-1;++d)i*=o[d];const a=t.shape,l=o.slice();l.pop();let u=1;for(let d=s;d<n;++d)u*=a[d],l.push(a[d]);const c=[...Ee(t.shape).map(d=>d/u),1].slice(0,s);return[l,i,u,c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q$=-2,S2e=-1;function d2(t,e,n){const r=t.shape.length;P(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),P(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let o=0;o<r;++o)P(e[o]+n[o]<=t.shape[o],()=>`Error in slice${r}D: begin[${o}] + size[${o}] (${e[o]+n[o]}) would overflow input.shape[${o}] (${t.shape[o]})`)}function C2e(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function f2(t,e,n){const r=[];for(let o=0;o<t.length;o++)r[o]=Math.ceil((e[o]-t[o])/n[o]);return r}function fU(t,e,n,r){const o=[...t];for(let s=o.length;s<r.length;s++)o.push(1);for(let s=0;s<n;s++)s===0?o[e]=1:(o.splice(e,0,1),o.pop());return o}function hU(t,e,n){return n<=t?n:n-(e-1)}function pU(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function $2e(t,e,n,r,o,s,i,a,l){const u=t.length;let c=new Array(u),d=new Array(u),f=new Array(u);if(e.length&&n>0){const h=e[0],p=n+1;c=mU(i,h,p,r,t),d=gU(a,h,p,o,t),f=fU(s,h,p,t)}else for(let h=0;h<u;h++)c[h]=vU(i,r,s,t,h,l),d[h]=xU(a,o,s,t,h,l),f[h]=yU(s,h,l);return{begin:c,end:d,strides:f}}function mU(t,e,n,r,o){const s=[...o],i=pU(n,e);for(let a=0;a<s.length;a++)if(i.indexOf(a)>-1)s[a]=0;else{const l=hU(e,n,a);let u=r[l];t&1<<l&&(u=0),s[a]=u}return s}function gU(t,e,n,r,o){const s=[...o],i=pU(n,e);for(let a=0;a<s.length;a++)if(i.indexOf(a)>-1)s[a]=Number.MAX_SAFE_INTEGER;else{const l=hU(e,n,a);let u=r[l];t&1<<l&&(u=Number.MAX_SAFE_INTEGER),s[a]=u}for(let a=0;a<s.length;a++){const l=o[a];s[a]<0&&(s[a]+=l),s[a]=Jl(0,s[a],o[a])}return s}function yU(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function vU(t,e,n,r,o,s){let i=e[o];const a=n[o]||1;(t&1<<o||s&1<<o||i==null)&&(a>0?i=Number.MIN_SAFE_INTEGER:i=Number.MAX_SAFE_INTEGER);const l=r[o];return i<0&&(i+=l),i=Jl(0,i,l-1),i}function xU(t,e,n,r,o,s){let i=e[o];const a=n[o]||1;(t&1<<o||s&1<<o||i==null)&&(a>0?i=Number.MAX_SAFE_INTEGER:i=Number.MIN_SAFE_INTEGER);const l=r[o];return i<0&&(i+=l),a>0?i=Jl(0,i,l):i=Jl(-1,i,l-1),i}function h2(t,e,n){let r=n.length;for(let o=0;o<n.length;o++)if(n[o]>1){r=o;break}for(let o=r+1;o<n.length;o++)if(e[o]>0||n[o]!==t[o])return!1;return!0}function p2(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function Hb(t,e,n){let r;const o=t.shape.length;typeof e=="number"?r=[e,...new Array(o-1).fill(0)]:e.length<o?r=e.concat(new Array(o-e.length).fill(0)):r=e.slice(),r.forEach(i=>{P(i!==-1,()=>"slice() does not support negative begin indexing.")});let s;return n==null?s=new Array(o).fill(-1):typeof n=="number"?s=[n,...new Array(o-1).fill(-1)]:n.length<o?s=n.concat(new Array(o-n.length).fill(-1)):s=n,s=s.map((i,a)=>i>=0?i:(P(i===-1,()=>`Negative size values should be exactly -1 but got ${i} for the slice() size at index ${a}.`),t.shape[a]-r[a])),[r,s]}function m2(t,e,n,r,o,s,i,a,l){let u;if(r==null?(u=new Array(e.length),u.fill(1)):u=r,i!=null&&i&i-1)throw new Error("Multiple ellipses in slice is not allowed.");let c=!1;const d={dims:u.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:u.slice(),beginMask:o,endMask:s,ellipsisMask:i,newAxisMask:a,shrinkAxisMask:l};for(let b=0;b<d.dims;b++)c&&1<<b&a&&d.numAddAxisAfterEllipsis++,1<<b&i&&(c=!0);c||(d.ellipsisMask|=1<<d.dims,d.dims++);const f={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};k2e(d,f);let h=!0,p=!0,m=!0;const g=[],y=[];for(let b=0;b<t.length;++b){if(f.strides[b]===0)throw Error(`strides[${b}] must be non-zero`);const x=!!(f.shrinkAxisMask&1<<b),w=t[b];if(w===-1){g.push(x?1:-1);continue}const S=[f.beginMask&1<<b,f.endMask&1<<b],$=[f.strides[b]>0?0:-1,f.strides[b]>0?w:w-1];if(x&&f.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&f.strides[b]===1;const C=!!(f.beginMask&1<<b&&f.endMask&1<<b);if(f.beginValid&&f.endValid){if(x){const E=f.begin[b]<0?w+f.begin[b]:f.begin[b];if(f.begin[b]=E,f.end[b]=f.begin[b]+1,E<0||E>=w)throw Error(`slice index ${f.begin[b]} of dimension ${b} out of bounds.`)}else f.begin[b]=BD(f.begin[b],0,f.strides[b],w,S,$),f.end[b]=BD(f.end[b],1,f.strides[b],w,S,$);const T=f.strides[b]===1&&f.begin[b]===0&&f.end[b]===w;h=h&&T,p=p&&(b===0&&f.strides[b]===1||T)}else h=h&&f.strides[b]===1&&C,p=p&&(b===0&&f.strides[b]===1||C);let k,I=!1;if(f.beginValid&&f.endValid?(k=f.end[b]-f.begin[b],I=!0):x?(k=1,I=!0):C&&w>=0&&(f.strides[b]<0?k=-w:k=w,I=!0),I){let T;k===0||k<0!=f.strides[b]<0?T=0:T=Math.trunc(k/f.strides[b])+(k%f.strides[b]!==0?1:0),g.push(T)}else g.push(-1)}for(let b=0;b<f.finalShapeGatherIndices.length;++b){const x=f.finalShapeGatherIndices[b];x>=0?y.push(g[x]):x===q$&&y.push(1)}return{finalShapeSparse:y.filter((b,x)=>f.finalShapeGatherIndices[x]!==q$),finalShape:y,isIdentity:h,sliceDim0:p,isSimpleSlice:m,begin:f.begin,end:f.end,strides:f.strides}}function k2e(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const o=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<o;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(q$),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(S2e),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function BD(t,e,n,r,o,s){if(o[e])return n>0?s[e]:s[e+1&1];{const i=t<0?r+t:t;return i<s[0]?s[0]:i>s[1]?s[1]:i}}const I2e=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:d2,computeFlatOffset:p2,computeOutShape:f2,getNormalizedAxes:$2e,isSliceContinous:h2,maskToAxes:C2e,parseSliceParams:Hb,sliceInfo:m2,startForAxis:vU,startIndicesWithElidedDims:mU,stopForAxis:xU,stopIndicesWithElidedDims:gU,stridesForAxis:yU,stridesWithElidedDims:fU},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class T2e{static sgd(e){return new u2(e)}static momentum(e,n,r=!1){return new cU(e,n,r)}static rmsprop(e,n=.9,r=0,o=null,s=!1){return new dU(e,n,r,o,s)}static adam(e=.001,n=.9,r=.999,o=null){return new lU(e,n,r,o)}static adadelta(e=.001,n=.95,r=null){return new iU(e,n,r)}static adamax(e=.002,n=.9,r=.999,o=null,s=0){return new uU(e,n,r,o,s)}static adagrad(e,n=.1){return new aU(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yl=T2e;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E2e=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function bU(){return new Promise(t=>E2e(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g2(t,e){const n=t[0].length;t.forEach((o,s)=>{P(o.length===n,()=>`Error in concat${n}D: rank of tensors[${s}] must be the same as the rank of the rest (${n})`)}),P(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((o,s)=>{for(let i=0;i<n;i++)P(i===e||o[i]===r[i],()=>`Error in concat${n}D: Shape of tensors[${s}] (${o}) does not match the shape of the rest (${r}) along the non-concatenated axis ${s}.`)})}function Ws(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ts;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(ts||(ts={}));function wU(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let o=1;o<n.length;++o){const s=n[o],i=r[r.length-n.length+o],a=r[i];if(s>=0)if(a>=0){if(a!==s)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${o+t}] = ${s} but shape[${o+t}] = ${a}`)}else r[i]=s}return r}function SU(t){const e={FIRST_DIM_SIZE:ts.FIRST_DIM_SIZE,VALUE_ROWIDS:ts.VALUE_ROWIDS,ROW_LENGTHS:ts.ROW_LENGTHS,ROW_SPLITS:ts.ROW_SPLITS,ROW_LIMITS:ts.ROW_LIMITS,ROW_STARTS:ts.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function CU(t){return t.length===0?0:t[0]===ts.FIRST_DIM_SIZE?t.length-1:t.length}function $U(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let o=0;o<Math.min(n,r-1);++o){const s=t[o],i=e[o+1];if(s>=0&&i>=0&&s!==1&&s!==i)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${o-t.length}] = ${s} but ragged tensor input.flatValues.shape[${o-t.length}] = ${i}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y2=30;function Kb(t){return t<=y2?t:O$(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v2(t,e,n){const r=n*(typeof t=="number"?t:t[0]),o=e*(typeof t=="number"?t:t[1]);return[r,o]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mm(t,e,n,r=!0){let o=[];if(r)o=o.concat(e.slice(0)),o.push(t[0]/n),o=o.concat(t.slice(1));else{o=o.concat(t[0]);const s=e.length;for(let i=0;i<s;++i)o=o.concat([t[i+1]/e[i],e[i]]);o=o.concat(t.slice(s+1))}return o}function Fm(t,e,n=!0){const r=[];if(n){r.push(e);for(let o=e+1;o<t;++o)o<=2*e?(r.push(o),r.push(o-(e+1))):r.push(o)}else{const o=[],s=[];for(let i=1;i<t;++i)i>=e*2+1||i%2===1?s.push(i):o.push(i);r.push(...o),r.push(0),r.push(...s)}return r}function Lm(t,e,n,r=!0){const o=[];r?o.push(t[0]/n):o.push(t[0]*n);for(let s=1;s<t.length;++s)s<=e.length?r?o.push(e[s-1]*t[s]):o.push(t[s]/e[s-1]):o.push(t[s]);return o}function x2(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function b2(t,e,n){const r=t.slice(0,1);for(let o=0;o<n;++o)r.push(t[o+1]-e[o][0]-e[o][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qb=1.7580993408473768,Xb=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w2=.3275911,S2=.254829592,C2=-.284496736,$2=1.421413741,k2=-1.453152027,I2=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pi(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function kU(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function IU(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let o=0;o<t.length;o+=4)n[Math.floor(o/4)]=t[o],r[Math.floor(o/4)]=t[o+1];return{real:n,imag:r}}function TU(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let o=2;o<t.length;o+=4)n[Math.floor(o/4)]=t[o],r[Math.floor(o/4)]=t[o+1];return{real:n,imag:r}}function T2(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function EU(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function NU(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let o=0;o<Math.ceil(t/2);o++){const s=(e?2:-2)*Math.PI*(o/t);n[o]=Math.cos(s),r[o]=Math.sin(s)}return{real:n,imag:r}}function AU(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),o=Math.cos(r),s=Math.sin(r);return{real:o,imag:s}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ew="->",N2e=/->/g,zD=",",jD="...";function E2(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(N2e,"").length)/Ew.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${Ew}").`);const[r,o]=t.split(Ew);P(r.indexOf(jD)===-1,()=>`The ellipsis notation ("${jD}") is not supported yet.`);const s=r.split(zD),i=s.length;if(e!==i)throw new Error(`Expected ${i} input tensors, received ${e}`);if(i>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const a=[];for(let f=0;f<o.length;++f){const h=o[f];if(!s.some(p=>p.indexOf(h)!==-1))throw new Error(`Output subscripts contain the label ${h} not present in the input subscripts.`);a.indexOf(h)===-1&&a.push(h)}for(let f=0;f<r.length;++f){const h=r[f];a.indexOf(h)===-1&&h!==zD&&a.push(h)}const l=new Array(s.length);for(let f=0;f<i;++f){if(new Set(s[f].split("")).size!==s[f].length)throw new Error(`Found duplicate axes in input component ${s[f]}. Support for duplicate axes in input is not implemented yet.`);l[f]=[];for(let h=0;h<s[f].length;++h)l[f].push(a.indexOf(s[f][h]))}const u=a.length,c=o.length,d=[];for(let f=c;f<u;++f)d.push(f);return{allDims:a,summedDims:d,idDims:l}}function N2(t,e){let n=new Array(t);n.fill(-1);for(let o=0;o<e.length;++o)n[e[o]]=o;const r=[];for(let o=0;o<t;++o)n[o]===-1&&r.push(o);return n=n.filter(o=>o!==-1),{permutationIndices:n,expandDims:r}}function A2(t,e,n){const r=new Array(t);for(let o=0;o<n.length;++o){const s=n[o].shape;for(let i=0;i<e[o].length;++i)r[e[o][i]]===void 0?r[e[o][i]]=s[i]:P(r[e[o][i]]===s[i],()=>`Expected dimension ${r[e[o][i]]} at axis ${i} of input shaped ${JSON.stringify(s)}, but got dimension ${s[i]}`)}}function O2(t,e){const n=t,r=[];let o=0;t.length===0&&n.push(-1),o=t.length+1;for(let i=0;i<o;++i)r.push([]);const s=[];for(let i=0;i<n.length;++i){const a=n[i],l=A2e(e,a);for(const u of l)s.indexOf(u)===-1&&(r[i].push(u),s.push(u))}return{path:n,steps:r}}function _2(t){return t.every((e,n)=>e===n)}function A2e(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function R2(t,e,n=0){let r=[];if(typeof e=="number")P(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const o=e.reduce((i,a)=>(a===-1&&(i+=1),i),0);P(o<=1,()=>"There should be only one negative value in split array.");const s=e.indexOf(-1);if(s!==-1){const i=e.reduce((a,l)=>l>0?a+l:a);e[s]=t.shape[n]-i}P(t.shape[n]===e.reduce((i,a)=>i+a),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OU(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function _U(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function RU(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PU(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function DU(t,e){return`size ${t} must be non-negative, not ${e}`}function MU(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function FU(t,e){const n=re(t),r=re(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function LU(t,e){const n=re(t),r=re(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X$(){return"segment ids must be >= 0"}function BU(){return"segment ids are not increasing"}function zU(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function jU(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WU(t,e){let n=!1,r;for(t<=y2?(r=t,n=!0):r=O$(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=O$(t,r+1);return r}function VU(t,e,n){const r=[],o=t.length;for(let s=0;s<o;s++)s!==e?r.push(t[s]):r.push(n);return r}function P2(t,e,n,r){const o=e.shape.length,s=t.shape.length;if(r!==0&&(r<-o||r>o))throw new Error(`Expect batchDims in the range of [-${o}, ${o}], but got ${r}`);if(r<0&&(r+=o),r>s)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${s}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let d=0;d<r;++d)if(t.shape[d]!==e.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${e.shape[d]}.`);const i=t.shape[n],a=[];let l=1,u=1,c=1;for(let d=0;d<r;++d)a.push(t.shape[d]),l*=t.shape[d];for(let d=r;d<n;d++)a.push(t.shape[d]),u*=t.shape[d];for(let d=r;d<o;d++)a.push(e.shape[d]);for(let d=n+1;d<s;d++)a.push(t.shape[d]),c*=t.shape[d];return{batchSize:l,sliceSize:c,outerSize:u,dimSize:i,outputShape:a}}const O2e=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:P2,computeOutShape:VU,segOpComputeOptimalWindowSize:WU},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Di(t){try{return t.map(e=>Da(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function UU(t){return t.map(e=>$a(e))}const _2e=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:S2,ERF_A2:C2,ERF_A3:$2,ERF_A4:k2,ERF_A5:I2,ERF_P:w2,PARALLELIZE_THRESHOLD:y2,get RowPartitionType(){return ts},SELU_SCALE:Xb,SELU_SCALEALPHA:qb,applyActivation:r2,assertAndGetBroadcastShape:Me,assertAxesAreInnerMostDims:Ln,assertParamsConsistent:g2,assignToTypedArray:EU,axesAreInnerMostDims:PE,calculateShapes:Su,checkEinsumDimSizes:A2,checkPadOnDimRoundingMode:kr,combineLocations:DV,combineRaggedTensorToTensorShapes:wU,complexWithEvenIndex:IU,complexWithOddIndex:TU,computeConv2DInfo:Fn,computeConv3DInfo:Qa,computeDefaultPad:TE,computeDilation2DInfo:Om,computeOptimalWindowSize:Kb,computeOutAndReduceShapes:An,computeOutShape:Ws,computePool2DInfo:jo,computePool3DInfo:ji,convertConv2DDataFormat:Wi,decodeEinsumEquation:E2,eitherStridesOrDilationsAreOne:Kn,expandShapeToKeepDim:dn,exponent:AU,exponents:NU,fromStringArrayToUint8:UU,fromUint8ToStringArray:Di,getAxesPermutation:Gt,getBroadcastDims:fd,getComplexWithIndex:T2,getEinsumComputePath:O2,getEinsumPermutation:N2,getFusedBiasGradient:n2,getFusedDyActivation:t2,getImageCenter:v2,getInnerMostAxes:rn,getPermuted:Fm,getRaggedRank:CU,getReductionAxes:bn,getReshaped:Mm,getReshapedPermuted:Lm,getRowPartitionTypesHelper:SU,getSliceBeginCoords:x2,getSliceSize:b2,getSparseFillEmptyRowsIndicesDenseShapeMismatch:OU,getSparseFillEmptyRowsNegativeIndexErrorMessage:_U,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:RU,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:MU,getSparseReshapeInputOutputMismatchErrorMessage:LU,getSparseReshapeInputOutputMultipleErrorMessage:FU,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:PU,getSparseReshapeNegativeOutputDimErrorMessage:DU,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:jU,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:X$,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:BU,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:zU,getUndoAxesPermutation:Za,isIdentityPermutation:_2,log:dCe,mergeRealAndImagArrays:Pi,prepareAndValidate:c2,prepareSplitSize:R2,segment_util:O2e,shouldFuse:o2,slice_util:I2e,splitRealAndImagArrays:kU,stridesOrDilationsArePositive:ou,tupleValuesAreOne:ru,upcastType:Br,validateDefaultValueShape:$U,validateInput:uEe,validateUpdateShape:eU,warn:Zr},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */w2e();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GU={kernelName:Lx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>K(t,Dm(Se(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R2e={kernelName:Mp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Nt(Se(n,"float32")),o=ar(Re(st(1),r));return tn(_e(t,o))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P2e={kernelName:Fp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=ar(Re(Nt(Se(n,"float32")),1));return _e(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D2e={kernelName:Wd,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,o=Me(n.shape,r.shape);return{a:()=>{let a=t;const l=bn(n.shape,o);return l.length>0&&(a=Ae(a,l)),q(a,n.shape)},b:()=>{let a=t;const l=bn(r.shape,o);return l.length>0&&(a=Ae(a,l)),q(a,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M2e={kernelName:FT,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((r,o)=>{n[o]=()=>t.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F2e={kernelName:Bx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ze(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L2e={kernelName:zx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ze(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B2e={kernelName:Lp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>_e(t,ar(Re(st(1),Nt(Se(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z2e={kernelName:Bp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=ar(he(st(1),Nt(Se(n,"float32"))));return _e(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j2e={kernelName:Wp,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,o=Me(n.shape,r.shape);return{a:()=>{const a=he(Nt(n),Nt(r));let l=K(t,_e(r,a));const u=bn(n.shape,o);return u.length>0&&(l=Ae(l,u)),q(l,n.shape)},b:()=>{const a=he(Nt(n),Nt(r));let l=tn(K(t,_e(n,a)));const u=bn(r.shape,o);return u.length>0&&(l=Ae(l,u)),q(l,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W2e={kernelName:zp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>_e(t,he(Nt(Se(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V2e={kernelName:jp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>_e(t,Re(st(1),Nt(Se(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U2e(t,e,n,r,o,s){const i=j(t,"dy","avgPool3dGrad"),a=j(e,"input","avgPool3dGrad");let l=i,u=a,c=!1;a.rank===4&&(c=!0,l=q(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]]),u=q(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),P(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),P(u.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${u.rank}.`),kr("avgPool3dGrad",o,s);const d={dy:l,input:u},f={filterSize:n,strides:r,pad:o,dimRoundingMode:s},h=H.runKernel(jT,d,f);return c?q(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const G2e=X({avgPool3dGrad_:U2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H2e={kernelName:Wx,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:o,strides:s,pad:i,dimRoundingMode:a}=n;return{x:()=>G2e(t,r,o,s,i,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K2e(t,e,n,r,o){const s=j(t,"dy","avgPoolGrad"),i=j(e,"input","avgPoolGrad");P(i.rank===s.rank,()=>`Rank of input (${i.rank}) does not match rank of dy (${s.rank})`);let a=i,l=s,u=!1;i.rank===3&&(u=!0,a=q(i,[1,i.shape[0],i.shape[1],i.shape[2]]),l=q(s,[1,s.shape[0],s.shape[1],s.shape[2]])),P(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),P(a.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${a.rank}.`);const c={dy:l,input:a},d={filterSize:n,strides:r,pad:o},f=H.runKernel(zT,c,d);return u?q(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const q2e=X({avgPoolGrad_:K2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X2e={kernelName:jx,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:o,strides:s,pad:i}=n;return{x:()=>q2e(t,r,o,s,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y2e={kernelName:Vx,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,o]=e,{transposeA:s,transposeB:i}=n;return!s&&!i?{a:()=>ot(t,o,!1,!0),b:()=>ot(r,t,!0,!1)}:!s&&i?{a:()=>ot(t,o,!1,!1),b:()=>ot(t,r,!0,!1)}:s&&!i?{a:()=>ot(o,t,!1,!0),b:()=>ot(r,t,!1,!1)}:{a:()=>ot(o,t,!0,!0),b:()=>ot(t,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q2e={kernelName:Ux,gradFunc:(t,e,n)=>{const{blockShape:r,crops:o}=n;return{x:()=>WE(t,r,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z2e={kernelName:aCe,gradFunc:(t,e,n)=>{const r=n,o=r.inputShape,s=r.shape,i=Array.from(s);for(let l=o.length-1;l>=0;l--)if(o[l]===s[l])i[l]=1;else if(o[l]!==1)throw new Error(`broadcastTo(): [${o}] cannot be broadcast to [${s}].`);const a=[];for(let l=0;l<i.length;l++)i[l]>1&&a.push(l);return{x:()=>Ae(t,a,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J2e={kernelName:Vp,gradFunc:t=>({x:()=>t.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eNe={kernelName:Up,gradFunc:t=>({x:()=>Ze(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tNe={kernelName:Gp,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:o,clipValueMax:s}=n;return{x:()=>sr(_i(xu(r,o),Gd(r,s)),t,Ze(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nNe={kernelName:Gx,inputsToSave:["x"],gradFunc:GU.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rNe={kernelName:Hx,saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(l=>l.shape),{axis:o}=n,s=Ge(o,e[0].shape)[0],i=r.map(l=>l[s]);return ro(t,i,s).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oNe={kernelName:Kx,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,o]=e,{dilations:s,strides:i,pad:a,dataFormat:l}=n;return P(ru(s),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`),{x:()=>OE(r.shape,t,o,i,a,l),filter:()=>e2(r,t,o.shape,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sNe={kernelName:qx,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,o]=e,{strides:s,pad:i,dataFormat:a,dimRoundingMode:l}=n;return{dy:()=>su(t,o,s,i,a,1,l),filter:()=>e2(t,r,o.shape,s,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iNe(t,e,n,r,o){let s=t;t.rank===4&&(s=q(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let i=e;i.rank===4&&(i=q(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),P(s.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${s.shape}.`),P(i.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${i.shape}.`),P(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),P(s.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${s.shape[4]}) must match input depth in filter (${n[3]}.`),P(i.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${i.shape[4]}) must match output depth for filter (${n[4]}).`);const a={x:s,dy:i},l={strides:r,pad:o,filterShape:n};return H.runKernel(HT,a,l)}const aNe=X({conv3DBackpropFilter_:iNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lNe={kernelName:Xx,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:o,pad:s}=n;P(ru(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[i,a]=e;return{x:()=>_V(i.shape,t,a,o,s),filter:()=>aNe(i,t,a.shape,o,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uNe={kernelName:Hp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>K(tn(YV(Se(n,"float32"))),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cNe={kernelName:Kp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>K(QV(Se(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dNe={kernelName:Yx,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:o,exclusive:s,reverse:i}=n;return{x:()=>{const a=Gt([o],r.rank);let l=PV(t,o,s,!i);return a!=null&&(l=Qe(l,a)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fNe={kernelName:Qx,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:o,pad:s,dimRoundingMode:i}=n,a=r??[1,1];P(ru(a),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[l,u]=e;return P(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),P(u.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${u.rank}.`),P(l.shape[3]===u.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${u.shape[2]}.`),P(Kn(o,a),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${o} and dilations '${a}'.`),kr("depthwiseConv2d",s,i),{x:()=>EEe(l.shape,t,u,o,s,a,i),filter:()=>IEe(l,t,u.shape,o,s,a,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hNe={kernelName:Zx,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,o]=e,s={x:r,filter:o,dy:t},i={x:r,filter:o,dy:t};return{x:()=>H.runKernel(_$,s,n),filter:()=>H.runKernel(R$,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pNe={kernelName:Xp,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r={dy:t,y:n};return{x:()=>H.runKernel(tE,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mNe={kernelName:Yp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=K(Ys(tn(Nt(n))),2/Math.sqrt(Math.PI));return{x:()=>K(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gNe={kernelName:Qp,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>K(t,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yNe={kernelName:eb,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>q(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vNe={kernelName:Zp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>K(t,Ys(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xNe={kernelName:Jp,gradFunc:t=>({x:()=>Ze(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bNe={kernelName:em,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,o=Me(n.shape,r.shape);return{a:()=>{const a=_e(t,Se(r,"float32")),l=bn(n.shape,o);return l.length>0?q(Ae(a,l),n.shape):a},b:()=>{let a=K(t,Se(n,"float32"));const l=bn(r.shape,o);l.length>0&&(a=q(Ae(a,l),r.shape));const u=Nt(r);return tn(_e(a,Se(u,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wNe={kernelName:tb,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[o,s,i,a]=e,l=a??st(1),u=bn(s.shape,o.shape),c=[];if(s.rank===1){for(let x=0;x<o.shape.length-1;++x)c.push(o.shape[x]);c.push(1)}const d=Re(o,s),f=K(t,l),h=KV(he(i,st(r))),p=K(K(K(h,h),h),st(-.5));return{x:()=>s.rank===1?q(K(K(t,rs(q(h,[1,1,1,s.shape[0]]),c)),l),o.shape):q(K(K(t,h),l),o.shape),mean:()=>{let x=K(K(h,st(-1)),f);return s.rank===1&&(x=Ae(x,u)),q(x,s.shape)},variance:()=>{let x=K(K(p,d),f);return s.rank===1&&(x=Ae(x,u)),q(x,s.shape)},scale:()=>{const x=K(d,h);let w=K(t,x);return s.rank===1&&(w=Ae(w,u)),q(w,s.shape)},offset:()=>{let x=t;return s.rank===1&&(x=Ae(x,u)),q(x,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SNe={kernelName:nb,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,o]=e,{axis:s,batchDims:i}=n,a=Ge(s,r.shape)[0],l=(u,c,d)=>()=>{const f=u.shape,h=c.size,p=f.slice(0,a),m=p.length,g=f.slice(s,f.length).slice(1),y=g.length,v=WD(0,m),b=WD(m+1,m+1+y),x=VD([p,[h],g]),w=q(d,x),S=q(c,[h]),$=VD([[m],v,b]),C=Qe(w,$);let k=nU(C,S,u.shape[a]);const I=Za($);return k=Qe(k,I),k};if(i===1){const u=r.shape[0],c=r.split(u,0);return{x:()=>Ri(c.map((h,p)=>l(h,o.slice(p,1),t.slice(p,1))())).reshape(r.shape),indices:()=>o}}else return{x:l(r,o,t),indices:()=>o}}};function WD(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function VD(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CNe={kernelName:tm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>Ze(n),b:()=>Ze(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ne={kernelName:nm,gradFunc:t=>({x:()=>Se(t,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kNe={kernelName:rm,gradFunc:t=>({x:()=>Ze(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const INe={kernelName:om,gradFunc:t=>({x:()=>Ze(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TNe={kernelName:sm,gradFunc:t=>({x:()=>Ze(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ENe={kernelName:ob,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{alpha:o}=n,s=lo(r,0);return{x:()=>sr(s,t,K(t,o))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NNe={kernelName:am,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>_e(t,he(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ANe={kernelName:im,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>_e(t,Se(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ONe={kernelName:uCe,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:o}=n;return{logits:()=>{const i=Ys(r);return Re(t,K(Ae(t,o,!0),i))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ne(t,e,n,r=5,o=1,s=1,i=.5){const a={x:t,y:e,dy:n},l={depthRadius:r,bias:o,alpha:s,beta:i};return H.runKernel(aE,a,l)}const RNe=X({localResponseNormalizationBackprop_:_Ne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PNe={kernelName:cb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,o]=e,{depthRadius:s,bias:i,alpha:a,beta:l}=n;return{x:()=>RNe(r,o,t,s,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HU(t,e,n,r){return e.rank<n.rank&&(e=q(e,dn(e.shape,r))),t.rank<n.rank&&(t=q(t,dn(t.shape,r))),{x:()=>K(t,Se(Xs(n,e),t.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UD={kernelName:db,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:o}=r,s=e[0],i=e[1],a=Ge(o,s.shape),l=HU(t,i,s,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DNe={kernelName:lm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>K(t,Se(xu(n,r),"float32")),b:()=>K(t,Se(Kv(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MNe(t,e,n,r,o,s,i){const a=j(t,"dy","maxPool3dGrad"),l=j(e,"input","maxPool3dGrad"),u=j(n,"output","maxPool3dGrad");let c=a,d=l,f=u,h=!1;l.rank===4&&(h=!0,c=q(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),d=q(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),f=q(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),P(c.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`),P(d.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),P(f.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${f.rank}.`),kr("maxPool3dGrad",s,i);const p={dy:c,input:d,output:f},m={filterSize:r,strides:o,pad:s,dimRoundingMode:i},g=H.runKernel(uE,p,m);return h?q(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}const FNe=X({maxPool3dGrad_:MNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LNe={kernelName:hb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,o]=e,{filterSize:s,strides:i,pad:a,dimRoundingMode:l}=n;return{x:()=>FNe(t,r,o,s,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BNe(t,e,n,r,o,s,i){const a=j(t,"dy","maxPoolGrad"),l=j(e,"input","maxPoolGrad"),u=j(n,"output","maxPoolGrad");P(l.rank===a.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${a.rank})`),P(a.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${a.rank}.`),P(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),kr("maxPoolGrad",s,i);const c={dy:a,input:l,output:u},d={filterSize:r,strides:o,pad:s,dimRoundingMode:i};return H.runKernel(lE,c,d)}const zNe=X({maxPoolGrad_:BNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jNe={kernelName:fb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,o]=e,{filterSize:s,strides:i,pad:a}=n;return{x:()=>zNe(t,r,o,s,i,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WNe={kernelName:pb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:o}=n,s=Ge(o,r.shape),a=An(r.shape,s)[1],l=re(a);return{x:()=>{const c=r.shape.slice();s.forEach(h=>{c[h]=1});const d=q(t,c);return _e(K(d,el(r.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VNe={kernelName:mb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:o}=r,[s,i]=e,a=Ge(o,s.shape),l=HU(t,i,s,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UNe={kernelName:um,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>K(t,Se(Gd(n,r),"float32")),b:()=>K(t,Se(lo(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GNe={kernelName:gb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:o}=n,s=o.map(i=>i[0]);return{x:()=>wt(t,s,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HNe={kernelName:cm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,o=Me(n.shape,r.shape);return{a:()=>{const a=bn(n.shape,o);return a.length>0?q(Ae(t,a),n.shape):t},b:()=>{const a=K(t,tn(Gb(_e(n,r)))),l=bn(r.shape,o);return l.length>0?q(Ae(a,l),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KNe={kernelName:dm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,o=Me(n.shape,r.shape);return{a:()=>{const a=K(t,Se(r,"float32")),l=bn(n.shape,o);return l.length>0?q(Ae(a,l),n.shape):a},b:()=>{const a=K(t,Se(n,"float32")),l=bn(r.shape,o);return l.length>0?q(Ae(a,l),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qNe={kernelName:yb,gradFunc:t=>({x:()=>tn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XNe={kernelName:bb,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>pn(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YNe={kernelName:xb,gradFunc:t=>({x:()=>Ze(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QNe={kernelName:wb,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:r}=n;return au(t,r).map(s=>()=>s)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GD={kernelName:Sb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:o}=n,s=o.map(i=>i[0]);return{x:()=>wt(t,s,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZNe={kernelName:fm,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,o]=e,s=n,i=r,a=Me(s.shape,i.shape);return{a:()=>{const c=Se(i,"float32");let d=K(t,K(c,hd(s,Re(c,st(1)))));const f=bn(s.shape,a);return f.length>0&&(d=Ae(d,f)),q(d,s.shape)},b:()=>{const c=lo(s,0),d=sr(c,Qs(s),Ze(s));let f=K(t,K(o,d));const h=bn(i.shape,a);return h.length>0&&(f=Ae(f,h)),q(f,i.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JNe={kernelName:Cb,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,o=lo(n,0);return{x:()=>sr(o,t,K(t,r)),alpha:()=>{let s=sr(o,Ze(t),K(t,n));const i=bn(r.shape,t.shape);return i.length>0&&(s=Ae(s,i)),q(s,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eAe(t,e,n){const r=t.shape.slice();r[n]=1;const o=q(e,r),s=H$(t,n,!0,!1),i=H$(t,n,!0,!0),a=K(s,i);return K(o,a)}function tAe(t,e,n){const r=t.shape.length,o=r-n.length,s=Gt(n,r);let i=t;s!=null&&(i=Qe(t,s));const a=i.shape.slice(),u=a.splice(r-n.length,n.length).reduce((f,h)=>f*h,1);a.push(u);const c=i.reshape(a);let d=eAe(c,e,o);if(d=d.reshape(i.shape),s!=null){const f=Za(s);d=Qe(d,f)}return d}const nAe={kernelName:$b,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:o}=n;let s=[];return o==null?s=r.shape.map((i,a)=>a):typeof o=="number"?s=[o]:s=o,{x:()=>tAe(r,t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rAe={kernelName:qp,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,o=Me(n.shape,r.shape);return{a:()=>{const a=_e(t,Se(r,"float32")),l=bn(n.shape,o);return l.length>0?q(Ae(a,l),n.shape):a},b:()=>{let a=K(t,Se(n,"float32"));const l=bn(r.shape,o);l.length>0&&(a=q(Ae(a,l),r.shape));const u=Nt(r);return tn(_e(a,Se(u,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oAe={kernelName:hm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>_e(t,tn(Nt(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sAe={kernelName:mm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=K(Gd(n,6),Dm(n));return{x:()=>K(t,Se(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iAe={kernelName:pm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>K(t,Se(Dm(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aAe={kernelName:kb,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>q(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lAe={kernelName:Tb,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,o={dy:t,images:r};return{images:()=>H.runKernel(gE,o,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uAe={kernelName:Ib,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,o={dy:t,images:r};return{images:()=>H.runKernel(mE,o,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cAe={kernelName:Eb,gradFunc:(t,e,n)=>{const{dims:r}=n,o=Ge(r,t.shape);return{x:()=>iu(t,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dAe={kernelName:gm,gradFunc:t=>({x:()=>Ze(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fAe={kernelName:ym,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>tn(_e(t,K(hd(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hAe={kernelName:Nb,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>Se(Ze(n),"float32"),t:()=>K(t,Se(n,t.dtype)),e:()=>K(t,Se(LE(n),t.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pAe={kernelName:vm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=lo(n,st(0)),o=st(qb),s=st(Xb),i=K(t,s),a=K(K(t,o),Ys(Se(n,"float32")));return sr(r,i,a)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mAe={kernelName:Sm,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>K(t,K(n,Re(st(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gAe={kernelName:wm,gradFunc:t=>({x:()=>Ze(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yAe={kernelName:xm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>K(_E(Se(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vAe={kernelName:bm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>K(RV(Se(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xAe={kernelName:Ab,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:o,size:s}=n,i=r.shape,[a,l]=Hb(r,o,s),u=[];for(let c=0;c<t.rank;c++)u.push([a[c],i[c]-a[c]-l[c]]);return{x:()=>jE(t,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bAe={kernelName:Pb,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:o}=n,s=!0,i=K(t,r);return{logits:()=>Re(i,K(Ae(i,[o],s),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wAe={kernelName:Cm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>K(t,Ud(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HD={kernelName:_b,gradFunc:(t,e,n)=>{const{blockShape:r,paddings:o}=n;return{x:()=>AE(t,r,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KD={kernelName:Rb,gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>br(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SAe={kernelName:$m,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>_e(t,K(ar(Se(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CAe={kernelName:yE,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>K(t,K(Se(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ae={kernelName:km,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,o=st(2);return{a:()=>K(t,K(o,Re(n,r))),b:()=>K(t,K(o,Re(r,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kAe={kernelName:Am,gradFunc:t=>({x:()=>Ze(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IAe={kernelName:Im,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,o=Me(n.shape,r.shape);return{a:()=>{let a=t;const l=bn(n.shape,o);return l.length>0&&(a=Ae(a,l)),q(a,n.shape)},b:()=>{let a=t;const l=bn(r.shape,o);return l.length>0&&(a=Ae(a,l)),q(tn(a),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TAe={kernelName:Ob,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,o=r.shape.slice(),{axis:s}=n;Ge(s,r.shape).forEach(u=>{o[u]=1});const a=q(t,o),l=K(a,el(r.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EAe={kernelName:Tm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>_e(t,Nt(_E(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NAe={kernelName:Em,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>K(Re(st(1),Nt(n)),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AAe={kernelName:Nm,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:o}=n;return{x:()=>{let i=Ze(r);if(r.rank===1)for(let a=0;a<o[0];++a)i=he(i,wt(t,[a*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let a=0;a<o[0];++a)for(let l=0;l<o[1];++l)i=he(i,wt(t,[a*r.shape[0],l*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let a=0;a<o[0];++a)for(let l=0;l<o[1];++l)for(let u=0;u<o[2];++u)i=he(i,wt(t,[a*r.shape[0],l*r.shape[1],u*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let a=0;a<o[0];++a)for(let l=0;l<o[1];++l)for(let u=0;u<o[2];++u)for(let c=0;c<o[3];++c)i=he(i,wt(t,[a*r.shape[0],l*r.shape[1],u*r.shape[2],c*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return i}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OAe={kernelName:pc,gradFunc:(t,e,n)=>{const r=n,{perm:o}=r,s=Za(o);return{x:()=>Qe(t,s)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Ae={kernelName:Db,gradFunc:(t,e,n)=>{const r=n,{axis:o}=r;return{value:()=>Ri(t,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RAe={kernelName:Mb,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>PAe(t,n)}}};function PAe(t,e){const n=Ja(e,Ze(e)),r=DE(t,n);let o=xu(e,st(0,"int32"));const s=r.rank-o.rank;for(let a=0;a<s;++a)o=gr(o,a+1);o=_i(o,el(r.shape,"bool"));const i=Ze(r);return sr(o,r,i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DAe={kernelName:Fb,gradFunc:t=>({x:()=>Ze(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MAe=[GU,R2e,P2e,D2e,M2e,F2e,L2e,B2e,z2e,j2e,W2e,V2e,H2e,X2e,Y2e,Q2e,Z2e,J2e,eNe,tNe,nNe,rNe,sNe,oNe,lNe,uNe,cNe,dNe,fNe,hNe,rAe,pNe,mNe,gNe,yNe,vNe,bNe,xNe,wNe,SNe,CNe,$Ne,kNe,INe,TNe,ENe,NNe,ANe,ONe,PNe,UD,UD,DNe,LNe,jNe,WNe,VNe,UNe,GNe,HNe,KNe,qNe,XNe,YNe,QNe,GD,GD,ZNe,JNe,nAe,oAe,sAe,iAe,aAe,lAe,uAe,cAe,dAe,fAe,hAe,pAe,mAe,gAe,yAe,vAe,xAe,bAe,wAe,HD,HD,KD,KD,SAe,$Ae,CAe,kAe,IAe,TAe,EAe,NAe,AAe,OAe,_Ae,RAe,DAe];for(const t of MAe)fCe(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.abs=function(){return this.throwIfDisposed(),tr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.acos=function(){return this.throwIfDisposed(),y$e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.acosh=function(){return this.throwIfDisposed(),x$e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.add=function(t){return this.throwIfDisposed(),he(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.all=function(t,e){return this.throwIfDisposed(),NV(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.any=function(t,e){return this.throwIfDisposed(),U$(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.argMax=function(t){return this.throwIfDisposed(),ap(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.argMin=function(t){return this.throwIfDisposed(),$$e(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.asScalar=function(){return this.throwIfDisposed(),P(this.size===1,()=>"The array must have only 1 element."),q(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.asType=function(t){return this.throwIfDisposed(),Se(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.as1D=function(){return this.throwIfDisposed(),q(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.as2D=function(t,e){return this.throwIfDisposed(),q(this,[t,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),q(this,[t,e,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),q(this,[t,e,n,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.as5D=function(t,e,n,r,o){return this.throwIfDisposed(),q(this,[t,e,n,r,o])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.asin=function(){return this.throwIfDisposed(),I$e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.asinh=function(){return this.throwIfDisposed(),E$e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.atan=function(){return this.throwIfDisposed(),A$e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.atan2=function(t){return this.throwIfDisposed(),_$e(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.atanh=function(){return this.throwIfDisposed(),P$e(this)};te().prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),EE(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),AE(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.batchNorm=function(t,e,n,r,o){return this.throwIfDisposed(),jb(this,t,e,n,r,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.broadcastTo=function(t){return this.throwIfDisposed(),oh(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.cast=function(t){return this.throwIfDisposed(),Se(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.ceil=function(){return this.throwIfDisposed(),ake(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),so(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof fn&&(t=[t]),br([this,...t],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.conv1d=function(t,e,n,r,o,s){return this.throwIfDisposed(),AV(this,t,e,n,r,o,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.conv2dTranspose=function(t,e,n,r,o){return this.throwIfDisposed(),OV(this,t,e,n,r,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.conv2d=function(t,e,n,r,o,s){return this.throwIfDisposed(),su(this,t,e,n,r,o,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.cos=function(){return this.throwIfDisposed(),_E(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.cosh=function(){return this.throwIfDisposed(),RV(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),H$(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),PV(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),_ke(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.depthwiseConv2d=function(t,e,n,r,o,s){return this.throwIfDisposed(),RE(this,t,e,n,r,o,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.dilation2d=function(t,e,n,r,o){return this.throwIfDisposed(),Dke(this,t,e,n,r,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.divNoNan=function(t){return this.throwIfDisposed(),zke(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.div=function(t){return this.throwIfDisposed(),_e(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.dot=function(t){return this.throwIfDisposed(),Wke(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.elu=function(){return this.throwIfDisposed(),Vb(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.equal=function(t){return this.throwIfDisposed(),Xs(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.erf=function(){return this.throwIfDisposed(),Hke(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),tIe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.exp=function(){return this.throwIfDisposed(),Ys(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.expandDims=function(t){return this.throwIfDisposed(),gr(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.expm1=function(){return this.throwIfDisposed(),sIe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.fft=function(){return this.throwIfDisposed(),JV(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.flatten=function(){return this.throwIfDisposed(),q(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.floor=function(){return this.throwIfDisposed(),Gb(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.floorDiv=function(t){return this.throwIfDisposed(),EV(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.gather=function(t,e,n){return this.throwIfDisposed(),DE(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.greaterEqual=function(t){return this.throwIfDisposed(),xu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.greater=function(t){return this.throwIfDisposed(),lo(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.ifft=function(){return this.throwIfDisposed(),K$(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.irfft=function(){return this.throwIfDisposed(),YTe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.isFinite=function(){return this.throwIfDisposed(),pIe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.isInf=function(){return this.throwIfDisposed(),gIe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.isNaN=function(){return this.throwIfDisposed(),vIe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.leakyRelu=function(t){return this.throwIfDisposed(),FE(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.lessEqual=function(t){return this.throwIfDisposed(),Gd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.less=function(t){return this.throwIfDisposed(),Kv(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),CIe(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.logSigmoid=function(){return this.throwIfDisposed(),AIe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.logSoftmax=function(t){return this.throwIfDisposed(),BV(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),zV(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.log=function(){return this.throwIfDisposed(),Qs(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.log1p=function(){return this.throwIfDisposed(),LV(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.logicalAnd=function(t){return this.throwIfDisposed(),_i(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.logicalNot=function(){return this.throwIfDisposed(),LE(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.logicalOr=function(t){return this.throwIfDisposed(),jV(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.logicalXor=function(t){return this.throwIfDisposed(),LIe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),ot(this,t,e,n)};te().prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),BE(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.max=function(t,e){return this.throwIfDisposed(),ls(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.maximum=function(t){return this.throwIfDisposed(),Ja(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.mean=function(t,e){return this.throwIfDisposed(),cn(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.min=function(t,e){return this.throwIfDisposed(),Hv(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.minimum=function(t){return this.throwIfDisposed(),cp(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),HIe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.mod=function(t){return this.throwIfDisposed(),qIe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.mul=function(t){return this.throwIfDisposed(),K(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.neg=function(){return this.throwIfDisposed(),tn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.norm=function(t,e,n){return this.throwIfDisposed(),Ub(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.notEqual=function(t){return this.throwIfDisposed(),qv(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),WV(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.onesLike=function(){return this.throwIfDisposed(),Lo(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.pad=function(t,e){return this.throwIfDisposed(),jE(this,t,e)};te().prototype.pool=function(t,e,n,r,o,s){return this.throwIfDisposed(),oTe(this,t,e,n,r,o,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.pow=function(t){return this.throwIfDisposed(),hd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.prelu=function(t){return this.throwIfDisposed(),VE(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.prod=function(t,e){return this.throwIfDisposed(),aTe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.reciprocal=function(){return this.throwIfDisposed(),ATe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.relu=function(){return this.throwIfDisposed(),wu(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.relu6=function(){return this.throwIfDisposed(),GV(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.reshapeAs=function(t){return this.throwIfDisposed(),q(this,t.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.reshape=function(t){return this.throwIfDisposed(),q(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),oU(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),sU(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.reverse=function(t){return this.throwIfDisposed(),iu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.rfft=function(){return this.throwIfDisposed(),JTe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.round=function(){return this.throwIfDisposed(),HV(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.rsqrt=function(){return this.throwIfDisposed(),KV(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.selu=function(){return this.throwIfDisposed(),qV(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.separableConv2d=function(t,e,n,r,o,s){return this.throwIfDisposed(),XV(this,t,e,n,r,o,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.sigmoid=function(){return this.throwIfDisposed(),Ud(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.sign=function(){return this.throwIfDisposed(),BTe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.sin=function(){return this.throwIfDisposed(),YV(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.sinh=function(){return this.throwIfDisposed(),QV(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.slice=function(t,e){return this.throwIfDisposed(),wt(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.softmax=function(t){return this.throwIfDisposed(),JE(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.softplus=function(){return this.throwIfDisposed(),_m(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),WE(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.split=function(t,e){return this.throwIfDisposed(),ro(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.sqrt=function(){return this.throwIfDisposed(),ar(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.square=function(){return this.throwIfDisposed(),Nt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.squaredDifference=function(t){return this.throwIfDisposed(),tEe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.squeeze=function(t){return this.throwIfDisposed(),Pm(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof fn?[this,t]:[this,...t];return Ri(n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.step=function(t){return this.throwIfDisposed(),Dm(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.stridedSlice=function(t,e,n,r,o,s,i,a){return this.throwIfDisposed(),iEe(this,t,e,n,r,o,s,i,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.sub=function(t){return this.throwIfDisposed(),Re(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.sum=function(t,e){return this.throwIfDisposed(),Ae(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.tan=function(){return this.throwIfDisposed(),lEe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.tanh=function(){return this.throwIfDisposed(),NE(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.tile=function(t){return this.throwIfDisposed(),rs(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.toBool=function(){return this.throwIfDisposed(),Se(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.toFloat=function(){return this.throwIfDisposed(),Se(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.toInt=function(){return this.throwIfDisposed(),Se(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.topk=function(t,e){return this.throwIfDisposed(),dEe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.transpose=function(t){return this.throwIfDisposed(),Qe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.unique=function(t){return this.throwIfDisposed(),pEe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),nU(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.unstack=function(t){return this.throwIfDisposed(),au(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.where=function(t,e){return this.throwIfDisposed(),sr(t,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.zerosLike=function(){return this.throwIfDisposed(),Ze(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Ns extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Ns.prototype)}}class Oo extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Oo.prototype)}}class G extends Error{constructor(e){super(e),Object.setPrototypeOf(this,G.prototype)}}class Le extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Le.prototype)}}class D2 extends Error{constructor(e){super(e),Object.setPrototypeOf(this,D2.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class KU{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function lu(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function As(t,e){if(!t)throw new D2(e)}function qD(t,e){let n=0;for(const r of t)r===e&&n++;return n}function yr(t){return t.length===1?t[0]:t}function ht(t){return Array.isArray(t)?t:[t]}function di(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function bl(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let mo={};function M2(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function Y$(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>Y$(e));else{const e=Object.keys(t);for(const n of e){const r=t[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?t[n]=r.value:Y$(r))}}}function Bm(t,e={},n={},r="object",o=!1){if(typeof t=="string"){const s=t;let i;if(s in n)i=n[s];else if(s in mo)i=mo[s];else if(i=e[s],i==null)throw new G(`Unknown ${r}: ${t}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return i}else{const s=t;if(s.className==null||s.config==null)throw new G(`${r}: Improper config format: ${JSON.stringify(s)}.
'className' and 'config' must set.`);const i=s.className;let a,l;if(i in n?[a,l]=n[i]:i in mo?[a,l]=mo.className:i in e&&([a,l]=e[i]),a==null)throw new G(`Unknown ${r}: ${i}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const u={};for(const h of Object.keys(mo))u[h]=mo[h];for(const h of Object.keys(n))u[h]=n[h];const c=s.config;c.customObjects=u;const d=Object.assign({},mo);for(const h of Object.keys(n))mo[h]=n[h];Y$(s.config);const f=l(a,s.config,n,o);return mo=Object.assign({},d),f}else{const u=Object.assign({},mo);for(const d of Object.keys(n))mo[d]=n[d];const c=new a(s.config);return mo=Object.assign({},u),c}}}function FAe(t,e){return t<e?-1:t>e?1:0}function zg(t,e){return-1*FAe(t,e)}function ka(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function LAe(t){if(t==null)throw new G(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function Cu(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new G(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function F2(t,e,n=0,r=1/0){return As(n>=0),As(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(o=>typeof o===e)}function En(t,e){Array.isArray(t)?(P(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,r)=>En(n,`element ${r+1} of ${e}`))):P(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${qU(t)}.`)}function qU(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>qU(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function BAe(t,e,n){let r=n!=null?n():pr(),o;return(...i)=>{const a=n!=null?n():pr();return a-r<e||(r=a,o=t(...i)),o}}function XU(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let zAe=0;function YU(){return zAe++}const jg={};function Yb(t=""){return t in jg||(jg[t]=0),jg[t]+=1,t+jg[t].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const jAe=["channelsFirst","channelsLast"],WAe=["nearest","bilinear"],VAe=["valid","same","causal"],UAe=["max","avg"],GAe=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Pu=new Map;function on(t){Cu(jAe,"DataFormat",t)}function HAe(t){Cu(WAe,"InterpolationFormat",t)}function uo(t){Cu(VAe,"PaddingMode",t)}function QU(t){Cu(UAe,"PoolMode",t)}const sh=[],XD="/";function Wl(t,e){sh.push(t);try{const n=e();return sh.pop(),n}catch(n){throw sh.pop(),n}}function KAe(){return sh.length===0?"":sh.join(XD)+XD}function ZU(t){if(!eG(t))throw new Error("Not a valid tensor name: '"+t+"'");return KAe()+t}function JU(t){if(!eG(t))throw new Error("Not a valid tensor name: '"+t+"'");Pu.has(t)||Pu.set(t,0);const e=Pu.get(t);if(Pu.set(t,Pu.get(t)+1),e>0){const n=`${t}_${e}`;return Pu.set(n,1),n}else return t}const qAe=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function eG(t){return!!t.match(qAe)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function XAe(t){return t===parseInt(t.toString(),10)}function Ia(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let r=1;for(let o=e;o<n;++o)r*=t[o];return r}function md(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r<e&&(e=r)}return e}function Ma(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r>e&&(e=r)}return e}function ps(t,e){if(e<t)throw new G(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Nw;function mn(){return Nw==null&&(Nw=jCe().epsilon()),Nw}function ms(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Vs(t,e){return Se(t,e)}function zm(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),q(t,n)}function YAe(t,e){return Q(()=>{if(t.shape.length!==2)throw new G(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=zm(t,1);return Q$(n,[1,e,1])})}function QAe(t){const e=[Ia(t.shape)];return q(t,e)}function ZAe(t){if(t.rank<=1)throw new G(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],Ia(t.shape,1)];return q(t,e)}function Vl(t,e,n){return Q(()=>{switch(t.rank){case 1:return QE(t,e,n);case 2:return ZV(t,[e,0],[n,t.shape[1]]);case 3:return ZE(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return Yv(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return wt(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return wt(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new G(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function Aw(t,e,n){return Q(()=>{switch(t.rank){case 1:return QE(t,e,n);case 2:return ZV(t,[0,e],[t.shape[0],n]);case 3:return ZE(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return Yv(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new G(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function Wg(t,e,n,r){return Q(()=>{switch(t.rank){case 1:return QE(t,e,n);case 2:switch(r){case 1:return Vl(t,e,n);case 2:return Aw(t,e,n);default:throw new G(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return Vl(t,e,n);case 2:return ZE(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return Aw(t,e,n);default:throw new G(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return Vl(t,e,n);case 2:return Yv(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return Yv(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return Aw(t,e,n);default:throw new G(`The axis is not within the rank of the tensor ${r}`)}default:throw new G(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function L2(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),br(t,e)}function YD(t,e){switch(t.rank){case 1:return cke([t,e]);case 2:return fke([t,e],0);case 3:return pke([t,e],0);case 4:return gke([t,e],0);default:throw new G(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function Q$(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new G(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return rs(t,e)}function Qb(t,e=0,n=1,r,o){return ITe(t,e,n,r,o)}function Us(t,e,n,r){if(t.rank<2||e.rank<2)throw new Le(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const o=t.shape.slice(-1)[0],s=e.shape.slice(-2)[0];if(o!==s)throw new Le(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return MD({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?Z$(t.rank,r,ms()):null,activation:n});{const o=t.shape.slice(),s=o.pop();t=q(t,[-1,s]);const i=e.shape.slice(),a=i.pop(),l=i.pop(),u=[...i,a],c=Array.from({length:e.rank},(p,m)=>m===0?e.rank-2:m<=e.rank-2?m-1:m);e=q(Qe(e,c),[l,-1]);const d=[...o,...u];return q(MD({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?Z$(t.rank,r,ms()):null,activation:n}),d)}}function tG(t,e,n){return Q(()=>(Array.isArray(e)?e=Pr(e,"int32"):e=Se(e,"int32"),DE(t,e,n)))}function jm(t){return K(t,t)}function Z$(t,e,n){const r=e.shape;if(e.rank!==1&&e.rank!==t)throw new G(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return r.length===1?q(e,[1,r[0],1,1,1]):q(e,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?q(e,[1,1,1,1,r[0]]):q(e,[1].concat(r))}else if(t===4){if(n==="channelsFirst")return r.length===1?q(e,[1,r[0],1,1]):q(e,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?q(e,[1,1,1,r[0]]):q(e,[1].concat(r))}else if(t===3){if(n==="channelsFirst")return r.length===1?q(e,[1,r[0],1]):q(e,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?q(e,[1,1,r[0]]):q(e,[1].concat(r))}else if(t<3)return e;throw new G(`Unsupported input rank by biasAdd: ${e.rank}`)}function xs(t,e,n){return Q(()=>(n==null&&(n=ms()),on(n),he(t,Z$(t.rank,e,n))))}function JAe(t,e=1){if(e!==1)throw new Le(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return Vb(t)}function eOe(t){return Q(()=>_e(t,he(tr(t),1)))}function nG(t,e,n,r){return Q(()=>wEe(t,e,n,r))}function tOe(t){return Q(()=>{const e=he(.5,K(.2,t));return so(e,0,1)})}function Wm(t,e,n=!1){return n?t():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const nOe=["fanIn","fanOut","fanAvg"],rOe=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function oOe(t){Cu(nOe,"FanMode",t)}function sOe(t){Cu(rOe,"Distribution",t)}class Wo extends Kd{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class rG extends Wo{apply(e,n){return pn(e,n)}}rG.className="Zeros";ce(rG);class B2 extends Wo{apply(e,n){return el(e,n)}}B2.className="Ones";ce(B2);class oG extends Wo{constructor(e){if(super(),typeof e!="object")throw new G(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new G(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return Q(()=>K(st(this.value),el(e,n)))}getConfig(){return{value:this.value}}}oG.className="Constant";ce(oG);class sG extends Wo{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return Rm(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}sG.className="RandomUniform";ce(sG);class iG extends Wo{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Le(`randomNormal does not support dType ${n}.`);return Qb(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}iG.className="RandomNormal";ce(iG);class aG extends Wo{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Le(`truncatedNormal does not support dType ${n}.`);return tU(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}aG.className="TruncatedNormal";ce(aG);class lG extends Wo{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return Q(()=>{if(e.length!==2||e[0]!==e[1])throw new G("Identity matrix initializer can only be used for 2D square matrices.");return K(this.gain,FV(e[0]))})}getConfig(){return{gain:this.gain}}}lG.className="Identity";ce(lG);function iOe(t,e="channelsLast"){let n,r;if(on(e),t.length===2)n=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const o=Ia(t,2);n=t[1]*o,r=t[0]*o}else if(e==="channelsLast"){const o=Ia(t,0,t.length-2);n=t[t.length-2]*o,r=t[t.length-1]*o}}else{const o=Ia(t);n=Math.sqrt(o),r=Math.sqrt(o)}return[n,r]}class zr extends Wo{constructor(e){if(super(),e.scale<0)throw new G(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,oOe(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,sOe(this.distribution),this.seed=e.seed}apply(e,n){const r=iOe(e),o=r[0],s=r[1];let i=this.scale;if(this.mode==="fanIn"?i/=Math.max(1,o):this.mode==="fanOut"?i/=Math.max(1,s):i/=Math.max(1,(o+s)/2),this.distribution==="normal"){const a=Math.sqrt(i);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Le(`${this.getClassName()} does not support dType ${n}.`);return tU(e,0,a,n,this.seed)}else{const a=Math.sqrt(3*i);return Rm(e,-a,a,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}zr.className="VarianceScaling";ce(zr);class z2 extends zr{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return zr.className}}z2.className="GlorotUniform";ce(z2);class j2 extends zr{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return zr.className}}j2.className="GlorotNormal";ce(j2);class W2 extends zr{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return zr.className}}W2.className="HeNormal";ce(W2);class V2 extends zr{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return zr.className}}V2.className="HeUniform";ce(V2);class U2 extends zr{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return zr.className}}U2.className="LeCunNormal";ce(U2);class G2 extends zr{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return zr.className}}G2.className="LeCunUniform";ce(G2);class uG extends Wo{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return Q(()=>{if(e.length<2)throw new Le("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const r=re(e.slice(0,-1)),o=e[e.length-1],s=r*o;s>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${s}) elements: Slowness may result.`);const i=[Math.max(o,r),Math.min(o,r)],a=Qb(i,0,1,n,this.seed),l=y2e.qr(a,!1);let u=l[0];const d=l[1].flatten().stridedSlice([0],[Math.min(o,r)*Math.min(o,r)],[Math.min(o,r)+1]);return u=K(u,d.sign()),r<o&&(u=u.transpose()),K(st(this.gain),u.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}uG.className="Orthogonal";ce(uG);const QD={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function ZD(t,e={}){return Bm(t,Co.getMap().classNameMap,e,"initializer")}function Vt(t){return M2(t)}function Bt(t){if(typeof t=="string"){const e=t in QD?QD[t]:t;if(e==="GlorotNormal")return new j2;if(e==="GlorotUniform")return new z2;if(e==="HeNormal")return new W2;if(e==="HeUniform")return new V2;if(e==="LeCunNormal")return new U2;if(e==="LeCunUniform")return new G2;{const n={};return n.className=e,n.config={},ZD(n)}}else return t instanceof Wo?t:ZD(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function J$(t){return Array.isArray(t)&&Array.isArray(t[0])}function Qv(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function Pe(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new G(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function tt(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new G(`Expected exactly 1 Shape; got ${t.length}`)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Zv(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((r,o)=>r*o);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const JD="Variable";class aOe{constructor(e,n="float32",r=JD,o=!0,s=null){this.dtype=n??"float32",this.shape=e.shape,this.id=YU(),r=r??JD,this.originalName=ZU(r),this.name=JU(this.originalName),this.trainable_=o,this.constraint=s,this.val=yEe(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),lOe(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function lOe(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function ek(t){return t.map(e=>e.read())}function H2(t){t.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class gn{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class Zs{constructor(e,n,r,o,s,i,a){this.dtype=e,this.shape=n,this.sourceLayer=r,this.inputs=o,this.callArgs=s,this.outputTensorIndex=a,this.id=YU(),i!=null&&(this.originalName=ZU(i),this.name=JU(this.originalName)),this.rank=n.length}}let uOe=0,Zb=class{constructor(e,n){this.callArgs=n,this.id=uOe++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r!=null&&r.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},cOe=0;class He extends Kd{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=cOe++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const r=this.getClassName();n=di(r)+"_"+Yb(r)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let s=null;e.batchSize!=null&&(s=e.batchSize),r=[s].concat(e.inputShape)}this.batchInputShape=r;let o=e.dtype;o==null&&(o=e.inputDType),o==null&&(o="float32"),this.dtype=o}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new Oo(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new G(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return yr(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return yr(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new Ns(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new Ns(`Layer ${this.name} is not connected, no input to return.`);return yr(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new Ns(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new Ns(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return yr(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const n=ht(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const r=ht(this.inputSpec);if(n.length!==r.length)throw new G(`Layer ${this.name} expects ${r.length} inputs, but it received ${n.length} input tensors. Input received: ${e}`);for(let o=0;o<n.length;o++){const s=n[o],i=r[o];if(i==null)continue;const a=s.rank;if(i.ndim!=null&&a!==i.ndim)throw new G(`Input ${o} is incompatible with layer ${this.name}: expected ndim=${i.ndim}, found ndim=${a}`);if(i.maxNDim!=null&&a>i.maxNDim)throw new G(`Input ${o} is incompatible with layer ${this.name}: expected max_ndim=${i.maxNDim}, found ndim=${a}`);if(i.minNDim!=null&&a<i.minNDim)throw new G(`Input ${o} is incompatible with layer ${this.name}: expected min_ndim=${i.minNDim}, found ndim=${a}.`);if(i.dtype!=null&&s.dtype!==i.dtype)throw new G(`Input ${o} is incompatible with layer ${this.name} : expected dtype=${i.dtype}, found dtype=${s.dtype}.`);if(i.axes){const l=s.shape;for(const u in i.axes){const c=Number(u),d=i.axes[u],f=c>=0?l[c]:l[l.length+c];if(d!=null&&[d,null].indexOf(f)===-1)throw new G(`Input ${o} is incompatible with layer ${this.name}: expected axis ${c} of input shape to have value ${d} but got shape ${l}.`)}}if(i.shape!=null)for(let l=0;l<i.shape.length;++l){const u=i.shape[l],c=s.shape[l];if(u!=null&&c!=null&&u!==c)throw new G(`Input ${o} is incompatible with layer ${this.name}: expected shape=${i.shape}, found shape=${s.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const r=ht(e),o=hOe(e),s=pOe(e);if(o===s)throw new G("Arguments to apply() must be all SymbolicTensors or all Tensors");return Wl(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const i=[];for(const a of ht(e))i.push(a.shape);this.build(yr(i)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&s&&(this._refCount=1)}if(this.assertInputCompatibility(e),s){let i=this.call(e,n);this.supportsMasking&&this.setMaskMetadata(e,i);const a=ht(i),l=[];for(let u of a)r.indexOf(u)!==-1&&(u=u.clone()),l.push(u);if(i=yr(l),this.activityRegularizer!=null)throw new Le("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return i}else{const i=dOe(e),a=this.computeOutputShape(i);let l;const u=fOe(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?i[0]:i),a!=null&&a.length>0&&Array.isArray(a[0])?l=a.map((c,d)=>new Zs(u,c,this,ht(e),n,this.name,d)):l=new Zs(u,a,this,ht(e),n,this.name),this.addInboundNode(e,l,null,null,i,a,n),this._refCount++,this.activityRegularizer!=null)throw new Le("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((r,o)=>{r!=null&&e[o]!=null&&e[o]!==r&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new Ns(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const r=JSON.stringify(n.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new Ns(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Oo(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return Zv(this.weights)}build(e){this.built=!0}getWeights(e=!1){return ek(e?this.trainableWeights:this.weights)}setWeights(e){Q(()=>{const n=this.weights;if(n.length!==e.length)throw new G(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const r=[],o=ek(n);for(let s=0;s<o.length;++s){const i=o[s],a=n[s],l=e[s];if(!at(i.shape,l.shape))throw new G(`Layer weight shape ${i.shape} not compatible with provided weight shape ${l.shape}`);r.push([a,l])}H2(r)})}addWeight(e,n,r,o,s,i,a,l){if(this._addedWeightNames.indexOf(e)!==-1)throw new G(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(o=l!=null?l():Bt("zeros"));const u=o.apply(n,r),c=new aOe(u,r,e,i,a);return u.dispose(),s!=null&&this.addLoss(()=>s.apply(c.read())),i==null&&(i=!0),i?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=ht(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(e,n,r){if(!this.supportsMasking)return;const o=this.computeMask(e,r),s=ht(n),i=ht(o);if(s.length!==i.length)throw new Error(`${this.name} outputs ${s.length} tensors but ${s.length} masks for those tensors`);for(let a=0;a<s.length;a++)s[a].kerasMask=i[a]}addInboundNode(e,n,r,o,s,i,a=null){const l=ht(e);n=ht(n),r=ht(r),o=ht(o),s=Qv(s),i=Qv(i);const u=[],c=[],d=[];for(const f of l)u.push(f.sourceLayer),c.push(f.nodeIndex),d.push(f.tensorIndex);new Zb({outboundLayer:this,inboundLayers:u,nodeIndices:c,tensorIndices:d,inputTensors:l,outputTensors:n,inputMasks:r,outputMasks:o,inputShapes:s,outputShapes:i},a);for(let f=0;f<n.length;f++)n[f].sourceLayer=this,n[f].nodeIndex=this.inboundNodes.length-1,n[f].tensorIndex=f}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function dOe(t){t=ht(t);const e=[];for(const n of t)e.push(n.shape);return yr(e)}function fOe(t){return"float32"}function cG(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const r=e.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{const o=[];for(let s=0;s<r.inboundLayers.length;s++){const i=r.inputTensors[s],a=r.inboundLayers[s],l=r.nodeIndices[s],u=cG(i,a,l);for(const c of u)o.indexOf(c)===-1&&o.push(c)}return o}}}function hOe(t){let e=!0;for(const n of ht(t))if(!(n instanceof Zs)){e=!1;break}return e}function pOe(t){let e=!0;for(const n of ht(t))if(n instanceof Zs){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Vm extends He{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:Yb("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new G("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new G("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new G("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=n,this.dtype=r,this.inputSpec=[{shape:n}];const o=new Zs(this.dtype,this.batchInputShape,this,[],{},this.name);o.nodeIndex=0,o.tensorIndex=0,new Zb({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[o],outputTensors:[o],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new G(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}Vm.className="InputLayer";ce(Vm);function mOe(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new G("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new Vm({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function gOe(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return Se(e,t.dtype)}catch{throw new G(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class da{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof da)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=gOe(e,n),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new G(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof Zs){if(this.id2Value[e.id]==null)throw new G(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new G(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof Zs){if(this.id2Value[e.id]==null)throw new G(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new G(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&Ke(this.id2Mask)}}const Jv=new KU,e0=new KU;function yOe(t){Jv!=null&&Jv.setMaxEntries(t),e0!=null&&e0.setMaxEntries(t)}function Lf(t,e,n,r){const o=n==null?!1:n.training,s=Array.isArray(t),i=s?t:[t],a=i.map(p=>p.name),l=[],u=e.names();for(const p of a)u.indexOf(p)!==-1?l.push(e.getValue(p)):l.push(null);const c=a.join(",")+"|"+e.names().sort().join(",");let d=Jv.get(c),f;if(d==null){const p=vOe(i,e);d=p.sorted,f=p.recipientCounts,Jv.put(c,d),e0.put(c,f)}f={},o||Object.assign(f,e0.get(c));const h=new da(e);for(let p=0;p<d.length;++p){const m=d[p],g=m.sourceLayer;if(g instanceof Vm)continue;const y=[],v=[],b=[];let x=!1;for(const k of m.inputs){const I=h.getValue(k),T=h.getMask(k);y.push(I),v.push(T),T!=null&&(x=!0),o||(f[k.name]--,f[k.name]===0&&!e.hasKey(k)&&a.indexOf(k.name)===-1&&!I.isDisposed&&k.sourceLayer.stateful!==!0&&b.push(I))}x&&(n=n||{},n.mask=v[0]);const w=ht(g.apply(y,n));let S=null;g.supportsMasking&&(S=g.computeMask(y,v));const $=bOe(m),C=Array.isArray($)?$:[$];for(let k=0;k<C.length;++k){h.hasKey(C[k])||h.add(C[k],w[k],Array.isArray(S)?S[0]:S);const I=a.indexOf(C[k].name);I!==-1&&(l[I]=w[k])}o||Ke(b)}return h.disposeMasks(),s?l:l[0]}function vOe(t,e){P(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(t.length===1){const o=eM(t[0],e);n=o.sorted,r=o.recipientMap}else{const o=new Set;for(const s of t){const{sorted:i,recipientMap:a}=eM(s,e);for(const l of i)o.has(l.name)||(n.push(l),o.add(l.name));for(const l in a)r[l]==null&&(r[l]=new Set),a[l].forEach(u=>r[l].add(u))}}return{sorted:n,recipientCounts:xOe(r)}}function xOe(t){const e={};for(const n in t)e[n]=t[n].size;return e}function eM(t,e){const n=new Set,r=[],o={};for(const a of e.names())n.add(a);const s=[],i=[];for(s.push(t);s.length>0;){const a=s[s.length-1];if(n.has(a.name)){s.pop();continue}const l=i[i.length-1]===s.length-1;if(a.inputs.length===0||l)s.pop(),r.push(a),n.add(a.name),l&&i.pop();else{i.push(s.length-1);for(const u of a.inputs)o[u.name]==null&&(o[u.name]=new Set),o[u.name].add(a.name),!n.has(u.name)&&s.push(u)}}return{sorted:r,recipientMap:o}}function bOe(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let r=0;r<t.sourceLayer.inboundNodes.length;++r)for(const o of t.sourceLayer.inboundNodes[r].outputTensors)if(o.id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wOe=J();wOe.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,yOe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function K2(t,e){return Q(()=>ar(Ae(K(t,t),e,!0)))}class Um extends Kd{getConfig(){return{}}}class dG extends Um{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Q(()=>{const n=K2(e,this.axis),r=so(n,0,this.maxValue);return K(e,_e(r,he(mn(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}dG.className="MaxNorm";ce(dG);class fG extends Um{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Q(()=>_e(e,he(mn(),K2(e,this.axis))))}getConfig(){return{axis:this.axis}}}fG.className="UnitNorm";ce(fG);class hG extends Um{apply(e){return wu(e)}}hG.className="NonNeg";ce(hG);class pG extends Um{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Q(()=>{const n=K2(e,this.axis),r=he(K(this.rate,so(n,this.minValue,this.maxValue)),K(1-this.rate,n));return K(e,_e(r,he(mn(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}pG.className="MinMaxNorm";ce(pG);const tM={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function vn(t){return M2(t)}function nM(t,e={}){return Bm(t,Co.getMap().classNameMap,e,"constraint")}function xn(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in tM?tM[t]:t,config:{}};return nM(n)}else return t instanceof Um?t:nM(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function ll(t){if(t==null)return;const e=[],n=[],r=[];for(const o in t){const s=t[o];if(typeof s!="number"){const i=s;e.push(i.data()),n.push(o),r.push(i)}}if(e.length>0){const o=await Promise.all(e);for(let s=0;s<o.length;++s)t[n[s]]=o[s][0];Ke(r)}}function mG(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var rM;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(rM||(rM={}));const SOe=125;class fp{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class COe{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class $Oe extends fp{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const r=n.size==null?0:n.size;this.seen+=r;for(const o in n){const s=n[o];if(typeof s=="number")this.totals.hasOwnProperty(o)||(this.totals[o]=0),this.totals[o]=this.totals[o]+s*r;else{let i;o in this.totals?i=this.totals[o]:this.totals[o]=0;const a=Q(()=>he(this.totals[o],K(s,r)));this.totals[o]=a,i!=null&&i.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?n[r]=this.totals[r]/this.seen:Q(()=>{const o=K(_e(1,this.seen),this.totals[r]);n[r]=o,this.totals[r].dispose(),js(n[r])}))}}class kOe extends fp{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const r in n)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(n[r])}async syncData(){const e=[],n=[],r=[];for(const s in this.history){const i=this.history[s];for(let a=0;a<i.length;++a)if(typeof i[a]!="number"){const l=i[a];e.push(l.data()),n.push(s),r.push(a)}}const o=await Promise.all(e);for(let s=0;s<o.length;++s)this.history[n[s]][r[s]].dispose(),this.history[n[s]][r[s]]=o[s][0]}}class IOe extends fp{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||bU,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=SOe),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");N$(this.yieldEvery)&&(this.maybeWait=BAe(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,r){const o=[];this.yield!=null&&(await ll(r),o.push(this.yield(e,n,r))),o.push(this.nextFrameFunc()),await Promise.all(o)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await ll(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const r=[];this.epochEnd!=null&&(await ll(n),r.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,n){this.batchBegin!=null&&(await ll(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const r=[];this.batchEnd!=null&&(await ll(n),r.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):N$(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await ll(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await ll(e),await this.trainEnd(e))}}function gG(t,e){return t==null&&(t={}),t instanceof fp?[t]:Array.isArray(t)&&t[0]instanceof fp?t:ht(t).map(r=>new IOe(r,e))}class yo{constructor(){}static registerCallbackConstructor(e,n){P(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),yo.checkForDuplicate(n),yo.constructors[e]==null&&(yo.constructors[e]=[]),yo.constructors[e].push(n)}static checkForDuplicate(e){for(const n in yo.constructors)yo.constructors[+n].forEach(o=>{if(o===e)throw new G("Duplicate callback constructor.")})}static clear(){yo.constructors={}}static createCallbacks(e){const n=[];for(const r in yo.constructors){const o=+r;e>=o&&n.push(...yo.constructors[o])}return n.map(r=>new r)}}yo.constructors={};function yG(t,e,n,r,o,s,i,a,l){const u=new kOe,c=[new $Oe,...yo.createCallbacks(e)];t!=null&&c.push(...t),c.push(u);const d=new COe(c);return d.setParams({epochs:n,initialEpoch:r,samples:o,steps:s,batchSize:i,verbose:e,doValidation:a,metrics:l}),{callbackList:d,history:u}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Si(t,e={},n=!1){return Bm(t,Co.getMap().classNameMap,e,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function t0(t,e){return Q(()=>{t.dtype!=="float32"&&(t=Se(t,"float32"));const n=Ae(jm(t),e,!0),r=Wb(n.shape,mn()),o=ar(Ja(n,r));return _e(t,o)})}function Jb(t,e){return Q(()=>cn(jm(Re(e,t)),-1))}function q2(t,e){return Q(()=>cn(tr(Re(e,t)),-1))}function X2(t,e){return Q(()=>{const n=Re(t,e),r=so(tr(t),mn(),Number.MAX_VALUE),o=tr(_e(n,r));return K(100,cn(o,-1))})}function TOe(t,e){return Q(()=>{const n=so(e,mn(),Number.MAX_VALUE),r=Qs(he(1,n)),o=so(t,mn(),Number.MAX_VALUE),s=Qs(he(1,o));return cn(jm(Re(r,s)),-1)})}function EOe(t,e){return Q(()=>{const n=Ja(0,Re(1,K(t,e)));return cn(jm(n),-1)})}function NOe(t,e){return Q(()=>{const n=Ja(0,Re(1,K(t,e)));return cn(n,-1)})}function AOe(t,e){return Q(()=>{const n=Ae(K(t,e),-1),r=ls(K(Re(1,t),e),-1);return Ja(0,he(1,Re(r,n)))})}function OOe(t,e){return Q(()=>{const n=Math.log(2),r=Re(e,t),o=Re(he(r,_m(K(-2,r))),n);return cn(o,-1)})}function hp(t,e,n=!1){return Q(()=>{if(n)e=JE(e);else{const r=Ae(e,e.shape.length-1,!0);e=_e(e,r)}return e=so(e,mn(),1-mn()),tn(Ae(K(Se(t,"float32"),Qs(e)),e.shape.length-1))})}function n0(t,e,n=!1){return Q(()=>{const r=Se(Gb(QAe(t)),"int32");e=so(e,mn(),1-mn());const o=e.shape,s=q(WV(r,o[o.length-1]),o);return hp(s,e,n)})}function _Oe(t,e){if(!at(t.shape,e.shape))throw new G(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return Q(()=>{const n=wu(e),r=tn(tr(e));return he(Re(n,K(e,t)),LV(Ys(r)))})}function e1(t,e){return Q(()=>{let n;return n=so(e,mn(),1-mn()),n=Qs(_e(n,Re(1,n))),cn(_Oe(t,n),-1)})}function ROe(t,e){return Q(()=>{const n=so(t,mn(),1),r=so(e,mn(),1);return Ae(K(t,Qs(_e(n,r))),-1)})}function POe(t,e){return Q(()=>{const n=Qs(he(mn(),e));return cn(Re(e,K(t,n)),-1)})}function vG(t,e){return Q(()=>{const n=t0(t,-1),r=t0(e,-1),o=K(n,r);return tn(Ae(o,-1))})}const r0={meanSquaredError:Jb,meanAbsoluteError:q2,meanAbsolutePercentageError:X2,meanSquaredLogarithmicError:TOe,squaredHinge:EOe,hinge:NOe,categoricalHinge:AOe,logcosh:OOe,categoricalCrossentropy:hp,sparseCategoricalCrossentropy:n0,binaryCrossentropy:e1,kullbackLeiblerDivergence:ROe,poisson:POe,cosineProximity:vG};function Ow(t){if(typeof t=="string"){if(t in r0)return r0[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new G(e)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function xG(t,e){return Q(()=>{const n=K(.5,Lo(e)),r=Vs(lo(e,n),t.dtype);return cn(Xs(t,r),-1)})}function bG(t,e){return Q(()=>Vs(Xs(ap(t,-1),ap(e,-1)),"float32"))}function DOe(t,e){return Q(()=>Se(Ae(_i(Xs(t,1),Xs(e,1))),"float32"))}function MOe(t,e){return Q(()=>Se(Ae(_i(Xs(t,0),Xs(e,1))),"float32"))}function FOe(t,e){return Q(()=>{const n=DOe(t,e),r=MOe(t,e),o=he(n,r);return Se(sr(lo(o,0),_e(n,o),0),"float32")})}function LOe(t,e){return e1(t,e)}function BOe(t,e){return t.rank===e.rank&&(t=Pm(t,[t.rank-1])),e=ap(e,-1),e.dtype!==t.dtype&&(e=Se(e,t.dtype)),Se(Xs(t,e),"float32")}const zOe=Jb,jOe=Jb,WOe=q2,VOe=q2,UOe=X2,GOe=X2,wG=hp,HOe=vG,SG=n0,o0={binaryAccuracy:xG,categoricalAccuracy:bG,precision:FOe,categoricalCrossentropy:wG,sparseCategoricalCrossentropy:SG,mse:zOe,MSE:jOe,mae:WOe,MAE:VOe,mape:UOe,MAPE:GOe,cosine:HOe};function KOe(t){if(typeof t=="string"&&t in o0)return o0[t];if(typeof t!="string"&&t!=null)return t;throw new G(`Unknown metric ${t}`)}function Vg(t){if(As(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(r0))if(r0[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(o0))if(o0[n]===t){e=n;break}return e!==void 0?e:t.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function qOe(t){const e={Adagrad:()=>yl.adagrad(.01),Adadelta:()=>yl.adadelta(1,.95,mn()),Adam:()=>yl.adam(.001,.9,.999,mn()),Adamax:()=>yl.adamax(.002,.9,.999,mn(),0),RMSProp:()=>yl.rmsprop(.001,.9,0,mn()),SGD:()=>yl.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new G(`Unknown Optimizer ${t}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const oM=1*1024*1024;function sM(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!tk(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(t);r.length>oM&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${oM}.`)}}function tk(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!tk(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!tk(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function XOe(t,e,n,r=console.log){const o=QOe(t),s=["Layer (type)","Input Shape","Output shape","Param #"];o?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(c=>Math.floor(e*c)));let i;if(!o){s.push("Receives inputs"),i=[];for(const c in t.nodesByDepth)i.push(...t.nodesByDepth[c])}r("_".repeat(e)),s0(s,n,r),r("=".repeat(e));const a=t.layers;for(let c=0;c<a.length;++c)o?ZOe(a[c],n,r):JOe(a[c],n,i,r),r((c===a.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const l=YOe(t),u=Zv(t.nonTrainableWeights);r(`Total params: ${l+u}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${u}`),r("_".repeat(e))}function YOe(t){let e;return t.collectedTrainableWeights!=null?e=Zv(t.collectedTrainableWeights):e=Zv(t.trainableWeights),e}function QOe(t){let e=!0;const n=[],r=[];for(const o in t.nodesByDepth)n.push(t.nodesByDepth[o]);for(const o of n){if(o.length>1||o.length===1&&o[0].inboundLayers.length>1){e=!1;break}r.push(...o)}if(e)for(const o of t.layers){let s=!1;for(const i of o.inboundNodes)if(r.indexOf(i)!==-1)if(s){e=!1;break}else s=!0;if(!e)break}return e}function s0(t,e,n=console.log){let r="";for(let o=0;o<t.length;++o)o>0&&(r=r.slice(0,r.length-1)+" "),r+=t[o],r=r.slice(0,e[o]),r+=" ".repeat(e[o]-r.length);n(r)}function ZOe(t,e,n){let r,o;try{o=t.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{o="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}const s=t.name,i=t.getClassName(),a=[`${s} (${i})`,o,r,t.countParams().toString()];s0(a,e,n)}function JOe(t,e,n,r){let o,s;try{s=t.inboundNodes.map(d=>JSON.stringify(d.inputShapes)).join(",")}catch{s="multiple"}try{o=JSON.stringify(t.outputShape)}catch{o="multiple"}const i=[];for(const d of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(d)===-1))for(let f=0;f<d.inboundLayers.length;++f){const h=d.inboundLayers[f].name,p=d.nodeIndices[f],m=d.tensorIndices[f];i.push(`${h}[${p}][${m}]`)}const a=t.name,l=t.getClassName(),u=i.length===0?"":i[0],c=[`${a} (${l})`,s,o,t.countParams().toString(),u];s0(c,e,r);for(let d=1;d<i.length;++d)s0(["","","","",i[d]],e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function CG(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function nk(t,e){if(t===null)return null;if(typeof t=="string")return bl(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let o=0;o<r;++o){const s=t[o];CG(e,o,s)?n.push(s):n.push(nk(s,e))}return n}else{const n={};for(const r of Object.keys(t)){const o=t[r];if(r==="name"&&typeof o=="string")n[r]=o;else{const s=bl(r);n[s]=nk(o,s)}}return n}}function rk(t,e){if(t==null)return null;if(typeof t=="string")return di(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let o=0;o<r;++o){const s=t[o];CG(e,o,s)?n.push(s):n.push(rk(s,e))}return n}else{const n={};for(const r of Object.keys(t)){const o=t[r],s=di(r);(r==="name"||r==="className")&&typeof o=="string"?n[s]=o:n[s]=rk(o,r)}return n}}/** @license See the LICENSE file. */const $G="4.17.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const e_e=t=>{const e=Object.keys(t);if(e.length===0)return!1;const n=e[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};class Ko extends He{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const v=this.getClassName().toLowerCase();this.name=Yb(v)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],ka(this.inputs).length!==this.inputs.length)throw new G(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(v=>v.name)}`);ka(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(v=>v.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const v of this.outputs){const b=v.sourceLayer,x=v.nodeIndex,w=v.tensorIndex;this.outputLayers.push(b),this.outputLayersNodeIndices.push(x),this.outputLayersTensorIndices.push(w)}for(const v of this.inputs){const b=v.sourceLayer,x=v.nodeIndex,w=v.tensorIndex;As(x===0,"input layer has >1 nodes"),As(w===0,"input layer has >1 tensors"),this.inputLayers.push(b),this.inputLayersNodeIndices.push(x),this.inputLayersTensorIndices.push(w)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let v=0;v<this.inputLayers.length;v++){const b=this.inputLayers[v];if(!(b instanceof Vm))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${v} (0-based) originates from layer type ${b.getClassName()}.`);this.inputNames.push(b.name),this.feedInputShapes.push(b.batchInputShape),this.feedInputNames.push(b.name)}for(const v of this.outputLayers)this.outputNames.push(v.name);this.internalInputShapes=this.inputs.map(v=>v.shape),this.internalOutputShapes=this.outputs.map(v=>v.shape);const n={},r={},o={},s={},i={},a=[],l=(v,b,x,w,S,$)=>{(w==null||S==null||$==null)&&(w=v.sourceLayer,S=v.nodeIndex,$=v.tensorIndex);const C=w.inboundNodes[S];if(x.indexOf(C)!==-1)throw new Oo(`The tensor ${v.name} at layer "${w.name}" is part of a cycle.`);if(b.indexOf(C)!==-1)return;this.containerNodes.add(Ko.nodeKey(w,S)),w.id in i||(i[w.id]=Object.keys(i).length),x.indexOf(C)===-1&&x.push(C);const k=C.inboundLayers.length;for(let I=0;I<k;I++){const T=C.inputTensors[I],E=C.inboundLayers[I],_=C.nodeIndices[I],O=C.tensorIndices[I];l(T,b,x,E,_,O)}for(b.push(C);x.indexOf(C)>=0;)x.splice(x.indexOf(C),1);a.push(C)},u=[],c=[];for(const v of this.outputs)l(v,u,c);const d=a.slice().reverse();for(const v of d){r[v.id]=v,v.id in n||(n[v.id]=0);let b=n[v.id];const x=o[v.outboundLayer.id]==null?0:o[v.outboundLayer.id];b=Math.max(b,x),o[v.outboundLayer.id]=b,s[v.outboundLayer.id]=v.outboundLayer,n[v.id]=b;for(let w=0;w<v.inboundLayers.length;w++){const S=v.inboundLayers[w],$=v.nodeIndices[w],C=S.inboundNodes[$],k=n[C.id]==null?0:n[C.id];n[C.id]=Math.max(b+1,k),r[C.id]=C}}const f={};for(const v in n){const b=n[v];b in f||(f[b]=[]),f[b].push(r[v])}const h={};for(const v in o){const b=o[v];b in h||(h[b]=[]),h[b].push(s[v])}let p=Object.keys(h).map(v=>parseInt(v,10)).sort(zg);this.layers=[];for(const v of p){const b=h[v];b.sort((x,w)=>{const S=i[x.id],$=i[w.id];return S<$?-1:S>$?1:0});for(const x of b)x instanceof Ko&&this.internalContainerRefs.push(x),this.layers.push(x)}this.layersByDepth=h,p=Object.keys(f).map(v=>parseInt(v,10)).sort(zg);const m=this.inputs.slice(),g=[];for(const v of p)for(const b of f[v]){const x=b.outboundLayer;if(x!=null){for(const w of b.inputTensors)if(m.indexOf(w)===-1)throw new Oo(`Graph disconnected: cannot obtain value for tensor ${w} at layer "${x.name}". The following previous layers were accessed without issue: ${g}`);for(const w of b.outputTensors)m.push(w);g.push(x.name)}}this.nodesByDepth=f;const y=this.layers.map(v=>v.name);for(const v of y){const b=y.filter(x=>x===v).length;if(b!==1)throw new Oo(`The name "${v}" is used ${b} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(y))}this.outboundNodes=[],this.inboundNodes=[],new Zb({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(v=>null),outputMasks:this.outputs.map(v=>null),inputShapes:this.inputs.map(v=>v.shape),outputShapes:this.outputs.map(v=>v.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new G("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.layers)n.push(...r.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const r={};let o=0;const s=e_e(e);s&&this.parseWeights(e);for(const a of this.layers)for(const[l,u]of a.weights.entries()){const c=s?`${u.name.split("/").slice(0,-1).join("/")+"/"}${l}`:u.originalName;if(r[c]!=null)throw new G(`Duplicate weight name: ${c}`);r[c]=u,o++}const i=[];for(const a in e){let l=a;if(r[a]==null){const u=a.split("/");l=u.slice(0,-2).concat([u[u.length-1]]).join("/")}if(r[l]!=null)i.push([r[l],e[a]]);else if(n)throw new G(`Provided weight data has no target variable: ${a}`);delete r[l]}if(n){const a=[];for(const l in r)a.push(l);if(a.length>0)throw new G(`${a.length} of ${o} weights are not set: ${a}`)}H2(i)}parseWeights(e){for(const n in Object.keys(e)){const r=n.split("/"),o=["vars","layer_checkpoint_dependencies"],s=r.map(i=>i.startsWith("_")?i.slice(1):i).filter(i=>!o.includes(i)).join("/");s!==n&&(e[s]=e[n],delete e[n])}}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${$G}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const r=rk(this.updatedConfig());return n?JSON.stringify(r):r}call(e,n){return Q(()=>{e=ht(e);const r=new da;for(let o=0;o<this.inputs.length;++o)r.add(this.inputs[o],e[o]);return Lf(this.outputs,r,n)})}computeMask(e,n){return Q(()=>{e=ht(e);let r;return n==null?r=lu(null,e.length):r=ht(n),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const n=Qv(e);if(n.length!==this.inputLayers.length)throw new G(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let a=0;a<n.length;a++){const l=this.inputLayers[a],u=n[a],c=l.name+"_0_0";r[c]=u}const o=Object.keys(this.nodesByDepth).map(a=>parseInt(a,10)).sort(zg);if(o.length>1)for(const a of o){const l=this.nodesByDepth[a];for(const u of l){const c=u.outboundLayer;if(this.inputLayers.map(m=>m.id).indexOf(c.id)!==-1)continue;const d=[];for(let m=0;m<u.inboundLayers.length;m++){const g=u.inboundLayers[m],y=u.nodeIndices[m],v=u.tensorIndices[m],b=`${g.name}_${y}_${v}`,x=r[b];d.push(x)}const f=c.computeOutputShape(yr(d)),h=Qv(f),p=c.inboundNodes.indexOf(u);for(let m=0;m<h.length;m++){const g=`${c.name}_${p}_${m}`;r[g]=h[m]}}}const s=[],i=[];for(let a=0;a<this.outputLayers.length;a++){const l=this.outputLayers[a],u=this.outputLayersNodeIndices[a],c=this.outputLayersTensorIndices[a],d=`${l.name}_${u}_${c}`;i.push(d)}for(let a=0;a<i.length;a++){const l=i[a];As(l in r),s.push(r[l])}return yr(s)}runInternalGraph(e,n){n==null&&(n=lu(null,e.length));const r={};for(let l=0;l<this.inputs.length;++l){const u=this.inputs[l],c=e[l],d=n[l];r[u.id]=[c,d]}const o=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(zg);for(const l of o){const u=this.nodesByDepth[l];for(const c of u){const d=c.outboundLayer,f=c.inputTensors,h=c.outputTensors,p=new Array;for(const m of f)m.id in r&&p.push(r[m.id]);if(p.length===f.length){let m={},g,y,v,b;if(c.callArgs!=null&&(m=c.callArgs),p.length===1){const[x,w]=p[0];m.mask==null&&(m.mask=w),v=ht(d.call(x,m)),b=ht(d.computeMask(x,w)),g=[x],y=[w]}else g=p.map(x=>x[0]),y=p.map(x=>x[1]),m.mask==null&&(m.mask=y),v=ht(d.call(g,m)),b=ht(d.computeMask(g,y));if(d.activityRegularizer)throw new Le("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let x=0;x<h.length;++x){const w=h[x],S=v[x],$=b[x];r[w.id]=[S,$]}}}}const s=[],i=[],a=[];for(const l of this.outputs){As(l.id in r,`Could not compute output ${l.name} : ${l.id}`);const[u,c]=r[l.id];a.push(u.shape),s.push(u),i.push(c)}return[s,i,a]}buildNodeConversionMap(e){const n={};let r;for(const o of this.layers){r=o instanceof Ko?1:0;for(let s=0;s<o.inboundNodes.length;s++){const i=Ko.nodeKey(o,s);this.containerNodes.has(i)&&(n[i]=r,r+=1)}}return n}getLayer(e,n){if(n!=null)return this.findLayer(n);if(e==null)throw new G("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const r of this.layers)if(r.name===e)return r;throw new G(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new G(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return Q(()=>{const e=[];for(const n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){const o=Ko.nodeKey(n,r);this.containerNodes.has(o)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(const i of this.layers){const a=i.getClassName(),l=i.getConfig(),u=[];for(let d=0;d<i.inboundNodes.length;d++){const f=i.inboundNodes[d],h=Ko.nodeKey(i,d);let p={};if(this.containerNodes.has(h)){if(f.callArgs)try{JSON.stringify(f.callArgs),p=f.callArgs}catch{console.warn(`Layer ${i.name} was passed non-serializable keyword arguments: ${f.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),p={}}if(f.inboundLayers.length>0){const m=[];for(let g=0;g<f.inboundLayers.length;g++){const y=f.inboundLayers[g],v=f.nodeIndices[g],b=f.tensorIndices[g],x=Ko.nodeKey(y,v);let w=n[x];w==null&&(w=0),m.push([y.name,w,b,p])}u.push(m)}}}const c={};c.name=i.name,c.className=a,c.config=l,c.inboundNodes=u,r.push(c)}e.layers=r;const o=[];for(let i=0;i<this.inputLayers.length;i++){const a=this.inputLayers[i],l=this.inputLayersNodeIndices[i],u=Ko.nodeKey(a,l);if(!this.containerNodes.has(u))continue;let c=n[u];c==null&&(c=0);const d=this.inputLayersTensorIndices[i];o.push([a.name,c,d])}e.inputLayers=o;const s=[];for(let i=0;i<this.outputLayers.length;i++){const a=this.outputLayers[i],l=this.outputLayersNodeIndices[i],u=Ko.nodeKey(a,l);if(!this.containerNodes.has(u))continue;let c=n[u];c==null&&(c=0);const d=this.outputLayersTensorIndices[i];s.push([a.name,c,d])}return e.outputLayers=s,e}static fromConfig(e,n,r={},o=!1){const s={},i={};function a(g,y){g.name in i?i[g.name].push(y):i[g.name]=[y]}function l(g,y){const v=[];let b;for(const x of y){const w=x[0],S=x[1],$=x[2];if(b=x[3]==null?{}:x[3],!(w in s)){a(g,y);return}const C=s[w];if(C.inboundNodes.length<=S){a(g,y);return}const k=C.inboundNodes[S];v.push(k.outputTensors[$])}v.length>0&&g.apply(yr(v),b)}function u(g){const y=g.name,v=Si(g,n.customObjects!=null?n.customObjects:{});v.setFastWeightInitDuringBuild(o),s[y]=v,g.inboundNodes.forEach(x=>{if(!(x instanceof Array))throw new G(`Corrupted configuration, expected array for nodeData: ${x}`);a(v,x)})}const c=n.name,d=n.layers;for(const g of d)u(g);for(;!LAe(i);)for(const g of d){const y=s[g.name];if(y.name in i){const v=i[y.name];delete i[y.name];for(const b of v)l(y,b)}}const f=[],h=[],p=n.inputLayers;for(const g of p){const y=g[0],v=g[1],b=g[2];As(y in s);const w=s[y].inboundNodes[v].outputTensors;f.push(w[b])}const m=n.outputLayers;for(const g of m){const y=g[0],v=g[1],b=g[2];As(y in s);const w=s[y].inboundNodes[v].outputTensors;h.push(w[b])}return new e({inputs:f,outputs:h,name:c})}get stateful(){if(this._stateful)throw new G("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){Q(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function t_e(t,e,n){const r=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(o=>null);if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const o=[];return e.forEach(s=>{s in t?o.push(t[s]):o.push(null)}),o}else throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function kG(t,e){return t_e(t,e,"classWeight")}async function IG(t,e,n,r){if(n!=null){const o=Q(()=>{if(t.shape.length===1)return jl(t);if(t.shape.length===2){if(t.shape[1]>1)return ap(t,1);if(t.shape[1]===1)return q(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),s=Array.from(await o.data());Ke(o);const i=[];return s.forEach(a=>{if(n[a]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${a} exists in the data but not in classWeight`);i.push(n[a])}),Pr(i,"float32")}else return null}function n_e(t,e){return K(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const r_e=32;function TG(t,e){let n,r;const o=e;n=o.xs,r=o.ys,P(n!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const s=iM("input",t.inputNames,n),i=iM("output",t.outputNames,r),a=s[0].shape[0];P(s.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${s.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),P(i.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${i.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<s.length;l++)P(s[l].shape[0]===a,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${s[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);for(let l=0;l<i.length;l++)P(i[l].shape[0]===a,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${i[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);return{xs:s,ys:i}}function iM(t,e,n){if(n instanceof fn)return[n];if(Array.isArray(n))return P(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const o of e){if(n[o]==null)throw new G(`The feature data generated by the dataset lacks the required ${t} key '${o}'.`);r.push(n[o])}return r}}function o_e(t){if(t.length===3)throw new Le("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function s_e(t,e,n){const r=n.batchesPerEpoch!=null;if(P(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),P(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),P(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),P(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),P(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const o=n.validationData!=null;let s,i;if(o)if(aM(n.validationData))P(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const g=o_e(n.validationData);s=g.xs,i=g.ys}const a=t.makeTrainFunction(),l=t.getDedupedMetricsNames();let u;o?u=l.slice().concat(l.map(g=>"val_"+g)):u=l.slice();const c=gG(n.callbacks,n.yieldEvery),d=n.verbose==null?1:n.verbose,{callbackList:f,history:h}=yG(c,d,n.epochs,null,null,i_e(e,n),null,o,u);f.setModel(t),t.history=h,await f.onTrainBegin(),t.stopTraining_=!1;let p=n.initialEpoch==null?0:n.initialEpoch,m=await e.iterator();for(;p<n.epochs;){const g={};await f.onEpochBegin(p);let y=0,v=0;for(r||(m=await e.iterator());!r||y<n.batchesPerEpoch;){const b=await m.next();if(r&&b.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${y} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(b.value!=null){const{xs:x,ys:w}=TG(t,b.value),S={};S.batch=v,S.size=x[0].shape[0],await f.onBatchBegin(v,S);const $=[];if(n.classWeight!=null){const I=kG(n.classWeight,t.outputNames);for(let T=0;T<I.length;++T)$.push(await IG(w[T],null,I[T]))}const C=x.concat(w).concat($),k=a(C);Ke(C);for(let I=0;I<l.length;++I){const T=l[I],E=k[I];S[T]=E,js(E)}await f.onBatchEnd(v,S),mG(S),v++,y++}if(r?y>=n.batchesPerEpoch:b.done){if(o){let x;aM(n.validationData)?x=ht(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):x=ht(t.evaluate(s,i,{batchSize:n.validationBatchSize==null?r_e:n.validationBatchSize,verbose:0}));for(let w=0;w<t.metricsNames.length;++w)g[`val_${t.metricsNames[w]}`]=x[w]}break}if(t.stopTraining_)break}if(await f.onEpochEnd(p,g),p++,t.stopTraining_)break}return await f.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function i_e(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function aM(t){return typeof t.iterator=="function"}function a_e(t){return typeof t.next=="function"}async function l_e(t,e,n){n=n||{};const r=n.batches!=null,o=t.testFunction;let s=[];if(n.verbose>0)throw new Le("Verbose mode is not implemented yet.");P(!r||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const i=a_e(e)?e:await e.iterator();let a=0,l=0;for(;!r||l<n.batches;){const u=await i.next();if(s=Q(()=>{if(u.value){const{xs:c,ys:d}=TG(t,u.value),f=c.concat(d),h=Q(()=>o(f));if(Ke(f),l===0)for(let m=0;m<h.length;++m)s.push(st(0));const p=f[0].shape[0];for(let m=0;m<h.length;++m){const g=h[m],y=s[m];s[m]=Q(()=>he(s[m],K(p,g))),l>0&&Ke(y)}Ke(h),a+=p,++l}return s}),u.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let u=0;u<s.length;++u){const c=s[u];s[u]=_e(s[u],a),Ke(c)}return yr(s)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function _w(t){P(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function If(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(r=>Vl(r,e,n-e)):Vl(t,e,n-e)}function ok(t,e){return Q(()=>t==null?null:Array.isArray(t)?t.map(n=>ok(n,e)):tG(t,e.dtype==="int32"?e:Se(e,"int32")))}function Rw(t,e){const n=[];let r=0,o=null;for(;r<t;)o=r+e,o>=t&&(o=t),n.push([r,o]),r=o;return n}function EG(t){const e=[];t instanceof fn&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(r.rank===1)e.push(zm(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function Ho(t,e){if(t==null)return;const n=[];if(e instanceof fn)n.push(e.id);else if(Array.isArray(e))e.forEach(o=>n.push(o.id));else if(e!=null)for(const o in e){const s=e[o];n.push(s.id)}const r=[];if(t instanceof fn)n.indexOf(t.id)===-1&&r.push(t);else if(Array.isArray(t))t.forEach(o=>{n.indexOf(o.id)===-1&&r.push(o)});else if(t!=null)for(const o in t){const s=t[o];n.indexOf(s.id)===-1&&r.push(s)}r.forEach(o=>{o.isDisposed||o.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function u_e(t){return t instanceof fn}function sk(t){return Array.isArray(t)}function lM(t){return!u_e(t)&&!sk(t)}function uM(t,e,n,r=!0,o=""){if(e==null||e.length===0){if(t!=null){let i=!1;if(sk(t)&&t.length>0)i=!0;else if(lM(t)){for(const a in t)if(t.hasOwnProperty(a)){i=!0;break}}else i=!0;if(i)throw new G(`Error when checking model ${o} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(i=>null);let s;if(lM(t)){t=t,s=[];for(const i of e){if(t[i]==null)throw new G(`No data provided for "${i}". Need data for each key in: ${e}`);s.push(t[i])}}else if(sk(t)){if(t=t,t.length!==e.length)throw new G(`Error when checking model ${o}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);s=t}else{if(t=t,e.length>1)throw new G(`The model ${o} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);s=[t]}if(s=EG(s),n!=null)for(let i=0;i<e.length;++i){if(n[i]==null)continue;const a=s[i];if(a.shape.length!==n[i].length)throw new G(`Error when checking ${o}: expected ${e[i]} to have ${n[i].length} dimension(s). but got array with shape ${a.shape}`);for(let l=0;l<n[i].length;++l){if(l===0&&!r)continue;const u=a.shape[l],c=n[i][l];if(c!=null&&c>=0&&u!==c)throw new G(`${o} expected a batch of elements where each example has shape [${n[i].slice(1,n[i].length)}] (i.e.,tensor shape [*,${n[i].slice(1,n[i].length)}]) but the ${o} received an input with ${a.shape[0]} examples, each with shape [${a.shape.slice(1,a.shape.length)}] (tensor shape [${a.shape}])`)}}return s}function c_e(t,e,n){const r=ka(t.map(s=>s.shape[0]));r.sort();const o=ka(e.map(s=>s.shape[0]));if(o.sort(),r.length>1)throw new G(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(s=>s.shape))}`);if(o.length>1)throw new G(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(s=>s.shape))}`);if(r.length>0&&o.length>0&&!at(r,o))throw new G(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${o[0]} target sample(s).`)}function d_e(t,e,n){const r=[Jb,e1,hp];for(let o=0;o<t.length;++o){const s=t[o],i=e[o],a=n[o];if(i!=null){if(i===hp&&s.shape[s.shape.length-1]===1)throw new G(`You are passing a target array of shape ${s.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(i)!==-1){const l=s.shape.slice(1),u=a.slice(1);for(let c=0;c<l.length;++c){const d=l[c],f=u[c];if(f!=null&&d!==f)throw new G(`A target Tensor with shape ${s.shape} was passed for an output of shape ${a}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function cM(t,e,n,r=!0,o=""){let s;if(Array.isArray(t)){if(t.length!==e.length)throw new G(`Error when checking model ${o}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);s=t}else{if(e.length>1)throw new G(`The model expects ${e.length} ${o} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);s=[t]}if(n!=null)for(let i=0;i<e.length;++i){if(n[i]==null)continue;const a=s[i];if(a.shape.length!==n[i].length)throw new G(`Error when checking ${o}: expected ${e[i]} to have ${n[i].length} dimension(s), but got array with shape ${JSON.stringify(a.shape)}`);for(let l=0;l<n[i].length;++l){if(l===0&&!r)continue;const u=a.shape[l],c=n[i][l];if(c!=null&&c!==u)throw new G(`Error when checking ${o}: expected ${e[i]} to have shape ${JSON.stringify(n[i])} but got array with shape ${JSON.stringify(a.shape)}.`)}}}function f_e(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(r=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(r=>n);{const r=[];for(const o of e){let s=n.hasOwnProperty(o)?n[o]:[];Array.isArray(s)||(s=[s]),r.push(s)}return r}}const h_e="layers-model";class yc extends Ko{constructor(e){super(e),this.isTraining=!1}summary(e,n,r=console.log){if(!this.built)throw new G("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");XOe(this,e,n,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=qOe(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof tl))throw new G("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const i in e.loss)if(this.outputNames.indexOf(i)===-1)throw new G(`Unknown entry in loss dictionary: "${i}". Only expected the following keys: ${this.outputNames}`);for(const i of this.outputNames)e.loss[i]==null&&console.warn(`Output "${i}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${i} during training`),n.push(Ow(e.loss[i]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new G(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(a=>Ow(a))}else{const i=Ow(e.loss);this.outputs.forEach(a=>{n.push(i)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let i=0;i<this.outputs.length;++i){const a=this.internalOutputShapes[i],l=this.outputNames[i];this.feedOutputNames.push(l),this.feedOutputShapes.push(a),this.feedLossFns.push(this.lossFunctions[i])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Wl("loss",()=>{for(let i=0;i<this.outputs.length;++i){if(r.indexOf(i)!==-1)continue;const a=this.lossFunctions[i];this.outputs.length>1&&(this.metricsTensors.push([a,i]),this.metricsNames.push(this.outputNames[i]+"_loss"))}});const o=f_e(e.metrics,this.outputNames),s=(i,a,l)=>{this.outputNames.length>1&&(a=this.outputNames[i]+"_"+a),this.metricsNames.push(a),this.metricsTensors.push([l,i])};Wl("metric",()=>{for(let i=0;i<this.outputs.length;++i){if(r.indexOf(i)!==-1)continue;const a=o[i];(u=>{const c="";let d,f,h;for(const p of u){if(typeof p=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(p)!==-1){const g=this.internalOutputShapes[i];g[g.length-1]===1||this.lossFunctions[i]===e1?["accuracy","acc"].indexOf(p)!==-1?f=xG:["crossentropy","ce"].indexOf(p)!==-1&&(f=LOe):this.lossFunctions[i]===n0?["accuracy","acc"].indexOf(p)!==-1?f=BOe:["crossentropy","ce"].indexOf(p)!==-1&&(f=SG):["accuracy","acc"].indexOf(p)!==-1?f=bG:["crossentropy","ce"].indexOf(p)!==-1&&(f=wG);let y;["accuracy","acc"].indexOf(p)!==-1?y="acc":["crossentropy","ce"].indexOf(p)!==-1&&(y="ce"),h=f,d=c+y}else h=KOe(p),d=c+Vg(p);let m;Wl(d,()=>{m=h}),s(i,d,m)}})(a)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,r={}){const o=r.batchSize==null?32:r.batchSize;_w(o);const i=this.standardizeUserDataXY(e,n,!0,o);try{const a=i[0].concat(i[1]);this.makeTestFunction();const l=this.testFunction,u=this.testLoop(l,a,o,r.verbose,r.steps);return yr(u)}finally{Ho(i[0],e),Ho(i[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),l_e(this,e,n)}checkNumSamples(e,n,r,o="steps"){let s;if(r!=null){if(s=null,n!=null)throw new G(`If ${o} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?s=e[0].shape[0]:s=e.shape[0];else throw new G(`Either the input data should have a defined shape, or ${o} shoud be specified.`);return s}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new G("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(n),o=r?n:[n],s=this.retrieveSymbolicTensors(o),i=new da;if(e instanceof fn&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new G(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)i.add(this.inputs[l],e[l])}else for(const l of this.inputs){const u=e[l.name];if(u==null)throw new G(`No value is provided for the model's input ${l.name}`);i.add(l,u)}const a=Lf(s,i);return r?a:a[0]}retrieveSymbolicTensors(e){const n=lu(null,e.length);let r=e.length;for(const o of this.layers){const s=Array.isArray(o.output)?o.output:[o.output],i=s.map(a=>a.name);for(let a=0;a<e.length;++a){const l=i.indexOf(e[a]);if(l!==-1&&(n[a]=s[l],r--),r===0)break}if(r===0)break}if(r>0){const o=[];throw n.forEach((s,i)=>{s==null&&o.push(e[i])}),new G(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(o)}`)}return n}predictLoop(e,n=32,r=!1){return Q(()=>{const o=this.checkNumSamples(e);if(r)throw new Le("Verbose predictLoop() is not implemented yet.");const s=Rw(o,n),i=this.outputs.map(a=>[]);for(let a=0;a<s.length;++a)Q(()=>{const u=s[a][0],c=s[a][1],d=If(e,u,c),f=[];if(Array.isArray(d))for(let p=0;p<d.length;++p)f.push({key:this.inputs[p],value:d[p]});else f.push({key:this.inputs[0],value:d});const h=new da(f);return Lf(this.outputs,h)}).forEach((u,c)=>i[c].push(u));return yr(i.map(a=>br(a,0)))})}predict(e,n={}){const r=EG(e);cM(r,this.inputNames,this.feedInputShapes,!1);try{const o=n.batchSize==null?32:n.batchSize;return _w(o),this.predictLoop(r,o)}finally{Ho(r,e)}}predictOnBatch(e){cM(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,r=!0,o){if(this.optimizer_==null)throw new Oo("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const s=[];for(let i=0;i<this.feedOutputShapes.length;++i){const a=this.feedOutputShapes[i];this.feedLossFns[i]===n0?s.push(a.slice(0,a.length-1).concat([1])):s.push(a)}if(e=uM(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=uM(n,this.feedOutputNames,s,!1,"target"),c_e(e,n),d_e(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&o!=null&&o>0&&e[0].shape[0]%o!==0)throw new G(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${o}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,r,o,s=!0,i){const[a,l]=this.standardizeUserDataXY(e,n,s,i);if(r!=null)throw new Error("sample weight is not supported yet.");let u=null;if(o!=null){const c=kG(o,this.outputNames);u=[];for(let d=0;d<c.length;++d)u.push(await IG(l[d],null,c[d]))}return[a,l,u]}testLoop(e,n,r,o=0,s){return Q(()=>{const i=this.checkNumSamples(n,r,s,"steps"),a=[];if(o>0)throw new Le("Verbose mode is not implemented yet.");if(s!=null)throw new Le("steps mode in testLoop() is not implemented yet");{const l=Rw(i,r),u=Pr(ps(0,i));for(let c=0;c<l.length;++c){const d=l[c][0],f=l[c][1],h=Vl(u,d,f-d),p=ok(n,h),m=e(p);if(c===0)for(let g=0;g<m.length;++g)a.push(st(0));for(let g=0;g<m.length;++g){const y=m[g];a[g]=he(a[g],K(f-d,y))}}for(let c=0;c<a.length;++c)a[c]=_e(a[c],i)}return a})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let r=0;r<e.length;++r){const o=e[r];let s=o;if(qD(e,o)>1){const i=qD(e.slice(0,r),o);s+=`_${i}`}n.push(s)}return n}makeTrainFunction(){return e=>{const n=[],r=e.slice(0,this.inputs.length),o=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),s=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),i=[],a=()=>{const d=[];for(let m=0;m<this.inputs.length;++m)d.push({key:this.inputs[m],value:r[m]});const f=new da(d),h=Lf(this.outputs,f,{training:!0});let p;for(let m=0;m<this.lossFunctions.length;++m){const g=this.lossFunctions[m];let y=g(o[m],h[m]);s[m]!=null&&(y=n_e(y,s[m]));const v=cn(y);n.push(v),m===0?p=y:p=he(p,y)}for(let m=0;m<this.metricsTensors.length;++m){let g;if(this.outputs.length>1&&m<this.outputs.length)g=n[m];else{const y=this.metricsTensors[m][0],v=this.metricsTensors[m][1];g=cn(y(o[v],h[v]))}js(g),i.push(g)}return p=cn(p),this.calculateLosses().forEach(m=>{p=he(p,m)}),p},l=this.collectedTrainableWeights.map(d=>d.read());return[this.optimizer_.minimize(a,!0,l)].concat(i)}}makeTestFunction(){this.testFunction=e=>Q(()=>{const n=[];let r;const o=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=[];for(let u=0;u<this.inputs.length;++u)i.push({key:this.inputs[u],value:o[u]});const a=new da(i),l=Lf(this.outputs,a);for(let u=0;u<this.lossFunctions.length;++u){const c=this.lossFunctions[u],d=cn(c(s[u],l[u]));u===0?r=d:r=he(r,d),n.push(r)}for(let u=0;u<this.metricsTensors.length;++u){const c=this.metricsTensors[u][0],d=this.metricsTensors[u][1],f=cn(c(s[d],l[d]));n.push(f)}return n})}async fit(e,n,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let o,s,i,a,l,u,c,d,f;try{const h=r.batchSize==null?32:r.batchSize;_w(h);const m=await this.standardizeUserData(e,n,r.sampleWeight,r.classWeight,!1,h);o=m[0],s=m[1],f=m[2];let g=!1,y;if(r.validationData!=null&&r.validationData.length>0){if(g=!0,r.validationData.length===2)l=r.validationData[0],u=r.validationData[1];else throw r.validationData.length===3?new Le("validationData including sample weights is not supported yet."):new G(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const I=await this.standardizeUserData(l,u,null,null,!0,h);c=I[0],d=I[1],y=c.concat(d)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){g=!0;const k=Math.floor(o[0].shape[0]*(1-r.validationSplit)),I=o[0].shape[0];c=If(o,k,I),i=o,o=If(o,0,k),d=If(s,k,I),a=s,s=If(s,0,k),y=c.concat(d)}else r.validationSteps!=null&&(g=!0);const v=o.concat(s).concat(f);this.checkTrainableWeightsConsistency();const b=this.makeTrainFunction(),x=this.getDedupedMetricsNames();let w,S;g?(this.makeTestFunction(),w=this.testFunction,S=x.slice().concat(x.map(k=>"val_"+k))):(w=null,y=[],S=x.slice());const $=gG(r.callbacks,r.yieldEvery);return await this.fitLoop(b,v,x,h,r.epochs,r.verbose,$,w,y,r.shuffle,S,r.initialEpoch,null,null)}finally{this.isTraining=!1,Ho(o,e),Ho(s,n),Ho(i,e),Ho(a,n),Ho(c,l),Ho(d,u),f!=null&&Ke(f)}}async fitLoop(e,n,r,o,s,i,a,l,u,c,d,f,h,p){o==null&&(o=32),s==null&&(s=1),c==null&&(c=!0),f==null&&(f=0);let m=!1;if(l!=null&&u!=null&&(m=!0),p!=null&&(m=!0,h==null))throw new G("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const g=this.checkNumSamples(n,o,h,"steps_per_epoch");let y;g!=null&&(y=ps(0,g)),i==null&&(i=1);const{callbackList:v,history:b}=yG(a,i,s,f,g,h,o,m,d);v.setModel(this),this.history=b,await v.onTrainBegin(),this.stopTraining_=!1;for(let x=f;x<s;++x){await v.onEpochBegin(x);const w={};if(h!=null)throw new Le("stepsPerEpoch mode is not implemented yet.");{if(c==="batch")throw new Le("batch shuffling is not implemneted yet");c&&qSe(y);const S=Pr(y),$=Rw(g,o);for(let C=0;C<$.length;++C){const k={};if(await v.onBatchBegin(C,k),Q(()=>{const I=$[C][0],T=$[C][1],E=Vl(S,I,T-I);k.batch=C,k.size=T-I;const _=ok(n,E),O=e(_);for(let F=0;F<r.length;++F){const M=r[F],L=O[F];k[M]=L,js(L)}if(C===$.length-1&&m){const F=this.testLoop(l,u,o);for(let M=0;M<r.length;++M){const L=r[M],N=F[M];js(N),w["val_"+L]=N}}}),await v.onBatchEnd(C,k),mG(k),this.stopTraining_)break}S.dispose()}if(await v.onEpochEnd(x,w),this.stopTraining_)break}return await v.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,n){return s_e(this,e,n)}async trainOnBatch(e,n){const r=await this.standardizeUserData(e,n),o=r[0],s=r[1],a=this.makeTrainFunction()(o.concat(s)),l=[];for(const u of a){const c=await u.data();l.push(c[0])}return Ke(a),Ho(r[0],e),Ho(r[1],n),yr(l)}getNamedWeights(e){const n=[],r=e!=null&&e.trainableOnly,o=r?this.trainableWeights:this.weights,s=this.getWeights(r);for(let i=0;i<o.length;++i)r&&!o[i].trainable||n.push({name:o[i].originalName,tensor:s[i]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=AD().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-AD().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=di(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>di(n))}else{const n=Object.keys(this.loss);e={};const r=this.loss;for(const o of n)if(typeof r[o]=="string")e[o]=di(r[o]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[di(Vg(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>di(Vg(e)));{const e={};for(const n in this.metrics)e[n]=di(Vg(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=nk(e.optimizer_config),r=Si(n);let o;if(typeof e.loss=="string")o=bl(e.loss);else if(Array.isArray(e.loss))o=e.loss.map(i=>bl(i));else if(e.loss!=null){o={};for(const i in e.loss)o[i]=bl(e.loss[i])}let s;if(Array.isArray(e.metrics))s=e.metrics.map(i=>bl(i));else if(e.metrics!=null){s={};for(const i in e.metrics)s[i]=bl(e.metrics[i])}this.compile({loss:o,metrics:s,optimizer:r})}async save(e,n){if(typeof e=="string"){const u=HCe(e);if(u.length===0)throw new G(`Cannot find any save handlers for URL '${e}'`);if(u.length>1)throw new G(`Found more than one (${u.length}) save handlers for URL '${e}'`);e=u[0]}if(e.save==null)throw new G("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await _D(this.getNamedWeights(n)),a={modelTopology:this.toJSON(null,!1),format:h_e,generatedBy:`TensorFlow.js tfjs-layers v${$G}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){a.trainingConfig=this.getTrainingConfig();const u="optimizer",{data:c,specs:d}=await _D(await this.optimizer.getWeights(),u);r.specs.push(...d),r.data=GCe([r.data,c])}return this.userDefinedMetadata!=null&&(sM(this.userDefinedMetadata,this.name,!0),a.userDefinedMetadata=this.userDefinedMetadata),a.weightData=r.data,a.weightSpecs=r.specs,e.save(a)}setUserDefinedMetadata(e){sM(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}yc.className="Model";ce(yc);class NG extends yc{}NG.className="Functional";ce(NG);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class gd extends yc{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:Yb("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new G(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof gd||e instanceof yc;let r;if(n){if(r=e,r.outputs.length!==1)throw new G("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new G("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new G("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const o=mOe({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(o)}if(n)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new G(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new G("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=cG(this.outputs[0])}this.inboundNodes=[],new Zb({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:lu(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(o=>o.shape),outputShapes:this.outputs[0].shape})}else{const o=e.apply(this.outputs[0]);if(Array.isArray(o))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[o],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(tt(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new yc({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,r=console.log){this.built||this.build(),super.summary(e,n,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,r={}){if(!this.built)throw new Oo("The model needs to be compiled before being used.");return this.model.evaluate(e,n,r)}async evaluateDataset(e,n){if(!this.built)throw new Oo("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,r={}){if(!this.built)throw new Oo("The model needs to be compiled before being used.");return this.model.fit(e,n,r)}async fitDataset(e,n){if(!this.built)throw new Oo("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,r={},o=!1){let s,i={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new G("Legacy serialization format not supported yet.");s=n}else P(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),s=n.layers,delete n.layers,i=n;const a=new e(i);if(!(a instanceof gd))throw new Le(`Sequential.fromConfig called on non-Sequential input: ${a}`);for(const l of s){const c=Si(l,void 0,o);o&&c.setFastWeightInitDuringBuild(!0),a.add(c)}return a}set stopTraining(e){if(this.model==null)throw new G("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new G("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const r={};r.className=n.getClassName(),r.config=n.getConfig(),e.push(r)}return{name:this.name,layers:e}}}gd.className="Sequential";ce(gd);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function p_e(t){return new gd(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Ir=class extends Kd{getConfig(){return{}}};class AG extends Ir{apply(e,n=1){return JAe(e,n)}}AG.className="elu";ce(AG);class OG extends Ir{apply(e){return qV(e)}}OG.className="selu";ce(OG);class _G extends Ir{apply(e){return wu(e)}}_G.className="relu";ce(_G);class RG extends Ir{apply(e){return Q(()=>cp(6,wu(e)))}}RG.className="relu6";ce(RG);class PG extends Ir{apply(e){return e}}PG.className="linear";ce(PG);class DG extends Ir{apply(e){return Ud(e)}}DG.className="sigmoid";ce(DG);class MG extends Ir{apply(e){return tOe(e)}}MG.className="hardSigmoid";ce(MG);class FG extends Ir{apply(e){return _m(e)}}FG.className="softplus";ce(FG);class LG extends Ir{apply(e){return eOe(e)}}LG.className="softsign";ce(LG);class BG extends Ir{apply(e){return NE(e)}}BG.className="tanh";ce(BG);let Y2=class extends Ir{apply(e,n=-1){return JE(e,n)}};Y2.className="softmax";ce(Y2);class zG extends Ir{apply(e,n=-1){return BV(e,n)}}zG.className="logSoftmax";ce(zG);class jG extends Ir{apply(e,n=1){return Q(()=>K(Ud(K(e,n)),e))}}jG.className="swish";ce(jG);class WG extends Ir{apply(e){return Q(()=>K(e,NE(_m(e))))}}WG.className="mish";ce(WG);function Fa(t){return t.getClassName()}function Pw(t,e={}){return Bm(t,Co.getMap().classNameMap,e,"activation")}function La(t){if(t==null){const e={};return e.className="linear",e.config={},Pw(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},Pw(e)}else return t instanceof Ir?t:Pw(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function VG(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class UG extends Kd{}class Q2 extends UG{constructor(e){super(),VG(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return Q(()=>{let n=pn([1]);return this.hasL1&&(n=he(n,Ae(K(this.l1,tr(e))))),this.hasL2&&(n=he(n,Ae(K(this.l2,jm(e))))),q(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}Q2.className="L1L2";ce(Q2);function m_e(t){return VG(t),new Q2({l2:t!=null?t.l2:null,l1:0})}const dM={l1l2:"L1L2"};function xt(t){return M2(t)}function fM(t,e={}){return Bm(t,Co.getMap().classNameMap,e,"regularizer")}function zt(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in dM?dM[t]:t,config:{}};return fM(n)}else return t instanceof UG?t:fM(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class GG extends He{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=Pe(e);let r=wu(e);return this.maxValue!=null&&(r=so(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}GG.className="ReLU";ce(GG);class HG extends He{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=Pe(e);return FE(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}HG.className="LeakyReLU";ce(HG);class KG extends He{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=Bt(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=zt(e.alphaRegularizer),this.alphaConstraint=xn(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new G(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=tt(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const o of this.sharedAxes)n[o-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let o=1;o<e.length;++o)r[o]=e[o];this.inputSpec=[new gn({ndim:e.length,axes:r})],this.built=!0}call(e,n){return e=Pe(e),VE(e,this.alpha.read())}getConfig(){const e={alphaInitializer:Vt(this.alphaInitializer),alphaRegularizer:xt(this.alphaRegularizer),alphaConstraint:vn(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}KG.className="PReLU";ce(KG);let qG=class extends He{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new Le(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=Pe(e);return Vb(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};qG.className="ELU";ce(qG);class XG extends He{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const r=Pe(e);return K(r,Se(lo(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}XG.className="ThresholdedReLU";ce(XG);class YG extends He{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new Y2().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){return Q(()=>{let r=Pe(e);const o=n.mask;if(o!=null){const s=K(Re(el(r.shape),Se(o,r.dtype)),st(-1e9));r=he(r,s)}return this.axis instanceof Array?this.axis.length>1?Ys(Re(r,zV(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}YG.className="Softmax";ce(YG);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function vc(t,e,n){if(typeof t=="number")return lu(t,e);if(t.length!==e)throw new G(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let r=0;r<e;++r){const o=t[r];if(!XAe(o))throw new G(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${o}`)}return t}function us(t,e,n,r,o=1){if(t==null)return t;const s=e+(e-1)*(o-1);let i;return n==="same"?i=t:i=t-s+1,Math.floor((i+r-1)/r)}function Os(t,e,n,r){if(t==null)return null;if(r==="valid")t=t*e+Ma([n-e,0]);else if(r==="same")t=t*e;else throw new G(`Unsupport padding mode: ${r}.`);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Z2(t,e){return Q(()=>(on(e),e==="channelsFirst"?Qe(t,[0,2,3,1]):t))}function QG(t,e){return Q(()=>(on(e),e==="channelsFirst"?Qe(t,[0,2,3,4,1]):t))}function g_e(t,e,n,r=1,o="valid",s,i=1){return Q(()=>{if(s==null&&(s=ms()),on(s),t.shape.length!==3)throw new G(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new G(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new G(`The bias for a conv1dWithBias operation should be 1, but is ${e.shape.length} instead`);if(s==="channelsFirst"&&(t=Qe(t,[0,2,1])),o==="causal")throw new Le("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=AV(t,e,r,o==="same"?"same":"valid","NWC",i);return n!=null&&(a=xs(a,n)),a})}function hM(t,e,n,r=[1,1],o="valid",s,i,a=null){return Q(()=>{if(s==null&&(s=ms()),on(s),t.rank!==3&&t.rank!==4)throw new G(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new G(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=Z2(t,s);if(o==="causal")throw new Le("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=$Ee({x:l,filter:e,strides:r,pad:o==="same"?"same":"valid",dilations:i,dataFormat:"NHWC",bias:n,activation:a}),s==="channelsFirst"&&(l=Qe(l,[0,3,1,2])),l})}function y_e(t,e,n,r=[1,1,1],o="valid",s,i){return Q(()=>{if(s==null&&(s=ms()),on(s),t.rank!==4&&t.rank!==5)throw new G(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new G(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let a=QG(t,s);if(o==="causal")throw new Le("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=Ske(a,e,r,o==="same"?"same":"valid","NDHWC",i),n!=null&&(a=xs(a,n)),s==="channelsFirst"&&(a=Qe(a,[0,4,1,2,3])),a})}class t1 extends He{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",t1.verifyArgs(n),this.rank=e,En(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new Le(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=vc(n.kernelSize,e,"kernelSize"),this.strides=vc(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,uo(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,on(this.dataFormat),this.activation=La(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=Bt(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=xn(n.biasConstraint),this.biasRegularizer=zt(n.biasRegularizer),this.activityRegularizer=zt(n.activityRegularizer),this.dilationRate=vc(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new G(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new G(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new G(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(As("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!F2(e.kernelSize,"number",1,3))throw new G(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Fa(this.activation),useBias:this.useBias,biasInitializer:Vt(this.biasInitializer),biasRegularizer:xt(this.biasRegularizer),activityRegularizer:xt(this.activityRegularizer),biasConstraint:vn(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class qd extends t1{constructor(e,n){super(e,n),this.kernel=null,qd.verifyArgs(n),this.filters=n.filters,En(this.filters,"filters"),this.kernelInitializer=Bt(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=xn(n.kernelConstraint),this.kernelRegularizer=zt(n.kernelRegularizer)}build(e){e=tt(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new G(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],o=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:r}}],this.built=!0}call(e,n){return Q(()=>{e=Pe(e);let r;const o=this.bias==null?null:this.bias.read(),s=XU(this.activation.getClassName());if(s!=null&&this.rank===2)r=hM(e,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate,s);else{if(this.rank===1)r=g_e(e,this.kernel.read(),o,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=hM(e,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=y_e(e,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new Le("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=tt(e);const n=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let s=0;s<r.length;++s){const i=us(r[s],this.kernelSize[s],this.padding,this.strides[s],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[s]);n.push(i)}let o=[e[0]];return this.dataFormat==="channelsLast"?(o=o.concat(n),o.push(this.filters)):(o.push(this.filters),o=o.concat(n)),o}getConfig(){const e={filters:this.filters,kernelInitializer:Vt(this.kernelInitializer),kernelRegularizer:xt(this.kernelRegularizer),kernelConstraint:vn(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new G(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class Gm extends qd{constructor(e){super(2,e),Gm.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!F2(e.kernelSize,"number",1,2))throw new G(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}Gm.className="Conv2D";ce(Gm);class Hm extends qd{constructor(e){super(3,e),Hm.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new G(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}Hm.className="Conv3D";ce(Hm);class ZG extends Gm{constructor(e){if(super(e),this.inputSpec=[new gn({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new G(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=tt(e),e.length!==4)throw new G("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new G("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],o=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",o,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new gn({ndim:4,axes:{[n]:r}})],this.built=!0}call(e,n){return Q(()=>{let r=Pe(e);if(r.shape.length!==4)throw new G(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const o=r.shape,s=o[0];let i,a;this.dataFormat==="channelsFirst"?(i=2,a=3):(i=1,a=2);const l=o[i],u=o[a],c=this.kernelSize[0],d=this.kernelSize[1],f=this.strides[0],h=this.strides[1],p=Os(l,f,c,this.padding),m=Os(u,h,d,this.padding),g=[s,p,m,this.filters];this.dataFormat!=="channelsLast"&&(r=Qe(r,[0,2,3,1]));let y=OV(r,this.kernel.read(),g,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(y=Qe(y,[0,3,1,2])),this.bias!=null&&(y=xs(y,this.bias.read(),this.dataFormat)),this.activation!=null&&(y=this.activation.apply(y)),y})}computeOutputShape(e){e=tt(e);const n=e.slice();let r,o,s;this.dataFormat==="channelsFirst"?(r=1,o=2,s=3):(r=3,o=1,s=2);const i=this.kernelSize[0],a=this.kernelSize[1],l=this.strides[0],u=this.strides[1];return n[r]=this.filters,n[o]=Os(n[o],l,i,this.padding),n[s]=Os(n[s],u,a,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}ZG.className="Conv2DTranspose";ce(ZG);class JG extends Hm{constructor(e){if(super(e),this.inputSpec=[new gn({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new G(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=tt(e),e.length!==5)throw new G("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new G("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],o=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",o,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new gn({ndim:5,axes:{[n]:r}})],this.built=!0}call(e,n){return Q(()=>{let r=Pe(e);if(r.shape.length!==5)throw new G(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const o=r.shape,s=o[0];let i,a,l;this.dataFormat==="channelsFirst"?(l=2,i=3,a=4):(l=1,i=2,a=3);const u=o[l],c=o[i],d=o[a],f=this.kernelSize[0],h=this.kernelSize[1],p=this.kernelSize[2],m=this.strides[0],g=this.strides[1],y=this.strides[2],v=Os(u,m,f,this.padding),b=Os(c,g,h,this.padding),x=Os(d,y,p,this.padding),w=[s,v,b,x,this.filters];this.dataFormat!=="channelsLast"&&(r=Qe(r,[0,2,3,4,1]));let S=kke(r,this.kernel.read(),w,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(S=Qe(S,[0,4,1,2,3])),this.bias!==null&&(S=xs(S,this.bias.read(),this.dataFormat)),this.activation!==null&&(S=this.activation.apply(S)),S})}computeOutputShape(e){e=tt(e);const n=e.slice();let r,o,s,i;this.dataFormat==="channelsFirst"?(r=1,o=2,s=3,i=4):(r=4,o=1,s=2,i=3);const a=this.kernelSize[0],l=this.kernelSize[1],u=this.kernelSize[2],c=this.strides[0],d=this.strides[1],f=this.strides[2];return n[r]=this.filters,n[o]=Os(n[o],c,a,this.padding),n[s]=Os(n[s],d,l,this.padding),n[i]=Os(n[i],f,u,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}JG.className="Conv3DTranspose";ce(JG);class eH extends qd{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new G("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new G("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new G(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=Bt(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=zt(n.depthwiseRegularizer),this.depthwiseConstraint=xn(n.depthwiseConstraint),this.pointwiseInitializer=Bt(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=zt(n.pointwiseRegularizer),this.pointwiseConstraint=xn(n.pointwiseConstraint)}build(e){if(e=tt(e),e.length<this.rank+2)throw new G(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new G(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const r=e[n],o=this.kernelSize.concat([r,this.depthMultiplier]),s=[];for(let a=0;a<this.rank;++a)s.push(1);s.push(r*this.depthMultiplier,this.filters);const i=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",o,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,i,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",s,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,i,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,i,this.biasConstraint):this.bias=null,this.inputSpec=[new gn({ndim:this.rank+2,axes:{[n]:r}})],this.built=!0}call(e,n){return Q(()=>{e=Pe(e);let r;if(this.rank===1)throw new Le("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=Qe(e,[0,2,3,1])),r=XV(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=xs(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=Qe(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=Vt(this.depthwiseInitializer),e.pointwiseInitializer=Vt(this.pointwiseInitializer),e.depthwiseRegularizer=xt(this.depthwiseRegularizer),e.pointwiseRegularizer=xt(this.pointwiseRegularizer),e.depthwiseConstraint=vn(this.depthwiseConstraint),e.pointwiseConstraint=vn(this.pointwiseConstraint),e}}eH.className="SeparableConv";class tH extends eH{constructor(e){super(2,e)}}tH.className="SeparableConv2D";ce(tH);class n1 extends qd{constructor(e){super(1,e),n1.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!F2(e.kernelSize,"number",1,1))throw new G(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}n1.className="Conv1D";ce(n1);class nH extends He{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return Q(()=>{if(e=Pe(e),this.dataFormat==="channelsLast"){const r=Wg(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return Wg(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=Wg(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return Wg(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}nH.className="Cropping2D";ce(nH);class rH extends He{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,on(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,HAe(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,r]}else{const n=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],n,r,e[3]]}}call(e,n){return Q(()=>{let r=Pe(e);const o=r.shape;if(this.dataFormat==="channelsFirst"){r=Qe(r,[0,2,3,1]);const s=this.size[0]*o[2],i=this.size[1]*o[3],a=this.interpolation==="nearest"?yi.resizeNearestNeighbor(r,[s,i]):yi.resizeBilinear(r,[s,i]);return Qe(a,[0,3,1,2])}else{const s=this.size[0]*o[1],i=this.size[1]*o[2];return this.interpolation==="nearest"?yi.resizeNearestNeighbor(r,[s,i]):yi.resizeBilinear(r,[s,i])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}rH.className="UpSampling2D";ce(rH);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function v_e(t,e,n=[1,1],r="valid",o,s){return Q(()=>{o==null&&(o=ms()),on(o);let i=Z2(t,o);if(t.rank!==4)throw new G(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new G(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return i=RE(i,e,n,r==="same"?"same":"valid","NHWC",s),o==="channelsFirst"&&(i=Qe(i,[0,3,1,2])),i})}class oH extends t1{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=Bt(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=xn(e.depthwiseConstraint),this.depthwiseRegularizer=zt(e.depthwiseRegularizer)}build(e){if(e=tt(e),e.length<4)throw new G(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new G(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const r=e[n],o=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",o,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return Q(()=>{e=Pe(e);let r=v_e(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=xs(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=tt(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],o=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,s=us(n,this.kernelSize[0],this.padding,this.strides[0]),i=us(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],o,s,i]:[e[0],s,i,o]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=Vt(this.depthwiseInitializer),e.depthwiseRegularizer=xt(this.depthwiseRegularizer),e.depthwiseConstraint=vn(this.depthwiseRegularizer),e}}oH.className="DepthwiseConv2D";ce(oH);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function sH(t,e,n,r){if(Array.isArray(t)){if(e!=null||n!=null)throw new G("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function o(s){return s==null||Array.isArray(s)?s:[s]}return e=o(e),n=o(n),{inputs:t,initialState:e,constants:n}}function iH(t,e,n,r=!1,o,s,i=!1,a=!1){return Q(()=>{const l=e.shape.length;if(l<3)throw new G(`Input should be at least 3D, but is ${l}D.`);const u=[1,0].concat(ps(2,l));e=Qe(e,u),i&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),o!=null&&(o=Se(Se(o,"bool"),"float32"),o.rank===l-1&&(o=gr(o,-1)),o=Qe(o,u)),r&&(e=iu(e,0),o!=null&&(o=iu(o,0)));const c=[];let d,f=n;const h=e.shape[0],p=au(e);let m;o!=null&&(m=au(o));for(let y=0;y<h;++y){const v=p[y],b=Q(()=>t(v,f));if(o==null)d=b[0],f=b[1];else{const x=Q(()=>{const w=m[y],S=Re(Lo(w),w),$=he(K(b[0],w),K(f[0],S)),C=f.map((k,I)=>he(K(b[1][I],w),K(k,S)));return{output:$,newStates:C}});d=x.output,f=x.newStates}a&&c.push(d)}let g;return a&&(g=Ri(c,1)),[d,g,f]})}class nl extends He{constructor(e){super(e);let n;if(e.cell==null)throw new G("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new tN({cells:e.cell}):n=e.cell,n.stateSize==null)throw new G("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new gn({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return ps(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){J$(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const r=n[0];let o;if(this.returnSequences?o=[e[0],e[1],r]:o=[e[0],r],this.returnState){const s=[];for(const i of n)s.push([e[0],i]);return[o].concat(s)}else return o}computeMask(e,n){return Q(()=>{Array.isArray(n)&&(n=n[0]);const r=this.returnSequences?n:null;if(this.returnState){const o=this.states.map(s=>null);return[r].concat(o)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let r=0;r<e;++r)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new Le("Constants support is not implemented in RNN yet.");J$(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new gn({shape:[n,null,...r]});const o=[e[0]].concat(e.slice(2));this.cell.build(o);let s;if(Array.isArray(this.cell.stateSize)?s=this.cell.stateSize:s=[this.cell.stateSize],this.stateSpec!=null){if(!at(this.stateSpec.map(i=>i.shape[i.shape.length-1]),s))throw new G(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=s.map(i=>new gn({shape:[null,i]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){Q(()=>{if(!this.stateful)throw new Ns("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new G("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(o=>pn([r,o])):this.states_=[pn([r,this.cell.stateSize])];else if(e==null)Ke(this.states_),this.keptStates!=null&&(Ke(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(o=>pn([r,o])):this.states_[0]=pn([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new G(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):Ke(this.states_);for(let o=0;o<this.states_.length;++o){const s=e[o],i=Array.isArray(this.cell.stateSize)?this.cell.stateSize[o]:this.cell.stateSize,a=[r,i];if(!at(s.shape,a))throw new G(`State ${o} is incompatible with layer ${this.name}: expected shape=${a}, received shape=${s.shape}`);this.states_[o]=s}}this.states_=this.states_.map(o=>js(o.clone()))})}apply(e,n){let r=n==null?null:n.initialState,o=n==null?null:n.constants;n==null&&(n={});const s=sH(e,r,o,this.numConstants);e=s.inputs,r=s.initialState,o=s.constants;let i=[],a=[];if(r!=null){n.initialState=r,i=i.concat(r),this.stateSpec=[];for(const u of r)this.stateSpec.push(new gn({shape:u.shape}));a=a.concat(this.stateSpec)}if(o!=null&&(n.constants=o,i=i.concat(o),this.numConstants=o.length),i[0]instanceof Zs){const u=[e].concat(i),c=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=c;const f=super.apply(u,n);return this.inputSpec=d,f}else return super.apply(e,n)}call(e,n){return Q(()=>{const r=n==null?null:n.mask,o=n==null?null:n.training;let s=n==null?null:n.initialState;e=Pe(e),s==null&&(this.stateful?s=this.states_:s=this.getInitialState(e));const i=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(s.length!==i)throw new G(`RNN Layer has ${i} state(s) but was passed ${s.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const a={training:o},u=iH((p,m)=>{const g=this.cell.call([p].concat(m),a);return[g[0],g.slice(1)]},e,s,this.goBackwards,r,null,this.unroll,this.returnSequences),c=u[0],d=u[1],f=u[2];this.stateful&&this.resetStates(f,o);const h=this.returnSequences?d:c;return this.returnState?[h].concat(f):h})}getInitialState(e){return Q(()=>{let n=pn(e.shape);return n=Ae(n,[1,2]),n=zm(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?Q$(n,[1,r]):n):this.cell.stateSize>1?[Q$(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===nl.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),n)}static fromConfig(e,n,r={}){const o=n.cell,s=Si(o,r);return new e(Object.assign(n,{cell:s}))}}nl.className="RNN";ce(nl);class r1 extends He{}class J2 extends r1{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,En(this.units,"units"),this.activation=La(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Bt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Bt(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Bt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=zt(e.kernelRegularizer),this.recurrentRegularizer=zt(e.recurrentRegularizer),this.biasRegularizer=zt(e.biasRegularizer),this.kernelConstraint=xn(e.kernelConstraint),this.recurrentConstraint=xn(e.recurrentConstraint),this.biasConstraint=xn(e.biasConstraint),this.dropout=md([1,Ma([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=md([1,Ma([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=tt(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return Q(()=>{if(e=e,e.length!==2)throw new G(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const o=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Ba({ones:()=>Lo(e),rate:this.dropout,training:o,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Ba({ones:()=>Lo(r),rate:this.recurrentDropout,training:o,dropoutFunc:this.dropoutFunc}));let s;const i=this.dropoutMask,a=this.recurrentDropoutMask;i!=null?s=Us(K(e,i),this.kernel.read()):s=Us(e,this.kernel.read()),this.bias!=null&&(s=xs(s,this.bias.read())),a!=null&&(r=K(r,a));let l=he(s,Us(r,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Fa(this.activation),useBias:this.useBias,kernelInitializer:Vt(this.kernelInitializer),recurrentInitializer:Vt(this.recurrentInitializer),biasInitializer:Vt(this.biasInitializer),kernelRegularizer:xt(this.kernelRegularizer),recurrentRegularizer:xt(this.recurrentRegularizer),biasRegularizer:xt(this.biasRegularizer),activityRegularizer:xt(this.activityRegularizer),kernelConstraint:vn(this.kernelConstraint),recurrentConstraint:vn(this.recurrentConstraint),biasConstraint:vn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}}J2.className="SimpleRNNCell";ce(J2);class aH extends nl{constructor(e){e.cell=new J2(e),super(e)}call(e,n){return Q(()=>{this.cell.dropoutMask!=null&&(Ke(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Ke(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,o=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:o,initialState:s})})}static fromConfig(e,n){return new e(n)}}aH.className="SimpleRNN";ce(aH);class eN extends r1{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new G("GRUCell does not support reset_after parameter set to true.");this.units=e.units,En(this.units,"units"),this.activation=La(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=La(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Bt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Bt(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Bt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=zt(e.kernelRegularizer),this.recurrentRegularizer=zt(e.recurrentRegularizer),this.biasRegularizer=zt(e.biasRegularizer),this.kernelConstraint=xn(e.kernelConstraint),this.recurrentConstraint=xn(e.recurrentConstraint),this.biasConstraint=xn(e.biasConstraint),this.dropout=md([1,Ma([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=md([1,Ma([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=tt(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return Q(()=>{if(e=e,e.length!==2)throw new G(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training==null?!1:n.training;let o=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Ba({ones:()=>Lo(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Ba({ones:()=>Lo(o),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const s=this.dropoutMask,i=this.recurrentDropoutMask;let a,l,u;0<this.dropout&&this.dropout<1&&(e=K(e,s[0]));let c=Us(e,this.kernel.read());this.useBias&&(c=xs(c,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(o=K(o,i[0]));const d=this.recurrentKernel.read(),[f,h]=ro(d,[2*this.units,this.units],d.rank-1),p=Us(o,f),[m,g,y]=ro(c,3,c.rank-1),[v,b]=ro(p,2,p.rank-1);a=this.recurrentActivation.apply(he(m,v)),l=this.recurrentActivation.apply(he(g,b));const x=Us(K(l,o),h);u=this.activation.apply(he(y,x));const w=he(K(a,o),K(he(1,tn(a)),u));return[w,w]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Fa(this.activation),recurrentActivation:Fa(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Vt(this.kernelInitializer),recurrentInitializer:Vt(this.recurrentInitializer),biasInitializer:Vt(this.biasInitializer),kernelRegularizer:xt(this.kernelRegularizer),recurrentRegularizer:xt(this.recurrentRegularizer),biasRegularizer:xt(this.biasRegularizer),activityRegularizer:xt(this.activityRegularizer),kernelConstraint:vn(this.kernelConstraint),recurrentConstraint:vn(this.recurrentConstraint),biasConstraint:vn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}}eN.className="GRUCell";ce(eN);class lH extends nl{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new eN(e),super(e)}call(e,n){return Q(()=>{this.cell.dropoutMask!=null&&(Ke(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Ke(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,o=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:o,initialState:s})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}lH.className="GRU";ce(lH);class o1 extends r1{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,En(this.units,"units"),this.activation=La(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=La(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Bt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Bt(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Bt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=zt(e.kernelRegularizer),this.recurrentRegularizer=zt(e.recurrentRegularizer),this.biasRegularizer=zt(e.biasRegularizer),this.kernelConstraint=xn(e.kernelConstraint),this.recurrentConstraint=xn(e.recurrentConstraint),this.biasConstraint=xn(e.biasConstraint),this.dropout=md([1,Ma([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=md([1,Ma([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=tt(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let o;if(this.useBias){if(this.unitForgetBias){const s=this.biasInitializer,i=this.units;o=new(n=class extends Wo{apply(l,u){const c=s.apply([i]),d=new B2().apply([i]),f=s.apply([i*2]);return YD(YD(c,d),f)}},n.className="CustomInit",n)}else o=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,o,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return Q(()=>{const r=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new G(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let o=e[1];const s=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Ba({ones:()=>Lo(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Ba({ones:()=>Lo(o),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,a=this.recurrentDropoutMask;let l,u,c,d;0<this.dropout&&this.dropout<1&&(e=K(e,i[0]));let f=Us(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(o=K(o,a[0])),f=he(f,Us(o,this.recurrentKernel.read())),this.useBias&&(f=xs(f,this.bias.read()));const[h,p,m,g]=ro(f,4,f.rank-1);l=this.recurrentActivation.apply(h),u=this.recurrentActivation.apply(p),c=he(K(u,s),K(l,this.activation.apply(m))),d=this.recurrentActivation.apply(g);const y=K(d,this.activation.apply(c));return[y,y,c]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Fa(this.activation),recurrentActivation:Fa(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Vt(this.kernelInitializer),recurrentInitializer:Vt(this.recurrentInitializer),biasInitializer:Vt(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:xt(this.kernelRegularizer),recurrentRegularizer:xt(this.recurrentRegularizer),biasRegularizer:xt(this.biasRegularizer),activityRegularizer:xt(this.activityRegularizer),kernelConstraint:vn(this.kernelConstraint),recurrentConstraint:vn(this.recurrentConstraint),biasConstraint:vn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}}o1.className="LSTMCell";ce(o1);class uH extends nl{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new o1(e),super(e)}call(e,n){return Q(()=>{this.cell.dropoutMask!=null&&(Ke(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Ke(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,o=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:o,initialState:s})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}uH.className="LSTM";ce(uH);class tN extends r1{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return Q(()=>{e=e;let r=e.slice(1);const o=[];for(const a of this.cells.slice().reverse())Array.isArray(a.stateSize)?o.push(r.splice(0,a.stateSize.length)):o.push(r.splice(0,1));o.reverse();const s=[];let i;for(let a=0;a<this.cells.length;++a){const l=this.cells[a];r=o[a],a===0?i=[e[0]].concat(r):i=[i[0]].concat(r),i=l.call(i,n),s.push(i.slice(1))}r=[];for(const a of s.slice().reverse())r.push(...a);return[i[0]].concat(r)})}build(e){J$(e)&&(e=e[0]),e=e;let n;this.cells.forEach((r,o)=>{Wl(`RNNCell_${o}`,()=>{r.build(e),Array.isArray(r.stateSize)?n=r.stateSize[0]:n=r.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=s=>({className:s.getClassName(),config:s.getConfig()}),o={cells:this.cells.map(n)};return Object.assign(Object.assign({},e),o)}static fromConfig(e,n,r={}){const o=[];for(const s of n.cells)o.push(Si(s,r));return new e({cells:o})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.cells)n.push(...r.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return ek(e)}setWeights(e){const n=[];for(const r of this.cells){const o=r.weights.length,s=e.splice(o);for(let i=0;i<r.weights.length;++i)n.push([r.weights[i],s[i]])}H2(n)}}tN.className="StackedRNNCells";ce(tN);function Ba(t){const{ones:e,rate:n,training:r=!1,count:o=1,dropoutFunc:s}=t,i=()=>s!=null?s(e(),n):nG(e(),n),a=()=>Wm(i,e,r);return!o||o<=1?js(a().clone()):Array(o).fill(void 0).map(a).map(u=>js(u.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var x_e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};class cH extends nl{constructor(e){if(e.unroll)throw new Le("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new Le("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new gn({ndim:5})]}call(e,n){return Q(()=>{if(this.cell.dropoutMask!=null&&(Ke(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Ke(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new G("ConvRNN2D cell does not support constants");const r=n==null?null:n.mask,o=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:o,initialState:s})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return Q(()=>{const{stateSize:n}=this.cell,r=e.shape,o=this.computeSingleOutputShape(r),s=[o[0],...o.slice(2)],i=pn(s);return Array.isArray(n)?Array(n.length).fill(i):[i]})}resetStates(e,n=!1){Q(()=>{if(!this.stateful)throw new Ns("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,o=this.computeSingleOutputShape(r),s=[o[0],...o.slice(2)];if(r[0]==null)throw new G("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>pn(s)):this.states_=[pn(s)];else if(e==null)Ke(this.states_),this.keptStates!=null&&(Ke(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>pn(s)):this.states_[0]=pn(s);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new G(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):Ke(this.states_);for(let a=0;a<this.states_.length;++a){const l=e[a],u=s;if(!at(l.shape,u))throw new G(`State ${a} is incompatible with layer ${this.name}: expected shape=${u}, received shape=${l.shape}`);this.states_[a]=l}}this.states_=this.states_.map(a=>js(a.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:r,kernelSize:o,padding:s,strides:i,dilationRate:a}=this.cell,l=n==="channelsFirst",u=e[l?3:2],c=e[l?4:3],d=us(u,o[0],s,i[0],a[0]),f=us(c,o[1],s,i[1],a[1]);return[...e.slice(0,2),...l?[r,d,f]:[d,f,r]]}}cH.className="ConvRNN2D";class nN extends o1{constructor(e){const{filters:n,kernelSize:r,strides:o,padding:s,dataFormat:i,dilationRate:a}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,En(this.filters,"filters"),this.kernelSize=vc(r,2,"kernelSize"),this.kernelSize.forEach(l=>En(l,"kernelSize")),this.strides=vc(o||1,2,"strides"),this.strides.forEach(l=>En(l,"strides")),this.padding=s||"valid",uo(this.padding),this.dataFormat=i||"channelsLast",on(this.dataFormat),this.dilationRate=vc(a||1,2,"dilationRate"),this.dilationRate.forEach(l=>En(l,"dilationRate"))}build(e){var n;e=tt(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new G(`The channel dimension of the input should be defined. Found ${e[r]}`);const o=e[r],s=4,i=this.kernelSize.concat([o,this.filters*s]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const a=this.kernelSize.concat([this.filters,this.filters*s]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",a,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const u=this.biasInitializer,c=this.filters;l=new(n=class extends Wo{apply(f,h){const p=u.apply([c]),m=el([c]),g=u.apply([c*2]);return L2([p,m,g])}},n.className="CustomInit",n)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*s],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return Q(()=>{if(e.length!==3)throw new G(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training||!1,o=e[0],s=e[1],i=e[2],a=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Ba({ones:()=>Lo(o),rate:this.dropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,u=(U,B,W)=>!B||!B[W]?U:K(B[W],U);let c=u(o,l,0),d=u(o,l,1),f=u(o,l,2),h=u(o,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Ba({ones:()=>Lo(s),rate:this.recurrentDropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const p=this.recurrentDropoutMask;let m=u(s,p,0),g=u(s,p,1),y=u(s,p,2),v=u(s,p,3);const b=3,[x,w,S,$]=ro(this.kernel.read(),a,b),[C,k,I,T]=this.useBias?ro(this.bias.read(),a):[null,null,null,null];c=this.inputConv(c,x,C,this.padding),d=this.inputConv(d,w,k,this.padding),f=this.inputConv(f,S,I,this.padding),h=this.inputConv(h,$,T,this.padding);const[E,_,O,F]=ro(this.recurrentKernel.read(),a,b);m=this.recurrentConv(m,E),g=this.recurrentConv(g,_),y=this.recurrentConv(y,O),v=this.recurrentConv(v,F);const M=this.recurrentActivation.apply(he(c,m)),L=this.recurrentActivation.apply(he(d,g)),N=he(K(L,i),K(M,this.activation.apply(he(f,y)))),D=K(this.recurrentActivation.apply(he(h,v)),this.activation.apply(N));return[D,D,N]})}getConfig(){const e=super.getConfig(),n=x_e(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),r)}inputConv(e,n,r,o){const s=su(e,n,this.strides,o||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?xs(s,r,this.dataFormat):s}recurrentConv(e,n){return su(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}nN.className="ConvLSTM2DCell";ce(nN);class dH extends cH{constructor(e){const n=new nN(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}}dH.className="ConvLSTM2D";ce(dH);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class s1 extends He{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,r=[];for(let o=0;o<this.noiseShape.length;++o)r.push(this.noiseShape[o]==null?n[o]:this.noiseShape[o]);return r}call(e,n){return Q(()=>{this.invokeCallHook(e,n);const r=Pe(e);if(0<this.rate&&this.rate<1){const o=n.training==null?!1:n.training,s=this.getNoiseShape(r);return Wm(()=>nG(r,this.rate,s,this.seed),()=>r,o)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}s1.className="Dropout";ce(s1);class fH extends s1{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}fH.className="SpatialDropout1D";ce(fH);class rN extends He{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,En(this.units,"units"),this.activation=La(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=Bt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=Bt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=xn(e.kernelConstraint),this.biasConstraint=xn(e.biasConstraint),this.kernelRegularizer=zt(e.kernelRegularizer),this.biasRegularizer=zt(e.biasRegularizer),this.activityRegularizer=zt(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=tt(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=tt(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return Q(()=>{this.invokeCallHook(e,n);const r=Pe(e),o=XU(this.activation.getClassName());let s;return o!=null?s=Us(r,this.kernel.read(),o,this.bias?this.bias.read():null):(s=Us(r,this.kernel.read()),this.bias!=null&&(s=xs(s,this.bias.read())),this.activation!=null&&(s=this.activation.apply(s))),s})}getConfig(){const e={units:this.units,activation:Fa(this.activation),useBias:this.useBias,kernelInitializer:Vt(this.kernelInitializer),biasInitializer:Vt(this.biasInitializer),kernelRegularizer:xt(this.kernelRegularizer),biasRegularizer:xt(this.biasRegularizer),activityRegularizer:xt(this.activityRegularizer),kernelConstraint:vn(this.kernelConstraint),biasConstraint:vn(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}rN.className="Dense";ce(rN);class hH extends He{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=tt(e);for(const n of e.slice(1))if(n==null)throw new G(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],Ia(e,1)]}call(e,n){return Q(()=>{this.invokeCallHook(e,n);let r=Pe(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const o=[0];for(let s=2;s<r.rank;++s)o.push(s);o.push(1),r=Qe(r,o)}return ZAe(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}hH.className="Flatten";ce(hH);class pH extends He{constructor(e){super(e),this.supportsMasking=!0,this.activation=La(e.activation)}call(e,n){return Q(()=>{this.invokeCallHook(e,n);const r=Pe(e);return this.activation.apply(r)})}getConfig(){const e={activation:Fa(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}pH.className="Activation";ce(pH);class mH extends He{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return Q(()=>(e=Pe(e),YAe(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}mH.className="RepeatVector";ce(mH);class gH extends He{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const r="Total size of new array must be unchanged.",o=n.slice();let s=1,i=null;for(let l=0;l<o.length;++l){const u=o[l];if(this.isUnknown(u))if(i===null)i=l;else throw new G("Can only specifiy one unknown dimension.");else s*=u}const a=Ia(e);if(i!==null){if(s===0||a%s!==0)throw new G(r);o[i]=a/s}else if(a!==s)throw new G(r);return o}computeOutputShape(e){let n=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return Q(()=>{this.invokeCallHook(e,n);const r=Pe(e),o=r.shape,s=o.slice(0,1).concat(this.fixUnknownDimension(o.slice(1),this.targetShape));return q(r,s)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}gH.className="Reshape";ce(gH);class yH extends He{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=ps(1,e.dims.length+1);if(!at(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new gn({ndim:this.dims.length+1})]}computeOutputShape(e){e=tt(e);const n=e.slice();return this.dims.forEach((r,o)=>{n[o+1]=e[r]}),n}call(e,n){return Qe(Pe(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}yH.className="Permute";ce(yH);class vH extends He{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const r=Pe(e);return U$(qv(r,this.maskValue),-1)}call(e,n){return Q(()=>{this.invokeCallHook(e,n);const r=Pe(e),i=U$(qv(r,this.maskValue),-1,!0);return K(r,Se(i,r.dtype))})}}vH.className="Masking";ce(vH);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class xH extends He{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(ht(e.inputLength))}this.inputDim=e.inputDim,En(this.inputDim,"inputDim"),this.outputDim=e.outputDim,En(this.outputDim,"outputDim"),this.embeddingsInitializer=Bt(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=zt(e.embeddingsRegularizer),this.activityRegularizer=zt(e.activityRegularizer),this.embeddingsConstraint=xn(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return Q(()=>this.maskZero?(e=Pe(e),qv(e,Ze(e))):null)}computeOutputShape(e){if(e=tt(e),this.inputLength==null)return[...e,this.outputDim];const n=ht(this.inputLength);if(n.length!==e.length-1)throw new G(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let o=0;o<n.length;++o){const s=n[o],i=e[o+1];if(s!=null&&i!=null&&s!==i)throw new G(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);s==null&&(n[r]=i),r++}}return[e[0],...n,this.outputDim]}call(e,n){return Q(()=>{this.invokeCallHook(e,n);let r=Pe(e);r.dtype!=="int32"&&(r=Vs(r,"int32"));const o=tG(this.embeddings.read(),q(r,[r.size]));return q(o,tt(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Vt(this.embeddingsInitializer),embeddingsRegularizer:xt(this.embeddingsRegularizer),activityRegularizer:xt(this.activityRegularizer),embeddingsConstraint:vn(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}xH.className="Embedding";ce(xH);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class $u extends He{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new Le}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const r=e.slice(0,e.length-n.length);for(let o=0;o<n.length;++o){const s=e[e.length-n.length+o],i=n[o];if(s==null||i==null||s<0||i<0)r.push(null);else if(s===1)r.push(i);else if(i===1)r.push(s);else{if(s!==i)throw new G("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));r.push(s)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[tt(e)]),e=e,e.length<2)throw new G(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const s of e)s!=null&&s[0]!==null&&n.push(s[0]);if(n=ka(n),n.length>1)throw new G(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let s=1;s<e.length;++s){const i=e[s]==null?null:e[s].slice(1);r=this.computeElementwiseOpOutputShape(r,i)}const o=e.map(s=>s.length);e.indexOf(null)===-1&&ka(o).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return Q(()=>{if(e=e,this.reshapeRequired){const r=[],o=e.map(s=>s.rank);if(o.indexOf(null)===-1){const s=Ma(o);for(let i of e){const a=i.rank;for(let l=0;l<s-a;++l)i=zm(i,1);r.push(i)}return this.mergeFunction(r)}else{let s=!1;for(const l of e){const u=l.rank;if(u==null){const c=l.shape,d=c[0],f=c.slice(1).concat([d]);let h=q(l,[d].concat(Ia(c.slice(1))));h=Qe(h,[1,0]),h=q(h,f),r.push(h),s=!0}else if(u>1){const c=ps(1,u).concat([0]);r.push(Qe(l,c)),s=!0}else r.push(l)}let i=this.mergeFunction(r);const a=i.rank;if(s){if(a==null){const l=i.shape,u=l.length,c=l[u-1],d=[c].concat(l.slice(0,l.length-1));i=q(Qe(q(i,[-1,c]),[1,0]),d)}else if(a>1){const l=[a-1].concat(ps(0,a-1));i=Qe(i,l)}}return i}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let o=1;o<e.length;++o){const s=e[o]==null?null:e[o].slice(1);n=this.computeElementwiseOpOutputShape(n,s)}let r=[];for(const o of e)o!=null&&o[0]!==null&&r.push(o[0]);return r=ka(r),r.length===1?n=r.concat(n):n=[null].concat(n),n}computeMask(e,n){return Q(()=>{if(n==null)return null;if(!Array.isArray(n))throw new G("`mask` should be an Array");if(!Array.isArray(e))throw new G("`inputs` should be an Array");if(n.length!==e.length)throw new G(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(o=>o==null))return null;n=n.map(o=>o==null?o:gr(o,0));let r=n[0];for(let o=1;o<n.length-1;++o)r=_i(r,n[o]);return r})}}class bH extends $u{constructor(e){super(e)}mergeFunction(e){return Q(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=he(n,e[r]);return n})}}bH.className="Add";ce(bH);class wH extends $u{constructor(e){super(e)}mergeFunction(e){return Q(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=K(n,e[r]);return n})}}wH.className="Multiply";ce(wH);class SH extends $u{constructor(e){super(e)}mergeFunction(e){return Q(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=he(n,e[r]);return K(1/e.length,n)})}}SH.className="Average";ce(SH);class CH extends $u{constructor(e){super(e)}mergeFunction(e){return Q(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=Ja(n,e[r]);return n})}}CH.className="Maximum";ce(CH);class $H extends $u{constructor(e){super(e)}mergeFunction(e){return Q(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=cp(n,e[r]);return n})}}$H.className="Minimum";ce($H);class kH extends $u{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new G("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const o of e)if(o!=null){n=!1;break}if(n)return;const r=[];for(let o=0;o<e.length;++o){const s=e[o].slice();s.splice(this.axis,1);let i=!1;for(const a of r)if(at(a,s)){i=!0;break}i||r.push(s)}if(r.length>1)throw new G("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return Q(()=>L2(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new G("A `Concatenate` layer should be called on a list of inputs.");const n=e,r=n[0].slice(),o=this.axis<0?r.length+this.axis:this.axis;for(const s of n.slice(1)){if(r[o]==null||s[o]==null){r[o]=null;break}r[o]+=s[o]}return r}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new G("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new G("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new G(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return Q(()=>{let r=!0;if(n.forEach(i=>{if(i!=null){r=!1;return}}),r)return null;const o=[];for(let i=0;i<e.length;++i)n[i]==null?o.push(Se(Lo(e[i]),"bool")):n[i].rank<e[i].rank?o.push(gr(n[i],-1)):o.push(n[i]);const s=br(o,this.axis);return NV(s,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}kH.className="Concatenate";ce(kH);function Tf(t,e){for(;t<0;)t+=e;return t}function b_e(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new Le("batchDot is not implemented for tensors of 4D or higher rank yet");if(P(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),P(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new Le("batchDot is not implemented for complex64-type Tensors yet.");const r=t.shape.length,o=e.shape.length;n==null&&(n=[r-1,o-2]);const s=n;return Q(()=>{let i;if(r>o){i=r-o;const l=[];for(let u=0;u<i;++u)l.push(1);e=q(e,e.shape.concat(l))}else if(o>r){i=o-r;const l=[];for(let u=0;u<i;++u)l.push(1);t=q(t,t.shape.concat(l))}else i=0;let a;if(t.shape.length===2&&e.shape.length===2)s[0]===s[1]?a=Ae(K(t,e),s[0]):a=Ae(K(Qe(t,[1,0]),e),s[1]);else{const l=s[0]!==t.shape.length-1,u=s[1]===e.shape.length-1;a=ot(t,e,l,u)}if(i>0){let l;r>o?l=r+o-3:l=r-1;const u=[];for(let c=l;c<l+i;++c)u.push(c);a=Pm(a,u)}return a.shape.length===1&&(a=gr(a,1)),a})}class IH extends $u{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){P(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],r=e[1];if(n.length>3||r.length>3)throw new Le("Dot layer does not support tensors of 4D or higher rank yet.");const o=this.interpretAxes(n,r);if(n[o[0]]!==r[o[1]])throw new G(`Dimension incompatibility: ${n[o[0]]} !== ${r[o[1]]}`)}mergeFunction(e){if(e.length!==2)throw new G(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],r=e[1],o;return Array.isArray(this.axes)?o=this.axes.map((s,i)=>Tf(s,e[i].shape.length)):o=[Tf(this.axes,n.shape.length),Tf(this.axes,r.shape.length)],this.normalize&&(n=t0(n,o[0]),r=t0(r,o[1])),b_e(n,r,o)}interpretAxes(e,n){let r;return Array.isArray(this.axes)?r=this.axes:r=[Tf(this.axes,e.length),Tf(this.axes,n.length)],r}computeOutputShape(e){P(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),r=e[1].slice();if(n.length>3||r.length>3)throw new Le("Dot layer does not support tensors of 4D or higher rank yet.");const o=this.interpretAxes(n,r);n.splice(o[0],1),r.splice(o[1],1),r.splice(0,1);const s=n.concat(r);return s.length===1&&s.push(1),s}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}}IH.className="Dot";ce(IH);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class TH extends He{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return Q(()=>{this.invokeCallHook(e,n);const r=Pe(e);return Wm(()=>he(Qb(r.shape,0,this.stddev),r),()=>r,n.training||!1)})}}TH.className="GaussianNoise";ce(TH);class EH extends He{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return Q(()=>{this.invokeCallHook(e,n);const r=Pe(e);return this.rate>0&&this.rate<1?Wm(()=>{const s=Math.sqrt(this.rate/(1-this.rate));return K(r,Qb(r.shape,1,s))},()=>r,n.training||!1):r})}}EH.className="GaussianDropout";ce(EH);class NH extends He{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||Pe(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return Q(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return Wm(()=>{const s=Pe(e),l=-1.6732632423543772*1.0507009873554805;let u=xu(Rm(r),this.rate);u=Vs(u,"float32");const c=((1-this.rate)*(1+this.rate*l**2))**-.5,d=-c*l*this.rate,f=he(K(s,u),K(he(u,-1),l));return he(K(f,c),d)},()=>Pe(e),n.training||!1)}return e})}}NH.className="AlphaDropout";ce(NH);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function pp(t,e,n,r,o,s=.001){let i;if(t.rank===2)i=Z$e(t,e,n,r,o,s);else if(t.rank===3)i=eke(t,e,n,r,o,s);else if(t.rank===4)i=nke(t,e,n,r,o,s);else throw new Le(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return i}function w_e(t,e,n,r,o=.001){return Q(()=>{const s=zE(t,r),i=s.mean,a=s.variance;return[pp(t,i,a,n,e,o),i,a]})}function S_e(t,e,n,r,o=.001){return Q(()=>{const s=zE(t,r),i=s.mean,a=s.variance,l=[];for(const p of ps(0,t.rank))r.indexOf(p)!==-1?l.push(1):l.push(t.shape[p]);const u=q(i,l),c=q(a,l),d=e==null?null:q(e,l),f=n==null?null:q(n,l);return[pp(t,u,c,f,d,o),i,a]})}function C_e(t,e,n,r,o=.001){return at(r.slice().sort(),ps(0,t.rank-1))?w_e(t,e,n,r,o):S_e(t,e,n,r,o)}class AH extends He{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Bt(e.betaInitializer||"zeros"),this.gammaInitializer=Bt(e.gammaInitializer||"ones"),this.movingMeanInitializer=Bt(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=Bt(e.movingVarianceInitializer||"ones"),this.betaConstraint=xn(e.betaConstraint),this.gammaConstraint=xn(e.gammaConstraint),this.betaRegularizer=zt(e.betaRegularizer),this.gammaRegularizer=zt(e.gammaRegularizer)}build(e){e=tt(e);const n=this.axis>=0?this.axis:this.axis+e.length,r=e[n];if(r==null)throw new G(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new gn({ndim:e.length,axes:{[n]:r}})];const o=[r];this.scale&&(this.gamma=this.addWeight("gamma",o,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",o,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",o,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",o,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return Q(()=>{const r=n.training==null?!1:n.training,o=Pe(e),s=o.shape,i=s.length,a=ps(0,i),l=this.axis>=0?this.axis:this.axis+i;a.splice(l,1);const u=lu(1,i);u[l]=s[l];const c=a.slice();c.sort();const d=!at(c,ps(0,i).slice(0,i-1)),f=()=>{if(d){const v=q(this.movingMean.read(),u),b=q(this.movingVariance.read(),u),x=this.center?q(this.beta.read(),u):null,w=this.scale?q(this.gamma.read(),u):null;return pp(o,v,b,x,w,this.epsilon)}else return pp(o,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return f();const[h,p,m]=C_e(o,this.gamma.read(),this.beta.read(),a,this.epsilon),g=(v,b,x)=>{Q(()=>{const w=1-x,S=v.read(),$=K(Re(S,b),w);v.write(Re(S,$))})};return(()=>{g(this.movingMean,p,this.momentum),g(this.movingVariance,m,this.momentum)})(),h})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Vt(this.betaInitializer),gammaInitializer:Vt(this.gammaInitializer),movingMeanInitializer:Vt(this.movingMeanInitializer),movingVarianceInitializer:Vt(this.movingVarianceInitializer),betaRegularizer:xt(this.betaRegularizer),gammaRegularizer:xt(this.gammaRegularizer),betaConstraint:vn(this.betaConstraint),gammaConstraint:vn(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}AH.className="BatchNormalization";ce(AH);class OH extends He{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Bt(e.betaInitializer||"zeros"),this.gammaInitializer=Bt(e.gammaInitializer||"ones"),this.betaRegularizer=zt(e.betaRegularizer),this.gammaRegularizer=zt(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=tt(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let s=0;s<this.axis.length;++s)this.axis[s]<0&&(this.axis[s]+=n);for(const s of this.axis)if(s<0||s>=n)throw new Error(`Invalid axis: ${s}`);if(this.axis.length!==ka(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(s=>e[s]),o=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,o):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,o):this.beta=null,this.built=!0}call(e,n){const r=Pe(e),o=r.shape,s=o.length;return Q(()=>{let{mean:a,variance:l}=zE(r,this.axis,!0);const u=lu(1,s);for(const m of this.axis)u[m]=o[m];const c=m=>m!=null&&m.shape.length!==s?q(m,u):m;let d=this.scale?c(this.gamma.read()):null,f=this.center?c(this.beta.read()):null;const h=[],p=[];for(let m=0;m<s;++m)this.axis.indexOf(m)!==-1?(h.push(o[m]),p.push(1)):(h.push(1),p.push(o[m]));return a=rs(a,h),l=rs(l,h),d!=null&&(d=rs(d,p)),f!=null&&(f=rs(f,p)),pp(r,a,l,f,d,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Vt(this.betaInitializer),gammaInitializer:Vt(this.gammaInitializer),betaRegularizer:xt(this.betaRegularizer),gammaRegularizer:xt(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}OH.className="LayerNormalization";ce(OH);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function $_e(t,e,n){return Q(()=>{if(t.rank!==4)throw new G(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new G("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=ms()),n!=="channelsLast"&&n!=="channelsFirst")throw new G(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return n==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],jE(t,r)})}class _H extends He{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?ms():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new G(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,r;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new G(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new G(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[n,r]}this.inputSpec=[new gn({ndim:4})]}computeOutputShape(e){e=tt(e);let n,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],n,r]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],n,r,e[3]])}call(e,n){return Q(()=>$_e(Pe(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}_H.className="ZeroPadding2D";ce(_H);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function i1(t,e,n,r,o,s){return Q(()=>{on(o),QU(s),uo(r),n==null&&(n=[1,1]),r==null&&(r="valid"),o==null&&(o=ms()),s==null&&(s="max"),t=Z2(t,o);let i;const a=r==="same"?"same":"valid";return s==="max"?i=BE(t,e,n,a):i=EE(t,e,n,a),o==="channelsFirst"&&(i=Qe(i,[0,3,1,2])),i})}function RH(t,e,n,r,o,s){return Q(()=>{on(o),QU(s),uo(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),o==null&&(o=ms()),s==null&&(s="max"),t=QG(t,o);let i;const a=r==="same"?"same":"valid";return s==="max"?i=jIe(t,e,n,a):i=W$e(t,e,n,a),o==="channelsFirst"&&(i=Qe(i,[0,4,1,2,3])),i})}class PH extends He{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new G(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(En(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new G(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);En(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,uo(this.padding),this.inputSpec=[new gn({ndim:3})]}computeOutputShape(e){e=tt(e);const n=us(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return Q(()=>{this.invokeCallHook(e,n),e=zm(Pe(e),2);const r=this.poolingFunction(Pe(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Pm(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class DH extends PH{constructor(e){super(e)}poolingFunction(e,n,r,o,s){return on(s),uo(o),i1(e,n,r,o,s,"max")}}DH.className="MaxPooling1D";ce(DH);class MH extends PH{constructor(e){super(e)}poolingFunction(e,n,r,o,s){return on(s),uo(o),i1(e,n,r,o,s,"avg")}}MH.className="AveragePooling1D";ce(MH);class FH extends He{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new G(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];En(this.poolSize,"poolSize"),En(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,on(this.dataFormat),uo(this.padding),this.inputSpec=[new gn({ndim:4})]}computeOutputShape(e){e=tt(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=us(n,this.poolSize[0],this.padding,this.strides[0]),r=us(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r]:[e[0],n,r,e[3]]}call(e,n){return Q(()=>(this.invokeCallHook(e,n),this.poolingFunction(Pe(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class LH extends FH{constructor(e){super(e)}poolingFunction(e,n,r,o,s){return on(s),uo(o),i1(e,n,r,o,s,"max")}}LH.className="MaxPooling2D";ce(LH);class BH extends FH{constructor(e){super(e)}poolingFunction(e,n,r,o,s){return on(s),uo(o),i1(e,n,r,o,s,"avg")}}BH.className="AveragePooling2D";ce(BH);class zH extends He{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new G(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];En(this.poolSize,"poolSize"),En(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,on(this.dataFormat),uo(this.padding),this.inputSpec=[new gn({ndim:5})]}computeOutputShape(e){e=tt(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],o=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=us(n,this.poolSize[0],this.padding,this.strides[0]),r=us(r,this.poolSize[1],this.padding,this.strides[1]),o=us(o,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r,o]:[e[0],n,r,o,e[4]]}call(e,n){return Q(()=>(this.invokeCallHook(e,n),this.poolingFunction(Pe(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class jH extends zH{constructor(e){super(e)}poolingFunction(e,n,r,o,s){return on(s),uo(o),RH(e,n,r,o,s,"max")}}jH.className="MaxPooling3D";ce(jH);class WH extends zH{constructor(e){super(e)}poolingFunction(e,n,r,o,s){return on(s),uo(o),RH(e,n,r,o,s,"avg")}}WH.className="AveragePooling3D";ce(WH);class VH extends He{constructor(e){super(e),this.inputSpec=[new gn({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new Le}}class UH extends VH{constructor(e){super(e||{})}call(e,n){return Q(()=>{const r=Pe(e);return cn(r,1)})}}UH.className="GlobalAveragePooling1D";ce(UH);class GH extends VH{constructor(e){super(e||{})}call(e,n){return Q(()=>{const r=Pe(e);return ls(r,1)})}}GH.className="GlobalMaxPooling1D";ce(GH);class HH extends He{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,on(this.dataFormat),this.inputSpec=[new gn({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new Le}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class KH extends HH{call(e,n){return Q(()=>{const r=Pe(e);return this.dataFormat==="channelsLast"?cn(r,[1,2]):cn(r,[2,3])})}}KH.className="GlobalAveragePooling2D";ce(KH);class qH extends HH{call(e,n){return Q(()=>{const r=Pe(e);return this.dataFormat==="channelsLast"?ls(r,[1,2]):ls(r,[2,3])})}}qH.className="GlobalMaxPooling2D";ce(qH);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class XH extends He{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,r={}){const o=n.layer,s=Si(o,r);delete n.layer;const i={layer:s};return Object.assign(i,n),new e(i)}}class YH extends XH{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=tt(e),e.length<3)throw new G(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=tt(e);const n=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(n),o=e[1];return[r[0],o].concat(r.slice(1))}call(e,n){return Q(()=>(e=Pe(e),iH((i,a)=>[Pe(this.layer.call(i,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}YH.className="TimeDistributed";ce(YH);function k_e(t){Cu(GAe,"BidirectionalMergeMode",t)}const I_e="concat";class QH extends XH{constructor(e){super(e);const n=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=n,this.forwardLayer=Si(r),n.goBackwards=n.goBackwards!==!0;const o={};if(o.className=e.layer.getClassName(),o.config=n,this.backwardLayer=Si(o),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?I_e:e.mergeMode,k_e(this.mergeMode),e.weights)throw new Le("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,r=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let r,o,s;return this.returnState&&(s=n.slice(1)),r=n[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,o=[r]):this.mergeMode==null?o=[r,r.slice()]:o=[r],this.returnState?this.mergeMode==null?o.concat(s).concat(s.slice()):[r].concat(s).concat(s.slice()):yr(o)}apply(e,n){let r=n==null?null:n.initialState,o=n==null?null:n.constants;n==null&&(n={});const s=sH(e,r,o,this.numConstants);if(e=s.inputs,r=s.initialState,o=s.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&o==null)return super.apply(e,n);const i=[],a=[];if(r!=null){const u=r.length;if(u%2>0)throw new G("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,i.push(...r);const c=r.map(d=>new gn({shape:d.shape}));this.forwardLayer.stateSpec=c.slice(0,u/2),this.backwardLayer.stateSpec=c.slice(u/2),a.push(...c)}if(o!=null)throw new Le("Support for constants in Bidirectional layers is not implemented yet.");const l=i[0]instanceof Zs;for(const u of i)if(u instanceof Zs!==l)throw new G("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const u=[e].concat(i),c=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=c;const f=super.apply(u,n);return this.inputSpec=d,f}else return super.apply(e,n)}call(e,n){return Q(()=>{const r=n.initialState;let o,s;if(r==null)o=this.forwardLayer.call(e,n),s=this.backwardLayer.call(e,n);else{const l=r.slice(0,r.length/2),u=r.slice(r.length/2);o=this.forwardLayer.call(e,Object.assign(n,{initialState:l})),s=this.backwardLayer.call(e,Object.assign(n,{initialState:u}))}let i;this.returnState&&(Array.isArray(o)&&(i=o.slice(1).concat(s.slice(1))),o=o[0],s=s[0]),this.returnSequences&&(s=iu(s,1));let a;return this.mergeMode==="concat"?a=L2([o,s]):this.mergeMode==="sum"?a=he(o,s):this.mergeMode==="ave"?a=K(.5,he(o,s)):this.mergeMode==="mul"?a=K(o,s):this.mergeMode==null&&(a=[o,s]),this.returnState?this.mergeMode==null?a.concat(i):[a].concat(i):a})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){Wl(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),Wl(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[n,n]:r=n:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const s=this.forwardLayer.states.map(i=>null);return Array.isArray(r)?r.concat(s).concat(s):[r].concat(s).concat(s)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const r=Si(n.layer);if(delete n.layer,n.numConstants!=null)throw new Le("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const o=n;return o.layer=r,new e(o)}}QH.className="Bidirectional";ce(QH);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class ZH extends He{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return Q(()=>(e=Pe(e),e.dtype!=="float32"&&(e=Vs(e,"float32")),he(K(e,this.scale),this.offset)))}}ZH.className="Rescaling";ce(ZH);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:T_e,cropAndResize:E_e}=yi;class JH extends He{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,r,o,s,i,a,l){return Q(()=>{let u,c=!1;const d=n/i,f=r/a,h=(o+n)/i,p=(s+r)/a,m=[d,f,h,p],g=[];e.rank===3?(c=!0,u=Ri([e])):u=e;for(let w=0;w<u.shape[0];w++)g.push(m);const y=xV(g,[g.length,4]),v=dp(0,g.length,1,"int32"),x=E_e(u,y,v,[o,s],"nearest");return Vs(c?Pe(au(x)):x,l)})}upsize(e,n,r,o){return Q(()=>{const s=T_e(e,[n,r]);return Vs(s,o)})}call(e,n){return Q(()=>{const r=Pe(e),o=r.dtype,s=r.shape,i=s[s.length-3],a=s[s.length-2];let l=0;i!==this.height&&(l=Math.floor((i-this.height)/2));let u=0;return a!==this.width&&(u=Math.floor((a-this.width)/2),u===0&&(u=1)),l>=0&&u>=0?this.centerCrop(r,l,u,this.height,this.width,i,a,o):this.upsize(e,this.height,this.width,o)})}getConfig(){const e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=tt(e);const n=e.length-3,r=e.length-2;return e[n]=this.height,e[r]=this.width,e}}JH.className="CenterCrop";ce(JH);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function N_e(t,e,n,r){let o=Pe(t);if(o.dtype!=="int32"&&(o=Vs(o,"int32")),e==="int")return o;const s=o.shape;if(o.rank===0&&(o=gr(o,-1)),e==="oneHot"&&o.shape[o.shape.length-1]!==1&&(o=gr(o,-1)),o.rank>2)throw new G(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${s} which would result in output rank ${o.rank}.`);const i=["multiHot","oneHot"].includes(e),a=o;let l;if(typeof r<"u"&&e==="count"?l=DD(a,r,n,i):l=DD(a,[],n,i),e!=="tfIdf")return l;if(r)return K(l,r);throw new G("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class e5 extends He{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=tt(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return Q(()=>{e=Pe(e),e.dtype!=="int32"&&(e=Vs(e,"int32"));let r;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new G(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);r=Pe(n.countWeights)}const o=ls(e),s=Hv(e),i=lo(this.numTokens,o).bufferSync().get(0),a=xu(s,0).bufferSync().get(0);if(!(i&&a))throw new G(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return N_e(e,this.outputMode,this.numTokens,r)})}}e5.className="CategoryEncoding";ce(e5);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const A_e=["bilinear","nearest"],pM=new Set(A_e);class t5 extends He{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(pM.has(e.interpolation))this.interpolation=e.interpolation;else throw new G(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=tt(e);const n=e[2];return[this.height,this.width,n]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return Q(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return yi.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return yi.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...pM]} are supported`)})}}t5.className="Resizing";ce(t5);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class n5{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}n5.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class r5 extends He{constructor(e){super(e),this.randomGenerator=new n5(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}}r5.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const O_e=["bilinear","nearest"],mM=new Set(O_e);class o5 extends r5{constructor(e){super(e);const{factor:n,interpolation:r="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new G(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new G(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new G(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(mM.has(r))this.interpolation=r;else throw new G(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=tt(e);const n=e[2];return[this.imgHeight,-1,n]}call(e,n){return Q(()=>{const r=Pe(e);this.imgHeight=r.shape[r.shape.length-3];const o=r.shape[r.shape.length-2];this.widthFactor=Rm([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let s=this.widthFactor.dataSync()[0]*o;s=Math.round(s);const i=[this.imgHeight,s];switch(this.interpolation){case"bilinear":return yi.resizeBilinear(e,i);case"nearest":return yi.resizeNearestNeighbor(e,i);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...mM]} are supported`)}})}}o5.className="RandomWidth";ce(o5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Dw(t){return new rN(t)}function __e(t){return new s1(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function gM(t){return m_e(t)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R_e=J();R_e.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var yM;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(yM||(yM={}));var vM;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(vM||(vM={}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var xM;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(xM||(xM={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ie(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&P(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P_e=rU;class a1 extends OT{nextDataId(){return a1.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new CW(this,$s())}write(e,n,r){this.firstUse&&(this.firstUse=!1,J().get("IS_NODE")&&Zr(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const o={id:this.nextDataId()};return this.data.set(o,{values:e,dtype:r,refCount:1}),o}makeTensorInfo(e,n,r){let o;if(n==="string"&&r!=null&&r.length>0&&Dp(r[0])){const s=r.map(i=>$a(i));o=this.write(s,e,n)}else o=this.write(r,e,n);return{dataId:o,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,o,s){this.data.set(e,{values:n,dtype:o,refCount:s})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const o=this.readSync(r.real.dataId),s=this.readSync(r.imag.dataId);return Pi(o,s)}return eCe(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(o=>Da(o));return Ue(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Ue(e.shape,e.dtype,n)}makeOutput(e,n,r){return $s().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=pr();return e(),{kernelMs:pr()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){Ie([e],"where");const n=this.readSync(e.dataId);return P_e(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}a1.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s5(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const D_e=t=>{const{x:e}=t.inputs,n=t.backend;Ie(e,"abs");let r=new Float32Array(re(e.shape));const o=n.data.get(e.dataId).values;return r=s5(o),n.makeOutput(r,e.shape,e.dtype)},M_e={kernelName:Lx,backendName:"cpu",kernelFunc:D_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sn(t){return(e,n,r,o,s)=>{const i=Me(e,n),a=i.length,l=Ee(i),u=re(i),c=Gn(s,u),d=e.length,f=n.length,h=Ee(e),p=Ee(n),m=fd(e,i),g=fd(n,i);if(m.length+g.length===0)for(let y=0;y<c.length;++y)c[y]=t(r[y%r.length],o[y%o.length]);else for(let y=0;y<c.length;++y){const v=jd(y,a,l),b=v.slice(-d);m.forEach($=>b[$]=0);const x=zs(b,d,h),w=v.slice(-f);g.forEach($=>w[$]=0);const S=zs(w,f,p);c[y]=t(r[x],o[S])}return[c,i]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nr(t){const{inputs:e,backend:n}=t,{real:r,imag:o}=e,s=n.data.get(r.dataId).values,i=n.data.get(o.dataId).values,a=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(a.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",s),imag:n.makeTensorInfo(o.shape,"float32",i)},a}const F_e={kernelName:UT,backendName:"cpu",kernelFunc:Nr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i0(t,e,n="float32"){if(n==="complex64"){const o=i0(t,e,"float32"),s=i0(t,e,"float32");return Nr({inputs:{real:o,imag:s},backend:t})}const r=Hn(re(e),n);return t.makeTensorInfo(e,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Js(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const L_e={kernelName:nm,backendName:"cpu",kernelFunc:Js};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uu(t){const{inputs:e,backend:n}=t,{input:r}=e,o=n.data.get(r.dataId).complexTensorInfos.real,s=n.data.get(o.dataId).values;return n.makeTensorInfo(o.shape,o.dtype,s)}const B_e={kernelName:pE,backendName:"cpu",kernelFunc:uu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i5(t,e,n,r){if(r==="int32"){const o=Int32Array.from(t);return[e,"int32",o]}if(r==="bool"){const o=vu([0],n),[s,i]=sn((a,l)=>a!==l?1:0)(e,[],t,o,"bool");return[i,"bool",s]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function za(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{dtype:s}=r;if(s==="complex64"){if(o.dtype==="complex64")return Js({inputs:{x:o},backend:n});const c=i0(n,o.shape,o.dtype),d=za({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),f=Nr({inputs:{real:d,imag:c},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),f}if(o.dtype==="complex64"){const c=uu({inputs:{input:o},backend:n}),d=za({inputs:{x:c},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(c),d}if(!IW(o.dtype,s)){const c=Js({inputs:{x:o},backend:n});return{dataId:c.dataId,shape:c.shape,dtype:s}}const i=n.data.get(o.dataId).values,[a,l,u]=i5(i,o.shape,o.dtype,s);return n.makeTensorInfo(a,l,u)}const z_e={kernelName:Vp,backendName:"cpu",kernelFunc:za};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wn(t,e,n,r){return n==null?({inputs:o,backend:s})=>{const{a:i,b:a}=o,l=s;Ie([i,a],t);const u=l.data.get(i.dataId).values,c=l.data.get(a.dataId).values,d=i.dtype==="string"?Di(u):u,f=i.dtype==="string"?Di(c):c,h=r||i.dtype,[p,m]=e(i.shape,a.shape,d,f,h);return l.makeTensorInfo(m,h,p)}:({inputs:o,backend:s})=>{const{a:i,b:a}=o,l=s;if(i.dtype==="complex64"||a.dtype==="complex64"){const u=za({inputs:{x:i},backend:l,attrs:{dtype:"complex64"}}),c=l.data.get(u.dataId),d=c.complexTensorInfos.real,f=c.complexTensorInfos.imag,h=l.data.get(d.dataId).values,p=l.data.get(f.dataId).values,m=za({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),g=l.data.get(m.dataId),y=g.complexTensorInfos.real,v=g.complexTensorInfos.imag,b=l.data.get(y.dataId).values,x=l.data.get(v.dataId).values,[w,S,$]=n(i.shape,a.shape,h,p,b,x),C=l.makeTensorInfo($,"float32",w),k=l.makeTensorInfo($,"float32",S),I=Nr({inputs:{real:C,imag:k},backend:l});return l.disposeIntermediateTensorInfo(u),l.disposeIntermediateTensorInfo(m),l.disposeIntermediateTensorInfo(C),l.disposeIntermediateTensorInfo(k),I}else{const u=l.data.get(i.dataId).values,c=l.data.get(a.dataId).values,d=r||i.dtype,[f,h]=e(i.shape,a.shape,u,c,d);return l.makeTensorInfo(h,d,f)}}}function oN(t){return(e,n,r,o,s,i)=>{const a=Me(e,n),l=re(a),u=a.length,c=Ee(a),d=Gn("float32",l),f=Gn("float32",l),h=fd(e,a),p=fd(n,a),m=Pi(r,o),g=Pi(s,i),y=e.length,v=Ee(e),b=n.length,x=Ee(n);if(h.length+p.length===0)for(let w=0;w<d.length;w++){const S=w%m.length,$=w%g.length,C=t(m[S*2],m[S*2+1],g[$*2],g[$*2+1]);d[w]=C.real,f[w]=C.imag}else for(let w=0;w<d.length;w++){const S=jd(w,u,c),$=S.slice(-y);h.forEach(E=>$[E]=0);const C=zs($,y,v),k=S.slice(-b);p.forEach(E=>k[E]=0);const I=zs(k,b,x),T=t(m[C*2],m[C*2+1],g[I*2],g[I*2+1]);d[w]=T.real,f[w]=T.imag}return[d,f,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a5=sn((t,e)=>t+e),j_e=oN((t,e,n,r)=>({real:t+n,imag:e+r})),yd=wn(Wd,a5,j_e),W_e={kernelName:Wd,backendName:"cpu",kernelFunc:yd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sN(t,e,n,r,o){const s=re(r),i=Hn(o,n);for(let a=0;a<t.length;a++){const l=t[a];if(l<0)throw new Error("Input x must be non-negative!");l>=o||(s>0?i[l]+=e[a]:i[l]+=1)}return i}function l5(t,e,n,r=!1){const o=t.shape[0],s=t.shape[1],i=Ue([o,n],e.dtype);for(let a=0;a<o;a++)for(let l=0;l<s;l++){const u=t.get(a,l);if(u<0)throw new Error("Input x must be non-negative!");u>=n||(r?i.set(1,a,u):e.size>0?i.set(i.get(a,u)+e.get(a,l),a,u):i.set(i.get(a,u)+1,a,u))}return i}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u5=sn((t,e)=>t&e),V_e=wn(VT,u5),U_e={kernelName:VT,backendName:"cpu",kernelFunc:V_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ri(t){return(e,n,r)=>{const o=en(n,e.length);for(let s=0;s<e.length;++s)o[s]=t(e[s],r);return o}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pt(t,e,n){const r=ri(e);return rl(t,r,n)}function rl(t,e,n){return({inputs:r,attrs:o,backend:s})=>{const{x:i}=r;Ie(i,t);const a=s,l=a.data.get(i.dataId).values;let u;if(i.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");u=Di(l)}else u=l;const c=n||i.dtype,d=e(u,c,o);return a.makeTensorInfo(i.shape,c,d)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c5=ri(t=>Math.ceil(t)),G_e=rl(Up,c5),H_e={kernelName:Up,backendName:"cpu",kernelFunc:G_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d5(t,e,n,r){const o=en(n,re(e));if(r&&n!=="string"){let s=0;t.forEach(i=>{const a=re(i.shape);o.set(i.vals,s),s+=a})}else{let s=0;t.forEach(i=>{const a=n==="string"?Di(i.vals):i.vals;let l=0;for(let u=0;u<i.shape[0];++u){const c=u*e[1]+s;for(let d=0;d<i.shape[1];++d)o[c+d]=a[l++]}s+=i.shape[1]})}return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f5=sn((t,e)=>t===e?1:0),h5=wn(Jx,f5,null,"bool"),K_e={kernelName:Jx,backendName:"cpu",kernelFunc:h5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p5=ri(t=>Math.exp(t)),m5=rl(Qp,p5,"float32"),q_e={kernelName:Qp,backendName:"cpu",kernelFunc:m5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g5=ri(t=>Math.expm1(t)),X_e=rl(Zp,g5),Y_e={kernelName:Zp,backendName:"cpu",kernelFunc:X_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y5=ri(t=>Math.floor(t)),Q_e=rl(Jp,y5),Z_e={kernelName:Jp,backendName:"cpu",kernelFunc:Q_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v5=sn((t,e)=>Math.floor(t/e)),J_e=wn(em,v5,null,"int32"),eRe={kernelName:em,backendName:"cpu",kernelFunc:J_e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x5(t,e,n,r,o,s,i,a,l){const u=Ue([r,s],n);for(let c=0;c<r;c++){const d=[];let f=0;for(let h=0;h<o;h++){const p=t[c*o+h];f+=p*i[h],d.push(p)}if(f<0||f>=l/s)throw new Error(`Invalid indices: ${d} does not index into ${a}`);for(let h=0;h<s;h++)u.values[c*s+h]=e.get(...e.indexToLoc(f*s+h))}return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b5(t,e,n){const r=Ue(n,t.dtype);for(let o=0;o<r.size;++o){const i=r.indexToLoc(o).slice(),a=i[0],l=i[2],u=e.locToIndex([a,l]);i[2]=e.values[u];const c=t.locToIndex(i);0<=c&&c<t.values.length&&(r.values[o]=t.values[c])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w5=sn((t,e)=>t>e?1:0),tRe=wn(rb,w5,null,"bool"),nRe={kernelName:rb,backendName:"cpu",kernelFunc:tRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S5=sn((t,e)=>t>=e?1:0),rRe=wn(tm,S5,null,"bool"),oRe={kernelName:tm,backendName:"cpu",kernelFunc:rRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C5=sn((t,e)=>t<e?1:0),sRe=wn(sb,C5,null,"bool"),iRe={kernelName:sb,backendName:"cpu",kernelFunc:sRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $5=sn((t,e)=>t<=e?1:0),aRe=wn(ib,$5,null,"bool"),lRe={kernelName:ib,backendName:"cpu",kernelFunc:aRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k5(t,e,n){const r=(e-t)/(n-1),o=Hn(n,"float32");o[0]=t;for(let s=1;s<o.length;s++)o[s]=o[s-1]+r;return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I5=ri(t=>Math.log(t)),uRe=rl(im,I5),cRe={kernelName:im,backendName:"cpu",kernelFunc:uRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T5(t,e,n,r){const o=Gn(r,re(n));for(let s=0;s<o.length;++s){const i=s*e;let a=t[i];for(let l=0;l<e;++l){const u=t[i+l];(Number.isNaN(u)||u>a)&&(a=u)}o[s]=a}return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E5=sn((t,e)=>Math.max(t,e)),dRe=wn(lm,E5),fRe={kernelName:lm,backendName:"cpu",kernelFunc:dRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N5=sn((t,e)=>Math.min(t,e)),hRe=wn(um,N5),pRe={kernelName:um,backendName:"cpu",kernelFunc:hRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iN=sn((t,e)=>t*e),mRe=oN((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),l1=wn(dm,iN,mRe),gRe={kernelName:dm,backendName:"cpu",kernelFunc:l1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A5(t,e,n){const r=Ya(-1,n);return iN([],e,r,t,n)}function yRe(t){const{inputs:e,backend:n}=t,{x:r}=e;Ie(r,"neg");const o=n.data.get(r.dataId).values,[s,i]=A5(o,r.shape,r.dtype);return n.makeTensorInfo(i,r.dtype,s)}const vRe={kernelName:yb,backendName:"cpu",kernelFunc:yRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O5=sn((t,e)=>t!==e?1:0),xRe=wn(vb,O5,null,"bool"),bRe={kernelName:vb,backendName:"cpu",kernelFunc:xRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aN(t,e,n,r,o){const s=e.length,i=re(e),a=Ee(e),l=Ee(o),u=Gn(n,re(o));for(let c=0;c<i;++c){const d=jd(c,s,a),f=new Array(d.length);for(let p=0;p<f.length;p++)f[p]=d[r[p]];const h=zs(f,s,l);u[h]=t[c]}return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sr(t){const{inputs:e,attrs:n,backend:r}=t,{x:o}=e,{perm:s}=n;Ie(o,"transpose");const i=o.shape.length,a=new Array(i);for(let d=0;d<a.length;d++)a[d]=o.shape[s[d]];const l=r.data.get(o.dataId).values,u=aN(l,o.shape,o.dtype,s,a);return{dataId:r.write(u,a,o.dtype),shape:a,dtype:o.dtype}}const wRe={kernelName:pc,backendName:"cpu",kernelFunc:Sr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _5(t,e,n,r){const[o,s]=An(t,r),i=Br(e,"int32"),a=Hn(re(o),i),l=re(s);for(let u=0;u<a.length;++u){const c=u*l;let d=1;for(let f=0;f<l;++f)d*=n[c+f];a[u]=d}return{outVals:a,outShape:o,outDtype:i}}function SRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r;Ie(o,"prod");const a=o.shape.length,l=Ge(s,o.shape),u=Gt(l,a);let c=l,d=o;const f=[];u!=null&&(d=Sr({inputs:{x:o},backend:n,attrs:{perm:u}}),f.push(d),c=rn(c.length,a));const h=n.data.get(d.dataId).values,{outVals:p,outShape:m,outDtype:g}=_5(d.shape,d.dtype,h,c);let y=m;return i&&(y=dn(m,l)),f.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.makeTensorInfo(y,g,p)}const CRe={kernelName:$b,backendName:"cpu",kernelFunc:SRe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Re(t,e,n){t.forEach((r,o)=>{if(r<0||r>=n){const s=jd(o,e.length,Ee(e)).join(",");throw new Error(`indices[${s}] = ${r} is not in [0, ${n})`)}})}function kRe(t,e){for(let n=0;n<t.length;++n){const r=t[n],o=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>o)throw new Error("Ragged splits must not point past values");for(let s=1;s<r.length;++s)if(r[s-1]>r[s])throw new Error("Ragged splits must be sorted in ascending order")}}function IRe(t,e,n,r){const o=[];let s=0;const i=e.length-1+n.length,a=new Array(i).fill(null).map(()=>[0]);kRe(n,r);let l=1;for(let u=0;u<e.length-1;++u){l*=e[u];const c=e[u+1];for(let d=1;d<l+1;++d)a[u].push(d*c)}for(let u=0;u<t.length;++u){let c=t[u],d=t[u]+1;for(let f=0;f<n.length;++f){const h=n[f],p=f+e.length-1;if(p>=0){const m=a[p],g=m[m.length-1]-h[c];for(let y=c;y<d;++y)a[p].push(h[y+1]+g)}c=h[c],d=h[d]}d!==c&&(o.push([c,d]),s+=d-c)}return{outSplits:a,valueSlices:o,numValues:s}}function TRe(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,o=en("int32",r);e.push(o),t[n].forEach((s,i)=>o[i]=s)}return e}function bM(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function ERe(t,e,n,r,o,s){const i=bM(e,2)[1],a=bM(s,2)[1];let l=0;for(const u of n)for(let c=u[0];c<u[1];++c){for(let d=0;d<r;++d)o[l*a+d]=t[c*i+d];++l}}function NRe(t,e,n,r,o){const s=e.slice();s[0]=o;const i=en(n,re(s)),a=t.length,l=a===0?0:a/e[0];return ERe(t,e,r,l,i,s),[i,s]}function R5(t,e,n,r,o,s,i,a){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if($Re(s,i,l),r.length===0)throw new Error("params.rank must be nonzero");const u=r[0],{outSplits:c,valueSlices:d,numValues:f}=IRe(s,i,t,u),h=TRe(c),p=NRe(n,r,o,d,f);return[h,p[0],p[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wM=2147483647;function P5(t,e,n,r,o,s,i){if(e.length>1)throw new Error("starts must be a scalar or vector");if(o.length>1)throw new Error("limits must be a scalar or vector");if(i.length>1)throw new Error("deltas must be a scalar or vector");const a=e.length===0,l=o.length===0,u=i.length===0,c=[];a||c.push(e[0]),l||c.push(o[0]),u||c.push(i[0]);for(let g=1;g<c.length;++g)if(c[g]!==c[g-1])throw new Error("starts, limits, and deltas must have the same shape");const d=c.length===0?1:c[0],f=en("int32",d+1);f[0]=0;for(let g=0;g<d;++g){const y=a?t[0]:t[g],v=l?r[0]:r[g],b=u?s[0]:s[g];if(b===0)throw new Error("Requires delta != 0");let x;if(b>0&&v<y||b<0&&v>y)x=0;else if(x=Math.ceil(Math.abs((v-y)/b)),x>wM)throw new Error(`Requires ((limit - start) / delta) <= ${wM}`);f[g+1]=f[g]+x}const h=f[d],p=en(n,h);let m=0;for(let g=0;g<d;++g){const y=f[g+1]-f[g];let v=a?t[0]:t[g];const b=u?s[0]:s[g];for(let x=0;x<y;++x)p[m++]=v,v+=b}return[f,p]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var go=ts;class a0{constructor(e,n,r,o,s,i,a,l,u,c){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=o,this.valuesDType=s,this.defaultValue=i,this.defaultValueShape=a,this.rowPartitionValues=l,this.rowPartitionValuesShapes=u,this.rowPartitionTypes=SU(c),this.raggedRank=CU(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===go.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===go.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case go.VALUE_ROWIDS:return a0.getMaxWidthValueRowID(n);case go.ROW_SPLITS:return a0.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${go[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let o=0;o<n-1;++o){const s=e[o+1]-e[o];s>r&&(r=s)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,o=e[0],s=0;for(let i=1;i<n;++i){const a=e[i];a!==o&&(o=a,s=Math.max(i-r,s),r=i)}return Math.max(n-r,s)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return CM(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;$U(r,n);const o=this.tensorShapeFromTensor(this.shape,this.shapeShape),i=wU(this.raggedRank,o,n);i[0]<0&&(i[0]=e);for(let a=1;a<=this.raggedRank;++a)i[a]<0&&(i[a]=this.getMaxWidth(a));return i}calculateFirstParentOutputIndex(e,n,r){const o=Math.min(e,r),s=[];let i=0;for(let a=0;a<o;++a,i+=n)s.push(i);for(let a=o;a<e;++a)s.push(-1);return P(s.length===e,()=>"Final length of result must be equal to firstDimension."),s}calculateOutputIndexRowSplit(e,n,r,o){const s=e.length,i=[];for(let a=0;a<s-1;++a){const l=e[a+1]-e[a];let u=Math.min(o,l),c=n[a];c===-1&&(u=0);for(let d=0;d<u;++d)i.push(c),c+=r;for(let d=0;d<l-u;++d)i.push(-1)}if(s>0&&i.length!==e[s-1])throw new Error("Invalid row split size.");return i}calculateOutputIndexValueRowID(e,n,r,o){const s=e.length,i=[];if(s===0)return[];let a=0,l=e[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let u=n[l];i.push(u);for(let c=1;c<s;++c){const d=e[c];if(d===l)u>=0&&(++a,a<o?u+=r:u=-1);else{if(a=0,l=d,d>=n.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${n.length}`);u=n[d]}i.push(u)}if(i.length!==e.length)throw new Error("Invalid row ids.");return i}calculateOutputIndex(e,n,r,o){const s=this.getRowPartitionTensor(e),i=this.getRowPartitionTypeByDimension(e);switch(i){case go.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(s,n,r,o);case go.ROW_SPLITS:if(s.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${s.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(s,n,r,o);default:throw new Error(`Unsupported partition type: ${go[i]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case go.FIRST_DIM_SIZE:return e[0];case go.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case go.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${go[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),o=new Array(this.raggedRank+1);o[o.length-1]=1;for(let l=o.length-2;l>=0;--l)o[l]=o[l+1]*r[l+1];const s=CM(r,!1),i=en(this.valuesDType,re(s));if(o[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(n,o[0],r[0]);for(let u=1;u<=this.raggedRank;++u)l=this.calculateOutputIndex(u-1,l,o[u],r[u]);this.setOutput(this.raggedRank,l,i,s)}return[s,i]}setOutput(e,n,r,o){if(r.length===0)return;const s=this.values,i=r;let a=o.slice();a=a.slice(e+1);const l=re(a),u=n.length;let c=this.defaultValue;if(c.length!==l&&c.length!==1){const p=this.defaultValueShape;Q(()=>{const m=q(c,p);c=oh(m,a).dataSync()})}let d=0,f=0,h=0;for(let p=0;p<=u;++p){let m=p<u?n[p]:-1;if(m===h){++h;continue}if(f<h){const g=s.subarray(d*l),y=i.subarray(f*l),v=(h-f)*l;SM(y,g,v)}if(p>=u){const g=r.length;m=Math.floor(g/l)}if(m>h)if(this.defaultValue.length===1)i.subarray(h*l,m*l).fill(this.defaultValue[0]),h=m;else for(;m>h;){const g=i.slice(h*l);SM(g,c,l),++h}m<0?(d=p+1,f=h):(d=p,f=h,h=f+1)}}}function SM(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function CM(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function D5(t,e,n,r,o,s,i,a,l,u){return new a0(t,e,n,r,o,s,i,a,l,u).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M5(t,e,n,r){const o=t===e,s=t<e&&n<0,i=e<t&&n>1;if(o||s||i)return Hn(0,r);const a=Math.abs(Math.ceil((e-t)/n)),l=Hn(a,r);e<t&&n===1&&(n=-1),l[0]=t;for(let u=1;u<l.length;u++)l[u]=l[u-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F5=ri(t=>1/Math.sqrt(t)),ARe=rl(ym,F5),ORe={kernelName:ym,backendName:"cpu",kernelFunc:ARe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Al(t,e,n,r,o,s,i,a,l,u){const c=[r/o,o],d=t.values,f=e.values;if(r===0)return Ue(n,e.dtype);const h=l instanceof Dn?l:Ue(c,e.dtype);typeof l=="string"||typeof l=="number"?h.values.fill(l):typeof l=="boolean"&&h.values.fill(+l);for(let p=0;p<s;p++){const m=[];let g=0;for(let y=0;y<i;y++){const v=d[p*i+y];m.push(v),g+=v*a[y]}if(g<0||g>=r/o)throw new Error(`Invalid indices: ${m} does not index into ${n}`);for(let y=0;y<o;y++)u?h.values[g*o+y]+=f[p*o+y]:h.values[g*o+y]=e.rank===0?f[0]:f[p*o+y]}return h}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Re=ri(t=>1/(1+Math.exp(-t))),L5=pt(Sm,t=>1/(1+Math.exp(-t))),RRe={kernelName:Sm,backendName:"cpu",kernelFunc:L5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B5(t,e,n,r,o){const s=h2(r,e,n),i=re(n),a=Ee(r);if(s){const d=p2(e,a);return o==="string"?t.slice(d,d+i):t.subarray(d,d+i)}const l=o==="string"?Di(t):t,u=Ue(r,o,l),c=Ue(n,o);for(let d=0;d<c.size;++d){const f=c.indexToLoc(d),h=f.map((p,m)=>p+e[m]);c.set(u.get(...h),...f)}return o==="string"?UU(c.values):c.values}function cu(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{begin:s,size:i}=r;Ie(o,"slice");const[a,l]=Hb(o,s,i);d2(o,a,l);const u=n.data.get(o.dataId).values,c=B5(u,a,l,o.shape,o.dtype);return n.makeTensorInfo(l,o.dtype,c)}const PRe={kernelName:Ab,backendName:"cpu",kernelFunc:cu};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z5(t,e,n,r,o,s,i){const a=e[0],l=s[0],u=new Array(l),c=new Array(a),d=e[1];if(l===0){if(a!==0)throw new Error(OU(a));const g=en(n,0),y=en(o,0);return[g,[0,d],y,u,c]}let f=!0,h=0;const p=new Array(l).fill(0);for(let g=0;g<a;++g){const y=t[g*d];if(y<0)throw new Error(_U(g,y));if(y>=l)throw new Error(RU(g,y,l));++p[y],f=f&&y>=h,h=y}let m=!0;for(let g=0;g<l;++g){const y=p[g]===0;u[g]=y,m=m&&!y,p[g]=Math.max(p[g],1),g>0&&(p[g]+=p[g-1])}if(m&&f){const g=t,y=r;for(let v=0;v<a;++v)c[v]=v;return[g,[a,d],y,u,c]}else{const g=p[l-1],y=en(n,g*d),v=en(o,g),b=new Array(l).fill(0);for(let x=0;x<a;++x){const w=t[x*d],S=b[w],$=(w===0?0:p[w-1])+S;b[w]++;for(let C=0;C<d;++C)y[$*d+C]=t[x*d+C];v[$]=r[x],c[x]=$}for(let x=0;x<l;++x)if(b[x]===0){const S=x===0?0:p[x-1];y[S*d+0]=x;for(let $=1;$<d;++$)y[S*d+$]=0;v[S]=i}return[y,[g,d],v,u,c]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j5(t,e,n,r,o){const s=re(r),i=e[0],a=o.length,l=[];let u=1,c=-1;for(let g=0;g<a;++g){const y=o[g];if(y===-1){if(c!==-1)throw new Error(PU(c,g));c=g,l.push(1)}else{if(y<0)throw new Error(DU(g,y));u*=y,l.push(y)}}if(c!==-1){if(u<=0)throw new Error(MU());const g=Math.trunc(s/u);if(u*g!==s)throw new Error(FU(r,l));l[c]=g}if(re(l)!==s)throw new Error(LU(r,l));const f=r.length,h=[];if(f>0){h[f-1]=1;for(let g=f-2;g>=0;--g)h[g]=h[g+1]*r[g+1]}const p=[];if(a>0){p[a-1]=1;for(let g=a-2;g>=0;--g)p[g]=p[g+1]*l[g+1]}const m=en(n,i*a);for(let g=0;g<i;++g){let y=0;for(let v=0;v<f;++v)y+=t[g*f+v]*h[v];for(let v=0;v<a;++v)m[g*a+v]=Math.trunc(y/p[v]),y%=p[v]}return[m,[i,a],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lN(t,e,n,r,o,s=!1,i=0){const a=r.length,l=[e[0],t.length/e[0]],u=l[1],d=a>0?o[a-1]+1:0;if(d<0)throw new Error(X$());const f=e.slice();f[0]=d;const h=f.reduce((b,x)=>b*x,1),p=en(n,h);if(a===0)return d>0&&p.fill(i),[p,f];if(d<=0)throw new Error(X$());let m=0,g=1,y=0,v=o[m];for(;;){let b=0;if(g<a){if(b=o[g],v===b){++g;continue}if(v>=b)throw new Error(BU())}if(v<0||v>=d)throw new Error(zU(v,d));v>y&&p.fill(i,y*u,v*u);for(let x=m;x<g;++x){const w=r[x];if(w<0||w>=l[0])throw new Error(jU(x,r[x],l[0]));for(let S=0;S<u;S++)p[v*u+S]+=t[w*u+S]}if(s)for(let x=0;x<u;x++)p[v*u+x]/=g-m;if(m=g,++g,y=v+1,v=b,g>a)break}return y<d&&p.fill(i,y*u,d*u),[p,f]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DRe=ri(t=>Math.sqrt(t)),MRe=pt($m,t=>Math.sqrt(t)),FRe={kernelName:$m,backendName:"cpu",kernelFunc:MRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W5=sn((t,e)=>{const n=t-e;return n*n}),LRe=wn(km,W5),BRe={kernelName:km,backendName:"cpu",kernelFunc:LRe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V5=ri((t,e)=>{const{pattern:n,replaceGlobal:r,rewrite:o}=e;return t.replace(new RegExp(n,r?"g":""),o)}),zRe=rl(vE,V5),jRe={kernelName:vE,backendName:"cpu",kernelFunc:zRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U5(t,e,n,r){const o=Ue(t,e.dtype);for(let s=0;s<o.size;s++){const i=o.indexToLoc(s),a=new Array(i.length);for(let l=0;l<a.length;l++)a[l]=i[l]*n[l]+r[l];o.set(e.get(...a),...i)}return o}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WRe{constructor(e,n,r,o,s,i){this.separator=$a(e),this.nGramWidths=n,this.leftPad=$a(r),this.rightPad=$a(o),this.padWidth=s,this.preserveShort=i}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,o,s,i){for(let a=0;a<s;++a){const l=this.getPadWidth(i),u=Math.max(0,l-a),c=Math.max(0,l-(s-(a+1))),d=i-(u+c),f=n+(u>0?0:a-l);let h=0;h+=u*this.leftPad.length;for(let v=0;v<d;++v)h+=e[f+v].length;h+=c*this.rightPad.length;const p=u+c+d-1;h+=p*this.separator.length,r[o+a]=new Uint8Array(h);const m=r[o+a];let g=0;const y=v=>v.forEach(b=>m[g++]=b);for(let v=0;v<u;++v)y(this.leftPad),y(this.separator);for(let v=0;v<d-1;++v)y(e[f+v]),y(this.separator);if(d>0){y(e[f+d-1]);for(let v=0;v<c;++v)y(this.separator),y(this.rightPad)}else{for(let v=0;v<c-1;++v)y(this.rightPad),y(this.separator);y(this.rightPad)}}}compute(e,n){const r=e.length,o=n.length;if(o>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let u=1;u<o;++u){let c=n[u]>=l;if(c=c&&n[u]<=r,!c)throw new Error(`Invalid split value ${n[u]}, must be in [${l}, ${r}]`);l=n[u]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const s=o-1,i=en("int32",o);if(r===0||o===0){const l=new Array(r);for(let u=0;u<=s;++u)i[u]=0;return[l,i]}i[0]=0;for(let l=1;l<=s;++l){const u=n[l]-n[l-1];let c=0;this.nGramWidths.forEach(d=>{c+=this.getNumNGrams(u,d)}),this.preserveShort&&u>0&&c===0&&(c=1),i[l]=i[l-1]+c}const a=new Array(i[s]);for(let l=0;l<s;++l){const u=n[l];let c=i[l];if(this.nGramWidths.forEach(d=>{const f=n[l+1]-n[l],h=this.getNumNGrams(f,d);this.createNGrams(e,u,a,c,h,d),c+=h}),this.preserveShort&&c===i[l]){const d=n[l+1]-n[l];if(d===0)continue;const f=d+2*this.padWidth;this.createNGrams(e,u,a,c,1,f)}}return[a,i]}}function G5(t,e,n,r,o,s,i,a){return new WRe(n,r,o,s,i,a).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VRe(t,e,n,r){if(!t.length)return;if(e.length===0){for(let s=0;s<t.length;++s)r.push(t.subarray(s,s+1));return}if(e.length===1){const s=e[0];let i=t.indexOf(s);for(;i!==-1;){const a=t.subarray(0,i);(!n||a.length!==0)&&r.push(a),t=t.subarray(i+1),i=t.indexOf(s)}(!n||t.length!==0)&&r.push(t);return}let o=0;for(let s=0;s<t.length+1;s++)if(s===t.length||e.indexOf(t[s])!==-1){const i=t.subarray(o,s);(!n||i.length!==0)&&r.push(i),o=s+1}}function H5(t,e,n){const r=t.length,o=[];let s=0,i=0;const a=new Array(r);for(let f=0;f<r;++f){const h=o.length;VRe(t[f],e,n,o);const p=o.length-h;a[f]=p,s+=p,i=Math.max(i,p)}const l=en("int32",s*2),u=new Array(s),c=[r,i];let d=0;for(let f=0;f<r;++f)for(let h=0;h<a[f];++h)l[d*2]=f,l[d*2+1]=h,u[d]=o[d],++d;return[l,u,c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K5(t,e){const n=en("int32",t.length);for(let r=0;r<t.length;++r)n[r]=xCe(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q5=sn((t,e)=>t-e),URe=oN((t,e,n,r)=>({real:t-n,imag:e-r})),uN=wn(Im,q5,URe),GRe={kernelName:Im,backendName:"cpu",kernelFunc:uN};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X5(t,e){const n=new Array(t.rank);for(let o=0;o<n.length;o++)n[o]=t.shape[o]*e[o];const r=Ue(n,t.dtype);for(let o=0;o<r.values.length;++o){const s=r.indexToLoc(o),i=new Array(t.rank);for(let l=0;l<i.length;l++)i[l]=s[l]%t.shape[l];const a=t.locToIndex(i);r.values[o]=t.values[a]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bf=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function Y5(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const a=r-n+1,l=e-n+1,u=Math.log(a),c=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*c*(a-c)/a)*Math.sign(l-a/2),f=Math.max(n,Math.floor(e-l*c/a+d)),h=Math.min(r,Math.floor(e+(a-l)*c/a+d));Y5(t,e,f,h)}const o=t[e];let s=n,i=r;for(Fu(t,n,e),Bf(t[r],o)>0&&Fu(t,n,r);s<i;){for(Fu(t,s,i),s++,i--;Bf(t[s],o)<0;)s=s+1;for(;Bf(t[i],o)>0;)i=i-1}Bf(t[n],o)===0?Fu(t,n,i):(i=i+1,Fu(t,i,r)),i<=e&&(n=i+1),e<=i&&(r=i-1)}}function Q5(t,e,n,r,o){const s=e[e.length-1],[i,a]=[t.length/s,s],l=Gn(n,i*r),u=Gn("int32",i*r);for(let d=0;d<i;d++){const f=d*a,h=t.subarray(f,f+a);let p=new Array(h.length);h.forEach((v,b)=>p[b]={value:v,index:b}),r<p.length&&(Y5(p,r),p=p.slice(0,r)),o&&p.sort(Bf);const m=d*r,g=l.subarray(m,m+r),y=u.subarray(m,m+r);for(let v=0;v<r;v++)g[v]=p[v].value,y[v]=p[v].index}const c=e.slice();return c[c.length-1]=r,[Ue(c,n,l),Ue(c,"int32",u)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z5(t,e,n,r){const o=Ge(e,n)[0],s=[1,n[0],1];for(let p=0;p<o;p++)s[0]*=n[p];s[1]=n[o];for(let p=o+1;p<n.length;p++)s[2]*=n[p];const i=new Map,a=new Int32Array(n[o]),l=new Dn(s,r,t),u=[],c=s[0]===1&&s[2]===1;for(let p=0;p<n[o];p++){let m;if(c)m=t[p].toString();else{const y=[];for(let v=0;v<s[0];v++)for(let b=0;b<s[2];b++)y.push(l.get(v,p,b));m=y.join(",")}const g=i.get(m);if(g!=null)a[p]=g;else{const y=i.size;i.set(m,y),a[p]=y,u.push(p)}}const d=s.slice();d[1]=i.size;const f=new Dn(d,r);u.forEach((p,m)=>{for(let g=0;g<s[0];g++)for(let y=0;y<s[2];y++)f.set(l.get(g,p,y),g,m,y)});const h=n.slice();return h[o]=d[1],{outputValues:f.values,outputShape:h,indices:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HRe=Object.freeze(Object.defineProperty({__proto__:null,addImpl:a5,bincountImpl:sN,bincountReduceImpl:l5,bitwiseAndImpl:u5,castImpl:i5,ceilImpl:c5,concatImpl:d5,equalImpl:f5,expImpl:p5,expm1Impl:g5,floorDivImpl:v5,floorImpl:y5,gatherNdImpl:x5,gatherV2Impl:b5,greaterEqualImpl:S5,greaterImpl:w5,lessEqualImpl:$5,lessImpl:C5,linSpaceImpl:k5,logImpl:I5,maxImpl:T5,maximumImpl:E5,minimumImpl:N5,multiplyImpl:iN,negImpl:A5,notEqualImpl:O5,prodImpl:_5,raggedGatherImpl:R5,raggedRangeImpl:P5,raggedTensorToTensorImpl:D5,rangeImpl:M5,rsqrtImpl:F5,scatterImpl:Al,sigmoidImpl:_Re,simpleAbsImpl:s5,sliceImpl:B5,sparseFillEmptyRowsImpl:z5,sparseReshapeImpl:j5,sparseSegmentReductionImpl:lN,sqrtImpl:DRe,squaredDifferenceImpl:W5,staticRegexReplaceImpl:V5,stridedSliceImpl:U5,stringNGramsImpl:G5,stringSplitImpl:H5,stringToHashBucketFastImpl:K5,subImpl:q5,tileImpl:X5,topKImpl:Q5,transposeImpl:aN,uniqueImpl:Z5},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */bV("cpu",()=>new a1,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J5=pt(Xp,t=>t>=0?t:Math.exp(t)-1),KRe={kernelName:Xp,backendName:"cpu",kernelFunc:J5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e6(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{alpha:s}=r;Ie([o],"leakyRelu");const i=re(o.shape),a=n.data.get(o.dataId).values,l=Gn("float32",i);for(let u=0;u<a.length;u++)l[u]=a[u]<0?s*a[u]:a[u];return n.makeTensorInfo(o.shape,"float32",l)}const qRe={kernelName:ob,backendName:"cpu",kernelFunc:e6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XRe=sn((t,e)=>t<0?e*t:t);function t6(t){const{inputs:e,backend:n}=t,{x:r,alpha:o}=e;Ie([r,o],"prelu");const s=n.data.get(r.dataId).values,i=n.data.get(o.dataId).values,[a,l]=XRe(r.shape,o.shape,s,i,"float32");return n.makeTensorInfo(l,"float32",a)}const YRe={kernelName:Cb,backendName:"cpu",kernelFunc:t6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n6=pt(pm,t=>Math.max(0,t)),QRe={kernelName:pm,backendName:"cpu",kernelFunc:n6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r6=pt(mm,t=>Math.min(Math.max(0,t),6)),ZRe={kernelName:mm,backendName:"cpu",kernelFunc:r6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l0(t,e,n,r,o){if(n==="linear")return Js({inputs:{x:e},backend:t});if(n==="relu")return n6({inputs:{x:e},backend:t});if(n==="elu")return J5({inputs:{x:e},backend:t});if(n==="relu6")return r6({inputs:{x:e},backend:t});if(n==="prelu")return t6({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return e6({inputs:{x:e},backend:t,attrs:{alpha:o}});if(n==="sigmoid")return L5({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ct(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{shape:s}=r,i=re(o.shape),a=kW(s,i),l=re(a);P(i===l,()=>`The new shape (${a}) has ${l} elements and the old shape (${o.shape}) has ${i} elements. The new shape and old shape must have the same number of elements.`),n.incRef(o.dataId);const u=n.data.get(o.dataId);if(u.complexTensorInfos!=null){const c=u.complexTensorInfos.real,d=u.complexTensorInfos.imag;c.shape=a,d.shape=a}return{dataId:o.dataId,shape:a,dtype:o.dtype}}const JRe={kernelName:kb,backendName:"cpu",kernelFunc:Ct};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o6(t){const{inputs:e,backend:n,attrs:r}=t,{a:o,b:s}=e,{transposeA:i,transposeB:a}=r;Ie([o,s],"matMul");const l=o.shape.length,u=s.shape.length,c=i?o.shape[l-2]:o.shape[l-1],d=a?s.shape[u-1]:s.shape[u-2],f=i?o.shape[l-1]:o.shape[l-2],h=a?s.shape[u-2]:s.shape[u-1],p=o.shape.slice(0,-2),m=s.shape.slice(0,-2),g=re(p),y=re(m),b=Me(o.shape.slice(0,-2),s.shape.slice(0,-2)).concat([f,h]);P(c===d,()=>`Error in matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${o.shape} and ${s.shape} and transposeA=${i} and transposeB=${a} must match.`);const x=i?[g,c,f]:[g,f,c],w=a?[y,h,d]:[y,d,h],S=Ct({inputs:{x:o},backend:n,attrs:{shape:x}}),$=Ct({inputs:{x:s},backend:n,attrs:{shape:w}}),C=i?S.shape[1]:S.shape[2],k=i?S.shape[2]:S.shape[1],I=a?$.shape[1]:$.shape[2],T=Math.max(g,y),E=n.data.get(S.dataId).values,_=n.data.get($.dataId).values,O=Ee(S.shape),F=Ee($.shape),[M,L,N]=i?[O[0],1,O[1]]:[O[0],O[1],1],[D,U,B]=a?[1,F[1],F[0]]:[F[1],1,F[0]],W=k*I,V=Ue([T,k,I],S.dtype),ee=V.values,ne=n.blockSize;for(let se=0;se<T;se++){const de=se%g,ue=se%y;for(let Y=0;Y<k;Y+=ne){const ae=Math.min(Y+ne,k);for(let oe=0;oe<I;oe+=ne){const Z=Math.min(oe+ne,I);for(let be=0;be<C;be+=ne){const me=Math.min(be+ne,C);for(let xe=Y;xe<ae;xe++)for(let fe=oe;fe<Z;fe++){let Oe=0;for(let ye=be;ye<me;ye++){const Ne=E[de*M+xe*L+ye*N],Fe=_[ye*D+fe*U+ue*B];Oe+=Ne*Fe}ee[se*W+(xe*I+fe)]+=Oe}}}}}return n.disposeIntermediateTensorInfo(S),n.disposeIntermediateTensorInfo($),n.makeTensorInfo(b,V.dtype,V.values)}const ePe={kernelName:Vx,backendName:"cpu",kernelFunc:o6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tPe(t){const{inputs:e,backend:n,attrs:r}=t,{a:o,b:s,bias:i,preluActivationWeights:a}=e,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:d}=r;let f,h,p;const m=[];f=o6({inputs:{a:o,b:s},attrs:{transposeA:l,transposeB:u},backend:n}),i&&(h=yd({inputs:{a:f,b:i},backend:n}),m.push(f),f=h),c&&(p=l0(n,f,c,a,d),m.push(f),f=p);for(const y of m)n.disposeIntermediateTensorInfo(y);return f}const nPe={kernelName:jv,backendName:"cpu",kernelFunc:tPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rPe=pt(Mp,t=>Math.acos(t)),oPe={kernelName:Mp,backendName:"cpu",kernelFunc:rPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sPe=pt(Fp,t=>Math.acosh(t)),iPe={kernelName:Fp,backendName:"cpu",kernelFunc:sPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aPe(t){const{inputs:e,backend:n}=t,r=e;Ie(e,"addN");const o=r.map(a=>n.data.get(a.dataId).values),s=Ue(r[0].shape,r[0].dtype),i=s.values;for(let a=0;a<r.length;a++){const l=o[a];for(let u=0;u<i.length;u++)i[u]+=l[u]}return n.makeTensorInfo(s.shape,s.dtype,s.values)}const lPe={kernelName:FT,backendName:"cpu",kernelFunc:aPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r;Ie(o,"all");const a=Ge(s,o.shape);let l=a;const u=Gt(l,o.shape.length);let c=o;u!=null&&(c=Sr({inputs:{x:o},backend:n,attrs:{perm:u}}),l=rn(l.length,o.shape.length)),Ln("all",l,c.shape.length);const[d,f]=An(c.shape,l),h=re(f),p=Hn(re(d),c.dtype),m=n.data.get(c.dataId).values;for(let y=0;y<p.length;++y){const v=y*h;let b=m[v];for(let x=0;x<h;++x){const w=m[v+x];b=b&&w}p[y]=b}u!=null&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(d,c.dtype,p);if(i){const y=dn(d,a),v=Ct({inputs:{x:g},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(g),v}return g}const cPe={kernelName:LT,backendName:"cpu",kernelFunc:uPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r;Ie(o,"any");const a=Ge(s,o.shape);let l=a;const u=Gt(l,o.shape.length);let c=o;u!=null&&(c=Sr({inputs:{x:o},backend:n,attrs:{perm:u}}),l=rn(l.length,o.shape.length)),Ln("any",l,c.shape.length);const[d,f]=An(c.shape,l),h=re(f),p=Hn(re(d),c.dtype),m=n.data.get(c.dataId).values;for(let y=0;y<p.length;++y){const v=y*h;let b=m[v];for(let x=0;x<h;++x){const w=m[v+x];b=b||w}p[y]=b}u!=null&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(d,c.dtype,p);if(i){const y=dn(d,a),v=Ct({inputs:{x:g},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(g),v}return g}const fPe={kernelName:BT,backendName:"cpu",kernelFunc:dPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s}=r;Ie(o,"argMax");let i=Ge(s,o.shape);const a=Gt(i,o.shape.length);let l=o;const u=[];a!=null&&(l=Sr({inputs:{x:o},backend:n,attrs:{perm:a}}),u.push(l),i=rn(i.length,l.shape.length)),i=[i[0]],Ln("argMax",i,l.shape.length);const[c,d]=An(l.shape,i),f=re(c),h=Hn(f,"int32"),p=re(d),m=n.data.get(l.dataId).values;for(let g=0;g<h.length;++g){const y=g*p;let v=m[y],b=0;for(let x=0;x<p;++x){const w=m[y+x];w>v&&(v=w,b=x)}h[g]=b}return u.forEach(g=>n.disposeIntermediateTensorInfo(g)),n.makeTensorInfo(c,"int32",h)}const pPe={kernelName:Bx,backendName:"cpu",kernelFunc:hPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s}=r;Ie(o,"argMin");let i=Ge(s,o.shape);const a=Gt(i,o.shape.length);let l=o;const u=[];a!=null&&(l=Sr({inputs:{x:o},backend:n,attrs:{perm:a}}),u.push(l),i=rn(i.length,l.shape.length)),i=[i[0]],Ln("argMin",i,l.shape.length);const[c,d]=An(l.shape,i),f=re(c),h=Hn(f,"int32"),p=re(d),m=n.data.get(l.dataId).values;for(let g=0;g<h.length;++g){const y=g*p;let v=m[y],b=0;for(let x=0;x<p;++x){const w=m[y+x];w<v&&(v=w,b=x)}h[g]=b}return u.forEach(g=>n.disposeIntermediateTensorInfo(g)),n.makeTensorInfo(c,"int32",h)}const gPe={kernelName:zx,backendName:"cpu",kernelFunc:mPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yPe=pt(Lp,t=>Math.asin(t)),vPe={kernelName:Lp,backendName:"cpu",kernelFunc:yPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xPe=pt(Bp,t=>Math.asinh(t)),bPe={kernelName:Bp,backendName:"cpu",kernelFunc:xPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wPe=pt(zp,t=>Math.atan(t)),SPe={kernelName:zp,backendName:"cpu",kernelFunc:wPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CPe=sn((t,e)=>Math.atan2(t,e)),$Pe=wn(Wp,CPe),kPe={kernelName:Wp,backendName:"cpu",kernelFunc:$Pe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IPe=pt(jp,t=>Math.atanh(t)),TPe={kernelName:jp,backendName:"cpu",kernelFunc:IPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cN(t,e,n,r,o,s){const i=o.strideHeight,a=o.strideWidth,l=o.dilationHeight,u=o.dilationWidth,c=o.effectiveFilterHeight,d=o.effectiveFilterWidth,f=o.padInfo.top,h=o.padInfo.left,p=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=Ue(o.outShape,n),g=m.values,y=o.outShape[1]*o.outShape[2]*o.outShape[3],v=o.outShape[2]*o.outShape[3],b=o.outShape[3];for(let x=0;x<o.batchSize;++x){const w=x*y,S=x*r[0];for(let $=0;$<o.inChannels;++$)for(let C=0;C<o.outHeight;++C){const k=C*i-f,I=Math.max(0,k),T=Math.min(o.inHeight,c+k),E=w+C*v;for(let _=0;_<o.outWidth;++_){const O=_*a-h,F=Math.max(0,O),M=Math.min(o.inWidth,d+O);let L=p,N=0,D=0;for(let B=I;B<T;B+=l){const W=S+B*r[1];for(let V=F;V<M;V+=u){const ee=W+V*r[2],ne=t[ee+$];s==="max"&&ne>L?L=ne:s==="avg"&&(N+=ne,D++)}if(isNaN(L))break}const U=E+_*b+$;g[U]=s==="avg"?N/D:L}}}return m}function s6(t,e,n,r,o=!1,s=!1){const i=Ue(r.outShape,"int32"),a=r.strideHeight,l=r.strideWidth,u=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterHeight,f=r.effectiveFilterWidth,h=r.padInfo.top,p=r.padInfo.left,m=Ue(e,n,t);for(let g=0;g<r.batchSize;++g)for(let y=0;y<r.inChannels;++y)for(let v=0;v<r.outHeight;++v){const b=v*a-h;let x=b;for(;x<0;)x+=u;const w=Math.min(r.inHeight,d+b);for(let S=0;S<r.outWidth;++S){const $=S*l-p;let C=$;for(;C<0;)C+=c;const k=Math.min(r.inWidth,f+$);let I=Number.NEGATIVE_INFINITY,T=-1;for(let E=x;E<w;E+=u){const _=E-b;for(let O=C;O<k;O+=c){const F=O-$,M=m.get(g,E,O,y);M>I&&(I=M,o?T=s?((g*r.inHeight+E)*r.inWidth+O)*r.inChannels+y:(E*r.inWidth+O)*r.inChannels+y:T=_*f+F)}}i.set(T,g,v,S,y)}}return i}function i6(t,e,n,r,o,s){const i=o.strideDepth,a=o.strideHeight,l=o.strideWidth,u=o.dilationDepth,c=o.dilationHeight,d=o.dilationWidth,f=o.effectiveFilterDepth,h=o.effectiveFilterHeight,p=o.effectiveFilterWidth,m=o.padInfo.front,g=o.padInfo.top,y=o.padInfo.left,v=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=Ue(o.outShape,n),x=b.values,w=o.outShape[1]*o.outShape[2]*o.outShape[3]*o.outShape[4],S=o.outShape[2]*o.outShape[3]*o.outShape[4],$=o.outShape[3]*o.outShape[4],C=o.outShape[4];for(let k=0;k<o.batchSize;++k){const I=k*w,T=k*r[0];for(let E=0;E<o.inChannels;++E)for(let _=0;_<o.outDepth;++_){const O=_*i-m;let F=O;for(;F<0;)F+=u;const M=Math.min(o.inDepth,f+O),L=I+_*S;for(let N=0;N<o.outHeight;++N){const D=N*a-g;let U=D;for(;U<0;)U+=c;const B=Math.min(o.inHeight,h+D),W=L+N*$;for(let V=0;V<o.outWidth;++V){const ee=V*l-y;let ne=ee;for(;ne<0;)ne+=d;const se=Math.min(o.inWidth,p+ee),de=W+V*C;let ue=v,Y=0,ae=0;for(let Z=F;Z<M;Z+=u){const be=T+Z*r[1];for(let me=U;me<B;me+=c){const xe=be+me*r[2];for(let fe=ne;fe<se;fe+=d){const Oe=xe+fe*r[3],ye=t[Oe+E];if(s==="max"&&ye>ue?ue=ye:s==="avg"&&(Y+=ye,ae++),isNaN(ue))break}if(isNaN(ue))break}if(isNaN(ue))break}const oe=de+E;x[oe]=s==="avg"?Y/Math.max(ae,1):ue}}}}return b}function EPe(t,e){const n=Ue(e.outShape,"int32"),r=e.strideDepth,o=e.strideHeight,s=e.strideWidth,i=e.dilationDepth,a=e.dilationHeight,l=e.dilationWidth,u=e.effectiveFilterDepth,c=e.effectiveFilterHeight,d=e.effectiveFilterWidth,f=e.padInfo.front,h=e.padInfo.top,p=e.padInfo.left;for(let m=0;m<e.batchSize;++m)for(let g=0;g<e.inChannels;++g)for(let y=0;y<e.outDepth;++y){const v=y*r-f;let b=v;for(;b<0;)b+=i;const x=Math.min(e.inDepth,u+v);for(let w=0;w<e.outHeight;++w){const S=w*o-h;let $=S;for(;$<0;)$+=a;const C=Math.min(e.inHeight,c+S);for(let k=0;k<e.outWidth;++k){const I=k*s-p;let T=I;for(;T<0;)T+=l;const E=Math.min(e.inWidth,d+I);let _=Number.NEGATIVE_INFINITY,O=-1;for(let F=b;F<x;F+=i){const M=F-v;for(let L=$;L<C;L+=a){const N=L-S;for(let D=T;D<E;D+=l){const U=D-I,B=t.get(m,F,L,D,g);B>=_&&(_=B,O=M*c*d+N*c+U)}}}n.set(O,m,y,w,k,g)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e;Ie(o,"avgPool");const{filterSize:s,strides:i,pad:a,dimRoundingMode:l}=r,u=1;P(Kn(i,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const c=jo(o.shape,s,i,u,a,l);let d;if(c.filterWidth===1&&c.filterHeight===1&&at(c.inShape,c.outShape))d=Js({inputs:{x:o},backend:n});else{const f=n.data.get(o.dataId).values,h=Ee(o.shape),p=cN(f,o.shape,o.dtype,h,c,"avg");d=n.makeTensorInfo(c.outShape,o.dtype,p.values)}return d}const APe={kernelName:jx,backendName:"cpu",kernelFunc:NPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{filterSize:s,strides:i,pad:a,dimRoundingMode:l,dataFormat:u}=r;Ie(o,"avgPool3d");const c=ji(o.shape,s,i,1,a,l,u),d=n.data.get(o.dataId).values,f=i6(d,o.shape,o.dtype,Ee(o.shape),c,"avg");return n.makeTensorInfo(f.shape,"float32",f.values)}const _Pe={kernelName:Wx,backendName:"cpu",kernelFunc:OPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RPe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:s}=e,{filterSize:i,strides:a,pad:l,dimRoundingMode:u}=r;Ie([o,s],"avgPool3DGrad");const c=ji(s.shape,i,a,1,l,u),d=c.strideDepth,f=c.strideHeight,h=c.strideWidth,p=c.filterDepth,m=c.filterHeight,g=c.filterWidth,y=c.dilationDepth,v=c.dilationHeight,b=c.dilationWidth,x=c.effectiveFilterDepth,w=c.effectiveFilterHeight,S=c.effectiveFilterWidth,$=x-1-c.padInfo.front,C=S-1-c.padInfo.left,k=w-1-c.padInfo.top,I=Ue(s.shape,"float32"),T=1/(p*m*g),E=n.bufferSync(o);for(let _=0;_<c.batchSize;++_)for(let O=0;O<c.inChannels;++O)for(let F=0;F<c.inDepth;++F)for(let M=0;M<c.inHeight;++M)for(let L=0;L<c.inWidth;++L){const N=F-$,D=M-k,U=L-C;let B=0;for(let W=0;W<x;W+=y){const V=(N+W)/d;if(!(V<0||V>=c.outDepth||Math.floor(V)!==V))for(let ee=0;ee<w;ee+=v){const ne=(D+ee)/f;if(!(ne<0||ne>=c.outHeight||Math.floor(ne)!==ne))for(let se=0;se<S;se+=b){const de=(U+se)/h;if(de<0||de>=c.outWidth||Math.floor(de)!==de)continue;const ue=E.get(_,V,ne,de,O);B+=ue}}}I.set(B*T,_,F,M,L,O)}return n.makeTensorInfo(I.shape,I.dtype,I.values)}const PPe={kernelName:jT,backendName:"cpu",kernelFunc:RPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DPe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:s}=e,i=s;Ie([o,s],"avgPoolGrad");const{filterSize:a,strides:l,pad:u}=r,c=jo(i.shape,a,l,1,u),d=c.strideHeight,f=c.strideWidth,h=c.filterHeight,p=c.filterWidth,m=c.dilationHeight,g=c.dilationWidth,y=c.effectiveFilterHeight,v=c.effectiveFilterWidth,b=v-1-c.padInfo.left,x=y-1-c.padInfo.top,w=Ue(i.shape,"float32"),S=1/(h*p),$=n.data.get(o.dataId).values,C=Ue(o.shape,"float32",$);for(let k=0;k<c.batchSize;++k)for(let I=0;I<c.inChannels;++I)for(let T=0;T<c.inHeight;++T)for(let E=0;E<c.inWidth;++E){const _=T-x,O=E-b;let F=0;for(let M=0;M<y;M+=m){const L=(_+M)/d;if(!(L<0||L>=c.outHeight||Math.floor(L)!==L))for(let N=0;N<v;N+=g){const D=(O+N)/f;if(D<0||D>=c.outWidth||Math.floor(D)!==D)continue;const U=C.get(k,L,D,I);F+=U}}w.set(F*S,k,T,E,I)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const MPe={kernelName:zT,backendName:"cpu",kernelFunc:DPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,scale:s,offset:i,mean:a,variance:l}=e;P(a.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),P(i==null||a.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),P(s==null||a.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),Ie([o,a,l,s,i],"batchNorm");let{varianceEpsilon:u}=r;u==null&&(u=.001);const c=n.data.get(o.dataId).values,d=n.data.get(a.dataId).values,f=n.data.get(l.dataId).values,h=s?n.data.get(s.dataId).values:new Float32Array([1]),p=i?n.data.get(i.dataId).values:new Float32Array([0]),m=new Float32Array(c.length),g=p.length,y=h.length,v=f.length,b=d.length;let x=0,w=0,S=0,$=0;for(let C=0;C<c.length;++C)m[C]=p[x++]+(c[C]-d[w++])*h[S++]/Math.sqrt(f[$++]+u),x>=g&&(x=0),w>=b&&(w=0),S>=y&&(S=0),$>=v&&($=0);return n.makeTensorInfo(o.shape,o.dtype,m)}const LPe={kernelName:tb,backendName:"cpu",kernelFunc:FPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{blockShape:s,crops:i}=r;Ie([o],"batchToSpaceND");const a=s.reduce((y,v)=>y*v),l=Mm(o.shape,s,a),u=Fm(l.length,s.length),c=Lm(o.shape,s,a),d=x2(i,s.length),f=b2(c,i,s.length),h=Ct({inputs:{x:o},backend:n,attrs:{shape:l}}),p=Sr({inputs:{x:h},backend:n,attrs:{perm:u}}),m=Ct({inputs:{x:p},backend:n,attrs:{shape:c}}),g=cu({inputs:{x:m},backend:n,attrs:{begin:d,size:f}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}const zPe={kernelName:Ux,backendName:"cpu",kernelFunc:BPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,weights:s}=e,{size:i}=r,a=n.data.get(o.dataId).values,l=n.data.get(s.dataId).values,u=sN(a,l,s.dtype,s.shape,i);return n.makeTensorInfo([i],s.dtype,u)}const WPe={kernelName:WT,backendName:"cpu",kernelFunc:jPe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VPe(t){const{inputs:e,backend:n}=t,{s0:r,s1:o}=e,s=n.data.get(r.dataId).values,i=n.data.get(o.dataId).values,a=Me(Array.from(s),Array.from(i));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const UPe={kernelName:OW,backendName:"cpu",kernelFunc:VPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GPe=pt(Gp,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),HPe={kernelName:Gp,backendName:"cpu",kernelFunc:GPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KPe=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(re(e.shape)),o=n.data.get(e.dataId),s=o.complexTensorInfos.real,i=o.complexTensorInfos.imag,a=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values;for(let u=0;u<a.length;u++){const c=a[u],d=l[u];r[u]=Math.hypot(c,d)}return n.makeOutput(r,e.shape,"float32")},qPe={kernelName:Gx,backendName:"cpu",kernelFunc:KPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vd(t){const{inputs:e,backend:n}=t,{input:r}=e,o=n.data.get(r.dataId).complexTensorInfos.imag,s=n.data.get(o.dataId).values;return n.makeTensorInfo(o.shape,o.dtype,s)}const XPe={kernelName:iE,backendName:"cpu",kernelFunc:vd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xd(t){const{inputs:e,backend:n,attrs:r}=t,{axis:o}=r,s=Ge(o,e[0].shape)[0],i=e.map(m=>m.shape);g2(i,s);let a=Ws(e.map(m=>m.shape),s);if(re(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(m=>re(m.shape)>0);if(l.length===1)return Js({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){const m=l.map(x=>uu({inputs:{input:x},backend:n})),g=l.map(x=>vd({inputs:{input:x},backend:n})),y=xd({inputs:m,backend:n,attrs:{axis:s}}),v=xd({inputs:g,backend:n,attrs:{axis:s}}),b=Nr({inputs:{real:y,imag:v},backend:n});return m.forEach(x=>n.disposeIntermediateTensorInfo(x)),g.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),b}const u=l.map(m=>{const y=[-1,re(m.shape.slice(s))];return Ct({inputs:{x:m},backend:n,attrs:{shape:y}})}),c=u.map(m=>({vals:n.data.get(m.dataId).values,shape:m.shape}));a=Ws(u.map(m=>m.shape),1);const d=u[0].shape[0]===1,f=d5(c,a,e[0].dtype,d),h=Ws(l.map(m=>m.shape),s),p=n.makeTensorInfo(h,e[0].dtype,f);return u.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const YPe={kernelName:Hx,backendName:"cpu",kernelFunc:xd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a6(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s}=e,{strides:i,pad:a,dataFormat:l,dilations:u,dimRoundingMode:c}=r;Ie([o,s],"conv2d");const d=Wi(l),f=Fn(o.shape,s.shape,i,u,a,c,!1,d),h=f.filterHeight,p=f.filterWidth,m=f.dilationHeight,g=f.dilationWidth,y=f.padInfo.left,v=f.padInfo.top,b=f.dataFormat==="channelsLast",x=new Dn(f.outShape,o.dtype),w=Ee(o.shape),S=Ee(s.shape),$=w[0],C=b?w[1]:w[2],k=b?w[2]:1,I=b?1:w[1],T=x.strides[0],E=b?x.strides[1]:x.strides[2],_=b?x.strides[2]:1,O=b?1:x.strides[1],F=n.data.get(o.dataId).values,M=n.data.get(s.dataId).values,L=x.values;for(let N=0;N<f.batchSize;++N){const D=N*$,U=N*T;for(let B=0;B<f.outHeight;++B){const W=U+B*E,V=B*f.strideHeight-v;for(let ee=0;ee<h;++ee){const ne=V+ee*m;if(ne<0||ne>=f.inHeight)continue;const se=ee*S[0],de=D+ne*C;for(let ue=0;ue<f.outWidth;++ue){const Y=W+ue*_,ae=ue*f.strideWidth-y;for(let oe=0;oe<p;++oe){const Z=ae+oe*g;if(Z<0||Z>=f.inWidth)continue;const be=se+oe*S[1],me=de+Z*k;let xe=be;for(let fe=0;fe<f.inChannels;++fe){const Oe=F[me+fe*I];for(let ye=0;ye<f.outChannels;++ye)L[Y+ye*O]+=Oe*M[xe+ye];xe+=f.outChannels}}}}}}return n.makeTensorInfo(x.shape,x.dtype,L)}const QPe={kernelName:Kx,backendName:"cpu",kernelFunc:a6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,dy:s}=e,{strides:i,pad:a,dataFormat:l,dimRoundingMode:u,filterShape:c}=r;Ie([o,s],"conv2dBackpropFilter");const d=Wi(l),f=Fn(o.shape,c,i,1,a,u,!1,d),{strideHeight:h,strideWidth:p,filterHeight:m,filterWidth:g}=f,y=f.dataFormat==="channelsLast",v=new Dn(f.filterShape,"float32"),b=f.padInfo.left,x=f.padInfo.top,w=n.data.get(o.dataId).values,S=n.data.get(s.dataId).values,$=new Dn(o.shape,o.dtype,w),C=new Dn(s.shape,s.dtype,S);for(let k=0;k<m;++k){const I=Math.max(0,Math.ceil((x-k)/h)),T=Math.min(f.outHeight,(f.inHeight+x-k)/h);for(let E=0;E<g;++E){const _=Math.max(0,Math.ceil((b-E)/p)),O=Math.min(f.outWidth,(f.inWidth+b-E)/p);for(let F=0;F<f.inChannels;++F)for(let M=0;M<f.outChannels;++M){let L=0;for(let N=0;N<f.batchSize;++N)for(let D=I;D<T;++D){const U=k+D*h-x;for(let B=_;B<O;++B){const W=E+B*p-b;y?L+=$.get(N,U,W,F)*C.get(N,D,B,M):L+=$.get(N,F,U,W)*C.get(N,M,D,B)}}v.set(L,k,E,F,M)}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const JPe={kernelName:GT,backendName:"cpu",kernelFunc:ZPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eDe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,filter:s}=e,{inputShape:i,strides:a,pad:l,dataFormat:u,dimRoundingMode:c}=r;Ie([o,s],"conv2dBackpropInput");const d=Ee(s.shape),f=Ee(o.shape);let h=Wi(u);const p=Fn(i,s.shape,a,1,l,c,!1,h),m=new Dn(p.inShape,"float32"),g=m.values,y=n.data.get(o.dataId).values,v=n.data.get(s.dataId).values,[b,x,w]=d,{batchSize:S,filterHeight:$,filterWidth:C,inChannels:k,inHeight:I,inWidth:T,outChannels:E,outHeight:_,outWidth:O,strideHeight:F,strideWidth:M}=p;h=p.dataFormat;const L=$-1-p.padInfo.top,N=C-1-p.padInfo.left,D=h==="channelsLast",U=m.strides[0],B=D?m.strides[1]:m.strides[2],W=D?m.strides[2]:1,V=D?1:m.strides[1],ee=f[0],ne=D?f[1]:f[2],se=D?f[2]:1,de=D?1:f[1];for(let ue=0;ue<S;++ue)for(let Y=0;Y<k;++Y)for(let ae=0;ae<I;++ae){const oe=ae-L,Z=Math.max(0,Math.ceil(oe/F)),be=Math.min(_,($+oe)/F);for(let me=0;me<T;++me){const xe=me-N,fe=Math.max(0,Math.ceil(xe/M)),Oe=Math.min(O,(C+xe)/M);let ye=0;for(let Fe=Z;Fe<be;++Fe){const _t=Fe*F-oe;for(let ct=fe;ct<Oe;++ct){const an=ct*M-xe,nt=ee*ue+ne*Fe+se*ct,Ht=b*($-1-_t)+x*(C-1-an)+w*Y;for(let lt=0;lt<E;++lt){const dt=y[nt+de*lt],ln=v[Ht+lt];ye+=dt*ln}}}const Ne=U*ue+B*ae+W*me+V*Y;g[Ne]=ye}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const tDe={kernelName:qx,backendName:"cpu",kernelFunc:eDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s}=e,{strides:i,pad:a,dilations:l}=r;Ie([o,s],"conv3d");const u=Qa(o.shape,s.shape,i,l,a),{filterDepth:c,filterHeight:d,filterWidth:f,dilationDepth:h,dilationHeight:p,dilationWidth:m,padInfo:g}=u,y=g.front,v=g.left,b=g.top,x=new Dn(u.outShape,o.dtype),w=n.data.get(o.dataId).values,S=n.data.get(s.dataId).values,$=x.values,C=Ee(o.shape),k=Ee(s.shape);for(let I=0;I<u.batchSize;++I){const T=I*C[0],E=I*x.strides[0];for(let _=0;_<u.outDepth;++_){const O=E+_*x.strides[1],F=_*u.strideDepth-y;for(let M=0;M<c;++M){const L=F+M*h;if(L<0||L>=u.inDepth)continue;const N=M*k[0],D=T+L*C[1];for(let U=0;U<u.outHeight;++U){const B=O+U*x.strides[2],W=U*u.strideHeight-b;for(let V=0;V<d;++V){const ee=W+V*p;if(ee<0||ee>=u.inHeight)continue;const ne=N+V*k[1],se=D+ee*C[2];for(let de=0;de<u.outWidth;++de){const ue=B+de*u.outChannels,Y=de*u.strideWidth-v;for(let ae=0;ae<f;++ae){const oe=Y+ae*m;if(oe<0||oe>=u.inWidth)continue;const Z=ne+ae*k[2],be=se+oe*u.inChannels;let me=Z;for(let xe=0;xe<u.inChannels;++xe){const fe=w[be+xe];for(let Oe=0;Oe<u.outChannels;++Oe)$[ue+Oe]+=fe*S[me+Oe];me+=u.outChannels}}}}}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const rDe={kernelName:Xx,backendName:"cpu",kernelFunc:nDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,dy:s}=e,{strides:i,pad:a,filterShape:l}=r;Ie([o,s],"conv3dBackpropFilterV2");const u=Ee(o.shape),c=Ee(s.shape),d=Qa(o.shape,l,i,1,a),f=d.strideDepth,h=d.strideHeight,p=d.strideWidth,m=d.filterDepth,g=d.filterHeight,y=d.filterWidth,v=new Dn(d.filterShape,"float32"),b=v.values,[x,w,S,$]=v.strides,C=n.data.get(s.dataId).values,[k,I,T,E]=c,_=n.data.get(o.dataId).values,[O,F,M,L]=u,N=d.padInfo.front,D=d.padInfo.left,U=d.padInfo.top;for(let B=0;B<m;++B){const W=Math.max(0,Math.ceil((N-B)/f)),V=Math.min(d.outDepth,(d.inDepth+N-B)/f),ee=B*x;for(let ne=0;ne<g;++ne){const se=Math.max(0,Math.ceil((U-ne)/h)),de=Math.min(d.outHeight,(d.inHeight+U-ne)/h),ue=ne*w+ee;for(let Y=0;Y<y;++Y){const ae=Math.max(0,Math.ceil((D-Y)/p)),oe=Math.min(d.outWidth,(d.inWidth+D-Y)/p),Z=Y*S+ue;for(let be=0;be<d.inChannels;++be){const me=be*$+Z;for(let xe=0;xe<d.outChannels;++xe){let fe=0;for(let Oe=0;Oe<d.batchSize;++Oe){const ye=Oe*O,Ne=Oe*k;for(let Fe=W;Fe<V;++Fe){const ct=(B+Fe*f-N)*F+ye,an=Fe*I+Ne;for(let nt=se;nt<de;++nt){const lt=(ne+nt*h-U)*M+ct,dt=nt*T+an;for(let ln=ae;ln<oe;++ln){const oi=(Y+ln*p-D)*L+lt,co=ln*E+dt;fe+=_[oi+be]*C[co+xe]}}}}b[me+xe]=fe}}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const sDe={kernelName:HT,backendName:"cpu",kernelFunc:oDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iDe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,filter:s}=e,{pad:i,strides:a,inputShape:l}=r;Ie([o],"conv3dBackpropInputV2");const u=Ee(o.shape),c=Ee(s.shape),d=Qa(l,s.shape,a,1,i),f=new Dn(d.inShape,"float32"),h=f.values,[p,m,g,y]=f.strides,v=n.data.get(o.dataId).values,[b,x,w,S]=u,$=n.data.get(s.dataId).values,[C,k,I,T]=c,{batchSize:E,filterDepth:_,filterHeight:O,filterWidth:F,inChannels:M,inDepth:L,inHeight:N,inWidth:D,outChannels:U,outDepth:B,outHeight:W,outWidth:V,strideDepth:ee,strideHeight:ne,strideWidth:se}=d,de=_-1-d.padInfo.front,ue=O-1-d.padInfo.top,Y=F-1-d.padInfo.left;for(let ae=0;ae<E;++ae)for(let oe=0;oe<M;++oe)for(let Z=0;Z<L;++Z){const be=Z-de,me=Math.max(0,Math.ceil(be/ee)),xe=Math.min(B,(_+be)/ee);for(let fe=0;fe<N;++fe){const Oe=fe-ue,ye=Math.max(0,Math.ceil(Oe/ne)),Ne=Math.min(W,(O+Oe)/ne);for(let Fe=0;Fe<D;++Fe){const _t=Fe-Y,ct=Math.max(0,Math.ceil(_t/se)),an=Math.min(V,(F+_t)/se);let nt=0;for(let Ht=me;Ht<xe;++Ht){const lt=Ht*ee-be;for(let dt=ye;dt<Ne;++dt){const ln=dt*ne-Oe;for(let Xn=ct;Xn<an;++Xn){const oi=Xn*se-_t,co=b*ae+x*Ht+w*dt+S*Xn,dr=C*(_-1-lt)+k*(O-1-ln)+I*(F-1-oi)+T*oe;for(let Ur=0;Ur<U;++Ur){const Nu=v[co+Ur],rf=$[dr+Ur];nt+=Nu*rf}}}}h[p*ae+m*Z+g*fe+y*Fe+oe]=nt}}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}const aDe={kernelName:KT,backendName:"cpu",kernelFunc:iDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lDe=pt(Hp,t=>Math.cos(t)),uDe={kernelName:Hp,backendName:"cpu",kernelFunc:lDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cDe=pt(Kp,t=>Math.cosh(t)),dDe={kernelName:Kp,backendName:"cpu",kernelFunc:cDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fDe(t){const{inputs:e,backend:n,attrs:r}=t,{image:o,boxes:s,boxInd:i}=e,{cropSize:a,method:l,extrapolationValue:u}=r,[c,d,f,h]=o.shape,p=s.shape[0],[m,g]=a,y=Ue([p,m,g,h],"float32"),v=n.data.get(s.dataId).values,b=n.data.get(i.dataId).values,x=n.data.get(o.dataId).values,w=Ee(o.shape),S=Ee(y.shape);for(let $=0;$<p;$++){const C=$*4,k=v[C],I=v[C+1],T=v[C+2],E=v[C+3],_=b[$];if(_>=c)continue;const O=m>1?(T-k)*(d-1)/(m-1):0,F=g>1?(E-I)*(f-1)/(g-1):0;for(let M=0;M<m;M++){const L=m>1?k*(d-1)+M*O:.5*(k+T)*(d-1);if(L<0||L>d-1){for(let N=0;N<g;N++)for(let D=0;D<h;D++){const U=D+N*S[2]+M*S[1]+$*S[0];y.values[U]=u}continue}if(l==="bilinear"){const N=Math.floor(L),D=Math.ceil(L),U=L-N;for(let B=0;B<g;B++){const W=g>1?I*(f-1)+B*F:.5*(I+E)*(f-1);if(W<0||W>f-1){for(let se=0;se<h;se++){const de=se+B*S[2]+M*S[1]+$*S[0];y.values[de]=u}continue}const V=Math.floor(W),ee=Math.ceil(W),ne=W-V;for(let se=0;se<h;se++){let de=se+V*w[2]+N*w[1]+_*w[0];const ue=x[de];de=se+ee*w[2]+N*w[1]+_*w[0];const Y=x[de];de=se+V*w[2]+D*w[1]+_*w[0];const ae=x[de];de=se+ee*w[2]+D*w[1]+_*w[0];const oe=x[de],Z=ue+(Y-ue)*ne,be=ae+(oe-ae)*ne;de=se+B*S[2]+M*S[1]+$*S[0],y.values[de]=Z+(be-Z)*U}}}else for(let N=0;N<g;++N){const D=g>1?I*(f-1)+N*F:.5*(I+E)*(f-1);if(D<0||D>f-1){for(let W=0;W<h;W++){const V=W+N*S[2]+M*S[1]+$*S[0];y.values[V]=u}continue}const U=Math.round(D),B=Math.round(L);for(let W=0;W<h;W++){const V=W+U*w[2]+B*w[1]+_*w[0],ee=W+N*S[2]+M*S[1]+$*S[0];y.values[ee]=x[V]}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const hDe={kernelName:XT,backendName:"cpu",kernelFunc:fDe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,exclusive:i,reverse:a}=r;Ie(o,"cumprod");const l=Gt([s],o.shape.length);let u=o;l!=null&&(u=Sr({inputs:{x:o},backend:n,attrs:{perm:l}}));const c=rn(1,o.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const d=Br(u.dtype,"int32"),f=PT(re(u.shape),d),h=n.data.get(u.dataId).values,p=u.shape[u.shape.length-1],m=a?(y,v)=>y+p-v-1:(y,v)=>y+v;for(let y=0;y<h.length;y+=p)for(let v=0;v<p;v++){const b=m(y,v);if(v===0)f[b]=i?1:h[b];else{const x=m(y,v-1);f[b]=i?h[x]*f[x]:h[b]*f[x]}}const g=n.makeTensorInfo(u.shape,d,f);if(l!=null){const y=Za(l),v=Sr({inputs:{x:g},backend:n,attrs:{perm:y}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(u),v}return g}const mDe={kernelName:qT,backendName:"cpu",kernelFunc:pDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,exclusive:i,reverse:a}=r;Ie(o,"cumsum");const l=Gt([s],o.shape.length);let u=o;l!=null&&(u=Sr({inputs:{x:o},backend:n,attrs:{perm:l}}));const c=rn(1,o.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const d=Br(u.dtype,"int32"),f=Hn(re(u.shape),d),h=n.data.get(u.dataId).values,p=u.shape[u.shape.length-1],m=a?(y,v)=>y+p-v-1:(y,v)=>y+v;for(let y=0;y<h.length;y+=p)for(let v=0;v<p;v++){const b=m(y,v);if(v===0)f[b]=i?0:h[b];else{const x=m(y,v-1);f[b]=i?h[x]+f[x]:h[b]+f[x]}}const g=n.makeTensorInfo(u.shape,d,f);if(l!=null){const y=Za(l),v=Sr({inputs:{x:g},backend:n,attrs:{perm:y}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(u),v}return g}const yDe={kernelName:Yx,backendName:"cpu",kernelFunc:gDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,weights:s}=e,{size:i,binaryOutput:a}=r;if(o.shape.length===1){const l=n.data.get(o.dataId).values,u=n.data.get(s.dataId).values,c=sN(l,u,s.dtype,s.shape,i);return n.makeTensorInfo([i],s.dtype,c)}else if(o.shape.length===2){const l=n.bufferSync(o),u=n.bufferSync(s),c=l5(l,u,i,a);return n.makeTensorInfo(c.shape,s.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${o.shape.length}.`)}const xDe={kernelName:YT,backendName:"cpu",kernelFunc:vDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{blockSize:s,dataFormat:i}=r;P(i==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${i}`);const a=o.shape[0],l=o.shape[1],u=o.shape[2],c=o.shape[3],d=l*s,f=u*s,h=c/(s*s),p=n.data.get(o.dataId).values,m=new Float32Array(a*d*f*h);let g=0;for(let y=0;y<a;++y)for(let v=0;v<d;++v){const b=Math.floor(v/s),x=v%s;for(let w=0;w<f;++w){const S=Math.floor(w/s),$=w%s,C=(x*s+$)*h;for(let k=0;k<h;++k){const T=k+C+c*(S+u*(b+l*y));m[g++]=p[T]}}}return n.makeTensorInfo([a,d,f,h],o.dtype,m)}const wDe={kernelName:QT,backendName:"cpu",kernelFunc:bDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l6(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s}=e,{strides:i,pad:a,dilations:l,dimRoundingMode:u}=r;Ie([o,s],"depthwiseConv2DNative");const c=Ee(o.shape),d=Ee(s.shape);let f=l;f==null&&(f=[1,1]),P(Kn(i,f),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${f}'`);const h=Fn(o.shape,s.shape,i,f,a,u,!0),{filterHeight:p,filterWidth:m,dilationHeight:g,dilationWidth:y,padInfo:v}=h,b=v.left,x=v.top,w=h.outChannels/h.inChannels,S=new Dn(h.outShape,o.dtype),$=n.data.get(o.dataId).values,C=n.data.get(s.dataId).values,k=S.values;for(let I=0;I<h.batchSize;++I){const T=I*c[0],E=I*S.strides[0];for(let _=0;_<h.outHeight;++_){const O=E+_*S.strides[1],F=_*h.strideHeight-x;for(let M=0;M<p;++M){const L=F+M*g;if(L<0||L>=h.inHeight)continue;const N=M*d[0],D=T+L*c[1];for(let U=0;U<h.outWidth;++U){const B=O+U*S.strides[2],W=U*h.strideWidth-b;for(let V=0;V<m;++V){const ee=W+V*y;if(ee<0||ee>=h.inWidth)continue;const ne=N+V*d[1],se=D+ee*h.inChannels;let de=B,ue=ne;for(let Y=0;Y<h.inChannels;++Y){const ae=$[se+Y];for(let oe=0;oe<w;++oe)k[de+oe]+=ae*C[ue+oe];de+=w,ue+=w}}}}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const SDe={kernelName:Qx,backendName:"cpu",kernelFunc:l6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,dy:s}=e,{strides:i,dilations:a,pad:l,dimRoundingMode:u,filterShape:c}=r;Ie([o,s],"depthwiseConv2dNativeBackpropFilter");const d=Fn(o.shape,c,i,a,l,u,!0),{strideHeight:f,strideWidth:h,filterHeight:p,filterWidth:m}=d,g=new Dn(d.filterShape,"float32"),y=d.padInfo.left,v=d.padInfo.top,b=d.outChannels/d.inChannels,x=n.data.get(o.dataId).values,w=new Dn(o.shape,o.dtype,x),S=n.data.get(s.dataId).values,$=new Dn(s.shape,s.dtype,S);for(let C=0;C<p;++C){const k=Math.max(0,Math.ceil((v-C)/f)),I=Math.min(d.outHeight,(d.inHeight+v-C)/f);for(let T=0;T<m;++T){const E=Math.max(0,Math.ceil((y-T)/h)),_=Math.min(d.outWidth,(d.inWidth+y-T)/h);for(let O=0;O<d.outChannels;++O){const F=Math.trunc(O/b),M=O%b;let L=0;for(let N=0;N<d.batchSize;++N)for(let D=k;D<I;++D){const U=C+D*f-v;for(let B=E;B<_;++B){const W=T+B*h-y;L+=w.get(N,U,W,F)*$.get(N,D,B,O)}}g.set(L,C,T,F,M)}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const $De={kernelName:ZT,backendName:"cpu",kernelFunc:CDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kDe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,filter:s}=e,{strides:i,dilations:a,pad:l,dimRoundingMode:u,inputShape:c}=r;Ie([o,s],"depthwiseConv2DNativeBackpropInput");const d=Ee(o.shape),f=Ee(s.shape),h=Fn(c,s.shape,i,a,l,u,!0),p=new Dn(h.inShape,"float32"),m=p.values,[g,y,v]=p.strides,b=n.data.get(o.dataId).values,[x,w,S]=d,$=n.data.get(s.dataId).values,[C,k,I]=f,{batchSize:T,filterHeight:E,filterWidth:_,inChannels:O,inHeight:F,inWidth:M,outChannels:L,outHeight:N,outWidth:D,strideHeight:U,strideWidth:B}=h,W=E-1-h.padInfo.top,V=_-1-h.padInfo.left,ee=L/O;for(let ne=0;ne<T;++ne)for(let se=0;se<O;++se)for(let de=0;de<F;++de){const ue=de-W,Y=Math.max(0,Math.ceil(ue/U)),ae=Math.min(N,(E+ue)/U);for(let oe=0;oe<M;++oe){const Z=oe-V,be=Math.max(0,Math.ceil(Z/B)),me=Math.min(D,(_+Z)/B);let xe=0;for(let fe=Y;fe<ae;++fe){const Oe=fe*U-ue;for(let ye=be;ye<me;++ye){const Ne=ye*B-Z,Fe=x*ne+w*fe+S*ye,_t=C*(E-1-Oe)+k*(_-1-Ne)+I*se;for(let ct=0;ct<ee;++ct){const an=se*ee+ct,nt=b[Fe+an],Ht=$[_t+ct];xe+=nt*Ht}}}m[g*ne+y*de+v*oe+se]=xe}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const IDe={kernelName:JT,backendName:"cpu",kernelFunc:kDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TDe(t){const{inputs:e,backend:n}=t,{x:r}=e,o=re(r.shape),s=n.data.get(r.dataId).values,i=Ue([o,o],r.dtype),a=i.values;for(let u=0;u<s.length;u++)a[u*o+u]=s[u];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,i.dtype,i.values)}const EDe={kernelName:_W,backendName:"cpu",kernelFunc:TDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NDe={kernelName:Zx,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:o}=t,{strides:s,pad:i,dilations:a}=n,l=e,u=l.data.get(r.dataId).values,c=r.shape.length,d=l.data.get(o.dataId).values,f=o.shape.length,{batchSize:h,inHeight:p,inWidth:m,inChannels:g,outHeight:y,outWidth:v,padInfo:b,strideHeight:x,strideWidth:w,filterHeight:S,filterWidth:$,dilationHeight:C,dilationWidth:k,outShape:I}=Om(r.shape,o.shape,s,i,"NHWC",a),T=re(I),E=I.length,_=en(r.dtype,T);for(let F=0;F<h;++F)for(let M=0;M<y;++M){const L=M*x-b.top;for(let N=0;N<v;++N){const D=N*w-b.left;for(let U=0;U<g;++U){let B=Number.MIN_SAFE_INTEGER;for(let V=0;V<S;++V){const ee=L+V*C;if(ee>=0&&ee<p)for(let ne=0;ne<$;++ne){const se=D+ne*k;if(se>=0&&se<m){const de=zs([F,ee,se,U],c,Ee(r.shape)),ue=zs([V,ne,U],f,Ee(o.shape)),Y=u[de]+d[ue];Y>B&&(B=Y)}}}const W=zs([F,M,N,U],E,Ee(I));_[W]=B}}}return{dataId:l.write(vu(_,r.dtype),I,r.dtype),shape:I,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ADe={kernelName:R$,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:o,dy:s}=t,{strides:i,pad:a,dilations:l}=n,u=e,c=as(r.shape,u.data.get(r.dataId).values),d=as(o.shape,u.data.get(o.dataId).values),{batchSize:f,inHeight:h,inWidth:p,inChannels:m,outHeight:g,outWidth:y,padInfo:v,strideHeight:b,strideWidth:x,filterHeight:w,filterWidth:S,dilationHeight:$,dilationWidth:C,outShape:k}=Om(r.shape,o.shape,i,a,"NHWC",l);P(s.rank===k.length,()=>`Error in ${R$}, dy must have the same rank as output ${k.length}, but got ${s.rank}`);const I=as(k,u.data.get(s.dataId).values),T=EW(o.shape,o.dtype);for(let _=0;_<f;++_)for(let O=0;O<g;++O){const F=O*b-v.top;for(let M=0;M<y;++M){const L=M*x-v.left;for(let N=0;N<m;++N){let D=Number.MIN_SAFE_INTEGER,U=0,B=0;for(let W=0;W<w;++W){const V=F+W*$;if(V>=0&&V<h)for(let ee=0;ee<S;++ee){const ne=L+ee*C;if(ne>=0&&ne<p){const se=c[_][V][ne][N]+d[W][ee][N];se>D&&(D=se,U=W,B=ee)}}}T[U][B][N]+=I[_][O][M][N]}}}return{dataId:u.write(vu(T,r.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ODe={kernelName:_$,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:o,dy:s}=t,{strides:i,pad:a,dilations:l}=n,u=e,c=as(r.shape,u.data.get(r.dataId).values),d=as(o.shape,u.data.get(o.dataId).values),{batchSize:f,inHeight:h,inWidth:p,inChannels:m,outHeight:g,outWidth:y,padInfo:v,strideHeight:b,strideWidth:x,filterHeight:w,filterWidth:S,dilationHeight:$,dilationWidth:C,outShape:k}=Om(r.shape,o.shape,i,a,"NHWC",l);P(s.rank===k.length,()=>`Error in ${_$}, dy must have the same rank as output ${k.length}, but got ${s.rank}`);const I=as(k,u.data.get(s.dataId).values),T=EW(r.shape,r.dtype);for(let _=0;_<f;++_)for(let O=0;O<g;++O){const F=O*b-v.top;for(let M=0;M<y;++M){const L=M*x-v.left;for(let N=0;N<m;++N){let D=Number.MIN_SAFE_INTEGER,U=F<0?0:F,B=L<0?0:L;for(let W=0;W<w;++W){const V=F+W*$;if(V>=0&&V<h)for(let ee=0;ee<S;++ee){const ne=L+ee*C;if(ne>=0&&ne<p){const se=c[_][V][ne][N]+d[W][ee][N];se>D&&(D=se,U=V,B=ne)}}}T[_][U][B][N]+=I[_][O][M][N]}}}return{dataId:u.write(vu(T,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _De(t){const{inputs:e,backend:n,attrs:r}=t,{image:o}=e,{canvas:s,options:i}=r,{contextOptions:a,imageOptions:l}=i||{},u=(l==null?void 0:l.alpha)||1,c=(a==null?void 0:a.contextType)||"2d";if(c!=="2d")throw new Error(`Context type ${a.contextType} is not supported by the CPU backend.`);const d=s.getContext(c,(a==null?void 0:a.contextAttributes)||{});if(d==null)throw new Error(`Could not get the context with ${c} type.`);const[f,h]=o.shape.slice(0,2),p=o.shape.length===2?1:o.shape[2],m=n.data.get(o.dataId).values,g=o.dtype==="float32"?255:1,y=new Uint8ClampedArray(h*f*4);for(let b=0;b<f*h;++b){const x=[0,0,0,255*u];for(let S=0;S<p;S++){const $=m[b*p+S];if(o.dtype==="float32"){if($<0||$>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${$}.`)}else if(o.dtype==="int32"&&($<0||$>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${$}.`);p===1?(x[0]=$*g,x[1]=$*g,x[2]=$*g):x[S]=$*g}const w=b*4;y[w+0]=Math.round(x[0]),y[w+1]=Math.round(x[1]),y[w+2]=Math.round(x[2]),y[w+3]=Math.round(x[3])}s.width=h,s.height=f;const v=new ImageData(y,h,f);return d.putImageData(v,0,0),o}const RDe={kernelName:lCe,backendName:"cpu",kernelFunc:_De};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Km(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r;Ie(o,"sum");let a;o.dtype==="bool"?a=za({inputs:{x:o},backend:n,attrs:{dtype:"int32"}}):a=Js({inputs:{x:o},backend:n});const l=a.shape.length,u=Ge(s,a.shape),c=Gt(u,l);let d=u,f=a;c!=null&&(f=Sr({inputs:{x:a},backend:n,attrs:{perm:c}}),d=rn(d.length,l)),Ln("sum",d,f.shape.length);const[h,p]=An(f.shape,d),m=Br(f.dtype,"int32");let g=i0(n,h,m);const y=re(p),v=n.data.get(g.dataId).values,b=n.data.get(f.dataId).values;for(let x=0;x<v.length;++x){const w=x*y;let S=0;for(let $=0;$<y;++$)S+=b[w+$];v[x]=S}if(i){const x=dn(g.shape,u),w=g;g=Ct({inputs:{x:g},backend:n,attrs:{shape:x}}),n.disposeIntermediateTensorInfo(w)}return n.disposeIntermediateTensorInfo(a),c!=null&&n.disposeIntermediateTensorInfo(f),g}const PDe={kernelName:Ob,backendName:"cpu",kernelFunc:Km};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DDe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:o}=r,s=e,{allDims:i,summedDims:a,idDims:l}=E2(o,s.length);A2(i.length,l,s);const{path:u,steps:c}=O2(a,l),d=c.length;let f=null,h=i.length;const p=[];for(let m=0;m<d;++m){for(const g of c[m]){const{permutationIndices:y,expandDims:v}=N2(h,l[g]);let b;_2(y)?b=s[g]:(b=Sr({inputs:{x:s[g]},backend:n,attrs:{perm:y}}),p.push(b));const x=b.shape.slice();for(let w=0;w<v.length;++w)x.splice(v[w],0,1);at(b.shape,x)||(b=Ct({inputs:{x:b},backend:n,attrs:{shape:x}}),p.push(b)),f===null?f=b:(f=l1({inputs:{a:b,b:f},backend:n}),p.push(f))}m<d-1&&(u[m]>=0&&(f=Km({inputs:{x:f},backend:n,attrs:{axis:u[m]-(i.length-h),keepDims:!1}}),p.push(f)),h--)}for(const m of p)m!==f&&n.disposeIntermediateTensorInfo(m);return f}const MDe={kernelName:eE,backendName:"cpu",kernelFunc:DDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FDe(t){const{inputs:e,backend:n}=t,{dy:r,y:o}=e;Ie([r,o],"eluGrad");const s=new Float32Array(re(o.shape)),i=n.data.get(o.dataId).values,a=n.data.get(r.dataId).values;for(let l=0;l<i.length;++l){const u=i[l];u>=0?s[l]=a[l]:s[l]=a[l]*(u+1)}return n.makeTensorInfo(o.shape,"float32",s)}const LDe={kernelName:tE,backendName:"cpu",kernelFunc:FDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BDe=w2,zDe=S2,jDe=C2,WDe=$2,VDe=k2,UDe=I2,GDe=pt(Yp,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+BDe*n);return e*(1-((((UDe*r+VDe)*r+WDe)*r+jDe)*r+zDe)*r*Math.exp(-n*n))}),HDe={kernelName:Yp,backendName:"cpu",kernelFunc:GDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u0(t){const{inputs:e,backend:n,attrs:r}=t,{input:o}=e,{dim:s}=r,i=o.shape.length,a=o.shape.slice();let l=s;return s<0&&(P(-(i+1)<=s,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),l=i+s+1),a.splice(l,0,1),Ct({inputs:{x:o},backend:n,attrs:{shape:a}})}const KDe={kernelName:eb,backendName:"cpu",kernelFunc:u0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qDe=sn((t,e)=>t/e),dN=wn(qp,qDe),ik={kernelName:qp,backendName:"cpu",kernelFunc:dN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u6(t,e,n){const r=t.shape,o=r[0],s=r[1],i=n.data.get(t.dataId),a=i.complexTensorInfos.real,l=i.complexTensorInfos.imag,u=[o,s],c=re(u),d=Gn("float32",c),f=Gn("float32",c);for(let g=0;g<o;g++){const y=cu({inputs:{x:a},backend:n,attrs:{begin:[g,0],size:[1,s]}}),v=cu({inputs:{x:l},backend:n,attrs:{begin:[g,0],size:[1,s]}}),b=Nr({inputs:{real:y,imag:v},backend:n}),{real:x,imag:w}=XDe(b,e,n),S=Pi(x,w);for(let $=0;$<s;$++){const C=T2(S,$);d[g*s+$]=C.real,f[g*s+$]=C.imag}n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(b)}const h=n.makeTensorInfo(u,"float32",d),p=n.makeTensorInfo(u,"float32",f),m=Nr({inputs:{real:h,imag:p},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),m}function XDe(t,e,n){const r=re(t.shape),o=n.data.get(t.dataId),s=n.data.get(o.complexTensorInfos.real.dataId).values,i=n.data.get(o.complexTensorInfos.imag.dataId).values;if(YDe(r)){const a=ak(s,i,r,e,n),l=[t.shape[0],t.shape[1]];if(e){const u=n.makeTensorInfo(l,"float32",a.real),c=n.makeTensorInfo(l,"float32",a.imag),d=n.makeTensorInfo([],"float32",Ya(r,"float32")),f=Js({inputs:{x:d},backend:n}),h=ik.kernelFunc({inputs:{a:u,b:d},backend:n}),p=ik.kernelFunc({inputs:{a:c,b:f},backend:n}),m=n.data.get(h.dataId).values,g=n.data.get(p.dataId).values;return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),{real:m,imag:g}}return a}else{const a=Pi(s,i),l=QDe(a,r,e);return kU(l)}}function YDe(t){return(t&t-1)===0}function ak(t,e,n,r,o){if(n===1)return{real:t,imag:e};const s=Pi(t,e),i=n/2,a=IU(s),l=a.real,u=a.imag,c=[l.length],d=o.makeTensorInfo(c,"float32",l),f=o.makeTensorInfo(c,"float32",u),h=Nr({inputs:{real:d,imag:f},backend:o}),p=TU(s),m=p.real,g=p.imag,y=[m.length],v=o.makeTensorInfo(y,"float32",m),b=o.makeTensorInfo(y,"float32",g),x=Nr({inputs:{real:v,imag:b},backend:o}),w=ak(l,u,i,r,o),S=w.real,$=w.imag,C=[S.length],k=o.makeTensorInfo(C,"float32",S),I=o.makeTensorInfo(C,"float32",$),T=Nr({inputs:{real:k,imag:I},backend:o}),E=ak(m,g,i,r,o),_=E.real,O=E.imag,F=[_.length],M=o.makeTensorInfo(F,"float32",_),L=o.makeTensorInfo(F,"float32",O),N=Nr({inputs:{real:M,imag:L},backend:o}),D=NU(n,r),U=[D.real.length],B=o.makeTensorInfo(U,"float32",D.real),W=o.makeTensorInfo(U,"float32",D.imag),V=Nr({inputs:{real:B,imag:W},backend:o}),ee=l1({inputs:{a:V,b:N},backend:o}),ne=yd({inputs:{a:T,b:ee},backend:o}),se=uN({inputs:{a:T,b:ee},backend:o}),de=uu({inputs:{input:ne},backend:o}),ue=uu({inputs:{input:se},backend:o}),Y=vd({inputs:{input:ne},backend:o}),ae=vd({inputs:{input:se},backend:o}),oe=xd({inputs:[de,ue],backend:o,attrs:{axis:0}}),Z=xd({inputs:[Y,ae],backend:o,attrs:{axis:0}}),be=o.data.get(oe.dataId).values,me=o.data.get(Z.dataId).values;return o.disposeIntermediateTensorInfo(d),o.disposeIntermediateTensorInfo(f),o.disposeIntermediateTensorInfo(h),o.disposeIntermediateTensorInfo(v),o.disposeIntermediateTensorInfo(b),o.disposeIntermediateTensorInfo(x),o.disposeIntermediateTensorInfo(k),o.disposeIntermediateTensorInfo(I),o.disposeIntermediateTensorInfo(T),o.disposeIntermediateTensorInfo(M),o.disposeIntermediateTensorInfo(L),o.disposeIntermediateTensorInfo(N),o.disposeIntermediateTensorInfo(B),o.disposeIntermediateTensorInfo(W),o.disposeIntermediateTensorInfo(V),o.disposeIntermediateTensorInfo(ee),o.disposeIntermediateTensorInfo(ne),o.disposeIntermediateTensorInfo(se),o.disposeIntermediateTensorInfo(de),o.disposeIntermediateTensorInfo(Y),o.disposeIntermediateTensorInfo(ue),o.disposeIntermediateTensorInfo(ae),o.disposeIntermediateTensorInfo(oe),o.disposeIntermediateTensorInfo(Z),{real:be,imag:me}}function QDe(t,e,n){const r=new Float32Array(e*2);for(let o=0;o<e;o++){let s=0,i=0;for(let a=0;a<e;a++){const l=AU(o*a,e,n),u=T2(t,a);s+=u.real*l.real-u.imag*l.imag,i+=u.real*l.imag+u.imag*l.real}n&&(s/=e,i/=e),EU(r,s,i,o)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZDe(t){const{inputs:e,backend:n}=t,{input:r}=e,o=re(r.shape),s=r.shape[r.shape.length-1],i=o/s,a=Ct({inputs:{x:r},backend:n,attrs:{shape:[i,s]}}),l=u6(a,!1,n),u=Ct({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}const JDe={kernelName:nE,backendName:"cpu",kernelFunc:ZDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fN(t){const{backend:e,attrs:n}=t,{shape:r,value:o,dtype:s}=n,i=s||zd(o),a=en(i,re(r));return tMe(a,o,i),e.makeTensorInfo(r,i,a)}const eMe={kernelName:rE,backendName:"cpu",kernelFunc:fN};function tMe(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nMe={kernelName:oE,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,o=n,s=Gn(r.dtype,re(r.shape)),[i,a,l,u]=r.shape,c=o.data.get(r.dataId).values;for(let f=0;f<i;f++){const h=f*l*a*u;for(let p=0;p<a;p++){const m=p*(l*u);for(let g=0;g<l;g++){const y=g*u;for(let v=0;v<u;v++){const b=Math.round(l-g-1),x=h+m+y+v;let w=c[x];if(b>=0&&b<l){const S=b*u,$=h+m+S+v;w=c[$]}s[x]=w}}}}return{dataId:o.write(s,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s,bias:i,preluActivationWeights:a}=e,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:f,activation:h,leakyreluAlpha:p}=r;let m=a6({inputs:{x:o,filter:s},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:f}});if(i){const g=m;if(c==="NCHW"&&i.shape.length===1&&i.shape[0]!==1){const y=Ct({inputs:{x:i},backend:n,attrs:{shape:[i.shape[0],1,1]}});m=yd({inputs:{a:m,b:y},backend:n}),n.disposeIntermediateTensorInfo(y)}else m=yd({inputs:{a:m,b:i},backend:n});n.disposeIntermediateTensorInfo(g)}if(h){const g=m;if(c==="NCHW"&&h==="prelu"&&a.shape.length===1&&a.shape[0]!==1){const y=Ct({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});m=l0(n,m,h,y,p),n.disposeIntermediateTensorInfo(y)}else m=l0(n,m,h,a,p);n.disposeIntermediateTensorInfo(g)}return m}const oMe={kernelName:Wv,backendName:"cpu",kernelFunc:rMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s,bias:i,preluActivationWeights:a}=e,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:f,activation:h,leakyreluAlpha:p}=r;let m=l6({inputs:{x:o,filter:s},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:f}});if(i){const g=m;m=yd({inputs:{a:m,b:i},backend:n}),n.disposeIntermediateTensorInfo(g)}if(h){const g=m;m=l0(n,m,h,a,p),n.disposeIntermediateTensorInfo(g)}return m}const iMe={kernelName:QW,backendName:"cpu",kernelFunc:sMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aMe(t){const{inputs:e,backend:n}=t,{params:r,indices:o}=e,s=re(r.shape),i=o.shape,a=i[i.length-1],[l,u,c,d]=c2(r,o);if(u===0)return n.makeTensorInfo(l,r.dtype,[]);const f=n.data.get(o.dataId).values,h=n.bufferSync(r),p=x5(f,h,r.dtype,u,a,c,d,r.shape,s);return n.makeTensorInfo(l,r.dtype,p.values)}const lMe={kernelName:RW,backendName:"cpu",kernelFunc:aMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,indices:s}=e,{axis:i,batchDims:a}=r;Ie([o,s],"gatherV2");const l=Ge(i,o.shape)[0],u=n.data.get(s.dataId).values,c=o.shape[l];for(let x=0;x<u.length;++x){const w=u[x];P(w<=c-1&&w>=0,()=>`GatherV2: the index value ${w} is not in [0, ${c-1}]`)}let d=a;a==null&&(d=0);const f=re(s.shape),h=P2(o,s,l,d),p=Ct({inputs:{x:o},backend:n,attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]}}),m=Ct({inputs:{x:s},backend:n,attrs:{shape:[h.batchSize,f/h.batchSize]}}),g=[h.batchSize,h.outerSize,f/h.batchSize,h.sliceSize],y=n.bufferSync(m),v=n.bufferSync(p),b=b5(v,y,g);return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(h.outputShape,b.dtype,b.values)}const cMe={kernelName:nb,backendName:"cpu",kernelFunc:uMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dMe(t){const{inputs:e,backend:n}=t,{input:r}=e,o=re(r.shape),s=r.shape[r.shape.length-1],i=o/s,a=Ct({inputs:{x:r},backend:n,attrs:{shape:[i,s]}}),l=u6(a,!0,n),u=Ct({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}const fMe={kernelName:sE,backendName:"cpu",kernelFunc:dMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hMe=pt(rm,t=>Number.isFinite(t)?1:0,"bool"),pMe={kernelName:rm,backendName:"cpu",kernelFunc:hMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mMe=pt(om,t=>Math.abs(t)===1/0?1:0,"bool"),gMe={kernelName:om,backendName:"cpu",kernelFunc:mMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yMe=pt(sm,t=>Number.isNaN(t)?1:0,"bool"),vMe={kernelName:sm,backendName:"cpu",kernelFunc:yMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xMe(t){const{backend:e,attrs:n}=t,{start:r,stop:o,num:s}=n,i=k5(r,o,s);return e.makeTensorInfo([i.length],"float32",i)}const bMe={kernelName:PW,backendName:"cpu",kernelFunc:xMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wMe=pt(am,t=>Math.log1p(t)),SMe={kernelName:am,backendName:"cpu",kernelFunc:wMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CMe=sn((t,e)=>t&&e),$Me=wn(ab,CMe,null,"bool"),kMe={kernelName:ab,backendName:"cpu",kernelFunc:$Me};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IMe=pt(lb,t=>t?0:1,"bool"),TMe={kernelName:lb,backendName:"cpu",kernelFunc:IMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EMe=sn((t,e)=>t||e),NMe=wn(ub,EMe,null,"bool"),AMe={kernelName:ub,backendName:"cpu",kernelFunc:NMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{depthRadius:s,bias:i,alpha:a,beta:l}=r;Ie(o,"LRN");const u=o.shape[3],c=u-1,d=n.data.get(o.dataId).values,f=re(o.shape),h=new Float32Array(f);function p(m){const g=m%u;let y=m-g+Math.max(0,g-s);const v=m-g+Math.min(g+s,c);let b=0;for(;y<=v;y++){const x=d[y];b+=x*x}return b}for(let m=0;m<f;m++){const g=p(m),y=d[m]*Math.pow(i+a*g,-l);h[m]=y}return n.makeTensorInfo(o.shape,o.dtype,h)}const _Me={kernelName:cb,backendName:"cpu",kernelFunc:OMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,y:s,dy:i}=e,{depthRadius:a,bias:l,alpha:u,beta:c}=r;Ie(i,"LRNGrad");const d=re(i.shape),f=i.shape[3],h=n.data.get(i.dataId).values,p=n.data.get(o.dataId).values,m=n.data.get(s.dataId).values,g=new Float32Array(d),y=d;for(let v=0;v<y;v++){const b=v%f,x=v-b+Math.max(0,b-a),w=v-b+Math.min(f,b+a+1);let S=0;for(let $=x;$<w;$++)S+=Math.pow(p[$],2);S=u*S+l;for(let $=x;$<w;$++){let C=-2*u*c*p[$]*m[v]/S;v===$&&(C+=Math.pow(S,-c)),C*=h[v],g[$]+=C}}return n.makeTensorInfo(i.shape,o.dtype,g)}const PMe={kernelName:aE,backendName:"cpu",kernelFunc:RMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c6(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{reductionIndices:s,keepDims:i}=r,a=n;let l=o.shape;const u=l.length,c=Ge(s,l);let d=c;const f=Gt(d,u);let h=a.data.get(o.dataId).values;if(f!=null){const x=new Array(u);for(let w=0;w<x.length;w++)x[w]=l[f[w]];h=aN(h,l,o.dtype,f,x),d=rn(d.length,u),l=x}Ie(o,"max"),Ln("max",d,u);const[p,m]=An(l,d),g=re(m),y=T5(h,g,p,o.dtype),v=a.write(y,p,o.dtype);let b=p;return i&&(b=dn(p,c)),{dataId:v,shape:b,dtype:o.dtype}}const DMe={kernelName:db,backendName:"cpu",kernelFunc:c6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e;Ie(o,"maxPool");const{filterSize:s,strides:i,pad:a,dimRoundingMode:l}=r,u=1;P(Kn(i,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const c=jo(o.shape,s,i,u,a,l);let d;if(c.filterWidth===1&&c.filterHeight===1&&at(c.inShape,c.outShape))d=Js({inputs:{x:o},backend:n});else{const f=n.data.get(o.dataId).values,h=Ee(o.shape),p=cN(f,o.shape,o.dtype,h,c,"max");d=n.makeTensorInfo(c.outShape,o.dtype,p.values)}return d}const FMe={kernelName:fb,backendName:"cpu",kernelFunc:MMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{filterSize:s,strides:i,pad:a,dimRoundingMode:l,dataFormat:u}=r;Ie(o,"maxPool3d");const c=ji(o.shape,s,i,1,a,l,u),d=n.data.get(o.dataId).values,f=i6(d,o.shape,o.dtype,Ee(o.shape),c,"max");return n.makeTensorInfo(f.shape,"float32",f.values)}const BMe={kernelName:hb,backendName:"cpu",kernelFunc:LMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zMe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:s}=e,{filterSize:i,strides:a,pad:l,dimRoundingMode:u}=r;Ie([o,s],"maxPool3DGrad");const c=ji(s.shape,i,a,1,l,u),d=n.bufferSync(s),f=EPe(d,c),h=c.strideDepth,p=c.strideHeight,m=c.strideWidth,g=c.dilationDepth,y=c.dilationHeight,v=c.dilationWidth,b=c.effectiveFilterDepth,x=c.effectiveFilterHeight,w=c.effectiveFilterWidth,S=b-1-c.padInfo.front,$=w-1-c.padInfo.left,C=x-1-c.padInfo.top,k=Ue(s.shape,"float32"),I=n.bufferSync(o);for(let T=0;T<c.batchSize;++T)for(let E=0;E<c.inChannels;++E)for(let _=0;_<c.inDepth;++_)for(let O=0;O<c.inHeight;++O)for(let F=0;F<c.inWidth;++F){const M=_-S,L=O-C,N=F-$;let D=0;for(let U=0;U<b;U+=g){const B=(M+U)/h;if(!(B<0||B>=c.outDepth||Math.floor(B)!==B))for(let W=0;W<x;W+=y){const V=(L+W)/p;if(!(V<0||V>=c.outHeight||Math.floor(V)!==V))for(let ee=0;ee<w;ee+=v){const ne=(N+ee)/m;if(ne<0||ne>=c.outWidth||Math.floor(ne)!==ne)continue;const se=b*x*w-1-f.get(T,B,V,ne,E),de=U*x*w+W*w+ee,ue=se===de?1:0;if(ue===0)continue;const Y=I.get(T,B,V,ne,E);D+=Y*ue}}}k.set(D,T,_,O,F,E)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const jMe={kernelName:uE,backendName:"cpu",kernelFunc:zMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WMe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:s,output:i}=e,a=s;Ie([s,i],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:d}=r,f=jo(a.shape,l,u,1,c,d),h=n.data.get(a.dataId).values,p=Ue(f.outShape,a.dtype,s6(h,a.shape,a.dtype,f).values),m=f.strideHeight,g=f.strideWidth,y=f.dilationHeight,v=f.dilationWidth,b=f.effectiveFilterHeight,x=f.effectiveFilterWidth,w=x-1-f.padInfo.left,S=b-1-f.padInfo.top,$=Ue(a.shape,"float32"),C=n.data.get(o.dataId).values,k=Ue(o.shape,"float32",C);for(let I=0;I<f.batchSize;++I)for(let T=0;T<f.inChannels;++T)for(let E=0;E<f.inHeight;++E)for(let _=0;_<f.inWidth;++_){const O=E-S,F=_-w;let M=0;for(let L=0;L<b;L+=y){const N=(O+L)/m;if(!(N<0||N>=f.outHeight||Math.floor(N)!==N))for(let D=0;D<x;D+=v){const U=(F+D)/g;if(U<0||U>=f.outWidth||Math.floor(U)!==U)continue;const B=b*x-1-p.get(I,N,U,T),W=L*x+D,V=B===W?1:0;if(V===0)continue;const ee=k.get(I,N,U,T);M+=ee*V}}$.set(M,I,E,_,T)}return n.makeTensorInfo($.shape,$.dtype,$.values)}const VMe={kernelName:lE,backendName:"cpu",kernelFunc:WMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UMe(t,e,n,r,o){const s=Ee(e),i=cN(t,e,n,s,o,"max"),a=s6(t,e,n,o,!0,r);return[i.values,a.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GMe={kernelName:DW,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:o,strides:s,pad:i,includeBatchInIndex:a}=e,l=n;Ie(r,"MaxPoolWithArgmax");const u=l.data.get(r.dataId).values,c=jo(r.shape,o,s,[1,1],i),[d,f]=UMe(u,r.shape,r.dtype,a,c),h=l.write(d,c.outShape,r.dtype),p=l.write(f,c.outShape,r.dtype);return[{dataId:h,shape:c.outShape,dtype:r.dtype},{dataId:p,shape:c.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r,a=Ge(s,o.shape),u=An(o.shape,a)[1],c=re(u),d=[],f=n.makeTensorInfo([],"float32",new Float32Array([c]));d.push(f);const h=za({inputs:{x:o},backend:n,attrs:{dtype:"float32"}});d.push(h);const p=dN({inputs:{a:h,b:f},backend:n});d.push(p);const m=Km({inputs:{x:p},backend:n,attrs:{axis:s,keepDims:i}});return d.forEach(g=>n.disposeIntermediateTensorInfo(g)),m}const KMe={kernelName:pb,backendName:"cpu",kernelFunc:HMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r;Ie(o,"min");const a=Ge(s,o.shape);let l=a;const u=Gt(l,o.shape.length);let c=o;u!=null&&(c=Sr({inputs:{x:o},backend:n,attrs:{perm:u}}),l=rn(l.length,o.shape.length)),Ln("min",l,c.shape.length);const[d,f]=An(c.shape,l),h=re(f),p=Hn(re(d),c.dtype),m=n.data.get(c.dataId).values;for(let y=0;y<p.length;++y){const v=y*h;let b=m[v];for(let x=0;x<h;++x){const w=m[v+x];(Number.isNaN(w)||w<b)&&(b=w)}p[y]=b}u!=null&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(d,c.dtype,p);if(i){const y=dn(d,a),v=Ct({inputs:{x:g},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(g),v}return g}const XMe={kernelName:mb,backendName:"cpu",kernelFunc:qMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{paddings:s,mode:i}=r;Ie(o,"mirrorPad");const a=s.map((b,x)=>b[0]+o.shape[x]+b[1]),l=s.map(b=>b[0]),u=s.map((b,x)=>b[0]+o.shape[x]),c=i==="reflect"?0:1,d=n.data.get(o.dataId).values,f=o.shape.length,h=Ee(o.shape),p=re(a),m=a.length,g=Ee(a),y=Gn(o.dtype,p);for(let b=0;b<p;b++){let x=jd(b,m,g);for(let S=0;S<m;S++)x[S]<l[S]?x[S]=l[S]*2-x[S]-c:x[S]>=u[S]&&(x[S]=(u[S]-1)*2-x[S]+c);x=x.map((S,$)=>S-l[$]);const w=zs(x,f,h);y[b]=d[w]}return{dataId:n.write(y,a,o.dtype),shape:a,dtype:o.dtype}}const QMe={kernelName:gb,backendName:"cpu",kernelFunc:YMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZMe=sn((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),JMe=wn(cm,ZMe),eFe={kernelName:cm,backendName:"cpu",kernelFunc:JMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d6(t){const{inputs:e,backend:n,attrs:r}=t,{logits:o}=e,{dim:s}=r,i=o.shape.length;let a=s;if(a===-1&&(a=i-1),a!==i-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${i} and dim was ${a}`);const l=Ge([a],o.shape),u=c6({inputs:{x:o},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),c=dn(u.shape,l),d=Ct({inputs:{x:u},backend:n,attrs:{shape:c}}),f=uN({inputs:{a:o,b:d},backend:n}),h=m5({inputs:{x:f},backend:n}),p=Km({inputs:{x:h},backend:n,attrs:{axis:l,keepDims:!1}}),m=Ct({inputs:{x:p},backend:n,attrs:{shape:c}}),g=dN({inputs:{a:h,b:m},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}const tFe={kernelName:Pb,backendName:"cpu",kernelFunc:d6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nFe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:o}=e,{numSamples:s,seed:i,normalized:a}=r;Ie(o,"multinomial");const l=a?o:d6({inputs:{logits:o},backend:n,attrs:{dim:-1}}),u=l.shape[0],c=l.shape[1],d=n.data.get(l.dataId).values,f=[u,s],h=Hn(re(f),"int32");for(let p=0;p<u;++p){const m=p*c,g=new Float32Array(c-1);g[0]=d[m];for(let b=1;b<g.length;++b)g[b]=g[b-1]+d[m+b];const y=YE.alea(i.toString()),v=p*s;for(let b=0;b<s;++b){const x=y();h[v+b]=g.length;for(let w=0;w<g.length;w++)if(x<g[w]){h[v+b]=w;break}}}return a||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(f,"int32",h)}const rFe={kernelName:MW,backendName:"cpu",kernelFunc:nFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oFe=s2;function sFe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:o,scores:s}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l}=r;Ie(o,"NonMaxSuppression");const u=n.data.get(o.dataId).values,c=n.data.get(s.dataId).values,{selectedIndices:d}=oFe(u,c,i,a,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const iFe={kernelName:cE,backendName:"cpu",kernelFunc:sFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aFe=i2;function lFe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:o,scores:s}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:u}=r;Ie(o,"NonMaxSuppressionPadded");const c=n.data.get(o.dataId).values,d=n.data.get(s.dataId).values,{selectedIndices:f,validOutputs:h}=aFe(c,d,i,a,l,u);return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}const uFe={kernelName:dE,backendName:"cpu",kernelFunc:lFe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cFe=a2;function dFe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:o,scores:s}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,softNmsSigma:u}=r;Ie(o,"NonMaxSuppressionWithScore");const c=n.data.get(o.dataId).values,d=n.data.get(s.dataId).values,f=i,h=a,p=l,m=u,{selectedIndices:g,selectedScores:y}=cFe(c,d,f,h,p,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}const fFe={kernelName:fE,backendName:"cpu",kernelFunc:dFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hFe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:o}=e,{dtype:s,depth:i,onValue:a,offValue:l}=r;Ie(o,"oneHot");const u=re(o.shape),c=new Float32Array(u*i);c.fill(l);const d=n.data.get(o.dataId).values;for(let f=0;f<u;++f)d[f]>=0&&d[f]<i&&(c[f*i+d[f]]=a);return n.makeTensorInfo([...o.shape,i],s,c)}const pFe={kernelName:bb,backendName:"cpu",kernelFunc:hFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c0(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const o=uu({inputs:{input:r},backend:n}),s=c0({inputs:{x:o},backend:n}),i=vd({inputs:{input:r},backend:n}),a=c0({inputs:{x:i},backend:n}),l=Nr({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return fN({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const mFe={kernelName:Fb,backendName:"cpu",kernelFunc:c0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f6(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const o=uu({inputs:{input:r},backend:n}),s=f6({inputs:{x:o},backend:n}),i=vd({inputs:{input:r},backend:n}),a=c0({inputs:{x:i},backend:n}),l=Nr({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return fN({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const gFe={kernelName:xb,backendName:"cpu",kernelFunc:f6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h6(t){const{inputs:e,backend:n,attrs:r}=t,{axis:o}=r;if(e.length===1)return u0({inputs:{input:e[0]},backend:n,attrs:{dim:o}});const s=e[0].shape,i=e[0].dtype;e.forEach(c=>{RT(s,c.shape,"All tensors passed to stack must have matching shapes"),P(i===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(c=>{const d=u0({inputs:{input:c},backend:n,attrs:{dim:o}});return a.push(d),d}),u=xd({inputs:l,backend:n,attrs:{axis:o}});return a.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const yFe={kernelName:wb,backendName:"cpu",kernelFunc:h6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{paddings:s,constantValue:i}=r;Ie(o,"pad");const a=s.map((v,b)=>v[0]+o.shape[b]+v[1]),l=s.map(v=>v[0]),u=n.data.get(o.dataId).values,c=re(o.shape),d=o.shape.length,f=Ee(o.shape),h=re(a),p=a.length,m=Ee(a),g=Gn(o.dtype,h);i!==0&&g.fill(i);for(let v=0;v<c;v++){const x=jd(v,d,f).map((S,$)=>S+l[$]),w=zs(x,p,m);g[w]=u[v]}return{dataId:n.write(g,a,o.dtype),shape:a,dtype:o.dtype}}const p6={kernelName:Sb,backendName:"cpu",kernelFunc:vFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xFe=sn((t,e)=>Math.pow(t,e)),bFe=wn(fm,xFe),wFe={kernelName:fm,backendName:"cpu",kernelFunc:bFe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SFe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:o,paramsDenseValues:s,indices:i}=e,a=o.map(g=>n.data.get(g.dataId).values),l=o.map(g=>g.shape),u=n.data.get(s.dataId).values,c=n.data.get(i.dataId).values,[d,f,h]=R5(a,l,u,s.shape,s.dtype,c,i.shape),p=d.map(g=>n.makeTensorInfo([g.length],"int32",g)),m=n.makeTensorInfo(h,s.dtype,f);return p.concat([m])}const CFe={kernelName:FW,backendName:"cpu",kernelFunc:SFe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Fe(t){const{inputs:e,backend:n}=t,{starts:r,limits:o,deltas:s}=e,i=n.data.get(r.dataId).values,a=n.data.get(o.dataId).values,l=n.data.get(s.dataId).values,[u,c]=P5(i,r.shape,r.dtype,a,o.shape,l,s.shape),d=n.makeTensorInfo([u.length],"int32",u),f=n.makeTensorInfo([c.length],r.dtype,c);return[d,f]}const kFe={kernelName:LW,backendName:"cpu",kernelFunc:$Fe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IFe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:o,values:s,defaultValue:i,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=r,u=n.data.get(o.dataId).values,c=n.data.get(s.dataId).values,d=n.data.get(i.dataId).values,f=a.map(g=>n.data.get(g.dataId).values),h=a.map(g=>g.shape),[p,m]=D5(u,o.shape,c,s.shape,s.dtype,d,i.shape,f,h,l);return n.makeTensorInfo(p,s.dtype,m)}const TFe={kernelName:BW,backendName:"cpu",kernelFunc:IFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EFe(t){const{backend:e,attrs:n}=t,{start:r,stop:o,dtype:s,step:i}=n,a=M5(r,o,i,s);return e.makeTensorInfo([a.length],s,a)}const NFe={kernelName:hE,backendName:"cpu",kernelFunc:EFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AFe=pt(hm,t=>1/t),OFe={kernelName:hm,backendName:"cpu",kernelFunc:AFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Fe(t){const{inputs:e,backend:n,attrs:r}=t,{images:o}=e,{alignCorners:s,halfPixelCenters:i,size:a}=r;Ie(o,"resizeBilinear");const l=Ee(o.shape),[u,c]=a,[d,f,h,p]=o.shape,m=n.data.get(o.dataId).values,g=new Float32Array(re([d,u,c,p])),y=[s&&u>1?f-1:f,s&&c>1?h-1:h],v=[s&&u>1?u-1:u,s&&c>1?c-1:c];let b=0;const x=y[0]/v[0],w=y[1]/v[1];for(let S=0;S<d;S++)for(let $=0;$<u;$++){let C;i?C=x*($+.5)-.5:C=x*$;const k=Math.max(0,Math.floor(C)),I=C-k,T=Math.min(f-1,Math.ceil(C)),E=S*l[0]+k*l[1],_=S*l[0]+T*l[1];for(let O=0;O<c;O++){let F;i?F=w*(O+.5)-.5:F=w*O;const M=Math.max(0,Math.floor(F)),L=F-M,N=Math.min(h-1,Math.ceil(F)),D=E+M*l[2],U=_+M*l[2],B=E+N*l[2],W=_+N*l[2];for(let V=0;V<p;V++){const ee=m[D+V],ne=m[U+V],se=m[B+V],de=m[W+V],ue=ee+(se-ee)*L,Y=ne+(de-ne)*L,ae=ue+(Y-ue)*I;g[b++]=ae}}}return n.makeTensorInfo([d,u,c,p],"float32",g)}const RFe={kernelName:Tb,backendName:"cpu",kernelFunc:_Fe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PFe(t){const{inputs:e,backend:n,attrs:r}=t,{images:o,dy:s}=e,{alignCorners:i}=r;Ie([s,o],"resizeBilinearGrad");const a=Ee(o.shape),[l,u,c,d]=o.shape,[,f,h]=s.shape,p=new Float32Array(l*u*c*d),m=[i&&f>1?u-1:u,i&&h>1?c-1:c],g=[i&&f>1?f-1:f,i&&h>1?h-1:h],y=m[0]/g[0],v=m[1]/g[1],b=n.data.get(s.dataId).values;let x=0;for(let w=0;w<l;w++){const S=w*a[0];for(let $=0;$<f;$++){const C=$*y,k=Math.floor(C),I=Math.min(Math.ceil(C),u-1),T=S+k*a[1],E=S+I*a[1],_=C-k,O=1-_;for(let F=0;F<h;F++){const M=F*v,L=Math.floor(M),N=Math.min(Math.ceil(M),c-1),D=M-L,U=1-D,B=T+L*a[2],W=T+N*a[2],V=E+L*a[2],ee=E+N*a[2],ne=O*U,se=O*D,de=_*U,ue=_*D;for(let Y=0;Y<d;Y++){const ae=b[x++];p[B+Y]+=ae*ne,p[W+Y]+=ae*se,p[V+Y]+=ae*de,p[ee+Y]+=ae*ue}}}}return n.makeTensorInfo([l,c,u,d],"float32",p)}const DFe={kernelName:gE,backendName:"cpu",kernelFunc:PFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MFe(t){const{inputs:e,backend:n,attrs:r}=t,{images:o}=e,{alignCorners:s,halfPixelCenters:i,size:a}=r;Ie(o,"resizeNearestNeighbor");const l=Ee(o.shape),[u,c]=a,[d,f,h,p]=o.shape,m=n.data.get(o.dataId).values,g=new Float32Array(d*u*c*p),y=[s&&u>1?f-1:f,s&&c>1?h-1:h],v=[s&&u>1?u-1:u,s&&c>1?c-1:c],b=y[0]/v[0],x=y[1]/v[1];let w=0;for(let S=0;S<d;S++){const $=S*l[0];for(let C=0;C<u;C++){const k=i?b*(C+.5):b*C;let I=Math.min(f-1,s?Math.round(k):Math.floor(k));i&&(I=Math.max(0,I));const T=$+I*l[1];for(let E=0;E<c;E++){const _=i?x*(E+.5):x*E;let O=Math.min(h-1,s?Math.round(_):Math.floor(_));i&&(O=Math.max(0,O));const F=T+O*l[2];for(let M=0;M<p;M++){const L=m[F+M];g[w++]=L}}}}return n.makeTensorInfo([d,u,c,p],o.dtype,g)}const FFe={kernelName:Ib,backendName:"cpu",kernelFunc:MFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LFe(t){const{inputs:e,backend:n,attrs:r}=t,{images:o,dy:s}=e,{alignCorners:i}=r;Ie([s,o],"resizeNearestNeighborGrad");const a=Ee(o.shape),l=Ee(s.shape),[u,c,d,f]=o.shape,[,h,p]=s.shape,m=new Float32Array(u*c*d*f),g=n.data.get(s.dataId).values,y=[i&&h>1?c-1:c,i&&p>1?d-1:d],v=[i&&h>1?h-1:h,i&&p>1?p-1:p],b=y[0]/v[0],x=y[1]/v[1],w=1/b,S=1/x,$=Math.ceil(w)*2+2,C=Math.ceil(S)*2+2;for(let k=0;k<u;k++){const I=k*a[0];for(let T=0;T<c;T++){const E=I+T*a[1],_=Math.floor(T*w),O=Math.floor(_-$/2);for(let F=0;F<d;F++){const M=E+F*a[2],L=Math.floor(F*S),N=Math.floor(L-C/2);for(let D=0;D<f;D++){let U=0;for(let B=0;B<$;B++){const W=B+O;if(W<0||W>=h)continue;const V=I+W*l[1],ee=W*b,ne=Math.min(c-1,i?Math.round(ee):Math.floor(ee));if(T===ne)for(let se=0;se<C;se++){const de=se+N;if(de<0||de>=p)continue;const ue=V+de*l[2],Y=de*x,ae=Math.min(d-1,i?Math.round(Y):Math.floor(Y));F===ae&&(U+=g[ue+D])}}m[M+D]=U}}}}return n.makeTensorInfo(o.shape,o.dtype,m)}const BFe={kernelName:mE,backendName:"cpu",kernelFunc:LFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{dims:s}=r;Ie(o,"reverse");const i=o.shape.length,a=Ge(s,o.shape);if(i===0)return Js({inputs:{x:o},backend:n});const l=new Dn(o.shape,o.dtype),u=n.bufferSync(o);for(let c=0;c<l.size;c++){const d=l.indexToLoc(c),f=d.slice();a.forEach(h=>f[h]=o.shape[h]-1-f[h]),l.set(u.get(...f),...d)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const jFe={kernelName:Eb,backendName:"cpu",kernelFunc:zFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WFe={kernelName:CE,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:o,fillValue:s,center:i}=e,a=n,l=Gn(r.dtype,re(r.shape)),[u,c,d,f]=r.shape,[h,p]=v2(i,c,d),m=255,g=Math.sin(o),y=Math.cos(o),v=a.data.get(r.dataId).values;for(let x=0;x<u;x++){const w=x*d*c*f;for(let S=0;S<c;S++){const $=S*(d*f);for(let C=0;C<d;C++){const k=C*f;for(let I=0;I<f;I++){const T=[u,S,C,I],E=T[2],_=T[1];let O=(E-h)*y-(_-p)*g,F=(E-h)*g+(_-p)*y;O=Math.round(O+h),F=Math.round(F+p);let M=s;if(typeof s!="number"&&(I===3?M=m:M=s[I]),O>=0&&O<d&&F>=0&&F<c){const N=F*(d*f),D=O*f,U=w+N+D+I;M=v[U]}const L=w+$+k+I;l[L]=M}}}}return{dataId:a.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VFe=pt(gm,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),UFe={kernelName:gm,backendName:"cpu",kernelFunc:VFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GFe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:o,updates:s}=e,{shape:i}=r,{sliceRank:a,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=Su(s,o,i),f=!0,h=n.bufferSync(o),p=n.bufferSync(s),m=Al(h,p,i,d,u,l,a,c,0,f);return n.makeTensorInfo(i,m.dtype,m.values)}const HFe={kernelName:zW,backendName:"cpu",kernelFunc:GFe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KFe(t,e){let n=0,r=t.length,o=0;for(;n<r;)o=Math.floor((n+r)/2),t[o]<e?n=o+1:r=o;return r}function qFe(t,e){let n=0,r=t.length,o=0;for(;n<r;)o=Math.floor((n+r)/2),t[o]<=e?n=o+1:r=o;return r}function XFe(t,e,n,r,o,s){const i=en("int32",n*o);for(let a=0;a<n;++a){const l=t.slice(a*r,(a+1)*r),u=a*o;for(let c=0;c<o;++c)i[u+c]=s==="left"?KFe(l,e[c+u]):qFe(l,e[c+u])}return i}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YFe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:o,values:s}=e,{side:i}=r,a=n.data.get(o.dataId).values,l=n.data.get(s.dataId).values,u=XFe(a,l,o.shape[0],o.shape[1],s.shape[1],i);return n.makeTensorInfo(s.shape,"int32",u)}const QFe={kernelName:WW,backendName:"cpu",kernelFunc:YFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZFe(t){const{inputs:e,backend:n}=t,{condition:r,t:o,e:s}=e;Ie([r,o,s],"select");const i=r.shape.length,a=n.data.get(r.dataId).values,l=n.data.get(o.dataId).values,u=n.data.get(s.dataId).values,c=Br(o.dtype,s.dtype),d=Hn(re(o.shape),c);let f=0;const h=i===0||i>1||o.shape.length===1?1:re(o.shape.slice(1));for(let p=0;p<a.length;p++)for(let m=0;m<h;m++)a[p]===1?d[f++]=l[p]:d[f++]=u[p];return n.makeTensorInfo(o.shape,c,d)}const JFe={kernelName:Nb,backendName:"cpu",kernelFunc:ZFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eLe=qb,tLe=Xb,nLe=pt(vm,t=>t>=0?tLe*t:eLe*(Math.exp(t)-1)),rLe={kernelName:vm,backendName:"cpu",kernelFunc:nLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oLe=pt(wm,t=>t<0?-1:t>0?1:0),sLe={kernelName:wm,backendName:"cpu",kernelFunc:oLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iLe=pt(xm,t=>Math.sin(t)),aLe={kernelName:xm,backendName:"cpu",kernelFunc:iLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lLe=pt(bm,t=>Math.sinh(t)),uLe={kernelName:bm,backendName:"cpu",kernelFunc:lLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cLe=11920928955078125e-23,$M=Math.log(cLe)+2,dLe=pt(Cm,t=>{const e=t>-$M,n=t<$M,r=Math.exp(t);let o;return n?o=r:e?o=t:o=Math.log(1+r),o}),fLe={kernelName:Cm,backendName:"cpu",kernelFunc:dLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{blockShape:s,paddings:i}=r;Ie([o],"spaceToBatchND");const a=re(s),l=[[0,0]];l.push(...i);for(let S=1+s.length;S<o.shape.length;++S)l.push([0,0]);const u=p6.kernelFunc({inputs:{x:o},backend:n,attrs:{paddings:l,constantValue:0}}),c=Mm(u.shape,s,a,!1),d=Fm(c.length,s.length,!1),f=Lm(u.shape,s,a,!1),m=Ct({inputs:{x:u},backend:n,attrs:{shape:c}}),v=Sr({inputs:{x:m},backend:n,attrs:{perm:d}}),w=Ct({inputs:{x:v},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),w}const pLe={kernelName:_b,backendName:"cpu",kernelFunc:hLe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mLe(t){const{inputs:e,backend:n}=t,{indices:r,values:o,denseShape:s,defaultValue:i}=e;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${s.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(o.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${o.shape}`);if(i.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${i.shape}`);const a=n.data.get(r.dataId).values,l=n.data.get(o.dataId).values,u=n.data.get(s.dataId).values,c=n.data.get(i.dataId).values[0],[d,f,h,p,m]=z5(a,r.shape,r.dtype,l,o.dtype,u,c);return[n.makeTensorInfo(f,r.dtype,d),n.makeTensorInfo([f[0]],o.dtype,h),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(g=>Number(g)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}const gLe={kernelName:VW,backendName:"cpu",kernelFunc:mLe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yLe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:o,newShape:s}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(o.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${o.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const i=Array.from(n.data.get(o.dataId).values),a=n.data.get(r.dataId).values,l=Array.from(n.data.get(s.dataId).values),[u,c,d]=j5(a,r.shape,r.dtype,i,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([d.length],s.dtype,new Int32Array(d))]}const vLe={kernelName:UW,backendName:"cpu",kernelFunc:yLe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xLe(t){const{inputs:e,backend:n}=t,{data:r,indices:o,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${o.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${s.shape}`);if(o.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(r.dataId).values,a=n.data.get(o.dataId).values,l=n.data.get(s.dataId).values,[u,c]=lN(i,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(c,r.dtype,u)}const bLe={kernelName:GW,backendName:"cpu",kernelFunc:xLe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wLe(t){const{inputs:e,backend:n}=t,{data:r,indices:o,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${o.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${s.shape}`);if(o.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(r.dataId).values,a=n.data.get(o.dataId).values,l=n.data.get(s.dataId).values,[u,c]=lN(i,r.shape,r.dtype,a,l);return n.makeTensorInfo(c,r.dtype,u)}const SLe={kernelName:HW,backendName:"cpu",kernelFunc:wLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CLe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:o,sparseValues:s,defaultValue:i}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:d,outputSize:f}=Su(s,o,a),h=!1,p=n.bufferSync(o);let m;switch(s.dtype){case"bool":{const g=n.bufferSync(s),y=!!n.data.get(i.dataId).values[0];m=Al(p,g,a,f,c,u,l,d,y,h);break}case"float32":{const g=n.bufferSync(s),y=n.data.get(i.dataId).values[0];m=Al(p,g,a,f,c,u,l,d,y,h);break}case"int32":{const g=n.bufferSync(s),y=n.data.get(i.dataId).values[0];m=Al(p,g,a,f,c,u,l,d,y,h);break}case"string":{const g=n.bufferSync(s),y=Da(n.data.get(i.dataId).values[0]);m=Al(p,g,a,f,c,u,l,d,y,h);break}default:throw new Error(`Unsupported type ${s.dtype}`)}return n.makeTensorInfo(a,m.dtype,m.values)}const $Le={kernelName:KW,backendName:"cpu",kernelFunc:CLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{numOrSizeSplits:s,axis:i}=r,a=Ge(i,o.shape)[0],l=R2(o,s,a),u=new Array(o.shape.length).fill(0),c=o.shape.slice();return l.map(d=>{const f=[...c];f[a]=d;const h=cu({inputs:{x:o},backend:n,attrs:{begin:u,size:f}});return u[a]+=d,h})}const ILe={kernelName:Rb,backendName:"cpu",kernelFunc:kLe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TLe={kernelName:yE,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;Ie(n,"square");const o=r.data.get(n.dataId).values,s=new Float32Array(o.length);for(let a=0;a<o.length;++a){const l=o[a];s[a]=l*l}return{dataId:r.write(s,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ELe=pt(Am,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),NLe={kernelName:Am,backendName:"cpu",kernelFunc:ELe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ALe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{begin:s,end:i,strides:a,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:f}=r;Ie(o,"stridedSlice");const{finalShapeSparse:h,finalShape:p,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:v,end:b,strides:x}=m2(o.shape,s,i,a,l,u,c,d,f);let w;if(m)w=Ct({inputs:{x:o},backend:n,attrs:{shape:p}});else if(g||y){P(o.shape.length>=1,()=>`Input must have rank at least 1, got: ${o.shape.length}`);const S=f2(v,b,x),$=cu({inputs:{x:o},backend:n,attrs:{begin:v,size:S}});w=Ct({inputs:{x:$},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo($)}else{const S=n.bufferSync(o),$=U5(h,S,x,v);w=n.makeTensorInfo(p,$.dtype,$.values)}return w}const OLe={kernelName:xE,backendName:"cpu",kernelFunc:ALe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Le(t){const{inputs:e,backend:n,attrs:r}=t,{separator:o,nGramWidths:s,leftPad:i,rightPad:a,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:d}=e,f=n.data.get(c.dataId).values,h=n.data.get(d.dataId).values,[p,m]=G5(f,h,o,s,i,a,l,u);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",m)]}const RLe={kernelName:qW,backendName:"cpu",kernelFunc:_Le};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PLe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:o}=r,{input:s,delimiter:i}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(i.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const a=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values[0],[u,c,d]=H5(a,l,o),f=c.length;return[n.makeTensorInfo([f,2],"int32",u),n.makeTensorInfo([f],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const DLe={kernelName:XW,backendName:"cpu",kernelFunc:PLe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MLe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:o}=r,{input:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");const i=n.data.get(s.dataId).values,a=K5(i,o);return n.makeTensorInfo(s.shape,"int32",a)}const FLe={kernelName:YW,backendName:"cpu",kernelFunc:MLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LLe=pt(Tm,t=>Math.tan(t)),BLe={kernelName:Tm,backendName:"cpu",kernelFunc:LLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zLe=pt(Em,t=>Math.tanh(t)),jLe={kernelName:Em,backendName:"cpu",kernelFunc:zLe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WLe(t){const{inputs:e,backend:n}=t,{tensor:r,indices:o,updates:s}=e,{sliceRank:i,numUpdates:a,sliceSize:l,strides:u,outputSize:c}=Su(s,o,r.shape),d=!1,f=n.bufferSync(o),h=n.bufferSync(s),p=n.bufferSync(r),m=Al(f,h,r.shape,c,l,a,i,u,p,d);return n.makeTensorInfo(r.shape,m.dtype,m.values)}const VLe={kernelName:jW,backendName:"cpu",kernelFunc:WLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ULe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{reps:s}=r;Ie(o,"tile");const i=X5(n.bufferSync(o),s);return n.makeTensorInfo(i.shape,i.dtype,i.values)}const GLe={kernelName:Nm,backendName:"cpu",kernelFunc:ULe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{k:s,sorted:i}=r;Ie(o,"topk");const a=n.data.get(o.dataId).values,[l,u]=Q5(a,o.shape,o.dtype,s,i);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}const KLe={kernelName:bE,backendName:"cpu",kernelFunc:HLe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qLe(t){const{inputs:e,attrs:n,backend:r}=t,{image:o,transforms:s}=e,{interpolation:i,fillMode:a,fillValue:l,outputShape:u}=n,[c,d,f,h]=o.shape,[p,m]=u??[d,f],g=[c,p,m,h],y=Ee(o.shape),v=y[0],b=y[1],x=y[2],w=Ee(g),S=w[0],$=w[1],C=w[2],k=Gn(o.dtype,re(g));k.fill(l);const I=r.data.get(o.dataId).values,T=r.data.get(s.dataId).values;for(let _=0;_<c;++_){const O=s.shape[0]===1?T:T.subarray(_*8,_*8+8);for(let F=0;F<p;++F)for(let M=0;M<m;++M)for(let L=0;L<h;++L){let N;const D=O[6]*M+O[7]*F+1;if(D===0)continue;const U=(O[0]*M+O[1]*F+O[2])/D,B=(O[3]*M+O[4]*F+O[5])/D,W=kM(U,f,a),V=kM(B,d,a);switch(i){case"nearest":N=e3e(I,d,f,v,b,x,_,V,W,L,l);break;case"bilinear":N=t3e(I,d,f,v,b,x,_,V,W,L,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${i}`)}const ee=_*S+F*$+M*C+L;k[ee]=N}return r.makeTensorInfo(g,o.dtype,k)}return{dataId:r.write(k,g,o.dtype),shape:o.shape,dtype:o.dtype}}const XLe={kernelName:wE,backendName:"cpu",kernelFunc:qLe};function kM(t,e,n){switch(n){case"reflect":return YLe(t,e);case"wrap":return QLe(t,e);case"nearest":return JLe(t,e);case"constant":default:return ZLe(t)}}function YLe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return Jl(0,n,e-1)}function QLe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return Jl(0,n,e-1)}function ZLe(t,e){return t}function JLe(t,e){return Jl(0,t,e-1)}function zf(t,e,n,r,o,s,i,a,l,u,c){const d=i*r+a*o+l*s+u;return 0<=a&&a<e&&0<=l&&l<n?t[d]:c}function e3e(t,e,n,r,o,s,i,a,l,u,c){const d=Math.round(a),f=Math.round(l);return zf(t,e,n,r,o,s,i,d,f,u,c)}function t3e(t,e,n,r,o,s,i,a,l,u,c){const d=Math.floor(a),f=Math.floor(l),h=d+1,p=f+1,m=(p-l)*zf(t,e,n,r,o,s,i,d,f,u,c)+(l-f)*zf(t,e,n,r,o,s,i,d,p,u,c),g=(p-l)*zf(t,e,n,r,o,s,i,h,f,u,c)+(l-f)*zf(t,e,n,r,o,s,i,h,p,u,c);return(h-a)*m+(a-d)*g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n3e(t){const{inputs:e,attrs:n,backend:r}=t,{axis:o}=n,{x:s}=e;Ie(s,"unique");const i=r.data.get(s.dataId).values,{outputValues:a,outputShape:l,indices:u}=Z5(i,o,s.shape,s.dtype);return[r.makeTensorInfo(l,s.dtype,a),r.makeTensorInfo([u.length],"int32",u)]}const r3e={kernelName:SE,backendName:"cpu",kernelFunc:n3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o3e(t){const{inputs:e,backend:n,attrs:r}=t,{value:o}=e;let{axis:s}=r;s<0&&(s+=o.shape.length);const i=o.shape.length,a=o.shape[s],l=new Array(i-1);let u=0;for(let h=0;h<i;h++)h!==s&&(l[u++]=o.shape[h]);const c=new Array(i).fill(0),d=o.shape.slice();d[s]=1;const f=new Array(a);for(let h=0;h<f.length;h++){c[s]=h;const p=cu({inputs:{x:o},backend:n,attrs:{begin:c,size:d}});f[h]=Ct({inputs:{x:p},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(p)}return f}const s3e={kernelName:Db,backendName:"cpu",kernelFunc:o3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,segmentIds:s}=e,{numSegments:i}=r;Ie(o,"unsortedSegmentSum");const a=o.shape.length,l=s.shape.length,u=[],c=[],d=a-l;let f=s;for(let p=0;p<d;++p){const m=u0({inputs:{input:f},backend:n,attrs:{dim:p+1}});f=m,c.push(m)}for(let p=0;p<i;++p){const m=Ya(p,"int32"),g=n.makeTensorInfo([],"int32",m),y=h5({inputs:{a:g,b:f},backend:n}),v=za({inputs:{x:y},backend:n,attrs:{dtype:"float32"}}),b=l1({inputs:{a:v,b:o},backend:n}),x=Km({inputs:{x:b},backend:n,attrs:{axis:0,keepDims:!1}});u.push(x),c.push(g),c.push(y),c.push(v),c.push(b),c.push(x)}const h=h6({inputs:u,backend:n,attrs:{axis:0}});return c.forEach(p=>n.disposeIntermediateTensorInfo(p)),h}const a3e={kernelName:Mb,backendName:"cpu",kernelFunc:i3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l3e=[nPe,M_e,oPe,iPe,W_e,lPe,cPe,fPe,pPe,gPe,vPe,bPe,SPe,kPe,TPe,APe,_Pe,PPe,MPe,ePe,LPe,zPe,WPe,U_e,UPe,z_e,H_e,HPe,F_e,qPe,YPe,QPe,JPe,tDe,rDe,sDe,aDe,uDe,dDe,hDe,mDe,yDe,xDe,wDe,SDe,$De,IDe,EDe,NDe,ADe,ODe,RDe,MDe,KRe,LDe,K_e,HDe,q_e,KDe,Y_e,JDe,eMe,nMe,Z_e,eRe,oMe,iMe,lMe,cMe,nRe,oRe,L_e,fMe,XPe,pMe,gMe,vMe,qRe,iRe,lRe,bMe,cRe,SMe,kMe,TMe,AMe,_Me,PMe,DMe,fRe,FMe,BMe,jMe,VMe,GMe,KMe,XMe,pRe,QMe,eFe,rFe,gRe,vRe,iFe,uFe,fFe,bRe,pFe,gFe,yFe,p6,wFe,YRe,CRe,CFe,kFe,TFe,NFe,B_e,ik,OFe,QRe,ZRe,JRe,RFe,DFe,FFe,BFe,jFe,WFe,UFe,ORe,HFe,QFe,JFe,rLe,RRe,sLe,aLe,uLe,PRe,tFe,fLe,pLe,gLe,vLe,bLe,SLe,$Le,ILe,FRe,TLe,BRe,jRe,NLe,OLe,RLe,DLe,FLe,GRe,PDe,BLe,jLe,VLe,GLe,KLe,XLe,wRe,r3e,s3e,a3e,mFe];for(const t of l3e)ZW(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wl={},Ug={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function u3e(t,e){wl[t]=e}function gs(t,e){if(!(t in wl)||e!=null){const r=d3e(t,e);if(r!==null)wl[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=wl[t];return n==null||n.isContextLost()?(delete wl[t],gs(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),wl[t])}function c3e(t){if(!J().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function d3e(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??c3e(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete wl[t]},!1),J().getBool("SOFTWARE_WEBGL_ENABLED")&&(Ug.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",Ug)||n.getContext("experimental-webgl",Ug):n.getContext("webgl2",Ug)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var mp;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(mp||(mp={}));var eo;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(eo||(eo={}));var Rn;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Rn||(Rn={}));function qm(t,e){return[e,t]}function f3e(t,e){return t*e}function Gg(t){const e=re(t),n=Math.ceil(e/4);return E$(n)}function Xd(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function h3e(t,e){const[n,r]=Xd(t,e);return n*r*4}function hN(t,e){const n=t;let r,o,s,i,a,l,u,c,d,f;return J().getNumber("WEBGL_VERSION")===2?(r=n.R32F,o=n.R16F,s=n.RGBA16F,i=n.RGBA32F,a=n.RED,u=4,c=1,d=n.HALF_FLOAT,f=n.FLOAT,l=n.RGBA8):(r=t.RGBA,o=t.RGBA,s=t.RGBA,i=n.RGBA,a=t.RGBA,u=4,c=4,d=e!=null?e.HALF_FLOAT_OES:null,f=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:o,internalFormatPackedHalfFloat:s,internalFormatPackedFloat:i,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:d,textureTypeFloat:f}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function we(t,e){const n=e();return J().getBool("DEBUG")&&p3e(t),n}function p3e(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+v3e(t,e))}const m3e=596e-10,g3e=65504;function y3e(t){return!!(J().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||m3e<Math.abs(t)&&Math.abs(t)<g3e)}function v3e(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function Hg(t,e){return Vi(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function x3e(t,e){const n=Vi(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(we(t,()=>t.shaderSource(n,e)),we(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function b3e(t,e){const n=Vi(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(we(t,()=>t.shaderSource(n,e)),we(t,()=>t.compileShader(n)),J().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw m6(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const w3e=/ERROR: [0-9]+:([0-9]+):/g;function m6(t,e){const n=w3e.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],o=t.split(`
`),s=o.length.toString().length+2,i=o.map((d,f)=>hc((f+1).toString(),s)+d);let a=0;for(let d=0;d<i.length;d++)a=Math.max(i[d].length,a);const l=i.slice(0,r-1),u=i.slice(r-1,r),c=i.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${hc(u[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join(`
`))}function S3e(t){return Vi(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function C3e(t,e){if(we(t,()=>t.linkProgram(e)),!J().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function Mw(t,e){if(we(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function $3e(t,e){const n=Vi(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return we(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),we(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function k3e(t,e){const n=Vi(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return we(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),we(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function I3e(t){return Vi(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function T3e(t,e){const n=J().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,o=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+o+".")}}function E3e(t){return Vi(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function IM(t,e,n,r,o,s,i){const a=t.getAttribLocation(e,n);return a===-1?!1:(we(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),we(t,()=>t.vertexAttribPointer(a,o,t.FLOAT,!1,s,i)),we(t,()=>t.enableVertexAttribArray(a)),!0)}function N3e(t,e,n){P3e(t,n),we(t,()=>t.activeTexture(t.TEXTURE0+n)),we(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function A3e(t,e,n){return Vi(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function O3e(t,e,n){return t.getUniformLocation(e,n)}function _3e(t,e,n,r){we(t,()=>N3e(t,e,r)),we(t,()=>t.uniform1i(n,r))}function Fw(t,e,n){we(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),we(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function TM(t,e){we(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),we(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function Kg(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+R3e(t,e))}function R3e(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function Vi(t,e,n){const r=we(t,()=>e());if(r==null)throw new Error(n);return r}function P3e(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const o=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${o}.`)}}function bd(t,e=2){return re(t.slice(0,t.length-e))}function wd(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function qg(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[bd(t),...wd(t)]),e}function D3e(t,e=!1){let n=J().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=J().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&J().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((a,l)=>l>=t.length-2?_T(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=Xa(t).newShape);let o=re(t),s=null;t.length<=1&&o<=n?s=[1,o]:t.length===2&&t[0]<=n&&t[1]<=n?s=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?s=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?s=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?s=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(s=[t[0],t[1]*t[2]*t[3]]);const i=s!=null&&Math.max(...s)>r&&Math.min(...s)<=(e?2:1)&&Math.min(...s)>0;if(s==null||i)if(e){const a=bd(t);let l=2,u=2;t.length&&([l,u]=wd(t)),o=a*(l/2)*(u/2),s=E$(o).map(c=>c*2)}else s=E$(o);return s}function Xg(t){return t%2===0}function d0(t,e){if(t=t.slice(-2),e=e.slice(-2),at(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],r=e[e.length-1];if(n===r||Xg(n)&&Xg(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&Xg(t[0])&&Xg(e[0])}let Lw,Bw;function M3e(t){if(Lw==null){const e=gs(t);Lw=e.getParameter(e.MAX_TEXTURE_SIZE)}return Lw}function F3e(t){if(Bw==null){const e=gs(t);Bw=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Bw)}function L3e(t){if(t===0)return 0;let e;const n=gs(t);return _o(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:_o(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function _o(t,e){return t.getExtension(e)!=null}function EM(t){try{if(gs(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function B3e(t){if(t===0)return!1;const e=gs(t);if(t===1){if(!_o(e,"OES_texture_float"))return!1}else if(!_o(e,"EXT_color_buffer_float"))return!1;return lk(e)}function z3e(t){if(t===0)return!1;const e=gs(t);if(t===1){if(!_o(e,"OES_texture_float")||!_o(e,"WEBGL_color_buffer_float"))return!1}else{if(_o(e,"EXT_color_buffer_float"))return lk(e);const r="EXT_color_buffer_half_float";if(_o(e,r)){const o=e.getExtension(r);return j3e(e,o)}return!1}return lk(e)}function lk(t){const e=hN(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const s=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const i=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(s),i}function j3e(t,e){const n=hN(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(i),a}function W3e(t){return t!==2?!1:gs(t).fenceSync!=null}function Xm(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&P(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Te=J();Te.registerFlag("HAS_WEBGL",()=>Te.getNumber("WEBGL_VERSION")>0);Te.registerFlag("WEBGL_VERSION",()=>EM(2)?2:EM(1)?1:0);Te.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);Te.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Te.get("WEBGL_VERSION")===2);Te.registerFlag("WEBGL_CPU_FORWARD",()=>!0);Te.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);Te.registerFlag("WEBGL_PACK",()=>Te.getBool("HAS_WEBGL"));Te.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Te.getBool("WEBGL_PACK"));Te.registerFlag("WEBGL_PACK_CLIP",()=>Te.getBool("WEBGL_PACK"));Te.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Te.getBool("WEBGL_PACK"));Te.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Te.getBool("WEBGL_PACK"));Te.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Te.getBool("WEBGL_PACK"));Te.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Te.getBool("WEBGL_PACK"));Te.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Te.getBool("WEBGL_PACK"));Te.registerFlag("WEBGL_PACK_REDUCE",()=>Te.getBool("WEBGL_PACK"));Te.registerFlag("WEBGL_LAZILY_UNPACK",()=>Te.getBool("WEBGL_PACK"));Te.registerFlag("WEBGL_CONV_IM2COL",()=>Te.getBool("WEBGL_PACK"));Te.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>Te.getBool("WEBGL_PACK"));Te.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>M3e(Te.getNumber("WEBGL_VERSION")));Te.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>F3e(Te.getNumber("WEBGL_VERSION")));Te.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=Te.getNumber("WEBGL_VERSION");return t===0?0:L3e(t)});Te.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Te.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!mV());Te.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>B3e(Te.getNumber("WEBGL_VERSION")));Te.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Te.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Te.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));Te.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>z3e(Te.getNumber("WEBGL_VERSION")));Te.registerFlag("WEBGL_FENCE_API_ENABLED",()=>W3e(Te.getNumber("WEBGL_VERSION")));Te.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Te.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);Te.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});Te.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>mV()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});Te.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);Te.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);Te.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);Te.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);Te.registerFlag("WEBGL_EXP_CONV",()=>!1);Te.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Te.getBool("IS_TEST"));Te.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);Te.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);Te.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);Te.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cr(){let t,e,n,r,o,s,i,a,l,u;return J().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",o="texture",s="outputColor",i="out vec4 outputColor;",a=J().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",u=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",o="texture2D",s="gl_FragColor",i="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,u=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:o,output:s,defineOutput:i,defineSpecialNaN:a,defineSpecialInf:l,defineRound:u}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ku(t,e,n="index"){const r=Ee(e);return r.map((o,s)=>{const i=`int ${t[s]} = ${n} / ${o}`,a=s===r.length-1?`int ${t[s+1]} = ${n} - ${t[s]} * ${o}`:`index -= ${t[s]} * ${o}`;return`${i}; ${a};`}).join("")}function u1(t,e,n="index"){const r=Ee(e);return r.map((o,s)=>{const i=`int ${t[s]} = ${n} / outShapeStrides[${s}]`,a=s===r.length-1?`int ${t[s+1]} = ${n} - ${t[s]} * outShapeStrides[${s}]`:`index -= ${t[s]} * outShapeStrides[${s}]`;return`${i}; ${a};`}).join("")}function V3e(t,e){const n=t.length,r=t.map(s=>`${e}[${s}]`),o=new Array(n-1);o[n-2]=r[n-1];for(let s=n-3;s>=0;--s)o[s]=`(${o[s+1]} * ${r[s+1]})`;return o}function U3e(t,e,n="index"){const r=t.map((s,i)=>i),o=V3e(r,e);return o.map((s,i)=>{const a=`int ${t[i]} = ${n} / ${o[i]}`,l=i===o.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * ${o[i]}`:`index -= ${t[i]} * ${o[i]}`;return`${a}; ${l};`}).join("")}function pN(t){const e=Ee(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function mN(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const g6=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:y6}=_2e;function G3e(t,e,n){const r=[];if(t.forEach(h=>{const p=re(h.shapeInfo.logicalShape);if(h.shapeInfo.isUniform?r.push(`uniform float ${h.name}${p>1?`[${p}]`:""};`):(r.push(`uniform sampler2D ${h.name};`),r.push(`uniform int offset${h.name};`)),n.enableShapeUniforms){const{uniformShape:m}=gN(n.packedInputs,h.shapeInfo.logicalShape,h.shapeInfo.texShape);switch(m.length){case 1:r.push(`uniform int ${h.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${h.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${h.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${h.name}Shape;`);break}r.push(`uniform ivec2 ${h.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(h=>{r.push(`uniform ${h.type} ${h.name}${h.arrayIndex?`[${h.arrayIndex}]`:""};`)});const o=r.join(`
`),s=t.map(h=>H3e(h,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),i=e.texShape,a=cr(),l=X3e(a);let u,c,d=Z3e(a);return e.isPacked?(u=K3e(e.logicalShape,i,n.enableShapeUniforms),c=Q3e(a)):(u=q3e(e.logicalShape,i,n.enableShapeUniforms),c=Y3e(a)),n.packedInputs&&(d+=nBe),[d,l,c,o,u,s,n.userCode].join(`
`)}function Yd(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return pBe(t,e);case 1:return gBe(t,e);case 2:return vBe(t,e);case 3:return bBe(t,e);case 4:return SBe(t,e);case 5:return CBe(t);case 6:return $Be(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function v6(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return hBe(t);case 1:return mBe(t,e);case 2:return yBe(t,e);case 3:return xBe(t,e);default:return wBe(t,e)}}function H3e(t,e,n=!1,r){let o="";n?o+=v6(t,r):o+=Yd(t,r);const s=t.shapeInfo.logicalShape,i=e.logicalShape;return s.length<=i.length&&(n?o+=kBe(t,e):o+=IBe(t,e)),o}function K3e(t,e,n){switch(t.length){case 0:return x6();case 1:return rBe(t,e,n);case 2:return dBe(t,e,n);case 3:return sBe(t,e,n);default:return aBe(t,e,n)}}function q3e(t,e,n){switch(t.length){case 0:return x6();case 1:return oBe(t,e,n);case 2:return fBe(t,e,n);case 3:return iBe(t,e,n);case 4:return lBe(t,e,n);case 5:return uBe(t,e);case 6:return cBe(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function X3e(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function Y3e(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function Q3e(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function Z3e(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${J3e}
    ${eBe}
    ${tBe}
  `}const J3e=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,eBe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,tBe=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,nBe=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function x6(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function rBe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function oBe(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function sBe(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],o=Math.ceil(t[2]/2),s=o*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec3(b, r, c);
    }
  `}function iBe(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${u1(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=ku(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function aBe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],o=Math.ceil(t[t.length-1]/2),s=o*Math.ceil(t[t.length-2]/2);let i=s,a="",l="b, r, c";for(let u=2;u<t.length-1;u++)i*=t[t.length-u-1],a=`
      int b${u} = index / ${i};
      index -= b${u} * ${i};
    `+a,l=`b${u}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${a}

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec${t.length}(${l});
    }
  `}function lBe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${u1(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=ku(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function uBe(t,e){const n=ku(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function cBe(t,e){const n=ku(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function dBe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(at(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const o=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec2(r, c);
    }
  `}function fBe(t,e,n){return at(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function Iu(t){return`offset${t}`}function hBe(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=cr();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function pBe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[o,s]=t.shapeInfo.texShape;if(o===1&&s===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const i=Iu(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${i});
      return sampleTexture(${n}, uv);
    }
  `;const[a,l]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${a}, ${l}, ${i});
      return sampleTexture(${n}, uv);
    }
  `}function mBe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t.shapeInfo.texShape,s=cr();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${s.texture2D}(${n}, uv);
    }
  `;const i=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${i[0]}, ${i[1]}, index);
      return ${s.texture2D}(${n}, uv);
    }
  `}function gBe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${Qd(t)}
      }
    `;const o=t.shapeInfo.texShape,s=o[0],i=o[1];if(i===1&&s===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=Iu(n);return i===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${s}.0);
        return sampleTexture(${n}, uv);
      }
    `:s===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${i}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${a});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${s}, ${i}, index + ${a});
      return sampleTexture(${n}, uv);
    }
  `}function yBe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape,i=s[0],a=s[1],l=cr();if(s!=null&&at(n,s))return e?`
      vec4 ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${i}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${o}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],c=Math.ceil(n[1]/2);return`
    vec4 ${o}(int row, int col) {
      vec2 uv = packedUVfrom2D(${c}, ${u[0]}, ${u[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function vBe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape;if(s!=null&&at(n,s)){if(e)return`
      float ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const f=s[0],h=s[1];return`
    float ${o}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${h}.0, ${f}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:i,keptDims:a}=Xa(n),l=i;if(l.length<n.length){const f=Zd(t,l),h=["row","col"];return`
      ${Yd(f,e)}
      float ${o}(int row, int col) {
        return ${o}(${Jd(h,a)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${o}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${Qd(t)}
      }
    `;const u=s[0],c=s[1],d=Iu(r);return c===1?e?`
      float ${o}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${o}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);
      return sampleTexture(${r}, uv);
    }
  `:u===1?e?`
      float ${o}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${o}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${o}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${o}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${d};
    vec2 uv = uvFromFlat(${u}, ${c}, index);
    return sampleTexture(${r}, uv);
  }
`}function xBe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape,i=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];if(n[0]===1){const f=n.slice(1),h=[1,2],p=Zd(t,f),m=["b","row","col"];return`
        ${v6(p,e)}
        vec4 ${o}(int b, int row, int col) {
          return ${o}(${Jd(m,h)});
        }
      `}const a=cr();if(e)return`
    vec4 ${o}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `;const l=i[0],u=i[1],c=Math.ceil(n[2]/2),d=c*Math.ceil(n[1]/2);return`
    vec4 ${o}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${u}, ${d}, ${c}, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `}function bBe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n[1]*n[2],i=n[2],{newShape:a,keptDims:l}=Xa(n),u=a;if(u.length<n.length){const m=Zd(t,u),g=["row","col","depth"];return`
        ${Yd(m,e)}
        float ${o}(int row, int col, int depth) {
          return ${o}(${Jd(g,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${s}, ${i}, 1)));
        ${Qd(t)}
      }
    `;const c=t.shapeInfo.texShape,d=c[0],f=c[1],h=t.shapeInfo.flatOffset;if(f===s&&h==null)return e?`
      float ${o}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${o}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${i}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${f}.0, ${d}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(f===i&&h==null)return e?`
      float ${o}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${o}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${f}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `;const p=Iu(r);return e?`
    float ${o}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${p};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${o}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${s} + col * ${i} + depth + ${p};
        vec2 uv = uvFromFlat(${d}, ${f}, index);
        return sampleTexture(${r}, uv);
      }
  `}function wBe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=cr();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${o.texture2D}(${n}, uv);
    }
  `;const s=t.shapeInfo.logicalShape,i=s.length,a=t.shapeInfo.texShape,l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],u=l[0],c=l[1],d=Math.ceil(s[i-1]/2);let f=d*Math.ceil(s[i-2]/2),h="int b, int row, int col",p=`b * ${f} + (row / 2) * ${d} + (col / 2)`;for(let m=2;m<i-1;m++)h=`int b${m}, `+h,f*=s[i-m-1],p=`b${m} * ${f} + `+p;return`
    vec4 ${r}(${h}) {
      int index = ${p};
      int texR = index / ${c};
      int texC = index - texR * ${c};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}, ${u});
      return ${o.texture2D}(${n}, uv);
    }
  `}function SBe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n[3],i=n[2]*s,a=n[1]*i,{newShape:l,keptDims:u}=Xa(n);if(l.length<n.length){const v=Zd(t,l),b=["row","col","depth","depth2"];return`
      ${Yd(v,e)}
      float ${o}(int row, int col, int depth, int depth2) {
        return ${o}(${Jd(b,u)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${i}, ${s}, 1)));
        ${Qd(t)}
      }
    `;const c=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,f=d[0],h=d[1],p=`int stride2 = ${r}Shape[3];`,m=`int stride1 = ${r}Shape[2] * stride2;`,g=`int stride0 = ${r}Shape[1] * stride1;`;if(h===a&&c==null)return e?`
      float ${o}(int row, int col, int depth, int depth2) {
        ${p}
        ${m}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${i}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${f}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(h===s&&c==null)return e?`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${f}.0);
        return sampleTexture(${r}, uv);
      }
    `;const y=Iu(r);return e?`
    float ${o}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${p}
      ${m}
      ${g}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${y});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${o}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${i} +
          depth * ${s} + depth2;
      vec2 uv = uvFromFlat(${f}, ${h}, index + ${y});
      return sampleTexture(${r}, uv);
    }
  `}function CBe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e[4],s=e[3]*o,i=e[2]*s,a=e[1]*i,{newShape:l,keptDims:u}=Xa(e);if(l.length<e.length){const m=Zd(t,l),g=["row","col","depth","depth2","depth3"];return`
      ${Yd(m)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${Jd(g,u)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${i}, ${s}, ${o})) +
          depth3;
        ${Qd(t)}
      }
    `;const c=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,f=d[0],h=d[1];if(h===a&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${i}, ${s}, ${o}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(h===o&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;const p=Iu(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${i} + depth * ${s} +
          depth2 * ${o} + depth3 + ${p};
      vec2 uv = uvFromFlat(${f}, ${h}, index);
      return sampleTexture(${n}, uv);
    }
  `}function $Be(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:o,keptDims:s}=Xa(e);if(o.length<e.length){const g=Zd(t,o),y=["row","col","depth","depth2","depth3","depth4"];return`
      ${Yd(g)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${Jd(y,s)});
      }
    `}const i=e[5],a=e[4]*i,l=e[3]*a,u=e[2]*l,c=e[1]*u;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${c}, ${u}, ${l}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${i}, 1)));
        ${Qd(t)}
      }
    `;const d=t.shapeInfo.flatOffset,f=t.shapeInfo.texShape,h=f[0],p=f[1];if(p===c&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${u}, ${l}, ${a}, ${i})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(p===i&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;const m=Iu(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${c} + col * ${u} + depth * ${l} +
          depth2 * ${a} + depth3 * ${i} + depth4 + ${m};
      vec2 uv = uvFromFlat(${h}, ${p}, index);
      return sampleTexture(${n}, uv);
    }
  `}function Qd(t){const e=t.name,n=re(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function kBe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),o="get"+r+"AtOutCoords",s=t.shapeInfo.logicalShape.length,i=e.logicalShape.length,a=y6(t.shapeInfo.logicalShape,e.logicalShape),l=gt(i),u=i-s;let c;const d=["x","y","z","w","u","v"];s===0?c="":i<2&&a.length>=1?c="coords = 0;":c=a.map(v=>`coords.${d[v+u]} = 0;`).join(`
`);let f="";i<2&&s>0?f="coords":f=t.shapeInfo.logicalShape.map((v,b)=>`coords.${d[b+u]}`).join(", ");let h="return outputValue;";const m=re(t.shapeInfo.logicalShape)===1,y=re(e.logicalShape)===1;if(s===1&&!m&&!y)h=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(m&&!y)i===1?h=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:h=`
        return vec4(outputValue.x);
      `;else if(a.length){const v=s-2,b=s-1;a.indexOf(v)>-1&&a.indexOf(b)>-1?h="return vec4(outputValue.x);":a.indexOf(v)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(b)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${o}() {
      ${l} coords = getOutputCoords();
      ${c}
      vec4 outputValue = get${r}(${f});
      ${h}
    }
  `}function IBe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),o="get"+r+"AtOutCoords",s=e.texShape,i=t.shapeInfo.texShape,a=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&a===l&&t.shapeInfo.flatOffset==null&&at(i,s))return`
      float ${o}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const u=gt(l),c=y6(t.shapeInfo.logicalShape,e.logicalShape),d=l-a;let f;const h=["x","y","z","w","u","v"];a===0?f="":l<2&&c.length>=1?f="coords = 0;":f=c.map(m=>`coords.${h[m+d]} = 0;`).join(`
`);let p="";return l<2&&a>0?p="coords":p=t.shapeInfo.logicalShape.map((m,g)=>`coords.${h[g+d]}`).join(", "),`
    float ${o}() {
      ${u} coords = getOutputCoords();
      ${f}
      return get${r}(${p});
    }
  `}function gt(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function gN(t,e,n){const{newShape:r,keptDims:o}=Xa(e),s=e.length,i=t&&s===3&&e[0]===1,a=i?e.slice(1):r,l=!t&&s>1&&!at(e,n)&&r.length<s||i;return{useSqueezeShape:l,uniformShape:l?a:e,keptDims:o}}function Zd(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function Jd(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TBe(t,e,n,r){const o=n.map((c,d)=>{const f={logicalShape:c.shape,texShape:c.isUniform?null:c.texData.texShape,isUniform:c.isUniform,isPacked:c.isUniform?!1:c.texData.isPacked,flatOffset:null};return c.texData!=null&&c.texData.slice!=null&&c.texData.slice.flatOffset>0&&(f.flatOffset=c.texData.slice.flatOffset),{name:e.variableNames[d],shapeInfo:f}}),s=o.map(c=>c.shapeInfo),i={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},a=G3e(o,i,e),l=b3e(t.gl,a),u=t.createProgram(l);return J().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:a,webGLProgram:u,inShapeInfos:s,outShapeInfo:i,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(u),Object.assign({program:e,fragmentShader:l,source:a,webGLProgram:u,inShapeInfos:s,outShapeInfo:i},b6(t,e,u)))}function b6(t,e,n){const r=[],o=[];let s,i,a,l=null,u=null;u=t.getUniformLocation(n,"NAN",!1),J().getNumber("WEBGL_VERSION")===1&&(l=t.getUniformLocation(n,"INFINITY",!1));const c=!1;for(const d of e.variableNames){const f={name:d,uniform:t.getUniformLocation(n,d,c),offset:t.getUniformLocation(n,`offset${d}`,c)};e.enableShapeUniforms&&(f.shape=t.getUniformLocation(n,`${d}Shape`,c),f.texShape=t.getUniformLocation(n,`${d}TexShape`,c)),r.push(f)}if(e.enableShapeUniforms&&(s=t.getUniformLocation(n,"outShape",c),a=t.getUniformLocation(n,"outShapeStrides",c),i=t.getUniformLocation(n,"outTexShape",c)),e.customUniforms)for(const d of e.customUniforms)o.push(t.getUniformLocation(n,d.name,c));return{variablesLocations:r,customUniformLocations:o,infLoc:l,nanLoc:u,outShapeLocation:s,outShapeStridesLocation:a,outTexShapeLocation:i}}function NM(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const o=n.logicalShape,s=e[r],i=s.shape;if(!at(o,i))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${o} and ${i} must match`);if(n.isUniform&&s.isUniform)return;const a=n.texShape,l=s.isUniform?null:s.texData.texShape;if(!at(a,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${l} must match`)})}function EBe(t,e,n,r,o){e.program.enableShapeUniforms||(NM(e.inShapeInfos,n),NM([e.outShapeInfo],[r]));const s=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(s.texture,i[0],i[1]):t.setOutputMatrixTexture(s.texture,i[0],i[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),J().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let l=0;l<n.length;++l){const u=n[l],{uniform:c,offset:d,shape:f,texShape:h}=e.variablesLocations[l];if(f){const{uniformShape:p}=gN(e.program.packedInputs,u.shape,u.texData.texShape);switch(p.length){case 1:t.gl.uniform1iv(f,new Int32Array(p));break;case 2:t.gl.uniform2iv(f,new Int32Array(p));break;case 3:t.gl.uniform3iv(f,new Int32Array(p));break;case 4:t.gl.uniform4iv(f,new Int32Array(p));break}}if(h&&t.gl.uniform2i(h,u.texData.texShape[0],u.texData.texShape[1]),c!=null){if(u.isUniform){if(re(u.shape)<2)t.gl.uniform1f(c,u.uniformValues[0]);else{let p=u.uniformValues;p instanceof Float32Array||(p=new Float32Array(p)),t.gl.uniform1fv(c,p)}continue}u.texData.slice!=null&&d!=null&&t.gl.uniform1i(d,u.texData.slice.flatOffset),t.setInputMatrixTexture(u.texData.texture.texture,c,l)}}const a=e.outShapeLocation;if(a)switch(r.shape.length){case 1:t.gl.uniform1iv(a,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(a,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(a,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(a,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=Ee(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&o)for(let l=0;l<e.program.customUniforms.length;++l){const u=e.program.customUniforms[l],c=e.customUniformLocations[l],d=o[l];if(u.type==="float")t.gl.uniform1fv(c,d);else if(u.type==="vec2")t.gl.uniform2fv(c,d);else if(u.type==="vec3")t.gl.uniform3fv(c,d);else if(u.type==="vec4")t.gl.uniform4fv(c,d);else if(u.type==="int")t.gl.uniform1iv(c,d);else if(u.type==="ivec2")t.gl.uniform2iv(c,d);else if(u.type==="ivec3")t.gl.uniform3iv(c,d);else if(u.type==="ivec4")t.gl.uniform4iv(c,d);else throw Error(`uniform type ${u.type} is not supported yet.`)}t.executeProgram()}function NBe(t,e,n){let r="";e.concat(n).forEach(i=>{const a=i.texData!=null&&i.texData.slice!=null&&i.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!i.isUniform){const l=i.texData.texShape,{useSqueezeShape:u,uniformShape:c,keptDims:d}=gN(t.packedInputs,i.shape,l);let f="",h="",p="";if(c.length===1&&t.packedInputs){const w=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];f=`${w[0]>1}_${w[1]>1}`}else if(c.length===2&&!t.packedInputs)h=`${c[0]>1}_${c[1]>1}`;else if(c.length>2&&!t.packedInputs){const w=Ee(c);p=`${w[0]===l[1]}_${w[w.length-1]===l[1]}`}const m=i.shape.length,g=c.length===2&&at(i.shape,l),y=re(i.shape)===1,v=fd(i.shape,n.shape),b=!t.packedInputs&&m===n.shape.length&&at(l,n.texData.texShape),x=t.packedInputs||c.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${m}_${b}_${u?d:""}_${c.length}_${y}_${v}_${g}_${f}_${h}_${p}_${x}_${a}`}else{const l=i.isUniform?"uniform":i.texData.texShape;r+=`${i.shape}_${l}_${a}`}});const o=t.userCode;let s=t.constructor.name;return s+="_"+r+"_"+o+`${J().getNumber("WEBGL_VERSION")}`,s}function qn(t){return J().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ABe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=mp.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=cr();this.outputShape=e,this.enableShapeUniforms=qn(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?u1(["r","c","d"],e):ku(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OBe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=mp.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=cr();this.outputShape=e,this.enableShapeUniforms=qn(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?u1(["r","c","d"],e):ku(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Be{constructor(e){this.variableNames=["A"],this.outTexUsage=eo.DOWNLOAD;const n=cr();this.outputShape=e,this.userCode=`
      ${g6}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RBe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=eo.DOWNLOAD;const n=cr();this.outputShape=e,this.userCode=`
      ${g6}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PBe={R:0,G:1,B:2,A:3};class AM{constructor(e,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const o=cr();this.outputShape=e,this.enableShapeUniforms=qn(this.outputShape.length);let s="result";n&&(s="floor(result * 255. + 0.5)");let i="";for(let a=0;a<r.length;a++){const l=r[a];i+=`
          if(offset == ${a}) {
            result = values[${PBe[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?mN():pN(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${o.texture2D}(A, uv);
          ${i}
        }
        ${o.output} = vec4(${s}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DBe{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=cr();this.outputShape=e,this.enableShapeUniforms=qn(this.outputShape.length);let o="",s="result";n&&(s="floor(result * 255. + 0.5)");for(let i=0;i<=1;i++)for(let a=0;a<=1;a++){const l=i*2+a;o+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${i} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${i};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?mN():pN(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${o}

          ${r.output} = ${s};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MBe(t){const e=cr(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return x3e(t,n)}function FBe(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return $3e(t,e)}function LBe(t){const e=new Uint16Array([0,1,2,2,1,3]);return k3e(t,e)}function Ym(t,e,n,r,o,s){T3e(e,n);const i=I3e(t),a=t.TEXTURE_2D;return we(t,()=>t.bindTexture(a,i)),we(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),we(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),we(t,()=>t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST)),we(t,()=>t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST)),J().getNumber("WEBGL_VERSION")===1?we(t,()=>t.texImage2D(a,0,r,e,n,0,o,s,null)):we(t,()=>t.texStorage2D(a,1,r,e,n)),we(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:i,texShape:[n,e]}}function w6(t){return t.internalFormatFloat}function BBe(t,e,n,r){const[o,s]=qm(e,n);return Ym(t,o,s,w6(r),r.textureFormatFloat,t.FLOAT)}function S6(t){return t.internalFormatHalfFloat}function zBe(t,e,n,r){const[o,s]=qm(e,n);return Ym(t,o,s,S6(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function C6(t){return t.downloadTextureFormat}function jBe(t,e,n,r){const[o,s]=qm(e,n);return Ym(t,o,s,C6(r),t.RGBA,t.UNSIGNED_BYTE)}function $6(t){return t.internalFormatPackedFloat}function WBe(t,e,n,r){const[o,s]=Xd(e,n);return Ym(t,o,s,$6(r),t.RGBA,t.FLOAT)}function k6(t){return t.internalFormatPackedHalfFloat}function VBe(t,e,n,r){const[o,s]=Xd(e,n);return Ym(t,o,s,k6(r),t.RGBA,r.textureTypeHalfFloat)}function UBe(t,e,n){return we(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),IM(t,e,"clipSpacePos",n,3,20,0)&&IM(t,e,"uv",n,2,20,12)}function GBe(t,e,n,r,o,s){we(t,()=>t.bindTexture(t.TEXTURE_2D,e));let i,a,l;o instanceof Uint8Array?(i=new Uint8Array(n*r*4),a=t.UNSIGNED_BYTE,l=t.RGBA):(i=new Float32Array(n*r*4),a=t.FLOAT,l=s.internalFormatPackedFloat),i.set(o),J().getNumber("WEBGL_VERSION")===2?we(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,a,i)):we(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,a,i)),we(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function HBe(t,e,n){we(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?J().getNumber("WEBGL_VERSION")===2?we(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):we(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):J().getNumber("WEBGL_VERSION")===2?we(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):we(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),we(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function KBe(t,e,n,r){const o=t.createBuffer();we(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,o));const a=4*4*e*n;return we(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)),we(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),we(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),o}function qBe(t,e,n){const r=t,o=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,o),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),o}function XBe(t,e,n,r){const[o,s]=qm(e,n),i=4,a=new Uint8Array(f3e(e*n,i));return we(t,()=>t.readPixels(0,0,o,s,r.downloadTextureFormat,t.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function YBe(t,e,n,r,o,s,i,a){const l=t,u=new Float32Array(h3e(s,i));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}function QBe(t,e,n){const r=new Float32Array(e*n*4);return we(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zw{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=J().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,u3e(n,e)):this.gl=gs(n),e=this.gl,J().getNumber("WEBGL_VERSION")===2){const s=e;this.createVertexArray=()=>we(s,()=>s.createVertexArray()),this.bindVertexArray=i=>we(s,()=>s.bindVertexArray(i)),this.deleteVertexArray=i=>we(s,()=>s.deleteVertexArray(i)),this.getVertexArray=()=>we(s,()=>s.getParameter(s.VERTEX_ARRAY_BINDING))}else if(e!=null){const s=e.getExtension("OES_vertex_array_object");if(s==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>we(e,()=>s.createVertexArrayOES()),this.bindVertexArray=i=>we(e,()=>s.bindVertexArrayOES(i)),this.deleteVertexArray=i=>we(e,()=>s.deleteVertexArrayOES(i)),this.getVertexArray=()=>we(e,()=>e.getParameter(s.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const o="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),J().getNumber("WEBGL_VERSION")===1){const s="OES_texture_float",i="OES_texture_half_float";if(this.textureFloatExtension=Hg(this.gl,s),_o(this.gl,i))this.textureHalfFloatExtension=Hg(this.gl,i);else if(J().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),_o(this.gl,o))this.colorBufferHalfFloatExtension=Hg(this.gl,o);else if(J().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",_o(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(_o(this.gl,o))this.colorBufferHalfFloatExtension=this.gl.getExtension(o);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=FBe(this.gl),this.indexBuffer=LBe(this.gl),this.framebuffer=E3e(this.gl),this.textureConfig=hN(this.gl,this.textureHalfFloatExtension)}get debug(){return J().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;we(e,()=>e.finish()),we(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),we(e,()=>e.deleteFramebuffer(this.framebuffer)),we(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),we(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),we(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),BBe(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),zBe(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),jBe(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),HBe(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,o){this.throwIfDisposed(),GBe(this.gl,e,n,r,o,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),VBe(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),WBe(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(TM(this.gl,this.framebuffer),this.outputTexture=null),we(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>XBe(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,o,s,i){return YBe(this.gl,e,n,r,o,s,i,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return qBe(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const o=KBe(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),o}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(J().getBool("WEBGL_FENCE_API_ENABLED")){const o=e,s=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const i=o.clientWaitSync(s,0,0);return i===o.ALREADY_SIGNALED||i===o.CONDITION_SATISFIED},n=s}else J().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,J().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>QBe(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=MBe(n));const r=S3e(n);we(n,()=>n.attachShader(r,this.vertexShader)),we(n,()=>n.attachShader(r,e)),C3e(n,r);const o=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&Mw(n,o),o}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;we(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),UBe(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(we(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&Mw(this.gl,this.program),we(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?A3e(this.gl,e,n):O3e(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),we(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),_3e(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[o,s]=Xd(n,r);this.setOutputMatrixTextureDriver(e,o,s)}setOutputMatrixWriteRegion(e,n,r,o){this.setOutputMatrixWriteRegionDriver(r,e,o,n)}setOutputPackedMatrixWriteRegion(e,n,r,o){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&Mw(this.gl,this.program),Kg(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}we(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),we(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Hg(this.gl,J().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(J().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,o=this.getQueryTimerExtensionWebGL2(),s=r.createQuery();return r.beginQuery(o.TIME_ELAPSED_EXT,s),s}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(J().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await mD(()=>this.disposed||this.isQueryAvailable(e,J().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,J().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,o=this.getQueryTimerExtensionWebGL2(),s=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),s&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),o=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),o&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=ZBe(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in J().platform&&(r=J().platform.setTimeoutCustom.bind(J().platform)),mD(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),Fw(this.gl,e,this.framebuffer),this.debug&&Kg(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(Fw(this.gl,this.outputTexture,this.framebuffer),this.debug&&Kg(this.gl)):TM(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const o=this.gl;Fw(o,e,this.framebuffer),this.debug&&Kg(o),this.outputTexture=e,we(o,()=>o.viewport(0,0,n,r)),we(o,()=>o.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,o){this.throwIfDisposed(),we(this.gl,()=>this.gl.scissor(e,n,r,o))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function ZBe(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:JBe,bincountImpl:I6,bincountReduceImpl:eze,bitwiseAndImpl:tze,castImpl:nze,ceilImpl:rze,concatImpl:oze,equalImpl:sze,expImpl:ize,expm1Impl:aze,floorImpl:lze,gatherNdImpl:uze,gatherV2Impl:cze,greaterImpl:dze,greaterEqualImpl:fze,lessImpl:hze,lessEqualImpl:pze,linSpaceImpl:mze,logImpl:gze,maxImpl:yze,maximumImpl:vze,minimumImpl:xze,multiplyImpl:bze,negImpl:wze,notEqualImpl:Sze,prodImpl:Cze,raggedGatherImpl:$ze,raggedRangeImpl:kze,raggedTensorToTensorImpl:Ize,rangeImpl:Tze,rsqrtImpl:Eze,scatterImpl:Nze,sigmoidImpl:Aze,simpleAbsImpl:T6,sliceImpl:Oze,sparseFillEmptyRowsImpl:_ze,sparseReshapeImpl:Rze,sparseSegmentReductionImpl:E6,sqrtImpl:Pze,staticRegexReplaceImpl:Dze,stridedSliceImpl:Mze,stringNGramsImpl:Fze,stringSplitImpl:Lze,stringToHashBucketFastImpl:Bze,subImpl:zze,tileImpl:jze,topKImpl:Wze,transposeImpl:yN,uniqueImpl:Vze}=HRe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N6(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function or(t,e){return e===1?[t]:N6(t,e)}function Uze(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Gze{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=qn(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=or("rc",this.rank),r=gt(this.rank),o=this.getOutOfBoundsCondition(n),s=this.getSetup(n),i=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${o}) {
            setOutput(vec4(0));
          } else {
            ${s}

            setOutput(vec4(${i}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let o=0;o<=1;o++){let s=`${r===0?"r":"rp1"}, ${o===0?"c":"cp1"}`;for(let i=2;i<this.rank;i++)s=`${e[e.length-1-i]},`+s;n.push(s)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],o=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${o};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class A6{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=qn(this.outputShape.length);let r="";for(let o=0;o<4;o++){let s="thisRC = rc;";o%2===1&&(s+="thisRC.z += 1;"),o>1&&(s+="thisRC.y += 1;"),r+=`
        ${s}
        ${o>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${o}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${o>0?"}":""}
      `}this.userCode=`
      ${Hze(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?mN():pN(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function Hze(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?U3e(["r","c","d"],"inputShape"):ku(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Kze{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,r){const o=_M(n,r),s=RM(e,o,r);s in this.freeTextures||(this.freeTextures[s]=[]),s in this.usedTextures||(this.usedTextures[s]=[]);const i=OM(e,o,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[s].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=i,this.log();const l=this.freeTextures[s].pop();return this.usedTextures[s].push(l),l}let a;return o===Rn.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):o===Rn.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):o===Rn.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):o===Rn.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):o===Rn.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[s].push(a),this.numUsedTextures++,this._numBytesAllocated+=i,this.log(),a}releaseTexture(e,n,r,o){if(this.freeTextures==null)return;const s=_M(r,o),i=RM(n,s,o);i in this.freeTextures||(this.freeTextures[i]=[]);const a=OM(n,s,this.gpgpu.gl,this.gpgpu.textureConfig,o),l=J().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=a):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const u=this.usedTextures[i],c=u&&u.indexOf(e);if(c==null||c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u[c]=u[u.length-1],u.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function qze(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function OM(t,e,n,r,o){const s=Xze(e,r);let i;if(o){const[l,u]=Xd(t[0],t[1]);i=l*u}else{const[l,u]=qm(t[0],t[1]);i=l*u}const a=qze(n,s);return i*a}function Xze(t,e){switch(t){case Rn.PACKED_2X2_FLOAT32:return $6(e);case Rn.PACKED_2X2_FLOAT16:return k6(e);case Rn.UNPACKED_FLOAT32:return w6(e);case Rn.UNPACKED_FLOAT16:return S6(e);case Rn.PACKED_4X1_UNSIGNED_BYTE:return C6(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function Yze(t){return J().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Rn.PACKED_2X2_FLOAT32:Rn.UNPACKED_FLOAT32:t?Rn.PACKED_2X2_FLOAT16:Rn.UNPACKED_FLOAT16}function _M(t,e){if(t===eo.UPLOAD)return Rn.PACKED_2X2_FLOAT32;if(t===eo.RENDER||t==null)return Yze(e);if(t===eo.DOWNLOAD||t===eo.PIXELS)return Rn.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function RM(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ps{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=qn(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const Vo="if (isnan(x)) return x;",Qze="return x;",PM="return abs(x);",Zze="return (x >= 0.0) ? x : (exp(x) - 1.0);",Jze=Vo+`
  return (x < 0.0) ? 0.0 : x;
`,eje=Vo+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Ji="return x;",tje="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nje="return x;",rje=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,oje=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,sje=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,ije="return 1.0 / (1.0 + exp(-1.0 * x));";class fa{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=qn(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aje{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=qn(this.outputShape.length);const n=e.length,r=or("rc",n),o=gt(n),s=Uze(n,r),i=r.slice(-2),a=n<=1?"rc":`vec2(${i.join(",")})`;this.userCode=`
      void main() {
        ${o} rc = getOutputCoords();
        vec4 packedInput = getA(${s});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lje=rU,uje=1e-7,cje=1e-4,Yg={};function dje(t){return t in Yg||(Yg[t]={}),Yg[t]}const fje=J().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),hje=600;function pje(){return J().global.screen==null?1024:J().global.screen.height*J().global.screen.width*window.devicePixelRatio*hje/1024/1024}class c1 extends OT{nextDataId(){return c1.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!J().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof zw)n=e;else{const r=gs(J().getNumber("WEBGL_VERSION"),e);n=new zw(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=gs(J().getNumber("WEBGL_VERSION"));n=new zw(r),this.binaryCache=dje(J().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new Kze(this.gpgpu),this.numMBBeforeWarning=pje(),this.texData=new CW(this,$s())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,r,o,s,i){const a=this.makeTensorInfo(n,r),l=this.texData.get(a.dataId);l.isPacked=!1,l.texture={texture:e,texShape:[o,s]},l.texShape=[o,s];const u=qg(n),c=new AM(u,!1,i),d=this.runWebGLProgram(c,[a],r,[[o,s]]);return d.shape=n,l.texture=null,this.disposeIntermediateTensorInfo(a),d.dataId}write(e,n,r){if((J().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||J().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const o={id:this.nextDataId()};return this.texData.set(o,{shape:n,dtype:r,values:e,usage:eo.UPLOAD,refCount:1}),o}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,o,s){if(J().getBool("DEBUG")&&this.checkNumericalProblems(n),o==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:o,values:n,usage:eo.UPLOAD,refCount:s})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:o,complexTensorInfos:s,slice:i,shape:a,isPacked:l}=n;if(i!=null){let f;l?f=new fa(a,Ji):f=new Ps(a,Ji);const h=this.runWebGLProgram(f,[{dataId:e,shape:a,dtype:o}],o),p=this.readSync(h.dataId);return this.disposeIntermediateTensorInfo(h),p}if(r!=null)return this.convertAndCacheOnCPU(e);if(o==="string")return r;const u=this.activeTimers!=null;let c;u&&(c=pr());let d;if(o==="complex64"){const f=this.readSync(s.real.dataId),h=this.readSync(s.imag.dataId);d=Pi(f,h)}else d=this.getValuesFromTexture(e);return u&&(this.downloadWaitMs+=pr()-c),this.convertAndCacheOnCPU(e,d)}async read(e){if(this.pendingRead.has(e)){const p=this.pendingRead.get(e);return new Promise(m=>p.push(m))}const n=this.texData.get(e),{values:r,shape:o,slice:s,dtype:i,complexTensorInfos:a,isPacked:l}=n;if(s!=null){let p;l?p=new fa(o,Ji):p=new Ps(o,Ji);const m=this.runWebGLProgram(p,[{dataId:e,shape:o,dtype:i}],i),g=this.read(m.dataId);return this.disposeIntermediateTensorInfo(m),g}if(r!=null)return this.convertAndCacheOnCPU(e);if(J().getBool("DEBUG")&&!J().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&J().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u=null,c;if(i!=="complex64"&&J().get("WEBGL_BUFFER_SUPPORTED")){c=this.decode(e);const p=this.texData.get(c.dataId);u=this.gpgpu.createBufferFromTexture(p.texture.texture,...Gg(o))}this.pendingRead.set(e,[]),i!=="complex64"&&await this.gpgpu.createAndWaitForFence();let d;if(i==="complex64"){const p=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]),m=p[0],g=p[1];d=Pi(m,g)}else if(u==null)d=this.getValuesFromTexture(e);else{const p=re(o);d=this.gpgpu.downloadFloat32MatrixFromBuffer(u,p)}if(c!=null&&this.disposeIntermediateTensorInfo(c),u!=null){const p=this.gpgpu.gl;we(p,()=>p.deleteBuffer(u))}const f=this.convertAndCacheOnCPU(e,d),h=this.pendingRead.get(e);return this.pendingRead.delete(e),h.forEach(p=>p(f)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&$s().removeDataId(e,this),this.pendingDeletes--),f}readToGPU(e,n={}){const r=this.texData.get(e),{values:o,shape:s,slice:i,dtype:a,isPacked:l,texture:u}=r;if(a==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(i!=null){let h;l?h=new fa(s,Ji):h=new Ps(s,Ji);const p=this.runWebGLProgram(h,[{dataId:e,shape:s,dtype:a}],a),m=this.readToGPU(p,n);return this.disposeIntermediateTensorInfo(p),m}if(u==null)throw o!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const c=this.decode(e,n.customTexShape),d=$s().makeTensorFromTensorInfo(c),f=this.texData.get(c.dataId);return Object.assign({tensorRef:d},f.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(o=>Da(o));return Ue(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Ue(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!y3e(r))throw J().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:o}=this.texData.get(e),s=re(n);if(J().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const f=this.decode(e),h=this.texData.get(f.dataId),p=this.gpgpu.downloadMatrixFromPackedTexture(h.texture.texture,...Gg(n)).subarray(0,s);return this.disposeIntermediateTensorInfo(f),p}const i=J().getBool("WEBGL_PACK")&&o===!0,a=i?qg(n):n,l=i?new RBe(a):new _Be(a),u=this.runWebGLProgram(l,[{shape:a,dtype:r,dataId:e}],"float32"),c=this.texData.get(u.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,s);return this.disposeIntermediateTensorInfo(u),d}timerAvailable(){return J().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let o=!1;this.programTimersStack==null?(this.programTimersStack=r,o=!0):this.activeTimers.push(r),this.activeTimers=r,e();const s=eu(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),i=eu(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,o&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(J().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(s);a.kernelMs=XSe(l),a.getExtraProfileInfo=()=>l.map((u,c)=>({name:i[c],ms:u})).map(u=>`${u.name}: ${u.ms}`).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return J().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:pr(),endMs:null}}endTimer(e){return J().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=pr(),e)}async getQueryTime(e){if(J().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:o,usage:s,isPacked:i,slice:a}=this.texData.get(e),l=a&&a.origDataId||e,u=this.dataRefCount.get(l);u>1?this.dataRefCount.set(l,u-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(o,r),this.textureManager.releaseTexture(n,o,s,i)));const c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=fje){return J().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&re(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){Zr("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return lje(e.shape,n)}packedUnaryOp(e,n,r){const o=new fa(e.shape,n),s=this.compileAndRun(o,[e],r);return $s().makeTensorFromTensorInfo(s)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const o=T6(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,o)}if(J().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,PM,e.dtype);const n=new Ps(e.shape,PM),r=this.compileAndRun(n,[e]);return $s().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let o;if(n==="string"&&r!=null&&r.length>0&&Dp(r[0])){const s=r.map(i=>$a(i));o=this.write(s,e,n)}else o=this.write(r,e,n);return this.texData.get(o).usage=null,{dataId:o,shape:e,dtype:n}}makeOutput(e,n,r){return $s().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new aje(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new Gze(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const r=[bd(e.shape),...wd(e.shape)],o={dtype:e.dtype,shape:r,dataId:e.dataId},s=[bd(n),...wd(n)],i=new A6(s,r),a=!0,l=[r],u=this.runWebGLProgram(i,[o],e.dtype,l,a);return{dataId:u.dataId,shape:n,dtype:u.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:o,shape:s,dtype:i}=r;if(n!=null){const f=re(s),h=n[0]*n[1]*4;P(f<=h,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const a=qg(s);let l;o?l=new OBe(a):l=new ABe(a);const u=!0,c=[n??Gg(a)],d=this.runWebGLProgram(l,[{shape:a,dtype:i,dataId:e}],i,c,u,n);return{dtype:i,shape:s,dataId:d.dataId}}runWebGLProgram(e,n,r,o,s=!1,i){const a=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(a.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===mp.DENSE){const y=i??Gg(e.outputShape);l.texShape=y.map(v=>v*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),re(a.shape)===0)return l.values=Gn(a.dtype,0),a;const u=[],c=n.map(y=>{if(y.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let v=this.texData.get(y.dataId);if(v.texture==null){if(!e.packedInputs&&re(y.shape)<=J().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:y.shape,texData:null,isUniform:!0,uniformValues:v.values};e.packedInputs&&(v.isPacked=!0,v.shape=y.shape)}if(this.uploadToGPU(y.dataId),!!v.isPacked!=!!e.packedInputs)y=v.isPacked?this.unpackTensor(y):this.packTensor(y),u.push(y),v=this.texData.get(y.dataId);else if(v.isPacked&&!d0(v.shape,y.shape)){const b=y,x=y.shape;y.shape=v.shape,y=this.packedReshape(y,x),u.push(y),v=this.texData.get(y.dataId),b.shape=x}return{shape:y.shape,texData:v,isUniform:!1}});this.uploadToGPU(a.dataId);const d={shape:a.shape,texData:l,isUniform:!1},f=NBe(e,c,d),h=this.getAndSaveBinary(f,()=>TBe(this.gpgpu,e,c,d)),p=this.activeTimers!=null;let m;p&&(m=this.startTimer()),J().get("ENGINE_COMPILE_ONLY")||EBe(this.gpgpu,h,c,d,o),u.forEach(y=>this.disposeIntermediateTensorInfo(y)),p&&(m=this.endTimer(m),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(m)}));const g=J().getNumber("WEBGL_FLUSH_THRESHOLD");if(g>0){const y=pr();y-this.lastGlFlushTime>g&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=y)}if(!J().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&s===!1){const y=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),y}return a}compileAndRun(e,n,r,o,s=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,o,s)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(J().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Q(()=>{if(!J().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=J().getBool("DEBUG");J().set("DEBUG",!1);const n=this.abs(st(1e-8)).dataSync()[0];if(J().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?uje:cje}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:o,values:s,texture:i,usage:a,isPacked:l}=n;if(i!=null)return;const u=this.activeTimers!=null;let c;u&&(c=pr());let d=n.texShape;if(d==null&&(d=D3e(r,l),n.texShape=d),s!=null){const f=qg(r);let h,p=d[1],m=d[0];const g=s instanceof Uint8Array||s instanceof Uint8ClampedArray;(l||!g)&&([p,m]=Xd(d[0],d[1])),l?h=new DBe(f,g):h=new AM(f,g);const y=g?[m,p]:d,v=this.makeTensorInfo(y,o),b=this.texData.get(v.dataId);g?b.usage=eo.PIXELS:b.usage=eo.UPLOAD,b.texShape=y,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(v.dataId),p,m,s);const x=[[m,p]],S=this.runWebGLProgram(h,[v],o,x,!0),$=this.texData.get(S.dataId);n.texShape=$.texShape,n.isPacked=$.isPacked,n.usage=$.usage,J().get("ENGINE_COMPILE_ONLY")?this.disposeData(S.dataId):(n.texture=$.texture,n.values=null,this.texData.delete(S.dataId)),this.disposeIntermediateTensorInfo(v),u&&(this.uploadWaitMs+=pr()-c)}else{const f=this.acquireTexture(d,a,o,l);n.texture=f}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:o}=r;return n!=null&&(r.values=mje(n,o)),r.values}acquireTexture(e,n,r,o){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const s=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${s} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,o)}computeBytes(e,n){return e[0]*e[1]*zv(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(o=>{try{this.checkCompletion_(n),o(!0)}catch(s){throw s}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await bU(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(m6(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:o,nanLoc:s,outShapeLocation:i,outShapeStridesLocation:a,outTexShapeLocation:l}=b6(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=r,e.infLoc=o,e.nanLoc=s,e.outShapeLocation=i,e.outShapeStridesLocation=a,e.outTexShapeLocation=l}}createTensorFromGPUData(e,n,r){e.channels=e.channels||"RGBA";const{texture:o,height:s,width:i,channels:a}=e,l=$s().backend;if(!l.gpgpu.gl.isTexture(o))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const u=l.writeTexture(o,n,r,s,i,a);return $s().makeTensorFromDataId(u,n,r,l)}}c1.nextDataId=0;function mje(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gV()&&bV("webgl",()=>new c1,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vN=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class du{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=Me(n,r),this.enableShapeUniforms=qn(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tu=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class ef{constructor(e,n,r,o=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Me(n,r);const s=this.outputShape.length;this.enableShapeUniforms=qn(s);let i="";if(o)if(s===0||re(this.outputShape)===1)i=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(i=`
          ${gt(s)} coords = getOutputCoords();
        `,s===1)this.enableShapeUniforms?i+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:i+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=or("coords",s);this.enableShapeUniforms?i+=`
            bool nextRowOutOfBounds =
              (${l[s-2]} + 1) >= outShape[${s} - 2];
            bool nextColOutOfBounds =
              (${l[s-1]} + 1) >= outShape[${s} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:i+=`
            bool nextRowOutOfBounds =
              (${l[s-2]} + 1) >= ${this.outputShape[s-2]};
            bool nextColOutOfBounds =
              (${l[s-1]} + 1) >= ${this.outputShape[s-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${i}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jr(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const gje={kernelName:nm,backendName:"webgl",kernelFunc:jr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ol(t){const{inputs:e,backend:n}=t,{real:r,imag:o}=e,s=n.makeTensorInfo(r.shape,"complex64"),i=n.texData.get(s.dataId),a=jr({inputs:{x:r},backend:n}),l=jr({inputs:{x:o},backend:n});return i.complexTensorInfos={real:a,imag:l},s}const yje={kernelName:UT,backendName:"webgl",kernelFunc:ol};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O6="return (a < 0.) ? b * a : a;",_6=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function vje(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{alpha:s}=r,i=n.makeTensorInfo([],"float32",Ya(s,"float32")),a=J().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ef(_6,o.shape,i.shape):new du(O6,o.shape,i.shape),l=n.runWebGLProgram(a,[o,i],"float32");return n.disposeIntermediateTensorInfo(i),l}const xje={kernelName:ob,backendName:"webgl",kernelFunc:vje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R6="return (a < 0.) ? b * a : a;",P6=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function bje(t){const{inputs:e,backend:n}=t,{x:r,alpha:o}=e,s=J().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ef(P6,r.shape,o.shape):new du(R6,r.shape,o.shape);return n.runWebGLProgram(s,[r,o],"float32")}const wje={kernelName:Cb,backendName:"webgl",kernelFunc:bje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tf="if (isnan(x)) return x;";function Je({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:o,backend:s})=>{const{x:i}=o,a=s,l=r||i.dtype;if(a.shouldExecuteOnCPU([i])&&n!=null){const d=a.texData.get(i.dataId),f=n(d.values,l);return a.makeTensorInfo(i.shape,l,f)}const u=J().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let c;return u?c=new fa(i.shape,e):c=new Ps(i.shape,t),a.runWebGLProgram(c,[i],l)}}function Bn({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:o,dtype:s}){return({inputs:i,backend:a})=>{const{a:l,b:u}=i,c=a;if(r&&l.dtype==="complex64"){const p=c.texData.get(l.dataId),m=c.texData.get(u.dataId),[g,y]=[[p.complexTensorInfos.real,m.complexTensorInfos.real],[p.complexTensorInfos.imag,m.complexTensorInfos.imag]].map(b=>{const[x,w]=b,S={dataId:x.dataId,dtype:x.dtype,shape:l.shape},$={dataId:w.dataId,dtype:w.dtype,shape:u.shape},C=new du(t,l.shape,u.shape);return c.runWebGLProgram(C,[S,$],Br(x.dtype,w.dtype))}),v=ol({inputs:{real:g,imag:y},backend:c});return c.disposeIntermediateTensorInfo(g),c.disposeIntermediateTensorInfo(y),v}const d=s||Br(l.dtype,u.dtype);if((l.dtype==="string"||u.dtype==="string"||c.shouldExecuteOnCPU([l,u]))&&o!=null){const p=c.texData.get(l.dataId).values,m=c.texData.get(u.dataId).values,g=l.dtype==="string"?Di(p):p,y=l.dtype==="string"?Di(m):m,[v,b]=o(l.shape,u.shape,g,y,d),x=c.makeTensorInfo(b,d),w=c.texData.get(x.dataId);return w.values=v,x}const f=J().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let h;return f?h=new ef(e,l.shape,u.shape,n):h=new du(t,l.shape,u.shape),c.runWebGLProgram(h,[l,u],d)}}function gp(t,e=!1){if(t==="linear")return e?nje:Qze;if(t==="relu")return e?oje:Jze;if(t==="elu")return e?rje:Zze;if(t==="relu6")return e?sje:eje;if(t==="prelu")return e?P6:R6;if(t==="leakyrelu")return e?_6:O6;if(t==="sigmoid")return e?ije:tje;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class D6{constructor(e,n,r,o=!1,s=!1,i=!1,a=null,l=!1,u=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=qn(this.outputShape.length);const c=o?e[1]:e[2],d=Math.ceil(c/2),f=o?"i * 2, rc.y":"rc.y, i * 2",h=s?"rc.z, i * 2":"i * 2, rc.z",p=o?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=s?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let g="",y="";a&&(l?g=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:u?g=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:g=`vec4 activation(vec4 x) {
          ${a}
        }`,y="result = activation(result);");const v=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha");let b="rc.x",x="rc.x";e[0]<n[0]?b=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(x=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${g}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${b};
        int batchB = ${x};
        for (int i = 0; i < ${d}; i++) {
          vec4 a = getMatrixA(batchA, ${f});
          vec4 b = getMatrixB(batchB, ${h});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${p[0]} * ${m[0]});
          result += (${p[1]} * ${m[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${v}

        ${y}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DM={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class MM{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Me(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FM="return a * b;";function xN(t){const{inputs:e,backend:n}=t,{a:r,b:o}=e,s=Br(r.dtype,o.dtype);if(r.dtype==="complex64"){const a=n.texData.get(r.dataId),l=n.texData.get(o.dataId),u=new MM(DM.REAL,r.shape,o.shape),c=new MM(DM.IMAG,r.shape,o.shape),d=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:r.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:o.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:o.shape}],f=n.runWebGLProgram(u,d,"float32"),h=n.runWebGLProgram(c,d,"float32"),p=ol({inputs:{real:f,imag:h},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),p}if(n.shouldExecuteOnCPU([r,o])){const a=n.texData.get(r.dataId),l=n.texData.get(o.dataId),[u,c]=bze(r.shape,o.shape,a.values,l.values,s),d=n.makeTensorInfo(c,s),f=n.texData.get(d.dataId);return f.values=u,d}let i;return J().getBool("WEBGL_PACK_BINARY_OPERATIONS")?i=new ef(FM,r.shape,o.shape):i=new du(FM,r.shape,o.shape),n.runWebGLProgram(i,[r,o],s)}const Sje={kernelName:dm,backendName:"webgl",kernelFunc:xN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cje(t,e,n){const r=[bd(t.shape),...wd(t.shape)],o={dtype:t.dtype,shape:r,dataId:t.dataId},s=[bd(e),...wd(e)],i=new A6(s,r),a=!0,l=[r],u=n.runWebGLProgram(i,[o],t.dtype,l,a);return{dataId:u.dataId,shape:e,dtype:u.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ge(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{shape:s}=r,i=n,a=re(o.shape),l=kW(s,a),u=re(l);P(a===u,()=>`The new shape (${l}) has ${u} elements and the old shape (${o.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);const c=i.texData.get(o.dataId);return c.isPacked&&!d0(o.shape,l)&&!(c.texture!==null&&d0(c.shape,l))?Cje(o,l,i):(i.incRef(o.dataId),{dataId:o.dataId,shape:l,dtype:o.dtype})}const $je={kernelName:kb,backendName:"webgl",kernelFunc:ge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LM{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:o,inSize:s,outSize:i}=e;this.outputShape=[o,i];const a=Math.floor(r/4)*4,l=r%4;let u="sumValue += dot(values, ones);";if(n!=null){const d=1/n;u=`sumValue += dot(values * ${ld(d)?d.toPrecision(2):d}, ones);`}let c="";s%r>0&&(c=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${c}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${u}
        }

        int inIdx = inOffset + ${a};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${u}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${u}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${u}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kje{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:o,inSize:s,outSize:i}=e;this.outputShape=[o,i];let a="0.0",l="";n==="prod"?a="1.0":n==="min"?(a="1.0 / 1e-20",l="min"):n==="max"&&(a="-1.0 / 1e-20",l="max");let u=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?u="sumValue":n==="prod"?u="prodValue":n==="all"?u="allValue":n==="any"&&(u="anyValue");const c=Math.floor(r/4)*4,d=r%4;let f=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,h="vec4";n==="all"?(a="1.0",f=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,h="bvec4"):n==="any"&&(a="0.0",f=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,h="bvec4");let p="";s%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${p}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${f}
        }

        int inIdx = inOffset + ${c};
        if (${d===1}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${d===2}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${d===3}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${f}
        }
        setOutput(${u});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ije(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=Kb(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function Eu(t,e,n,r){const o=Ije(t.shape);let s=t;for(let i=0;i<o.length;i++){const{inSize:a,windowSize:l,outSize:u}=o[i];let c,d;n==="mean"?c=i===0?new LM({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:u},a):new LM({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:u}):c=new kje({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:u},n),d=s,s=r.runWebGLProgram(c,[s],e),d.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(d)}return s}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Tje{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let i=0;i<r.length;i++)r[i]=e[n[i]];this.outputShape=r,this.rank=r.length;const o=gt(this.rank),s=Eje(n);this.userCode=`
    void main() {
      ${o} resRC = getOutputCoords();
      setOutput(getA(${s}));
    }
    `}}function Eje(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let o=0;o<t.length;o++)r[t[o]]=n[o];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nje{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let c=0;c<r.length;c++)r[c]=e[n[c]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const o=gt(this.rank),s=N6("rc",this.rank),i=new Array(this.rank);for(let c=0;c<n.length;c++)i[n[c]]=s[c];const a=`vec2(${i.slice(-2).join()})`,l=`++${s[this.rank-1]} < ${r[this.rank-1]}`,u=`getChannel(getA(${i.join()}), ${a})`;this.userCode=`
    void main() {
      ${o} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${u};
      if(${l}) {
        result[1] = ${u};
      }
      --${s[this.rank-1]};
      if(++${s[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${u};
        if(${l}) {
          result[3] = ${u};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d1(t,e,n){const r=J().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Nje(t.shape,e):new Tje(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aje(t,e,n,r){const o=e,s=t.shape.length,i=Ge(o,t.shape);let a=i;const l=Gt(a,s),u=l!=null;let c=t;u&&(c=d1(t,l,r),a=rn(a.length,s)),Ln("sum",a,s);const[d,f]=An(c.shape,a);let h=d;n&&(h=dn(d,i));const p=re(f),g=re(t.shape)/p,y=ge({inputs:{x:c},attrs:{shape:[g,p]},backend:r}),v=kE(t.dtype),b=Eu(y,v,"sum",r),x=ge({inputs:{x:b},attrs:{shape:h},backend:r});return r.disposeIntermediateTensorInfo(y),r.disposeIntermediateTensorInfo(b),u&&r.disposeIntermediateTensorInfo(c),x}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f1(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r;return Aje(o,s,i,n)}const Oje={kernelName:Ob,backendName:"webgl",kernelFunc:f1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lr(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{perm:s}=r,i=n,a=o.shape.length,l=new Array(a);for(let c=0;c<l.length;c++)l[c]=o.shape[s[c]];let u;if(i.shouldExecuteOnCPU([o])){const d=i.texData.get(o.dataId).values,f=yN(d,o.shape,o.dtype,s,l);u=i.makeTensorInfo(l,o.dtype);const h=i.texData.get(u.dataId);h.values=f}else u=d1(o,s,i);return u}const _je={kernelName:pc,backendName:"webgl",kernelFunc:lr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M6=1e3;function f0({a:t,b:e,transposeA:n,transposeB:r,backend:o,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:a=0,activation:l=null}){const u=t.shape.length,c=e.shape.length,d=n?t.shape[u-2]:t.shape[u-1],f=r?e.shape[c-1]:e.shape[c-2],h=n?t.shape[u-1]:t.shape[u-2],p=r?e.shape[c-2]:e.shape[c-1],m=t.shape.slice(0,-2),g=e.shape.slice(0,-2),y=re(m),v=re(g),x=Me(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([h,p]);P(d===f,()=>`Error in matMul: inner shapes (${d}) and (${f}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const w=n?[y,d,h]:[y,h,d],S=r?[v,p,f]:[v,f,p],$=ge({inputs:{x:t},backend:o,attrs:{shape:w}}),C=ge({inputs:{x:e},backend:o,attrs:{shape:S}}),k=[$,C],I=Math.max(y,v),T=n?$.shape[1]:$.shape[2],E=s!=null,_=i!=null,O=l==="leakyrelu",F=l!=null?gp(l,!0):null,M=E||_||O||F!=null;let L;if((h===1||p===1)&&T>M6&&M===!1){let D=$,U=C;n&&(D=lr({inputs:{x:$},backend:o,attrs:{perm:[0,2,1]}}),k.push(D)),r&&(U=lr({inputs:{x:C},backend:o,attrs:{perm:[0,2,1]}}),k.push(U));const B=p!==1,W=p===1;let V=D;B&&(V=ge({inputs:{x:D},backend:o,attrs:{shape:[I,T,1]}}),k.push(V));const ee=p===1?2:1;let ne=U;W&&(ne=ge({inputs:{x:U},backend:o,attrs:{shape:[I,1,T]}}),k.push(ne));const se=xN({inputs:{a:V,b:ne},backend:o});L=f1({inputs:{x:se},backend:o,attrs:{axis:ee,keepDims:!0}}),k.push(se)}else{const D=Br(t.dtype,e.dtype),U=new D6(w,S,[I,h,p],n,r,E,F,_,O),B=[$,C];if(s!=null&&B.push(s),_&&B.push(i),O){const W=o.makeTensorInfo([],"float32",Ya(a,"float32"));B.push(W),k.push(W)}L=o.runWebGLProgram(U,B,D)}const N=ge({inputs:{x:L},backend:o,attrs:{shape:x}});k.push(L);for(const D of k)o.disposeIntermediateTensorInfo(D);return N}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rje(t){const{inputs:e,backend:n,attrs:r}=t,{a:o,b:s,bias:i,preluActivationWeights:a}=e,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:d}=r;return f0({a:o,b:s,transposeA:l,transposeB:u,backend:n,bias:i,preluActivationWeights:a,leakyreluAlpha:d,activation:c})}const Pje={kernelName:jv,backendName:"webgl",kernelFunc:Rje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BM="return abs(x);";function Dje(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const s=n.texData.get(r.dataId),i=T6(s.values);return n.makeTensorInfo(r.shape,r.dtype,i)}let o;return J().getBool("WEBGL_PACK_UNARY_OPERATIONS")?o=new fa(r.shape,BM):o=new Ps(r.shape,BM),n.runWebGLProgram(o,[r],r.dtype)}const Mje={kernelName:Lx,backendName:"webgl",kernelFunc:Dje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fje=Vo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,Lje=Je({opSnippet:Fje}),Bje={kernelName:Mp,backendName:"webgl",kernelFunc:Lje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zje=Vo+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,jje=Je({opSnippet:zje}),Wje={kernelName:Fp,backendName:"webgl",kernelFunc:jje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zM="return a + b;",Vje=Bn({opSnippet:zM,packedOpSnippet:zM,supportsComplex:!0,cpuKernelImpl:JBe}),Uje={kernelName:Wd,backendName:"webgl",kernelFunc:Vje};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Gje{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((s,i)=>`T${i}`);const r=[];this.variableNames.forEach(s=>{r.push(`float v${s} = get${s}AtOutCoords();`)});const o=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${o};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Hje{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((s,i)=>`T${i}`);const r=[];this.variableNames.forEach(s=>{r.push(`vec4 v${s} = get${s}AtOutCoords();`)});const o=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${o};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function my(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return jr({inputs:{x:r[0]},backend:n});if(r.length>J().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(r.length/2),u=my({inputs:r.slice(0,l),backend:n}),c=my({inputs:r.slice(l),backend:n});return my({inputs:[u,c],backend:n})}const o=r.map(l=>l.dtype).reduce((l,u)=>Br(l,u)),s=r.map(l=>l.shape),a=J().getBool("WEBGL_PACK")?new Hje(r[0].shape,s):new Gje(r[0].shape,s);return n.runWebGLProgram(a,r,o)}const Kje={kernelName:FT,backendName:"webgl",kernelFunc:my};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qje(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r,a=o.shape.length,l=Ge(s,o.shape);let u=l;const c=Gt(u,a);let d=o;c!=null&&(d=lr({inputs:{x:o},backend:n,attrs:{perm:c}}),u=rn(u.length,a)),Ln("all",u,a);const[f,h]=An(d.shape,u),p=re(h),m=ge({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),g=Eu(m,m.dtype,"all",n);let y;if(i){const v=dn(f,l);y=ge({inputs:{x:g},backend:n,attrs:{shape:v}})}else y=ge({inputs:{x:g},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),c!=null&&n.disposeIntermediateTensorInfo(d),y}const Xje={kernelName:LT,backendName:"webgl",kernelFunc:qje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yje(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r,a=o.shape.length,l=Ge(s,o.shape);let u=l;const c=Gt(u,a);let d=o;c!=null&&(d=lr({inputs:{x:o},backend:n,attrs:{perm:c}}),u=rn(u.length,a)),Ln("any",u,a);const[f,h]=An(d.shape,u),p=re(h),m=ge({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),g=Eu(m,m.dtype,"any",n);let y;if(i){const v=dn(f,l);y=ge({inputs:{x:g},backend:n,attrs:{shape:v}})}else y=ge({inputs:{x:g},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),c!=null&&n.disposeIntermediateTensorInfo(d),y}const Qje={kernelName:BT,backendName:"webgl",kernelFunc:Yje};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Zje{constructor(e,n,r){this.variableNames=["A"];const{windowSize:o,batchSize:s,outSize:i}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[s,i];const a=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${o};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${o}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Jje{constructor(e,n,r,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,P(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const s=e[e.length-1],i=Math.ceil(s/n);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),o||this.variableNames.push("bestIndicesA");const a=this.outputShape,l=a.length,u=gt(l),c=or("coords",l);let d,f;if(i===1){f=l+1;const C=gt(f);d=`
        ${C} sourceLocR = ${C}(${c.join()}, 0);
        ++${c[l-1]};
        ${C} sourceLocG = ${C}(${c.join()}, 0);
        ++${c[l-2]};
        ${C} sourceLocA = ${C}(${c.join()}, 0);
        --${c[l-1]};
        ${C} sourceLocB = ${C}(${c.join()}, 0);
        --${c[l-2]};`}else f=l,d=`
        ${u} sourceLocR = coords;
        ++${c[l-1]};
        ${u} sourceLocG = coords;
        ++${c[l-2]};
        ${u} sourceLocA = coords;
        --${c[l-1]};
        ${u} sourceLocB = coords;
        --${c[l-2]};`;const h=["x","y","z","w","u","v"].slice(0,f),p="."+h[f-1],m=h.map(C=>"int "+C),g=or("sourceLocR",f-1).concat("inIdx.r"),y=or("sourceLocG",f-1).concat("inIdx.g"),v=or("sourceLocB",f-1).concat("inIdx.b"),b=or("sourceLocA",f-1).concat("inIdx.a"),x=r==="max"?"greaterThan":"lessThan",w=o?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${g.join()}),
                             getBestIndicesAChannel(${y.join()}),
                             getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${b.join()})));`,S=`vec4(
            getAChannel(${g.join()}),
            hasNextCol ? getAChannel(${y.join()}) : 0.,
            hasNextRow ? getAChannel(${v.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${b.join()}) : 0.)`,$=o?"":`
      float getBestIndicesAChannel(${m.join()}) {
        return getChannel(getBestIndicesA(${h.join()}),
                                          vec2(${h.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${m.join()}) {
        return getChannel(getA(${h.join()}),
                               vec2(${h.slice(-2).join()}));
      }
      ${$}
      void main() {
        ${u} coords = getOutputCoords();
        bool hasNextCol = ${c[l-1]} < ${a[l-1]-1};
        bool hasNextRow = ${c[l-2]} < ${a[l-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${p}, sourceLocG${p},
          sourceLocB${p}, sourceLocA${p}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${S};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${w}
          vec4 candidate = ${S};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${x}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F6(t,e,n,r=null){let o=e.shape[0],s=e.shape[1];r!=null&&(o=r.shape[0],s=r.shape[1]);const i=Kb(s),a={windowSize:i,inSize:s,batchSize:o,outSize:Math.ceil(s/i)},l=new Zje(a,n,r==null),u=[e];r!=null&&u.push(r);const c=t.runWebGLProgram(l,u,"int32");if(c.shape[1]===1)return c;const d=F6(t,e,n,c);return t.disposeIntermediateTensorInfo(c),d}function L6(t,e,n,r=null){const o=r!=null?r.shape:e.shape,s=o[o.length-1],i=Kb(s),a=new Jje(o,i,n,r==null),l=r==null?[e]:[e,r],u=t.runWebGLProgram(a,l,"int32");if(u.shape.length===e.shape.length){const c=L6(t,e,n,u);return t.disposeIntermediateTensorInfo(u),c}return u}function B6(t,e,n,r){const o=[n];if(Ln("arg"+r.charAt(0).toUpperCase()+r.slice(1),o,e.shape.length),!J().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const s=[],i=t.texData.get(e.dataId),a=i!==null&&i.isPacked;let l=e;a&&(l=t.unpackTensor(e),s.push(l));const[u,c]=An(l.shape,o),d=re(c),f=ge({inputs:{x:l},backend:t,attrs:{shape:[-1,d]}});s.push(f);const h=F6(t,f,r);s.push(h);const p=ge({inputs:{x:h},backend:t,attrs:{shape:u}});return s.forEach(m=>t.disposeIntermediateTensorInfo(m)),p}return L6(t,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s}=r;let i=Ge(s,o.shape);const a=Gt(i,o.shape.length);let l=o;const u=[];a!=null&&(l=lr({inputs:{x:o},backend:n,attrs:{perm:a}}),u.push(l),i=rn(i.length,l.shape.length)),Ln("argMax",[i[0]],l.shape.length);const c=B6(n,l,i[0],"max");return u.forEach(d=>n.disposeIntermediateTensorInfo(d)),c}const t4e={kernelName:Bx,backendName:"webgl",kernelFunc:e4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s}=r;let i=Ge(s,o.shape);const a=Gt(i,o.shape.length);let l=o;const u=[];a!=null&&(l=lr({inputs:{x:o},backend:n,attrs:{perm:a}}),u.push(l),i=rn(i.length,l.shape.length)),Ln("argMin",[i[0]],l.shape.length);const c=B6(n,l,i[0],"min");return u.forEach(d=>n.disposeIntermediateTensorInfo(d)),c}const r4e={kernelName:zx,backendName:"webgl",kernelFunc:n4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o4e=Vo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,s4e=Je({opSnippet:o4e}),i4e={kernelName:Lp,backendName:"webgl",kernelFunc:s4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a4e=Vo+"return log(x + sqrt(x * x + 1.0));",l4e=Je({opSnippet:a4e}),u4e={kernelName:Bp,backendName:"webgl",kernelFunc:l4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c4e=Vo+`
  return atan(x);
`,d4e=Je({opSnippet:c4e}),f4e={kernelName:zp,backendName:"webgl",kernelFunc:d4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h4e=vN+`
  return atan(a, b);
`,p4e=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Tu+`
  return result;
`,m4e=Bn({opSnippet:h4e,packedOpSnippet:p4e}),g4e={kernelName:Wp,backendName:"webgl",kernelFunc:m4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y4e=Vo+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,v4e=Je({opSnippet:y4e}),x4e={kernelName:jp,backendName:"webgl",kernelFunc:v4e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yp{constructor(e,n,r,o=!1,s=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const i=e.filterWidth,a=e.strideHeight,l=e.strideWidth,u=e.dilationHeight,c=e.dilationWidth,d=e.effectiveFilterHeight,f=e.effectiveFilterWidth,h=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;const m=n==="avg",g=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,y=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let v="0.0";if(m||(v="-1.0 / 1e-20"),r){const C=">=";this.userCode=`
        const ivec2 strides = ivec2(${a}, ${l});
        const ivec2 pads = ivec2(${h}, ${p});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${u}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${f};
                wC += ${c}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${C} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${o?s?g:y:`wR * ${f} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const b="max";let x=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(x="avgValue / max(count, 1.0)");const w=Math.floor(i/4)*4,S=i%4,$=`
      if (${m}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${b}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${l});
      const ivec2 pads = ivec2(${h}, ${p});
      const float initializationValue = ${v};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${v});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${u}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${w}; wC += 4) {
            int xC = xCCorner + wC * ${c};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              getValue(batch, xR, xC + 3 * ${c}, d)
            );

            ${$}
          }

          int xC = xCCorner + ${w};
          if (${S===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${$}
          } else if (${S===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              initializationValue,
              initializationValue
            );

            ${$}
          } else if (${S===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              initializationValue
            );

            ${$}
          }
        }
        setOutput(${x});
      }
    `}}class bN{constructor(e,n,r,o=!1,s=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const i=e.filterWidth,a=e.strideDepth,l=e.strideHeight,u=e.strideWidth,c=e.dilationDepth,d=e.dilationHeight,f=e.dilationWidth,h=e.effectiveFilterDepth,p=e.effectiveFilterHeight,m=e.effectiveFilterWidth,g=e.padInfo.front,y=e.padInfo.top,v=e.padInfo.left;this.outputShape=e.outShape;const b=n==="avg";let x="0.0";if(b||(x="-1.0 / 1e-20"),r){const I=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${l}, ${u});
        const ivec3 pads = ivec3(${g}, ${y}, ${v});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${h};
              wD += ${c}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${p};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${m};
                  wC += ${f}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${I} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${o?s?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${p} * ${m} +
                      wR * ${m} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const w="max";let S=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(S="avgValue / max(count, 1.0)");const $=Math.floor(i/4)*4,C=i%4,k=`
      if (${b}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${w}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${l}, ${u});
      const ivec3 pads = ivec3(${g}, ${y}, ${v});
      const float initializationValue = ${x};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${x});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${c}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${$}; wC += 4) {
              int xC = xCCorner + wC * ${f};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                getValue(batch, xD, xR, xC + 3 * ${f}, ch)
              );

              ${k}
            }

            int xC = xCCorner + ${$};
            if (${C===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${k}
            } else if (${C===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                initializationValue,
                initializationValue
              );

              ${k}
            } else if (${C===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                initializationValue
              );

              ${k}
            }
          }
        }
        setOutput(${S});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e;Xm(o,"avgPool");const{filterSize:s,strides:i,pad:a,dimRoundingMode:l}=r,u=1;P(Kn(i,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const c=jo(o.shape,s,i,u,a,l);if(c.filterWidth===1&&c.filterHeight===1&&at(c.inShape,c.outShape))return jr({inputs:{x:o},backend:n});const d=new yp(c,"avg",!1);return n.runWebGLProgram(d,[o],"float32")}const w4e={kernelName:jx,backendName:"webgl",kernelFunc:b4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{filterSize:s,strides:i,pad:a,dimRoundingMode:l,dataFormat:u}=r,c=[1,1,1],d=ji(o.shape,s,i,c,a,l,u),f=new bN(d,"avg",!1);return n.runWebGLProgram(f,[o],"float32")}const C4e={kernelName:Wx,backendName:"webgl",kernelFunc:S4e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $4e{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,o=e.strideHeight,s=e.strideWidth,i=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=l-1-e.padInfo.top,d=u-1-e.padInfo.left,f=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${c}, ${d});
      const float avgMultiplier = float(${f});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${u};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class k4e{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,o=e.filterWidth,s=e.strideDepth,i=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,d=e.effectiveFilterDepth,f=e.effectiveFilterHeight,h=e.effectiveFilterWidth,p=d-1-e.padInfo.front,m=f-1-e.padInfo.top,g=h-1-e.padInfo.left,y=1/(n*r*o);this.userCode=`
      const ivec3 pads = ivec3(${p}, ${m}, ${g});
      const float avgMultiplier = float(${y});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${s}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${f};
              wR += ${u}) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${h};
                wC += ${c}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I4e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:s}=e,i=s,{filterSize:a,strides:l,pad:u,dimRoundingMode:c}=r,d=[1,1,1],f=ji(i.shape,a,l,d,u,c),h=new k4e(f);return n.runWebGLProgram(h,[o],i.dtype)}const T4e={kernelName:jT,backendName:"webgl",kernelFunc:I4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E4e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:s}=e,i=s;Xm([o,s],"avgPoolGrad");const{filterSize:a,strides:l,pad:u}=r,c=jo(i.shape,a,l,1,u),d=new $4e(c);return n.runWebGLProgram(d,[o],i.dtype)}const N4e={kernelName:zT,backendName:"webgl",kernelFunc:E4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A4e(t){const{inputs:e,backend:n,attrs:r}=t,{a:o,b:s}=e,{transposeA:i,transposeB:a}=r;return f0({a:o,b:s,transposeA:i,transposeB:a,backend:n})}const O4e={kernelName:Vx,backendName:"webgl",kernelFunc:A4e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _4e{constructor(e,n,r,o,s,i){this.outputShape=[],this.variableNames=["x","mean","variance"],Me(e,n),Me(e,r);let a="0.0";o!=null&&(Me(e,o),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="1.0";s!=null&&(Me(e,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${i}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class R4e{constructor(e,n,r,o,s,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Me(e,n),Me(e,r);let a="vec4(0.0)";o!=null&&(Me(e,o),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="vec4(1.0)";s!=null&&(Me(e,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${i}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P4e=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:o,variance:s,offset:i,scale:a}=t;P(o.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),P(i==null||o.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),P(a==null||o.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const u=[r,o,s];let c=null;i!=null&&(c=i.shape,u.push(i));let d=null;a!=null&&(d=a.shape,u.push(a));const f=J().getBool("WEBGL_PACK_NORMALIZATION")?new R4e(r.shape,o.shape,s.shape,c,d,l):new _4e(r.shape,o.shape,s.shape,c,d,l);return e.runWebGLProgram(f,u,u[0].dtype)},D4e={kernelName:tb,backendName:"webgl",kernelFunc:P4e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class M4e{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=gt(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=F4e(this.rank);let o;const s=e.map((i,a)=>`sourceLoc.${uk[a]} = start[${a}] + coords.${uk[a]};`);o=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${s.join(`
`)}
      `,this.userCode=`
      void main() {
        ${o}
        setOutput(getSource(${r}));
      }
    `}}const uk=["x","y","z","w","u","v"];function F4e(t){if(t===1)return"sourceLoc";if(t<=6)return uk.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class L4e{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=gt(this.rank),r=or("coords",this.rank),o=or("sourceLoc",this.rank),s=this.rank===1?"sourceLoc":`vec2(${o.slice(-2).join()})`,i=`getChannel(getSource(${o.join()}), ${s})`,a=`
      result.x = ${i};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${o[this.rank-1]};
        result.y = ${i};
        --${o[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${o[this.rank-2]};
        result.z = ${i};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${o[this.rank-1]};
          result.w = ${i};
        }
      }
    `,u=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((c,d)=>`start[${d}]`).join()});`:e.map((c,d)=>`${o[d]} = ${r[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${u}
        vec4 result = vec4(0.);
        ${a}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B4e(t,e,n,r){const o=r.texData.get(t.dataId),s=r.makeTensorInfo(n,t.dtype),i=r.texData.get(s.dataId);Object.assign(i,o),i.refCount=1,i.shape=n,i.dtype=t.dtype;let a=p2(e,Ee(t.shape));o.slice&&(a+=o.slice.flatOffset),i.slice={flatOffset:a,origDataId:o.slice&&o.slice.origDataId||t.dataId};const l=r.dataRefCount.get(i.slice.origDataId)||1;return r.dataRefCount.set(i.slice.origDataId,l+1),s}function nf(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{begin:s,size:i}=r,[a,l]=Hb(o,s,i);if(d2(o,a,l),re(l)===0)return n.makeTensorInfo(l,o.dtype,[]);if(n.shouldExecuteOnCPU([o])||o.dtype==="string"){const d=n.texData.get(o.dataId),f=Oze(d.values,a,l,o.shape,o.dtype);return n.makeTensorInfo(l,o.dtype,f)}const{isPacked:u}=n.texData.get(o.dataId),c=h2(o.shape,a,l);if(u||!c){const d=J().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new L4e(l):new M4e(l),f=[a];return n.runWebGLProgram(d,[o],o.dtype,f)}return n.uploadToGPU(o.dataId),B4e(o,a,l,n)}const z4e={kernelName:Ab,backendName:"webgl",kernelFunc:nf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j4e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{blockShape:s,crops:i}=r;P(o.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const a=s.reduce((v,b)=>v*b),l=Mm(o.shape,s,a),u=Fm(l.length,s.length),c=Lm(o.shape,s,a),d=x2(i,s.length),f=b2(c,i,s.length),h=[],p=ge({inputs:{x:o},backend:n,attrs:{shape:l}}),m=lr({inputs:{x:p},backend:n,attrs:{perm:u}}),g=ge({inputs:{x:m},backend:n,attrs:{shape:c}}),y=nf({inputs:{x:g},backend:n,attrs:{begin:d,size:f}});return h.push(p),h.push(m),h.push(g),h.forEach(v=>n.disposeIntermediateTensorInfo(v)),y},W4e={kernelName:Ux,backendName:"webgl",kernelFunc:j4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,weights:s}=e,{size:i}=r,a=n.readSync(o.dataId),l=n.readSync(s.dataId),u=I6(a,l,s.dtype,s.shape,i);return n.makeTensorInfo([i],s.dtype,u)}const U4e={kernelName:WT,backendName:"webgl",kernelFunc:V4e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G4e=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,H4e=`
  return float(int(a.r) & int(b.r));
`;function K4e(t){const{inputs:e,backend:n}=t,{a:r,b:o}=e,s=J().getBool("WEBGL_PACK_BINARY_OPERATIONS"),i=J().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,o])||i===1){const l=n.texData.get(r.dataId).values,u=n.texData.get(o.dataId).values,[c,d]=tze(r.shape,o.shape,l,u,r.dtype),f=n.makeTensorInfo(d,r.dtype),h=n.texData.get(f.dataId);return h.values=c,f}let a;return s?a=new ef(G4e,r.shape,o.shape,!1):a=new du(H4e,r.shape,o.shape),n.runWebGLProgram(a,[r,o],r.dtype)}const q4e={kernelName:VT,backendName:"webgl",kernelFunc:K4e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X4e(t){const{inputs:e,backend:n}=t,{s0:r,s1:o}=e,s=n.readSync(r.dataId),i=n.readSync(o.dataId),a=Me(Array.from(s),Array.from(i));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const Y4e={kernelName:OW,backendName:"webgl",kernelFunc:X4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q4e="return float(a != b);",z6=Bn({opSnippet:Q4e,cpuKernelImpl:Sze,dtype:"bool"}),Z4e={kernelName:vb,backendName:"webgl",kernelFunc:z6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qm(t){const{inputs:e,backend:n}=t,{input:r}=e,o=n.texData.get(r.dataId);return jr({inputs:{x:o.complexTensorInfos.real},backend:n})}const J4e={kernelName:pE,backendName:"webgl",kernelFunc:Qm};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eWe="return float(int(x));";function tWe(t,e){const n=new Ps(t.shape,eWe),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ck(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{dtype:s}=r;if(s==="complex64"){if(o.dtype==="complex64")return jr({inputs:{x:o},backend:n});const i=pn(o.shape),a=ck({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),l=ol({inputs:{real:a,imag:i},backend:n});return i.dispose(),n.disposeIntermediateTensorInfo(a),l}if(o.dtype==="complex64"){const i=Qm({inputs:{input:o},backend:n}),a=ck({inputs:{x:i},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(i),a}if(!IW(o.dtype,s)){const i=jr({inputs:{x:o},backend:n});return{dataId:i.dataId,shape:i.shape,dtype:s}}if(n.shouldExecuteOnCPU([o])){const i=n.texData.get(o.dataId).values,[a,l,u]=nze(i,o.shape,o.dtype,s);return n.makeTensorInfo(a,l,u)}if(s==="int32")return tWe(o,n);if(s==="bool"){const i=n.makeTensorInfo([],"bool",Gn("bool",1)),l=z6({inputs:{a:o,b:i},backend:n});return n.disposeIntermediateTensorInfo(i),l}throw new Error(`Error in Cast: failed to cast ${o.dtype} to ${s}`)}const nWe={kernelName:Vp,backendName:"webgl",kernelFunc:ck};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jM="return ceil(x);",rWe=Je({opSnippet:jM,packedOpSnippet:jM,cpuKernelImpl:rze}),oWe={kernelName:Up,backendName:"webgl",kernelFunc:rWe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sWe{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iWe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{clipValueMin:s,clipValueMax:i}=r;let a;J().getBool("WEBGL_PACK_CLIP")?a=new iWe(o.shape):a=new sWe(o.shape);const l=[[s],[i]];return n.runWebGLProgram(a,[o],o.dtype,l)}const lWe={kernelName:Gp,backendName:"webgl",kernelFunc:aWe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uWe{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WM(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function cWe(t){const{inputs:e,backend:n}=t,{x:r}=e,o=n.texData.get(r.dataId),s=new uWe(r.shape),i=[WM(r,o.complexTensorInfos.real),WM(r,o.complexTensorInfos.imag)];return n.runWebGLProgram(s,i,i[0].dtype)}const dWe={kernelName:Gx,backendName:"webgl",kernelFunc:cWe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fWe{constructor(e){this.outputShape=[],this.outputShape=Ws(e,1),this.variableNames=e.map((i,a)=>`T${a}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let i=1;i<n.length;i++)n[i]=n[i-1]+e[i][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let i=1;i<n.length;i++){const a=n[i-1];r.push(`else if (yC < ${n[i]}) setOutput(getT${i}(yR, yC-${a}));`)}const o=n.length,s=n[n.length-1];r.push(`else setOutput(getT${o}(yR, yC-${s}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hWe{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Ws(e,n);const r=this.outputShape,o=r.length,s=gt(o),i=or("coords",o),a=["x","y","z","w","u","v"].slice(0,o);this.variableNames=e.map((m,g)=>`T${g}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let m=1;m<l.length;m++)l[m]=l[m-1]+e[m][n];const u=a[n],c=a.slice(-2),d=a.join();let f=`if (${u} < ${l[0]}) {
        return getChannel(
            getT0(${d}), vec2(${c.join()}));
        }`;for(let m=1;m<l.length;m++){const g=l[m-1];f+=`
        if (${u} < ${l[m]}  && ${u} >= ${l[m-1]}) {
          return getChannel(
            getT${m}(${Qg(a,u,g)}),
            vec2(${Qg(c,u,g)}));
        }`}const h=l.length,p=l[l.length-1];f+=`
        return getChannel(
          getT${h}(${Qg(a,u,p)}),
          vec2(${Qg(c,u,p)}));`,this.userCode=`
      float getValue(${a.map(m=>"int "+m)}) {
        ${f}
      }

      void main() {
        ${s} coords = getOutputCoords();
        vec4 result = vec4(getValue(${i}), 0., 0., 0.);

        ${i[o-1]} = ${i[o-1]} + 1;
        if (${i[o-1]} < ${r[o-1]}) {
          result.g = getValue(${i});
        }

        ${i[o-2]} = ${i[o-2]} + 1;
        if (${i[o-2]} < ${r[o-2]}) {
          result.a = getValue(${i});
        }

        ${i[o-1]} = ${i[o-1]} - 1;
        if (${i[o-2]} < ${r[o-2]} &&
            ${i[o-1]} < ${r[o-1]}) {
          result.b = getValue(${i});
        }
        setOutput(result);
      }
    `}}function Qg(t,e,n){const r=t.indexOf(e);return t.map((s,i)=>i===r?`${s} - ${n}`:s).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h1(t){const{inputs:e,backend:n}=t,{input:r}=e,o=n.texData.get(r.dataId);return jr({inputs:{x:o.complexTensorInfos.imag},backend:n})}const pWe={kernelName:iE,backendName:"webgl",kernelFunc:h1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jf(t,e,n){const r=t[0].dtype;if(r==="complex64"){const h=t.map(v=>Qm({inputs:{input:v},backend:n})),p=t.map(v=>h1({inputs:{input:v},backend:n})),m=jf(h,e,n),g=jf(p,e,n),y=ol({inputs:{real:m,imag:g},backend:n});return h.forEach(v=>n.disposeIntermediateTensorInfo(v)),p.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),y}let o=n.shouldExecuteOnCPU(t);if(r==="string"&&(o=!0),o){const h=t.map(x=>{const S=[-1,re(x.shape.slice(e))];return ge({inputs:{x},backend:n,attrs:{shape:S}})}),p=h.map(x=>({vals:n.readSync(x.dataId),shape:x.shape})),m=Ws(h.map(x=>x.shape),1),g=h[0].shape[0]===1,y=oze(p,m,r,g),v=Ws(t.map(x=>x.shape),e),b=n.makeTensorInfo(v,r,y);return h.forEach(x=>n.disposeIntermediateTensorInfo(x)),b}const s=t.filter(h=>re(h.shape)>0),i=J().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&s[0].shape.length>1;if(s.length===1){const h=i?new Ps(t[0].shape,Ji):new fa(t[0].shape,Ji);return n.runWebGLProgram(h,t,r)}const a=J().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(s.length>a){const h=[];for(let m=0;m<s.length;m+=a){const g=s.slice(m,m+a);h.push(jf(g,e,n))}const p=jf(h,e,n);for(const m of h)n.disposeIntermediateTensorInfo(m);return p}if(i){const h=new hWe(s.map(p=>p.shape),e);return n.runWebGLProgram(h,s,r)}const{tensors2D:l,outShape:u}=mWe(s,e,n),c=new fWe(l.map(h=>h.shape)),d=n.runWebGLProgram(c,l,r);l.forEach(h=>n.disposeIntermediateTensorInfo(h));const f=ge({inputs:{x:d},attrs:{shape:u},backend:n});return n.disposeIntermediateTensorInfo(d),f}function mWe(t,e,n){const r=Ws(t.map(s=>s.shape),e);return{tensors2D:t.map(s=>ge({inputs:{x:s},attrs:{shape:[-1,re(s.shape.slice(e))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j6(t){const{inputs:e,backend:n,attrs:r}=t,{axis:o}=r,s=Ge(o,e[0].shape)[0],i=e.map(u=>u.shape);g2(i,s);const a=Ws(e.map(u=>u.shape),s);if(re(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(u=>re(u.shape)>0);return l.length===1?jr({inputs:{x:l[0]},backend:n}):jf(l,s,n)}const gWe={kernelName:Hx,backendName:"webgl",kernelFunc:j6};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class W6{constructor(e,n=!1,r=null,o=!1,s=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const i=e.padInfo.top,a=e.padInfo.left,l=e.strideHeight,u=e.strideWidth,c=e.dilationHeight,d=e.dilationWidth,f=e.filterHeight,h=e.filterWidth,p=Math.floor(e.inChannels/4)*4,m=e.inChannels%4,g=e.dataFormat==="channelsLast",y=g?1:2,v=g?2:3,b=g?3:1;let x="",w="";r&&(o?x=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?x=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:x=`
          float activation(float x) {
            ${r}
          }
        `,w="result = activation(result);");const S=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${x}

      const ivec2 strides = ivec2(${l}, ${u});
      const ivec2 pads = ivec2(${i}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${b}];

        ivec2 xRCCorner =
            ivec2(coords[${y}], coords[${v}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${f}; wR++) {
          int xR = xRCorner + wR * ${c};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${h}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${p}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${g}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${m===1}) {

              if (${g}) {
                dotProd +=
                    getX(batch, xR, xC, ${p}) *
                    getW(wR, wC, ${p}, d2);
              } else {
                dotProd +=
                    getX(batch, ${p}, xR, xC) *
                    getW(wR, wC, ${p}, d2);
              }

            } else if (${m===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2)
              );

              if (${g}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${m===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2),
                getW(wR, wC, ${p} + 2, d2)
              );

              if (${g}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1),
                  getX(batch, xR, xC, ${p} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC),
                  getX(batch, ${p} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${S}
        ${w}
        setOutput(result);
      }
    `}}class yWe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,o=e.padInfo.left,s=e.strideDepth,i=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,d=e.filterDepth,f=e.filterHeight,h=e.filterWidth,p=Math.floor(e.inChannels/4)*4,m=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${s}, ${i}, ${a});
      const ivec3 pads = ivec3(${n}, ${r}, ${o});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${f}; wR++) {
            int xR = xRCorner + wR * ${u};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h}; wC++) {
              int xC = xCCorner + wC * ${c};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${p}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${m===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${p}) *
                  getW(wF, wR, wC, ${p}, d2);
              } else if (${m===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${m===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1),
                  getX(batch, xF, xR, xC, ${p} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2),
                  getW(wF, wR, wC, ${p} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class V6{constructor(e,n=!1,r=null,o=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=qn(this.outputShape.length);const i=e.padInfo.left,a=e.strideWidth,l=e.dilationWidth,u=e.filterHeight,c=e.filterWidth,d=c;let f=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let g=0;g<c;g++)f+=`
           vec4 xTexelC${g*2};
           int xTexelC${g*2}Ready;
           vec4 xTexelC${g*2+1};
           int xTexelC${g*2+1}Ready;
           vec4 xC${g};`;f+=`
     for (int r = 0; r < ${u}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let g=0;g<c;g++)f+=`
           xTexelC${g*2} = vec4(0.0);
           xTexelC${g*2}Ready = 0;
           xTexelC${g*2+1} = vec4(0.0);
           xTexelC${g*2+1}Ready = 0;
           xC${g} = vec4(0.0);`;f+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let g=0;g<(d+1)/2;g++){const y=g*2;if(f+=`
           xC = xCCorner + ${y*l};
           `,a===1){if(y<c&&(i%2===1?(f+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }
               `,l===1&&y>0?f+=`
                 xC${y} = vec4(xTexelC${y-2}.zw, xTexelC${y}.xy);
                 `:f+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${y} = vec4(previous.zw, xTexelC${y}.xy);
                   } else {
                     xC${y} = vec4(0.0, 0.0, xTexelC${y}.xy);
                   }
                   `):f+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 xC${y} = xTexelC${y};
                 `,y+1<c)){const v=i%2===0?_T(l):l;l%2===0&&i%2===1||l%2!==0&&i%2!==1?(f+=`
                   xCOffset = xC + imod(pads[1], 2) + ${v};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                     xTexelC${y+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${y+1}.zw = vec2(0.0);
                     }
                     xTexelC${y+1}Ready = 1;
                   }
                   `,l>1?f+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${y+1} = vec4(previous.zw, xTexelC${y+1}.xy);
                     } else {
                      xC${y+1} = vec4(0.0, 0.0, xTexelC${y+1}.xy);
                     }
                     `:f+=`
                     xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.xy);
                     `):v===1?f+=`
                     xC${y+1} = xTexelC${y};
                     `:f+=`
                     xCOffset = xC + ${v};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                       xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${y+1}.zw = vec2(0.0);
                       }
                       xTexelC${y+1}Ready = 1;
                     }

                     xC${y+1} = xTexelC${y+1};
                     `}}else y<c&&(i%2===1?(f+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${y+1}Ready == 0) {
                   xTexelC${y+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${y+1}.zw = vec2(0.0);
                   }
                   xTexelC${y+1}Ready = 1;
                 }

                 xC${y} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
               `,y+1<c&&(f+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${y+1} = vec4(xTexelC${y+1}.xy, final.xy);
                 `)):(f+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                   xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y+1}.zw = vec2(0.);
                   }
                   xTexelC${y+1}Ready = 1;
                 }

                 xC${y} = vec4(
                   xTexelC${y}.xy, xTexelC${y+1}.xy);
               `,y+1<c&&(f+=`
                   xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
                 `)));y<c&&(f+=`
             wTexel = getW(r, ${y}, d1, d2);
             dotProd += xC${y}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${y}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,y+1<c&&(f+=`
               wTexel = getW(r, ${y+1}, d1, d2);
               dotProd += xC${y+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${y+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}f+=`
     }
   `,f+=`
     }
   `,f+=`
     }
   `;let h="",p="";r&&(o?h=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:s?h=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:h=`vec4 activation(vec4 x) {
           ${r}
         }`,p="result = activation(result);");const m=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${h}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${f}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${m}
         ${p}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vWe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=qn(this.outputShape.length);const{dataFormat:r}=n,o=cr(),s=r==="channelsLast",i=s?1:2,a=s?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let u="";for(let c=0;c<=1;c++)for(let d=0;d<=1;d++)u+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${c};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${i}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${a}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${s}) {
                  innerDims = vec2(d1, ch);
                  result[${c*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${c*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${u}

        ${o.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h0(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function U6({x:t,filter:e,convInfo:n,backend:r,bias:o=null,preluActivationWeights:s=null,leakyreluAlpha:i=0,activation:a=null}){const l=t.shape,u=r.texData.get(t.dataId),c=n.inChannels,d=l[0]*l[1]*l[2],f=n.outChannels,h=n.dataFormat==="channelsLast",p=!1,m=!1;let g;const y=[];if(s!=null){const x=h0(s.shape,h);x!=null&&(s=ge({inputs:{x:s},backend:r,attrs:{shape:x}}),y.push(s))}if(o!=null){const x=h0(o.shape,h);x!=null&&(o=ge({inputs:{x:o},backend:r,attrs:{shape:x}}),y.push(o))}if(!((d===1||f===1)&&c>M6)&&u.isPacked&&h&&u.texture!=null&&l[2]%2!==0&&at(u.shape.slice(-3),l.slice(-3))){const x=l[0]*l[1]*(l[2]+1),w={dataId:t.dataId,shape:[1,x,n.inChannels],dtype:t.dtype},S=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,P(d0(u.shape,w.shape),()=>`packed reshape ${u.shape} to ${w.shape} isn't free`);const $=ge({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});y.push($);const C=f0({a:w,b:$,backend:r,transposeA:p,transposeB:m,bias:o,activation:a,preluActivationWeights:s,leakyreluAlpha:i}),k=r.texData.get(C.dataId);P(k.isPacked,()=>"batchMatMul result is expected to be packed"),u.shape=S,k.shape=n.outShape,g=jr({inputs:{x:C},backend:r}),g.shape=n.outShape,y.push(C)}else{const x=n.outHeight*n.outWidth,w=ge({inputs:{x:t},backend:r,attrs:{shape:h?[n.batchSize,x,n.inChannels]:[n.batchSize,n.inChannels,x]}}),S=ge({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),$=f0({a:h?w:S,b:h?S:w,transposeA:!h,transposeB:m,backend:r,bias:o,activation:a,preluActivationWeights:s,leakyreluAlpha:i});g=ge({inputs:{x:$},backend:r,attrs:{shape:n.outShape}}),y.push(w),y.push(S),y.push($)}for(const x of y)r.disposeIntermediateTensorInfo(x);return g}function G6({x:t,filter:e,convInfo:n,backend:r,bias:o=null,preluActivationWeights:s=null,leakyreluAlpha:i=0,activation:a=null}){const{filterWidth:l,filterHeight:u,inChannels:c,outWidth:d,outHeight:f,dataFormat:h}=n,p=h==="channelsLast",m=l*u*c,g=f*d,y=[n.batchSize,m,g],v=!0,b=!1,x=[];if(s!=null){const N=h0(s.shape,p);N!=null&&(s=ge({inputs:{x:s},backend:r,attrs:{shape:N}}),x.push(s))}if(o!=null){const N=h0(o.shape,p);N!=null&&(o=ge({inputs:{x:o},backend:r,attrs:{shape:N}}),x.push(o))}const w=ge({inputs:{x:e},backend:r,attrs:{shape:[1,m,re(e.shape)/m]}});x.push(w);const S=new vWe(y,n),$=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],C=r.runWebGLProgram(S,[t],"float32",$),k=ge({inputs:{x:C},backend:r,attrs:{shape:y}});x.push(C),x.push(k);const I=o!=null,T=s!=null,E=a==="leakyrelu",_=a?gp(a,!0):null,O=new D6(p?k.shape:w.shape,p?w.shape:k.shape,p?[n.batchSize,g,n.outChannels]:[n.batchSize,n.outChannels,g],v,b,I,_,T,E),F=p?[k,w]:[w,k];if(o&&F.push(o),T&&F.push(s),E){const N=r.makeTensorInfo([],"float32",Ya(i,"float32"));F.push(N),x.push(N)}const M=r.runWebGLProgram(O,F,"float32"),L=ge({inputs:{x:M},backend:r,attrs:{shape:n.outShape}});x.push(M);for(const N of x)r.disposeIntermediateTensorInfo(N);return L}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s}=e,{strides:i,pad:a,dataFormat:l,dilations:u,dimRoundingMode:c}=r,d=Wi(l),f=Fn(o.shape,s.shape,i,u,a,c,!1,d);let h;if(f.filterHeight===1&&f.filterWidth===1&&f.dilationHeight===1&&f.dilationWidth===1&&f.strideHeight===1&&f.strideWidth===1&&(f.padInfo.type==="SAME"||f.padInfo.type==="VALID"))h=U6({x:o,filter:s,convInfo:f,backend:n});else if(f.strideWidth<=2&&d==="channelsLast"&&J().getBool("WEBGL_EXP_CONV")){const m=new V6(f),g=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]];h=n.runWebGLProgram(m,[o,s],"float32",g)}else if(J().getBool("WEBGL_CONV_IM2COL"))h=G6({x:o,filter:s,convInfo:f,backend:n});else{const m=new W6(f);h=n.runWebGLProgram(m,[o,s],"float32")}const p=ge({inputs:{x:h},backend:n,attrs:{shape:f.outShape}});return n.disposeIntermediateTensorInfo(h),p}const bWe={kernelName:Kx,backendName:"webgl",kernelFunc:xWe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wWe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,o=e.padInfo.top,s=e.padInfo.left,i=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${o};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${s};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${i?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class SWe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,o=e.strideHeight,s=e.strideWidth,i=e.dataFormat==="channelsLast",a=n-1-e.padInfo.top,l=r-1-e.padInfo.left,u=i?1:2,c=i?2:3,d=i?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${u}], coords[${c}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${i}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class CWe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,o=e.strideWidth,s=e.padInfo.front,i=e.padInfo.top,a=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${s};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${i};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${o} - ${a};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class $We{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,o=e.filterWidth,s=e.strideDepth,i=e.strideHeight,a=e.strideWidth,l=n-1-e.padInfo.front,u=r-1-e.padInfo.top,c=o-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${u}, ${c});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${s}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${o}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${o} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,dy:s}=e,{strides:i,pad:a,dataFormat:l,dimRoundingMode:u,filterShape:c}=r,d=Wi(l),f=Fn(o.shape,c,i,1,a,u,!1,d),h=new wWe(f);return n.runWebGLProgram(h,[o,s],"float32")}const IWe={kernelName:GT,backendName:"webgl",kernelFunc:kWe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TWe{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=qn(this.outputShape.length);const n=e.filterHeight,r=e.filterWidth,o=n-1-e.padInfo.top,s=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EWe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,filter:s}=e,{inputShape:i,strides:a,pad:l,dataFormat:u,dimRoundingMode:c}=r,d=Wi(u),f=Fn(i,s.shape,a,1,l,c,!1,d);if(J().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&d==="channelsLast"){const h=[[f.strideHeight,f.strideWidth]],p=new TWe(f);return n.runWebGLProgram(p,[o,s],"float32",h)}else{const h=new SWe(f);return n.runWebGLProgram(h,[o,s],"float32")}}const NWe={kernelName:qx,backendName:"webgl",kernelFunc:EWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s}=e,{strides:i,pad:a,dilations:l}=r,u=Qa(o.shape,s.shape,i,l,a),c=new yWe(u);return n.runWebGLProgram(c,[o,s],"float32")}const OWe={kernelName:Xx,backendName:"webgl",kernelFunc:AWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _We(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,dy:s}=e,{strides:i,pad:a,filterShape:l}=r,u=Qa(o.shape,l,i,1,a),c=new CWe(u);return n.runWebGLProgram(c,[o,s],"float32")}const RWe={kernelName:HT,backendName:"webgl",kernelFunc:_We};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PWe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,filter:s}=e,{pad:i,strides:a,inputShape:l}=r,u=Qa(l,s.shape,a,1,i),c=new $We(u);return n.runWebGLProgram(c,[o,s],"float32")}const DWe={kernelName:KT,backendName:"webgl",kernelFunc:PWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MWe=tf+`
  return cos(x);
`,FWe=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${Tu}
  return result;
`,LWe=Je({opSnippet:MWe,packedOpSnippet:FWe}),BWe={kernelName:Hp,backendName:"webgl",kernelFunc:LWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zWe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,jWe=Je({opSnippet:zWe}),WWe={kernelName:Kp,backendName:"webgl",kernelFunc:jWe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VWe{constructor(e,n,r,o,s){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[i,a,l,u]=e,[c]=n,[d,f]=r;this.outputShape=[c,d,f,u];const h=o==="bilinear"?1:0,[p,m]=[`${a-1}.0`,`${l-1}.0`],[g,y,v]=d>1?[`${(a-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${p} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${p}`],[b,x,w]=f>1?[`${(l-1)/(f-1)}`,"(x2-x1) * width_ratio",`x1*${m} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${m}`];this.userCode=`
      const float height_ratio = float(${g});
      const float width_ratio = float(${b});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${i}) {
          return;
        }

        float height_scale = ${y};
        float width_scale = ${x};

        float in_y = ${v};
        if( in_y < 0.0 || in_y > ${p} ) {
          setOutput(float(${s}));
          return;
        }
        float in_x = ${w};
        if( in_x < 0.0 || in_x > ${m} ) {
          setOutput(float(${s}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${h} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UWe=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:o,boxes:s,boxInd:i}=e,{cropSize:a,method:l,extrapolationValue:u}=r,c=new VWe(o.shape,s.shape,a,l,u);return n.runWebGLProgram(c,[o,s,i],"float32")},GWe={kernelName:XT,backendName:"webgl",kernelFunc:UWe};var vp;(function(t){t.Prod="*",t.Sum="+"})(vp||(vp={}));class VM{constructor(e,n,r,o){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const s=this.outputShape.length,i=this.op===vp.Prod?"1.0":"0.0",a=r?i:`getX(${UM(s,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let u="",c="";r?(u=o?`end != ${l-1}`:"end != 0",c=o?"end + 1":"end - 1"):(u=o?`end + pow2 < ${l}`:"end >= pow2",c=o?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${gt(s)} coords = getOutputCoords();
        int end = ${GM(s,"coords",this.op)};
        float val = ${a};
        int pow2 = int(pow(2.0, index));
        if (${u}) {
          int idx = ${c};
          ${GM(s,"coords",this.op)} = idx;
          val ${this.op}= getX(${UM(s,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function UM(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function GM(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H6(t,e,n,r,o,s){const i=e.shape.length,a=Gt([r],i);let l=e;a!=null&&(l=lr({inputs:{x:e},backend:n,attrs:{perm:a}}));const u=rn(1,i)[0];if(u!==i-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const c=l.shape[u];let d=jr({inputs:{x:l},backend:n});for(let f=0;f<=Math.ceil(Math.log2(c))-1;f++){const h=new VM(t,l.shape,!1,s),p=[[f]],m=d;d=n.runWebGLProgram(h,[d],d.dtype,p),n.disposeIntermediateTensorInfo(m)}if(o){const f=new VM(t,l.shape,o,s),h=d;d=n.runWebGLProgram(f,[d],d.dtype),n.disposeIntermediateTensorInfo(h)}if(a!=null){const f=Za(a),h=lr({inputs:{x:d},backend:n,attrs:{perm:f}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(l),h}return d}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,exclusive:i,reverse:a}=r;return H6(vp.Prod,o,n,s,i,a)}const KWe={kernelName:qT,backendName:"webgl",kernelFunc:HWe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,exclusive:i,reverse:a}=r;return H6(vp.Sum,o,n,s,i,a)}const XWe={kernelName:Yx,backendName:"webgl",kernelFunc:qWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,weights:s}=e,{size:i,binaryOutput:a}=r;if(o.shape.length===1){const l=n.readSync(o.dataId),u=n.readSync(s.dataId),c=I6(l,u,s.dtype,s.shape,i);return n.makeTensorInfo([i],s.dtype,c)}else if(o.shape.length===2){const l=n.bufferSync(o),u=n.bufferSync(s),c=eze(l,u,i,a);return n.makeTensorInfo(c.shape,s.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${o.shape.length}.`)}const QWe={kernelName:YT,backendName:"webgl",kernelFunc:YWe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZWe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{blockSize:s,dataFormat:i}=r,a=o.shape[0],l=i==="NHWC"?o.shape[1]:o.shape[2],u=i==="NHWC"?o.shape[2]:o.shape[3],c=i==="NHWC"?o.shape[3]:o.shape[1],d=l*s,f=u*s,h=c/(s*s),p=i==="NHWC"?[a,d,f,h]:[a,h,d,f],m=new ZWe(p,s,i);return n.runWebGLProgram(m,[o],o.dtype)}const eVe={kernelName:QT,backendName:"webgl",kernelFunc:JWe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class K6{constructor(e,n=!1,r=null,o=!1,s=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=qn(this.outputShape.length);const i=e.filterHeight,a=e.filterWidth,l=e.outChannels/e.inChannels;let u="",c="";r&&(o?u=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?u=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:u=`
          float activation(float x) {
            ${r}
          }
        `,c="result = activation(result);");const d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${u}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${i}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${a}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${c}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class q6{constructor(e,n=!1,r=null,o=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=qn(this.outputShape.length);const i=e.outChannels/e.inChannels,a=e.padInfo.left,l=e.strideWidth,u=e.dilationWidth,c=e.filterHeight,d=e.filterWidth,f=d;let h=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let y=0;y<d;y++)h+=`
          vec4 xTexelC${y*2};
          int xTexelC${y*2}Ready;
          vec4 xTexelC${y*2+1};
          int xTexelC${y*2+1}Ready;
          vec4 xC${y};`;h+=`
    for (int r = 0; r < ${c}; r++) {
      `;for(let y=0;y<d;y++)h+=`
          xTexelC${y*2} = vec4(0.0);
          xTexelC${y*2}Ready = 0;
          xTexelC${y*2+1} = vec4(0.0);
          xTexelC${y*2+1}Ready = 0;
          xC${y} = vec4(0.0);`;h+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let y=0;y<(f+1)/2;y++){const v=y*2;if(h+=`
          xC = xCCorner + ${v*u};
          `,l===1){if(v<d&&(a%2===1?(h+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }
              `,u===1&&v>0?h+=`
                xC${v} = vec4(xTexelC${v-2}.zw, xTexelC${v}.xy);
                `:h+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${v} = vec4(previous.zw, xTexelC${v}.xy);
                  } else {
                    xC${v} = vec4(0.0, 0.0, xTexelC${v}.xy);
                  }
                  `):h+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                xC${v} = xTexelC${v};
                `,v+1<d)){const b=a%2===0?_T(u):u;u%2===0&&a%2===1||u%2!==0&&a%2!==1?(h+=`
                  xCOffset = xC + imod(pads[1], 2) + ${b};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                    xTexelC${v+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${v+1}.zw = vec2(0.0);
                    }
                    xTexelC${v+1}Ready = 1;
                  }
                  `,u>1?h+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${v+1} = vec4(previous.zw, xTexelC${v+1}.xy);
                    } else {
                     xC${v+1} = vec4(0.0, 0.0, xTexelC${v+1}.xy);
                    }
                    `:h+=`
                    xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.xy);
                    `):b===1?h+=`
                    xC${v+1} = xTexelC${v};
                    `:h+=`
                    xCOffset = xC + ${b};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                      xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${v+1}.zw = vec2(0.0);
                      }
                      xTexelC${v+1}Ready = 1;
                    }

                    xC${v+1} = xTexelC${v+1};
                    `}}else v<d&&(a%2===1?(h+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${v+1}Ready == 0) {
                  xTexelC${v+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${v+1}.zw = vec2(0.0);
                  }
                  xTexelC${v+1}Ready = 1;
                }

                xC${v} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
              `,v+1<d&&(h+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${v+1} = vec4(xTexelC${v+1}.xy, final.xy);
                `)):(h+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                  xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v+1}.zw = vec2(0.);
                  }
                  xTexelC${v+1}Ready = 1;
                }

                xC${v} = vec4(
                  xTexelC${v}.xy, xTexelC${v+1}.xy);
              `,v+1<d&&(h+=`
                  xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
                `)));v<d&&(h+=`
            wTexel = getW(r, ${v}, d1, q);
            dotProd += xC${v} * vec4(wTexel.xz, wTexel.xz);
          `,v+1<d&&(h+=`
              wTexel = getW(r, ${v+1}, d1, q);
              dotProd += xC${v+1} * vec4(wTexel.xz, wTexel.xz);
            `))}h+=`
    }
  `,h+=`
      }
    `;let p="",m="";r&&(o?p=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?p=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:p=`vec4 activation(vec4 x) {
          ${r}
        }`,m="result = activation(result);");const g=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${p}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${i};
        int q = d2 - d1 * ${i};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${h}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${g}
        ${m}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s}=e,{strides:i,pad:a,dilations:l,dimRoundingMode:u}=r;let c=l;c==null&&(c=[1,1]),P(Kn(i,c),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const d=Fn(o.shape,s.shape,i,c,a,u,!0);let f;J().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?f=new q6(d):f=new K6(d);const h=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(f,[o,s],"float32",h)}const nVe={kernelName:Qx,backendName:"webgl",kernelFunc:tVe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rVe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,o=e.padInfo.top,s=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${i} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${o};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${s};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class oVe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,o=e.strideHeight,s=e.strideWidth,i=n-1-e.padInfo.top,a=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,dy:s}=e,{strides:i,dilations:a,pad:l,dimRoundingMode:u,filterShape:c}=r,d=Fn(o.shape,c,i,a,l,u,!0),f=new rVe(d);return n.runWebGLProgram(f,[o,s],"float32")}const iVe={kernelName:ZT,backendName:"webgl",kernelFunc:sVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aVe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,filter:s}=e,{strides:i,dilations:a,pad:l,dimRoundingMode:u,inputShape:c}=r,d=Fn(c,s.shape,i,a,l,u,!0),f=new oVe(d);return n.runWebGLProgram(f,[o,s],"float32")}const lVe={kernelName:JT,backendName:"webgl",kernelFunc:aVe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uVe{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cVe(t){const{inputs:e,backend:n}=t,{x:r}=e,o=[...r.shape,...r.shape],s=re(r.shape),i=ge({inputs:{x:r},backend:n,attrs:{shape:[s]}}),a=new uVe(s),l=n.runWebGLProgram(a,[i],i.dtype),u=ge({inputs:{x:l},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(l),u}const dVe={kernelName:_W,backendName:"webgl",kernelFunc:cVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fVe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:o,strideHeight:s,strideWidth:i,filterHeight:a,filterWidth:l,dilationHeight:u,dilationWidth:c}=e,{top:d,left:f}=o;this.userCode=`
      const ivec2 strides = ivec2(${s}, ${i});
      const ivec2 pads = ivec2(${d}, ${f});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${u};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${c};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s}=e,{strides:i,pad:a,dilations:l}=r,u=Om(o.shape,s.shape,i,a,"NHWC",l);let c;const d=new fVe(u);c=n.runWebGLProgram(d,[o,s],"float32");const f=ge({inputs:{x:c},backend:n,attrs:{shape:u.outShape}});return n.disposeIntermediateTensorInfo(c),f}const pVe={kernelName:Zx,backendName:"webgl",kernelFunc:hVe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mVe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:o}=r,s=e,{allDims:i,summedDims:a,idDims:l}=E2(o,s.length);A2(i.length,l,s);const{path:u,steps:c}=O2(a,l),d=c.length;let f=null,h=i.length;const p=[];for(let m=0;m<d;++m){for(const g of c[m]){const{permutationIndices:y,expandDims:v}=N2(h,l[g]);let b;_2(y)?b=s[g]:(b=lr({inputs:{x:s[g]},backend:n,attrs:{perm:y}}),p.push(b));const x=b.shape.slice();for(let w=0;w<v.length;++w)x.splice(v[w],0,1);at(b.shape,x)||(b=ge({inputs:{x:b},backend:n,attrs:{shape:x}}),p.push(b)),f===null?f=b:(f=xN({inputs:{a:b,b:f},backend:n}),p.push(f))}m<d-1&&(u[m]>=0&&(f=f1({inputs:{x:f},backend:n,attrs:{axis:u[m]-(i.length-h),keepDims:!1}}),p.push(f)),h--)}for(const m of p)m!==f&&n.disposeIntermediateTensorInfo(m);return f}const gVe={kernelName:eE,backendName:"webgl",kernelFunc:mVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yVe="return (x >= 0.0) ? x : (exp(x) - 1.0);",vVe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,xVe=Je({opSnippet:yVe,packedOpSnippet:vVe}),bVe={kernelName:Xp,backendName:"webgl",kernelFunc:xVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wVe="return (b >= 0.0) ? a : a * (b + 1.0);",SVe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,CVe=t=>{const{inputs:e,backend:n}=t,{dy:r,y:o}=e,s=J().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ef(SVe,r.shape,o.shape):new du(wVe,r.shape,o.shape);return n.runWebGLProgram(s,[r,o],r.dtype)},$Ve={kernelName:tE,backendName:"webgl",kernelFunc:CVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kVe=`
  return vec4(equal(a, b));
`,IVe="return float(a == b);",TVe=Bn({opSnippet:IVe,packedOpSnippet:kVe,dtype:"bool",cpuKernelImpl:sze}),EVe={kernelName:Jx,backendName:"webgl",kernelFunc:TVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NVe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${w2};
  float a1 = ${S2};
  float a2 = ${C2};
  float a3 = ${$2};
  float a4 = ${k2};
  float a5 = ${I2};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,AVe=Je({opSnippet:NVe}),OVe={kernelName:Yp,backendName:"webgl",kernelFunc:AVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Ve=tf+`
  return exp(x);
`,RVe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,X6=Je({opSnippet:_Ve,packedOpSnippet:RVe,cpuKernelImpl:ize,dtype:"float32"}),PVe={kernelName:Qp,backendName:"webgl",kernelFunc:X6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dk(t){const{inputs:e,attrs:n,backend:r}=t,{dim:o}=n,{input:s}=e,i=s.shape.length,a=s.shape.slice();let l=o;return o<0&&(P(-(i+1)<=o,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),l=i+o+1),a.splice(l,0,1),ge({inputs:{x:s},backend:r,attrs:{shape:a}})}const DVe={kernelName:eb,backendName:"webgl",kernelFunc:dk};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HM="return exp(x) - 1.0;",MVe=Je({opSnippet:HM,packedOpSnippet:HM,cpuKernelImpl:aze}),FVe={kernelName:Zp,backendName:"webgl",kernelFunc:MVe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KM{constructor(e,n,r){this.variableNames=["real","imag"];const o=n[1];this.outputShape=n;const s=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,i=r?`${o}.0`:"1.0";let a;if(e==="real")a="return real * expR - imag * expI;";else if(e==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${s};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${o});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${o}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${i};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y6(t,e,n){const r=n.texData.get(t.dataId),o=re(t.shape),s=t.shape[t.shape.length-1],i=o/s,a=ge({inputs:{x:t},backend:n,attrs:{shape:[i,s]}}),l=a.shape,u=new KM("real",l,e),c=new KM("imag",l,e),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],f=n.runWebGLProgram(u,d,"float32"),h=n.runWebGLProgram(c,d,"float32"),p=ol({inputs:{real:f,imag:h},backend:n});n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h);const m=ge({inputs:{x:p},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(p),m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LVe(t){const{inputs:e,backend:n}=t,{input:r}=e;return Y6(r,!1,n)}const BVe={kernelName:nE,backendName:"webgl",kernelFunc:LVe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zVe{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zm(t){const{backend:e,attrs:n}=t,{shape:r,value:o}=n;let{dtype:s}=n;if(s=s||zd(o),s==="string"){const i=en(s,re(r));return i.fill(o),e.makeTensorInfo(r,s,i)}else{const i=new zVe(r,o),a=[[o]];return e.runWebGLProgram(i,[],s,a)}}const jVe={kernelName:rE,backendName:"webgl",kernelFunc:Zm};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WVe{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VVe={kernelName:oE,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,o=new WVe(n.shape);return r.runWebGLProgram(o,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qM="return floor(x);",UVe=Je({opSnippet:qM,packedOpSnippet:qM,cpuKernelImpl:lze}),GVe={kernelName:Jp,backendName:"webgl",kernelFunc:UVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HVe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,KVe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,qVe=Bn({opSnippet:HVe,packedOpSnippet:KVe,dtype:"int32"}),XVe={kernelName:em,backendName:"webgl",kernelFunc:qVe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YVe{constructor(e){this.variableNames=["A"];const n=cr(),[r,o]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${o}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QVe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=cr(),[r,o]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${o}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZVe={kernelName:cCe,backendName:"webgl",kernelFunc:JVe};let Du,jw=J().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function JVe(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:o}=e;const{numChannels:s}=r,i=typeof HTMLVideoElement<"u"&&o instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&o instanceof HTMLImageElement,[l,u]=i?[o.videoWidth,o.videoHeight]:[o.width,o.height],c=[u,l],d=[u,l,s];if(a||i){const m=J().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(Du==null||m!==jw)&&(jw=m,Du=document.createElement("canvas").getContext("2d",{willReadFrequently:jw})),Du.canvas.width=l,Du.canvas.height=u,Du.drawImage(o,0,0,l,u),o=Du.canvas}const f=n.makeTensorInfo(c,"int32");n.texData.get(f.dataId).usage=eo.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(f.dataId),o);const h=J().getBool("WEBGL_PACK")?new QVe(d):new YVe(d),p=n.runWebGLProgram(h,[f],"int32");return n.disposeData(f.dataId),p}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s,bias:i,preluActivationWeights:a}=e,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:f,activation:h,leakyreluAlpha:p}=r,m=Wi(c),g=Fn(o.shape,s.shape,l,d,u,f,!1,m);let y;const v=[],b=i!=null,x=a!=null,w=h==="leakyrelu",S=()=>{const C=[o,s],k=(I,T)=>{if(T==="NCHW"&&I.shape.length===1&&I.shape[0]!==1){const E=ge({inputs:{x:I},backend:n,attrs:{shape:[I.shape[0],1,1]}});return v.push(E),E}return I};if(b&&C.push(k(i,c)),x&&C.push(k(a,c)),w){const I=n.makeTensorInfo([],"float32",Ya(p,"float32"));C.push(I),v.push(I)}return C};if(g.filterHeight===1&&g.filterWidth===1&&g.dilationHeight===1&&g.dilationWidth===1&&g.strideHeight===1&&g.strideWidth===1&&(g.padInfo.type==="SAME"||g.padInfo.type==="VALID"))y=U6({x:o,filter:s,convInfo:g,backend:n,bias:i,activation:h,preluActivationWeights:a,leakyreluAlpha:p});else if(g.strideWidth<=2&&m==="channelsLast"&&J().getBool("WEBGL_EXP_CONV")){const C=h?gp(h,!0):null,k=new V6(g,b,C,x,w),I=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],T=S();y=n.runWebGLProgram(k,T,"float32",I)}else if(J().getBool("WEBGL_CONV_IM2COL"))y=G6({x:o,filter:s,convInfo:g,backend:n,bias:i,activation:h,preluActivationWeights:a,leakyreluAlpha:p});else{const C=h?gp(h,!1):null,k=new W6(g,b,C,x,w),I=S();y=n.runWebGLProgram(k,I,"float32")}const $=ge({inputs:{x:y},backend:n,attrs:{shape:g.outShape}});return v.push(y),v.forEach(C=>n.disposeIntermediateTensorInfo(C)),$}const tUe={kernelName:Wv,backendName:"webgl",kernelFunc:eUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s,bias:i,preluActivationWeights:a}=e,{strides:l,pad:u,dilations:c,dimRoundingMode:d,activation:f,leakyreluAlpha:h}=r,p=[];let m=c;m==null&&(m=[1,1]),P(Kn(l,m),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${m}'`);const g=Fn(o.shape,s.shape,l,m,u,d,!0),y=J().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,v=f?gp(f,y):null,b=[o,s],x=i!=null,w=a!=null,S=f==="leakyrelu";if(x&&b.push(i),w&&b.push(a),S){const I=n.makeTensorInfo([],"float32",Ya(h,"float32"));b.push(I),p.push(I)}let $;y?$=new q6(g,x,v,w,S):$=new K6(g,x,v,w,S);const C=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],k=n.runWebGLProgram($,b,"float32",C);return p.forEach(I=>n.disposeIntermediateTensorInfo(I)),k}const rUe={kernelName:QW,backendName:"webgl",kernelFunc:nUe};class oUe{constructor(e,n,r,o){this.sliceDim=e,this.strides=n,this.paramsShape=o,this.variableNames=["x","indices"],this.outputShape=r;const s=gt(r.length);let i=`
    int index;`;for(let a=0;a<this.sliceDim;a++)i+=`
          index = round(getIndices(coords[0], ${a}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};
          flattenIndex += index * ${this.strides[a]};`;this.userCode=`
         void main() {
          ${s} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${i}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sUe(t){const{inputs:e,backend:n}=t,{params:r,indices:o}=e,s=o.shape,i=s[s.length-1],a=re(r.shape),[l,u,c,d]=c2(r,o),f=ge({inputs:{x:o},backend:n,attrs:{shape:[u,i]}}),h=ge({inputs:{x:r},backend:n,attrs:{shape:[re(r.shape)/c,c]}});if(n.shouldExecuteOnCPU([r,o])||r.dtype==="string"){const y=n.readSync(o.dataId),v=n.bufferSync(r),b=uze(y,v,r.dtype,u,i,c,d,r.shape,a);return n.makeTensorInfo(l,r.dtype,b.values)}const p=new oUe(i,d,[u,c],r.shape),m=n.runWebGLProgram(p,[h,f],h.dtype),g=ge({inputs:{x:m},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}const iUe={kernelName:RW,backendName:"webgl",kernelFunc:sUe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aUe{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=gt(this.rank),o=lUe(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${o}));
      }
    `}}function lUe(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let o=0;o<t.length;o++)o===2?r.push("index"):r.push(`${n[o]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q6(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,indices:s}=e,{axis:i,batchDims:a}=r,l=Ge(i,o.shape)[0];if(J().get("DEBUG")){const v=n.readSync(s.dataId),b=o.shape[l];for(let x=0;x<v.length;++x){const w=v[x];P(w<=b-1&&w>=0,()=>`GatherV2: the index value ${w} is not in [0, ${b-1}]`)}}const u=P2(o,s,l,a),c=re(s.shape),d=[],f=ge({inputs:{x:o},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),h=ge({inputs:{x:s},backend:n,attrs:{shape:[u.batchSize,c/u.batchSize]}});d.push(f),d.push(h);const p=[u.batchSize,u.outerSize,c/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([o,s])||o.dtype==="string"){const v=n.bufferSync(h),b=n.bufferSync(f),x=cze(b,v,p);return d.forEach(w=>n.disposeIntermediateTensorInfo(w)),n.makeTensorInfo(u.outputShape,x.dtype,x.values)}const m=new aUe(f.shape,p),g=n.runWebGLProgram(m,[f,h],f.dtype);d.push(g);const y=ge({inputs:{x:g},backend:n,attrs:{shape:u.outputShape}});return d.forEach(v=>n.disposeIntermediateTensorInfo(v)),y}const uUe={kernelName:nb,backendName:"webgl",kernelFunc:Q6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cUe="return float(a > b);",dUe=`
  return vec4(greaterThan(a, b));
`,fUe=Bn({opSnippet:cUe,packedOpSnippet:dUe,cpuKernelImpl:dze,dtype:"bool"}),hUe={kernelName:rb,backendName:"webgl",kernelFunc:fUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pUe="return float(a >= b);",mUe=`
  return vec4(greaterThanEqual(a, b));
`,gUe=Bn({opSnippet:pUe,packedOpSnippet:mUe,dtype:"bool",cpuKernelImpl:fze}),yUe={kernelName:tm,backendName:"webgl",kernelFunc:gUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vUe(t){const{inputs:e,backend:n}=t,{input:r}=e;return Y6(r,!0,n)}const xUe={kernelName:sE,backendName:"webgl",kernelFunc:vUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bUe="return float(!isnan(x) && !isinf(x));",wUe=Je({opSnippet:bUe,dtype:"bool"}),SUe={kernelName:rm,backendName:"webgl",kernelFunc:wUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CUe="return float(isinf(x));",$Ue=Je({opSnippet:CUe,dtype:"bool"}),kUe={kernelName:om,backendName:"webgl",kernelFunc:$Ue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IUe="return float(isnan(x));",TUe=Je({opSnippet:IUe,dtype:"bool"}),EUe={kernelName:sm,backendName:"webgl",kernelFunc:TUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NUe="return float(a < b);",AUe=`
  return vec4(lessThan(a, b));
`,OUe=Bn({opSnippet:NUe,packedOpSnippet:AUe,cpuKernelImpl:hze,dtype:"bool"}),_Ue={kernelName:sb,backendName:"webgl",kernelFunc:OUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RUe="return float(a <= b);",PUe=`
  return vec4(lessThanEqual(a, b));
`,DUe=Bn({opSnippet:RUe,packedOpSnippet:PUe,cpuKernelImpl:pze,dtype:"bool"}),MUe={kernelName:ib,backendName:"webgl",kernelFunc:DUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FUe(t){const{backend:e,attrs:n}=t,{start:r,stop:o,num:s}=n,i=mze(r,o,s);return e.makeTensorInfo([i.length],"float32",i)}const LUe={kernelName:PW,backendName:"webgl",kernelFunc:FUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BUe=tf+`
  return x < 0.0 ? 0./0. : log(x);
`,zUe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,jUe=Je({opSnippet:BUe,packedOpSnippet:zUe,cpuKernelImpl:gze}),WUe={kernelName:im,backendName:"webgl",kernelFunc:jUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VUe=tf+`
  return log(1.0 + x);
`,UUe=Je({opSnippet:VUe}),GUe={kernelName:am,backendName:"webgl",kernelFunc:UUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HUe="return float(a >= 1.0 && b >= 1.0);",KUe=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,qUe=Bn({opSnippet:HUe,packedOpSnippet:KUe,dtype:"bool"}),XUe={kernelName:ab,backendName:"webgl",kernelFunc:qUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YUe="return float(!(x >= 1.0));",QUe=Je({opSnippet:YUe}),ZUe={kernelName:lb,backendName:"webgl",kernelFunc:QUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JUe="return float(a >= 1.0 || b >= 1.0);",eGe=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,tGe=Bn({opSnippet:JUe,packedOpSnippet:eGe,dtype:"bool"}),nGe={kernelName:ub,backendName:"webgl",kernelFunc:tGe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rGe{constructor(e,n,r,o,s){this.variableNames=["x"],this.outputShape=[];const i=n,a=e[3]-1;this.outputShape=e;let l;const u=`float(${r}) + float(${o}) * sum`;s===.5?l=`inversesqrt(${u})`:s===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${i}; j <= ${i}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oGe{constructor(e,n,r,o,s){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const i=n,a=e[3]-1;this.outputShape=e;let l;const u=`float(${r}) + float(${o}) * sum`;s===.5?l=`inversesqrt(${u})`:s===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${i};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${i}; j <= ${i}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sGe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{depthRadius:s,bias:i,alpha:a,beta:l}=r,u=J().getBool("WEBGL_PACK_NORMALIZATION")?new oGe(o.shape,s,i,a,l):new rGe(o.shape,s,i,a,l);return n.runWebGLProgram(u,[o],o.dtype)},iGe={kernelName:cb,backendName:"webgl",kernelFunc:sGe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aGe{constructor(e,n,r,o,s){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=o,this.beta=s,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${o}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${o})
                * float(${s})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${s});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lGe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:o,y:s,dy:i}=e,{depthRadius:a,bias:l,alpha:u,beta:c}=r,d=new aGe(o.shape,a,l,u,c);return n.runWebGLProgram(d,[o,s,i],o.dtype)},uGe={kernelName:aE,backendName:"webgl",kernelFunc:lGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cGe(t,e,n,r){const o=re(e),i=re(t.shape)/o,a=ge({inputs:{x:t},attrs:{shape:[i,o]},backend:r}),l=Eu(a,t.dtype,"max",r),u=ge({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z6(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{reductionIndices:s,keepDims:i}=r,a=o.shape.length,l=Ge(s,o.shape);let u=l;const c=Gt(u,a),d=c!=null,f=n.shouldExecuteOnCPU([o]);let h=o;if(d){if(f){const b=n.texData.get(h.dataId).values,x=new Array(a);for(let $=0;$<x.length;$++)x[$]=o.shape[c[$]];const w=yN(b,o.shape,o.dtype,c,x);h=n.makeTensorInfo(x,o.dtype);const S=n.texData.get(h.dataId);S.values=w}else h=d1(o,c,n);u=rn(u.length,a)}Ln("max",u,a);const[p,m]=An(h.shape,u);let g=p;i&&(g=dn(p,l));let y;if(f){const b=n.texData.get(h.dataId).values,x=yze(b,re(m),g,o.dtype);y=n.makeTensorInfo(g,o.dtype);const w=n.texData.get(y.dataId);w.values=x}else y=cGe(h,m,g,n);return d&&n.disposeIntermediateTensorInfo(h),y}const dGe={kernelName:db,backendName:"webgl",kernelFunc:Z6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fGe=vN+`
  return max(a, b);
`,hGe=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Tu+`
  return result;
`,pGe=Bn({opSnippet:fGe,packedOpSnippet:hGe,cpuKernelImpl:vze}),mGe={kernelName:lm,backendName:"webgl",kernelFunc:pGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e;Xm(o,"maxPool");const{filterSize:s,strides:i,pad:a,dimRoundingMode:l}=r,u=1;P(Kn(i,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const c=jo(o.shape,s,i,u,a,l);if(c.filterWidth===1&&c.filterHeight===1&&at(c.inShape,c.outShape))return jr({inputs:{x:o},backend:n});const d=new yp(c,"max",!1);return n.runWebGLProgram(d,[o],o.dtype)}const yGe={kernelName:fb,backendName:"webgl",kernelFunc:gGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{filterSize:s,strides:i,pad:a,dataFormat:l,dimRoundingMode:u}=r,c=[1,1,1],d=ji(o.shape,s,i,c,a,u,l),f=new bN(d,"max",!1);return n.runWebGLProgram(f,[o],o.dtype)}const xGe={kernelName:hb,backendName:"webgl",kernelFunc:vGe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bGe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,o=e.dilationHeight,s=e.effectiveFilterHeight,i=e.effectiveFilterWidth,a=s-1-e.padInfo.top,l=i-1-e.padInfo.left,u=s*i-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${s};
          wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${i}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${u} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${i} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class wGe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,i=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterDepth,u=e.effectiveFilterHeight,c=e.effectiveFilterWidth,d=l-1-e.padInfo.front,f=u-1-e.padInfo.top,h=c-1-e.padInfo.left,p=l*u*c-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${f}, ${h});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${s}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${u};
              wR += ${i}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${c};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${p} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${u} * ${c} +
                  wR * ${c} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SGe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:s}=e,i=s,{filterSize:a,strides:l,pad:u,dimRoundingMode:c}=r,d=[1,1,1],f=ji(i.shape,a,l,d,u,c),h=new bN(f,"max",!0),p=n.runWebGLProgram(h,[i],i.dtype),m=new wGe(f),g=n.runWebGLProgram(m,[o,p],i.dtype);return n.disposeIntermediateTensorInfo(p),g}const CGe={kernelName:uE,backendName:"webgl",kernelFunc:SGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ge(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:s,output:i}=e,a=s;Xm([s,i],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:d}=r,f=jo(a.shape,l,u,1,c,d),h=!0,p=new yp(f,"max",h),m=n.runWebGLProgram(p,[a],a.dtype),g=new bGe(f),y=n.runWebGLProgram(g,[o,m],a.dtype);return n.disposeIntermediateTensorInfo(m),y}const kGe={kernelName:lE,backendName:"webgl",kernelFunc:$Ge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IGe(t,e,n,r){let o=new yp(n,"max",!1);const s=r.runWebGLProgram(o,[t],"float32");o=new yp(n,"max",!0,!0,e);const i=r.runWebGLProgram(o,[t],"float32");return[s,i]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TGe={kernelName:DW,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:o,strides:s,pad:i,includeBatchInIndex:a}=e,l=n;P(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const u=[1,1];P(Kn(s,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${u}'`);const c=jo(r.shape,o,s,u,i),[d,f]=IGe(r,a,c,l);return[d,f]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EGe(t,e,n,r){const o=re(e),i=re(t.shape)/o,a=ge({inputs:{x:t},attrs:{shape:[i,o]},backend:r}),l=Eu(a,"float32","mean",r),u=ge({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NGe={kernelName:pb,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:o,axis:s}=e,i=n,a=r.shape.length,l=Ge(s,r.shape);let u=l;const c=Gt(u,a),d=c!=null,f=i.shouldExecuteOnCPU([r]),h=[];let p=r;if(d){if(f){const x=i.texData.get(p.dataId).values,w=new Array(a);for(let C=0;C<w.length;C++)w[C]=r.shape[c[C]];const S=yN(x,r.shape,r.dtype,c,w);p=i.makeTensorInfo(w,r.dtype);const $=i.texData.get(p.dataId);$.values=S}else p=d1(r,c,i);h.push(p),u=rn(u.length,a)}Ln("sum",u,a);const[m,g]=An(p.shape,u);let y=m;o&&(y=dn(m,l));const v=EGe(p,g,y,i);for(const b of h)i.disposeIntermediateTensorInfo(b);return v}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r,a=o.shape.length,l=Ge(s,o.shape);let u=l;const c=Gt(u,a);let d=o;c!=null&&(d=lr({inputs:{x:o},backend:n,attrs:{perm:c}}),u=rn(u.length,o.shape.length)),Ln("min",u,a);const[f,h]=An(d.shape,u),p=re(h),m=ge({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),g=Eu(m,m.dtype,"min",n);let y;if(i){const v=dn(f,l);y=ge({inputs:{x:g},backend:n,attrs:{shape:v}})}else y=ge({inputs:{x:g},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),c!=null&&n.disposeIntermediateTensorInfo(d),y}const OGe={kernelName:mb,backendName:"webgl",kernelFunc:AGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Ge=vN+`
  return min(a, b);
`,RGe=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Tu+`
  return result;
`,PGe=Bn({opSnippet:_Ge,packedOpSnippet:RGe,cpuKernelImpl:xze}),DGe={kernelName:um,backendName:"webgl",kernelFunc:PGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MGe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((c,d)=>c[0]+e[d]+c[1]);const o=e.length,s=gt(o),i=n.map(c=>c[0]).join(","),a=n.map((c,d)=>c[0]+e[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o),u=r==="reflect"?0:1;if(o===1){this.userCode=`
        int start = ${i};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${u};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${u};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${i});
      ${s} end = ${s}(${a});

      void main() {
        ${s} outC = getOutputCoords();
        for (int i = 0; i < ${o}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${u};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${u};
          }
        }
        ${s} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FGe{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((p,m)=>p[0]+e[m]+p[1]);const o=e.length,s=gt(o),i=n.map(p=>p[0]).join(","),a=n.map((p,m)=>p[0]+e[m]).join(","),l=or("rc",o),u=or("source",o),c=`${l[o-1]} < ${this.outputShape[o-1]}`,d=o===1?"source":`vec2(${u.slice(-2).join()})`,f=r==="reflect"?0:1;let h="";if(o===1){const p=`
        ${s} source = rc;
        if (source < start) {
          source = start * 2 - source - ${f};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${f};
        }
        source -= start;
      `;h=`
        ${s} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${u.join()}), ${d});
        ${l[o-1]} += 1;
        if(${c}) {
          ${p}
          result[1] = getChannel(getX(${u.join()}), ${d});
        }
      `}else{const p=`
        ${s} source = rc;
        ${s} lt = ${s}(lessThan(source, start));
        ${s} gte = ${s}(greaterThanEqual(source, end));
        ${s} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${f}) +
                gte * ((end - 1) * 2 - source + ${f});
        source -= start;
      `;h=`
        ${s} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${u.join()}), ${d});
        ${l[o-1]} += 1;
        if(${c}) {
          ${p}
          result[1] = getChannel(getX(${u.join()}), ${d});
        }
        rc = outputLoc;
        ${l[o-2]} += 1;
        if(${l[o-2]} < ${this.outputShape[o-2]}) {
          ${p}
          result[2] = getChannel(getX(${u.join()}), ${d});
          ${l[o-1]} += 1;
          if(${c}) {
            ${p}
            result[3] = getChannel(getX(${u.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${s} start = ${s}(${i});
      const ${s} end = ${s}(${a});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${h}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LGe=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:o,mode:s}=n,i=J().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new FGe(r.shape,o,s):new MGe(r.shape,o,s);return e.runWebGLProgram(i,[r],r.dtype)},BGe={kernelName:gb,backendName:"webgl",kernelFunc:LGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zGe=`if (b == 0.0) return NAN;
  return mod(a, b);`,jGe=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+Tu+`
  return result;
`,WGe=Bn({opSnippet:zGe,packedOpSnippet:jGe}),VGe={kernelName:cm,backendName:"webgl",kernelFunc:WGe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UGe{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GGe=`
if (a == b) {
  return 1.0;
};
return a / b;`,HGe=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,J6=Bn({opSnippet:GGe,packedOpSnippet:HGe,checkOutOfBounds:!0}),KGe={kernelName:qp,backendName:"webgl",kernelFunc:J6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XM="return a - b;",e8=Bn({opSnippet:XM,packedOpSnippet:XM,supportsComplex:!0,cpuKernelImpl:zze}),qGe={kernelName:Im,backendName:"webgl",kernelFunc:e8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t8(t){const{inputs:e,backend:n,attrs:r}=t,{logits:o}=e,{dim:s}=r,i=Ge([s],o.shape),a=Z6({inputs:{x:o},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),l=dn(a.shape,i),u=ge({inputs:{x:a},backend:n,attrs:{shape:l}}),c=e8({inputs:{a:o,b:u},backend:n}),d=X6({inputs:{x:c},backend:n}),f=f1({inputs:{x:d},backend:n,attrs:{axis:i,keepDims:!1}}),h=ge({inputs:{x:f},backend:n,attrs:{shape:l}}),p=J6({inputs:{a:d,b:h},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),p}const XGe={kernelName:Pb,backendName:"webgl",kernelFunc:t8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YGe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:o}=e,{numSamples:s,seed:i,normalized:a}=r,l=a?o:t8({inputs:{logits:o},backend:n,attrs:{dim:o.shape.length-1}}),u=l.shape[0],c=l.shape[1],d=new UGe(u,c,s),f=[[i]],h=n.runWebGLProgram(d,[l],"int32",f);return a||n.disposeIntermediateTensorInfo(l),h}const QGe={kernelName:MW,backendName:"webgl",kernelFunc:YGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZGe=Vo+`
  return -x;
`,JGe=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function eHe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const s=n.texData.get(r.dataId),[i,a]=wze(s.values,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,i)}let o;return J().getBool("WEBGL_PACK_UNARY_OPERATIONS")?o=new fa(r.shape,JGe):o=new Ps(r.shape,ZGe),n.runWebGLProgram(o,[r],r.dtype)}const tHe={kernelName:yb,backendName:"webgl",kernelFunc:eHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nHe=s2;function rHe(t){Zr("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:o,scores:s}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l}=r,u=n.readSync(o.dataId),c=n.readSync(s.dataId),{selectedIndices:d}=nHe(u,c,i,a,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const oHe={kernelName:cE,backendName:"webgl",kernelFunc:rHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sHe=i2;function iHe(t){Zr("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:o,scores:s}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:u}=r,c=n.readSync(o.dataId),d=n.readSync(s.dataId),{selectedIndices:f,validOutputs:h}=sHe(c,d,i,a,l,u);return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}const aHe={kernelName:dE,backendName:"webgl",kernelFunc:iHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lHe=a2;function uHe(t){Zr("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:o,scores:s}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,softNmsSigma:u}=r,c=n.readSync(o.dataId),d=n.readSync(s.dataId),f=i,h=a,p=l,m=u,{selectedIndices:g,selectedScores:y}=lHe(c,d,f,h,p,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}const cHe={kernelName:fE,backendName:"webgl",kernelFunc:uHe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dHe{constructor(e,n,r,o){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${o}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fHe=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:o}=e,{dtype:s,depth:i,onValue:a,offValue:l}=r,u=re(o.shape),c=new dHe(u,i,a,l),d=ge({inputs:{x:o},backend:n,attrs:{shape:[u]}}),f=n.runWebGLProgram(c,[d],s);n.disposeIntermediateTensorInfo(d);const h=[...o.shape,i],p=ge({inputs:{x:f},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(f),p},hHe={kernelName:bb,backendName:"webgl",kernelFunc:fHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p0(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const o=Qm({inputs:{input:r},backend:n}),s=p0({inputs:{x:o},backend:n}),i=h1({inputs:{input:r},backend:n}),a=p0({inputs:{x:i},backend:n}),l=ol({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return Zm({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const pHe={kernelName:Fb,backendName:"webgl",kernelFunc:p0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n8(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const o=Qm({inputs:{input:r},backend:n}),s=n8({inputs:{x:o},backend:n}),i=h1({inputs:{input:r},backend:n}),a=p0({inputs:{x:i},backend:n}),l=ol({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return Zm({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const mHe={kernelName:xb,backendName:"webgl",kernelFunc:n8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gHe(t){const{inputs:e,backend:n,attrs:r}=t,{axis:o}=r;if(e.length===1)return dk({inputs:{input:e[0]},backend:n,attrs:{dim:o}});const s=e[0].shape,i=e[0].dtype;e.forEach(c=>{RT(s,c.shape,"All tensors passed to stack must have matching shapes"),P(i===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(c=>{const d=dk({inputs:{input:c},backend:n,attrs:{dim:o}});return a.push(d),d}),u=j6({inputs:l,backend:n,attrs:{axis:o}});return a.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const yHe={kernelName:wb,backendName:"webgl",kernelFunc:gHe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vHe{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((u,c)=>u[0]+e[c]+u[1]);const o=e.length,s=gt(o),i=n.map(u=>u[0]).join(","),a=n.map((u,c)=>u[0]+e[c]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o);if(o===1){this.userCode=`
        int start = ${i};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${i});
      ${s} end = ${s}(${a});

      void main() {
        ${s} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${s} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xHe{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((m,g)=>m[0]+e[g]+m[1]);const o=e.length,s=gt(o),i=n.map(m=>m[0]).join(","),a=n.map((m,g)=>m[0]+e[g]).join(","),l=or("rc",o),u=or("source",o),c=`${l[o-1]} < ${this.outputShape[o-1]}`,d=o===1?"source":`vec2(${u.slice(-2).join()})`,f=[`${s} rc = outputLoc;`,`${l[o-1]} += 1;
       if(${c}) {
      `,o===1?"":`}
       rc = outputLoc;
       ${l[o-2]} += 1;
       if(${l[o-2]} < ${this.outputShape[o-2]}) {`,o===1?"":`  ${l[o-1]} += 1;
         if(${c}) {`],h=o===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let m=0,g=o===1?2:4;m<g;m++)p+=`
        ${f[m]}
        if (${h}) {
          result[${m}] = float(value);
        } else {
          ${s} source = rc - start;
          result[${m}] = getChannel(getX(${u.join()}), ${d});
        }
      `;p+=o===1?"} ":"}}",this.userCode=`
      const ${s} start = ${s}(${i});
      const ${s} end = ${s}(${a});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${p}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r8=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{paddings:s,constantValue:i}=r;if(re(o.shape)===0){const u=s.map((c,d)=>c[0]+o.shape[d]+c[1]);return Zm({backend:n,attrs:{shape:u,value:i,dtype:o.dtype}})}const a=J().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new xHe(o.shape,s,i):new vHe(o.shape,s,i),l=[[i]];return n.runWebGLProgram(a,[o],o.dtype,l)},bHe={kernelName:Sb,backendName:"webgl",kernelFunc:r8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wHe=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,SHe=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+Tu+`
  return result;
`,CHe=Bn({opSnippet:wHe,packedOpSnippet:SHe}),$He={kernelName:fm,backendName:"webgl",kernelFunc:CHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r,a=o.shape.length,l=[],u=Ge(s,o.shape);let c=u;const d=Gt(c,a);let f=o;d!=null&&(f=lr({inputs:{x:o},backend:n,attrs:{perm:d}}),c=rn(c.length,a),l.push(f)),Ln("prod",c,a);let h;if(n.shouldExecuteOnCPU([f])){const p=n.texData.get(f.dataId).values,{outVals:m,outShape:g,outDtype:y}=Cze(f.shape,f.dtype,p,c);h=n.makeTensorInfo(g,y,m)}else{const[p,m]=An(f.shape,c),g=re(m),y=ge({inputs:{x:f},backend:n,attrs:{shape:[-1,g]}}),v=kE(o.dtype),b=Eu(y,v,"prod",n);h=ge({inputs:{x:b},backend:n,attrs:{shape:p}}),l.push(y),l.push(b)}if(i){l.push(h);const p=dn(h.shape,u);h=ge({inputs:{x:h},backend:n,attrs:{shape:p}})}return l.forEach(p=>n.disposeIntermediateTensorInfo(p)),h}const IHe={kernelName:$b,backendName:"webgl",kernelFunc:kHe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function THe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:o,paramsDenseValues:s,indices:i}=e,{outputRaggedRank:a}=r,l=o.map(y=>n.readSync(y.dataId)),u=o.map(y=>y.shape),c=n.readSync(s.dataId),d=n.readSync(i.dataId),[f,h,p]=$ze(l,u,c,s.shape,s.dtype,d,i.shape,a),m=f.map(y=>n.makeTensorInfo([y.length],"int32",y)),g=n.makeTensorInfo(p,s.dtype,h);return m.concat([g])}const EHe={kernelName:FW,backendName:"webgl",kernelFunc:THe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NHe(t){const{inputs:e,backend:n}=t,{starts:r,limits:o,deltas:s}=e,i=n.readSync(r.dataId),a=n.readSync(o.dataId),l=n.readSync(s.dataId),[u,c]=kze(i,r.shape,r.dtype,a,o.shape,l,s.shape),d=n.makeTensorInfo([u.length],"int32",u),f=n.makeTensorInfo([c.length],r.dtype,c);return[d,f]}const AHe={kernelName:LW,backendName:"webgl",kernelFunc:NHe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OHe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:o,values:s,defaultValue:i,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=r,u=n.readSync(o.dataId),c=n.readSync(s.dataId),d=n.readSync(i.dataId),f=a.map(g=>n.readSync(g.dataId)),h=a.map(g=>g.shape),[p,m]=Ize(u,o.shape,c,s.shape,s.dtype,d,i.shape,f,h,l);return n.makeTensorInfo(p,s.dtype,m)}const _He={kernelName:BW,backendName:"webgl",kernelFunc:OHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o8=t=>{const{backend:e,attrs:n}=t,{start:r,stop:o,step:s,dtype:i}=n,a=Tze(r,o,s,i);return e.makeTensorInfo([a.length],i,a)},RHe={kernelName:hE,backendName:"webgl",kernelFunc:o8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PHe="return 1.0 / x;",DHe=Je({opSnippet:PHe}),MHe={kernelName:hm,backendName:"webgl",kernelFunc:DHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FHe=Vo+`
  return (x < 0.0) ? 0.0 : x;
`,LHe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,BHe=Je({opSnippet:FHe,packedOpSnippet:LHe}),zHe={kernelName:pm,backendName:"webgl",kernelFunc:BHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jHe=Vo+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,WHe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,VHe=Je({opSnippet:jHe,packedOpSnippet:WHe}),UHe={kernelName:mm,backendName:"webgl",kernelFunc:VHe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GHe{constructor(e,n,r,o,s){this.variableNames=["A"],this.outputShape=[];const[i,a,l,u]=e;this.outputShape=[i,n,r,u];const c=[o&&n>1?a-1:a,o&&r>1?l-1:l],d=[o&&n>1?n-1:n,o&&r>1?r-1:r];let f;s?f="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":f="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/d[0]},
          ${c[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HHe{constructor(e,n,r,o,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,a,l,u]=e;this.outputShape=[i,n,r,u];const c=[o&&n>1?a-1:a,o&&r>1?l-1:l],d=[o&&n>1?n-1:n,o&&r>1?r-1:r];let f;s?f="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":f="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/d[0]},
          ${c[1]/d[1]},
          ${c[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KHe(t){const{inputs:e,backend:n,attrs:r}=t,{images:o}=e,{alignCorners:s,halfPixelCenters:i,size:a}=r,[l,u]=a,c=J().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new HHe(o.shape,l,u,s,i):new GHe(o.shape,l,u,s,i);return n.runWebGLProgram(c,[o],"float32")}const qHe={kernelName:Tb,backendName:"webgl",kernelFunc:KHe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XHe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,o,s]=n,[,i,a]=e,l=[r&&i>1?o-1:o,r&&a>1?s-1:s],u=[r&&i>1?i-1:i,r&&a>1?a-1:a],c=l[0]/u[0],d=l[1]/u[1],f=1/c,h=1/d,p=Math.ceil(f)*2+2,m=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${d});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${h});

        const int winHeight = int(${p});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${o-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${s-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YHe(t){const{inputs:e,backend:n,attrs:r}=t,{images:o,dy:s}=e,{alignCorners:i}=r,a=new XHe(s.shape,o.shape,i);return n.runWebGLProgram(a,[s],s.dtype)}const QHe={kernelName:gE,backendName:"webgl",kernelFunc:YHe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZHe{constructor(e,n,r,o,s){this.variableNames=["A"],this.outputShape=[];const[i,a,l,u]=e;this.outputShape=[i,n,r,u];const c=[o&&n>1?a-1:a,o&&r>1?l-1:l],d=[o&&n>1?n-1:n,o&&r>1?r-1:r],f=o?"0.5":"0.0";let h;s?h="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/d[0]},
          ${c[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${f})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JHe{constructor(e,n,r,o,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,a,l,u]=e;this.outputShape=[i,n,r,u];const c=[o&&n>1?a-1:a,o&&r>1?l-1:l],d=[o&&n>1?n-1:n,o&&r>1?r-1:r],f=o?"0.5":"0.0";let h;s?h="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/d[0]},
          ${c[1]/d[1]},
          ${c[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${f})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e5e(t){const{inputs:e,backend:n,attrs:r}=t,{images:o}=e,{alignCorners:s,halfPixelCenters:i,size:a}=r,[l,u]=a,c=J().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new JHe(o.shape,l,u,s,i):new ZHe(o.shape,l,u,s,i);return n.runWebGLProgram(c,[o],o.dtype)}const t5e={kernelName:Ib,backendName:"webgl",kernelFunc:e5e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class n5e{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,o,s]=n,[,i,a]=e,l=[r&&i>1?o-1:o,r&&a>1?s-1:s],u=[r&&i>1?i-1:i,r&&a>1?a-1:a],c=l[0]/u[0],d=l[1]/u[1],f=1/c,h=1/d,p=Math.ceil(f)*2+2,m=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${d});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${h});

        const int winHeight = int(${p});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${u[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${u[1]}));

            int sourceNearestRow = int(min(
                float(int(${o}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${s}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r5e(t){const{inputs:e,backend:n,attrs:r}=t,{images:o,dy:s}=e,{alignCorners:i}=r,a=new n5e(s.shape,o.shape,i);return n.runWebGLProgram(a,[s],s.dtype)}const o5e={kernelName:mE,backendName:"webgl",kernelFunc:r5e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class s5e{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const o=a=>n.indexOf(a)!==-1&&e[a]!==1?`${e[a]} - coords[${a}] - 1`:`coords[${a}]`,s=e.map((a,l)=>o(l)).join(","),i=gt(r);this.userCode=`
      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${s}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class i5e{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const o=or("rc",r),s=`${o[r-1]} + 1 < ${this.outputShape[r-1]}`,i=`${o[r-2]} + 1 < ${this.outputShape[r-2]}`,a=gt(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${s}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(o.slice())};
          if(${s}){
            result.g = ${u(o.slice())};
          }
          if(${i}) {
            result.b = ${c(o.slice())};
            if(${s}) {
              result.a = ${d(o.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(p){return f(p)}function u(p){return p[r-1]="("+p[r-1]+" + 1)",f(p)}function c(p){return p[r-2]="("+p[r-2]+" + 1)",f(p)}function d(p){return p[r-1]="("+p[r-1]+" + 1)",p[r-2]="("+p[r-2]+" + 1)",f(p)}function f(p){const m=e.map((v,b)=>h(b,p)),g=m.join(","),y=m.slice(-2).join(",");return`getChannel(getX(${g}), vec2(${y}))`}function h(p,m){return n.indexOf(p)!==-1&&e[p]!==1?`${e[p]} - ${m[p]} - 1`:`${m[p]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{dims:s}=r,i=o.shape.length,a=Ge(s,o.shape);if(i===0)return jr({inputs:{x:o},backend:n});const l=J().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new i5e(o.shape,a):new s5e(o.shape,a);return n.runWebGLProgram(l,[o],o.dtype)}const l5e={kernelName:Eb,backendName:"webgl",kernelFunc:a5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class u5e{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],o=e[2];this.outputShape=e;let s="";typeof n=="number"?s=`float outputValue = ${n.toFixed(2)};`:s=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${s}
          if(coordX >= 0 && coordX < ${o} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c5e={kernelName:CE,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:o,fillValue:s,center:i}=e,a=n,l=new u5e(r.shape,s),[u,c]=v2(i,r.shape[1],r.shape[2]),d=[[u,c,Math.sin(o),Math.cos(o)]];return a.runWebGLProgram(l,[r],r.dtype,d)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d5e=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,f5e=Je({opSnippet:d5e}),h5e={kernelName:gm,backendName:"webgl",kernelFunc:f5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p5e="return inversesqrt(x);",m5e=Je({opSnippet:p5e,cpuKernelImpl:Eze}),g5e={kernelName:ym,backendName:"webgl",kernelFunc:m5e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wN{constructor(e,n,r,o,s,i,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;const u=gt(s.length),c=gt(i.length);let d="";r===1?d="i":r===2&&(d="i, j");const f=`getIndices(${d})`;let h="";o===1?h="i":o===2&&(h="i, coords[1]");const p=`getUpdates(${h})`;let m="";l&&(m="coords[0], coords[1]");const g=`getDefaultValue(${m})`,y=n>1?"strides[j]":"strides";this.userCode=`
        ${u} strides = ${u}(${s});

        void main() {
          ${c} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${f});
              flattenedIndex += index * ${y};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${p};
              found = true;
            }
          }
          setOutput(mix(${g}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class y5e{constructor(e,n,r,o,s,i,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=i;const u=gt(s.length),c=gt(i.length);let d="";r===1?d="i":r===2&&(d="i, j");const f=`getIndices(${d})`;let h="";o===1?h="i":o===2&&(h="i, coords[1]");const p=`getUpdates(${h})`;let m="";l&&(m="coords[0], coords[1]");const g=`getDefaultValue(${m})`,y=n>1?"strides[j]":"strides",v=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${u} strides = ${u}(${s});

        void main() {
          ${c} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${f});
              flattenedIndex += index.xz * ${y};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${v};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${p};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${g}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v5e(t){const{inputs:e,backend:n,attrs:r}=t,{indices:o,updates:s}=e,{shape:i}=r,{sliceRank:a,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=Su(s,o,i),f=[d/u,u];if(d===0)return n.makeTensorInfo(i,o.dtype);const h=ge({inputs:{x:o},backend:n,attrs:{shape:[l,a]}}),p=ge({inputs:{x:s},backend:n,attrs:{shape:[l,u]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0]));let g;J().getBool("WEBGL_PACK")?g=new y5e(l,a,h.shape.length,p.shape.length,c,f):g=new wN(l,a,h.shape.length,p.shape.length,c,f);const y=n.runWebGLProgram(g,[p,h,m],p.dtype),v=ge({inputs:{x:y},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(m),v}const x5e={kernelName:zW,backendName:"webgl",kernelFunc:v5e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class b5e{constructor(e,n,r,o){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const s="while (left < right) {",i=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,a=J().getNumber("WEBGL_VERSION")===2?s:i,l=o==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${a}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w5e(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:o,values:s}=e,{side:i}=r,a=new b5e(o.shape[0],o.shape[1],s.shape[1],i),l=[[o.shape[1]]];return n.runWebGLProgram(a,[o,s],"int32",l)}const S5e={kernelName:WW,backendName:"webgl",kernelFunc:w5e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class C5e{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let o,s;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)s="resRC",o="resRC";else{const a=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],u=[];for(let c=0;c<n.length;c++)u.push(`${a[c]}`),c<e&&l.push(`${a[c]}`);o=l.join(),s=u.join()}const i=gt(r);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        float cVal = getC(${o});
        if (cVal >= 1.0) {
          setOutput(getA(${s}));
        } else {
          setOutput(getB(${s}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $5e(t){const{inputs:e,backend:n}=t,{condition:r,t:o,e:s}=e,i=new C5e(r.shape.length,o.shape,o.shape.length);return n.runWebGLProgram(i,[r,o,s],Br(o.dtype,s.dtype))}const k5e={kernelName:Nb,backendName:"webgl",kernelFunc:$5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I5e=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${qb};
  float scale = ${Xb};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,T5e=Je({opSnippet:I5e}),E5e={kernelName:vm,backendName:"webgl",kernelFunc:T5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N5e=tf+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,A5e=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,O5e=Je({opSnippet:N5e,packedOpSnippet:A5e,cpuKernelImpl:Aze}),_5e={kernelName:Sm,backendName:"webgl",kernelFunc:O5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R5e=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,P5e=Je({opSnippet:R5e}),D5e={kernelName:wm,backendName:"webgl",kernelFunc:P5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M5e=tf+`
  return sin(x);
`,F5e=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${Tu}
  return result;
`,L5e=Je({opSnippet:M5e,packedOpSnippet:F5e}),B5e={kernelName:xm,backendName:"webgl",kernelFunc:L5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z5e=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,j5e=Je({opSnippet:z5e}),W5e={kernelName:bm,backendName:"webgl",kernelFunc:j5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V5e=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,U5e=Je({opSnippet:V5e}),G5e={kernelName:Cm,backendName:"webgl",kernelFunc:U5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H5e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{blockShape:s,paddings:i}=r;P(o.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const a=s.reduce((y,v)=>y*v),l=[[0,0]];l.push(...i);for(let y=1+s.length;y<o.shape.length;++y)l.push([0,0]);const u=[],c=r8({inputs:{x:o},backend:n,attrs:{paddings:l,constantValue:0}}),d=Mm(c.shape,s,a,!1),f=Fm(d.length,s.length,!1),h=Lm(c.shape,s,a,!1),p=ge({inputs:{x:c},backend:n,attrs:{shape:d}}),m=lr({inputs:{x:p},backend:n,attrs:{perm:f}}),g=ge({inputs:{x:m},backend:n,attrs:{shape:h}});return u.push(c),u.push(p),u.push(m),u.forEach(y=>n.disposeIntermediateTensorInfo(y)),g},K5e={kernelName:_b,backendName:"webgl",kernelFunc:H5e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q5e(t){const{inputs:e,backend:n}=t,{indices:r,values:o,denseShape:s,defaultValue:i}=e;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${s.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(o.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${o.shape}`);if(i.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${i.shape}`);const a=n.readSync(r.dataId),l=n.readSync(o.dataId),u=n.readSync(s.dataId),c=n.readSync(i.dataId)[0],[d,f,h,p,m]=_ze(a,r.shape,r.dtype,l,o.dtype,u,c);return[n.makeTensorInfo(f,r.dtype,d),n.makeTensorInfo([f[0]],o.dtype,h),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(g=>Number(g)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}const X5e={kernelName:VW,backendName:"webgl",kernelFunc:q5e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y5e(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:o,newShape:s}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(o.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${o.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const i=Array.from(n.readSync(o.dataId)),a=n.readSync(r.dataId),l=Array.from(n.readSync(s.dataId)),[u,c,d]=Rze(a,r.shape,r.dtype,i,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([d.length],s.dtype,new Int32Array(d))]}const Q5e={kernelName:UW,backendName:"webgl",kernelFunc:Y5e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z5e(t){const{inputs:e,backend:n}=t,{data:r,indices:o,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${o.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${s.shape}`);const i=n.readSync(r.dataId),a=n.readSync(o.dataId),l=n.readSync(s.dataId),[u,c]=E6(i,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(c,r.dtype,u)}const J5e={kernelName:GW,backendName:"webgl",kernelFunc:Z5e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e6e(t){const{inputs:e,backend:n}=t,{data:r,indices:o,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${o.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${s.shape}`);const i=n.readSync(r.dataId),a=n.readSync(o.dataId),l=n.readSync(s.dataId),[u,c]=E6(i,r.shape,r.dtype,a,l);return n.makeTensorInfo(c,r.dtype,u)}const t6e={kernelName:HW,backendName:"webgl",kernelFunc:e6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n6e(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:o,sparseValues:s,defaultValue:i}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:d,outputSize:f}=Su(s,o,a),h=!1;if(s.dtype==="string"){const y=n.bufferSync(o),v=n.bufferSync(s),b=Da(n.readSync(i.dataId)[0]),x=Nze(y,v,a,f,c,u,l,d,b,h);return n.makeTensorInfo(a,x.dtype,x.values)}const p=new wN(u,l,o.shape.length,s.shape.length,d,[f,1],h),m=n.runWebGLProgram(p,[s,o,i],s.dtype),g=ge({inputs:{x:m},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(m),g}const r6e={kernelName:KW,backendName:"webgl",kernelFunc:n6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{numOrSizeSplits:s,axis:i}=r,a=Ge(i,o.shape)[0],l=R2(o,s,a),u=o.shape.length,c=new Array(u).fill(0),d=o.shape.slice();return l.map(f=>{const h=[...d];h[a]=f;const p=nf({inputs:{x:o},backend:n,attrs:{begin:c,size:h}});return c[a]+=f,p})}const s6e={kernelName:Rb,backendName:"webgl",kernelFunc:o6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YM="return sqrt(x);",i6e=Je({opSnippet:YM,packedOpSnippet:YM,cpuKernelImpl:Pze}),a6e={kernelName:$m,backendName:"webgl",kernelFunc:i6e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l6e="return x * x;",u6e=Je({opSnippet:l6e}),c6e={kernelName:yE,backendName:"webgl",kernelFunc:u6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QM="return (a - b) * (a - b);",d6e=Bn({opSnippet:QM,packedOpSnippet:QM}),f6e={kernelName:km,backendName:"webgl",kernelFunc:d6e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e;if(o.dtype!=="string")throw new Error("Input must be of datatype string");const s=n.readSync(o.dataId),i=Di(s),a=Dze(i,"string",r);return n.makeTensorInfo(o.shape,"string",a)}const p6e={kernelName:vE,backendName:"webgl",kernelFunc:h6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m6e({inputs:t,attrs:e,backend:n}){const{x:r}=t,o=Vo+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,s=new Ps(r.shape,o);return n.runWebGLProgram(s,[r],r.dtype)}const g6e={kernelName:Am,backendName:"webgl",kernelFunc:m6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class y6e{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const o=r.length,s=gt(r.length),i=gt(r.length);let a="";if(o===1)a="coords * strides + begin";else{let l=0;a=r.map((u,c)=>(l++,r.length===1?`coords * strides[${c}] + begin[${c}]`:`coords[${l-1}] * strides[${c}] + begin[${c}]`)).join(",")}this.userCode=`
      ${s} begin = ${s}(${e});
      ${s} strides = ${s}(${n});

      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{begin:s,end:i,strides:a,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:f}=r,{finalShapeSparse:h,finalShape:p,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:v,end:b,strides:x}=m2(o.shape,s,i,a,l,u,c,d,f);let w;if(m)w=ge({inputs:{x:o},backend:n,attrs:{shape:p}});else if(g||y){P(o.shape.length>=1,()=>`Input must have rank at least 1, got: ${o.shape.length}`);const $=f2(v,b,x),C=nf({inputs:{x:o},backend:n,attrs:{begin:v,size:$}});w=ge({inputs:{x:C},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(C)}else if(n.shouldExecuteOnCPU([o])){const C=n.readSync(o.dataId),k=Ue(o.shape,o.dtype,C),I=Mze(h,k,x,v);w=n.makeTensorInfo(p,o.dtype,I.values)}else{const C=new y6e(v,x,h);w=n.runWebGLProgram(C,[o],o.dtype)}const S=ge({inputs:{x:w},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(w),S}const x6e={kernelName:xE,backendName:"webgl",kernelFunc:v6e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b6e(t){const{inputs:e,backend:n,attrs:r}=t,{separator:o,nGramWidths:s,leftPad:i,rightPad:a,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:d}=e,f=n.readSync(c.dataId),h=n.readSync(d.dataId),[p,m]=Fze(f,h,o,s,i,a,l,u);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",m)]}const w6e={kernelName:qW,backendName:"webgl",kernelFunc:b6e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S6e(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:o}=r,{input:s,delimiter:i}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(i.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const a=n.readSync(s.dataId),l=n.readSync(i.dataId)[0],[u,c,d]=Lze(a,l,o),f=c.length;return[n.makeTensorInfo([f,2],"int32",u),n.makeTensorInfo([f],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const C6e={kernelName:XW,backendName:"webgl",kernelFunc:S6e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $6e(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:o}=r,{input:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");const i=n.readSync(s.dataId),a=Bze(i,o);return n.makeTensorInfo(s.shape,"int32",a)}const k6e={kernelName:YW,backendName:"webgl",kernelFunc:$6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I6e="return tan(x);",T6e=Je({opSnippet:I6e}),E6e={kernelName:Tm,backendName:"webgl",kernelFunc:T6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N6e=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,A6e=Je({opSnippet:N6e}),O6e={kernelName:Em,backendName:"webgl",kernelFunc:A6e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _6e(t){const{inputs:e,backend:n,attrs:r}=t,{tensor:o,indices:s,updates:i}=e,{sliceRank:a,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=Su(i,s,o.shape),f=[d/u,u];if(d===0)return n.makeTensorInfo(o.shape,s.dtype);const h=ge({inputs:{x:s},backend:n,attrs:{shape:[l,a]}}),p=ge({inputs:{x:i},backend:n,attrs:{shape:[l,u]}}),m=ge({inputs:{x:o},backend:n,attrs:{shape:f}}),g=new wN(l,a,h.shape.length,p.shape.length,c,f,!1,!0),y=n.runWebGLProgram(g,[p,h,m],m.dtype),v=ge({inputs:{x:y},backend:n,attrs:{shape:o.shape}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),v}const R6e={kernelName:jW,backendName:"webgl",kernelFunc:_6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class P6e{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let i=0;i<r.length;i++)r[i]=e[i]*n[i];this.outputShape=r,this.rank=r.length;const o=gt(this.rank),s=D6e(e);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        setOutput(getA(${s}));
      }
    `}}function D6e(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let o=0;o<t.length;o++)r.push(`imod(${n[o]}, ${t[o]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s8(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{reps:s}=r;if(o.dtype==="string"||o.shape.length>5){const l=n.readSync(o.dataId),u=o.dtype==="string"?l.map(f=>Da(f)):l,c=Ue(o.shape,o.dtype,u),d=jze(c,s);return n.makeTensorInfo(d.shape,d.dtype,d.values)}const i=new P6e(o.shape,s);return n.runWebGLProgram(i,[o],o.dtype)}const M6e={kernelName:Nm,backendName:"webgl",kernelFunc:s8};class F6e{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class L6e{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ul(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function ZM(t){let e=1;for(;e<t;)e*=2;return e}function B6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{k:s,sorted:i}=r,a=J().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=J().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=o.shape,c=u[u.length-1];if(n.shouldExecuteOnCPU([o])||c<a||s>l){const I=n.readSync(o.dataId),[T,E]=Wze(I,u,o.dtype,s,i);return[n.makeTensorInfo(T.shape,T.dtype,T.values),n.makeTensorInfo(E.shape,E.dtype,E.values)]}if(s===0)return u[u.length-1]=0,[n.makeTensorInfo(u,o.dtype,[]),n.makeTensorInfo(u,"int32",[])];if(c===1)return[o,Zm({attrs:{shape:u,dtype:"int32",value:0},backend:n})];const d=n.texData.get(o.dataId),f=d!==null&&d.isPacked,h=f?n.unpackTensor(o):o,m=re(u)/c,g=ge({inputs:{x:h},attrs:{shape:[m,c]},backend:n});f&&ul(n,h);const y=ZM(s),v=ZM(c);let b=null;const x=()=>b===null?[g,g]:[g,b],w=(I,T,E)=>{const _=x(),O=new F6e(E),M=[[c],[b===null?1:0],[Number.NEGATIVE_INFINITY],[I],[T]],L=b;b=n.runWebGLProgram(O,_,"int32",M),ul(n,L)};for(let I=1;I<y;I*=2){const T=I*2;for(let E=I;E>=1;E/=2)w(T,E,[m,v])}for(let I=v;I>y;I/=2){const T=x(),E=new L6e([m,I/2]),O=[[c],[b===null?1:0],[y]],F=b;b=n.runWebGLProgram(E,T,"int32",O),ul(n,F);const M=y/2,L=M*2;for(let N=M;N>=1;N/=2)w(L,N,b.shape)}let S=b;b=nf({inputs:{x:b},backend:n,attrs:{begin:0,size:[m,s]}}),ul(n,S);let $=Q6({inputs:{x:g,indices:b},backend:n,attrs:{axis:1,batchDims:1}});ul(n,g);const C=u.slice(0,-1);C.push(s),S=b,b=ge({inputs:{x:b},attrs:{shape:C},backend:n}),ul(n,S);const k=$;return $=ge({inputs:{x:$},attrs:{shape:C},backend:n}),ul(n,k),[$,b]}const z6e={kernelName:bE,backendName:"webgl",kernelFunc:B6e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class j6e{constructor(e,n,r,o,s,i){this.variableNames=["Image","Transforms"],this.outputShape=i;const a=r==="nearest"?1:2;let l;switch(o){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${s});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${s});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${a} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W6e(t){const{inputs:e,backend:n,attrs:r}=t,{image:o,transforms:s}=e,{interpolation:i,fillMode:a,fillValue:l,outputShape:u}=r,[c,d,f,h]=o.shape,[p,m]=u??[d,f],g=[c,p,m,h],y=new j6e(d,f,i,a,l,g);return n.runWebGLProgram(y,[o,s],"float32")}const V6e={kernelName:wE,backendName:"webgl",kernelFunc:W6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U6e(t){const{inputs:e,attrs:n,backend:r}=t,{axis:o}=n,{x:s}=e;Xm(s,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const i=r.readSync(s.dataId),{outputValues:a,outputShape:l,indices:u}=Vze(i,o,s.shape,s.dtype);return[r.makeTensorInfo(l,s.dtype,a),r.makeTensorInfo([u.length],"int32",u)]}const G6e={kernelName:SE,backendName:"webgl",kernelFunc:U6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H6e(t){const{inputs:e,backend:n,attrs:r}=t,{value:o}=e;let{axis:s}=r;s<0&&(s+=o.shape.length);const i=o,a=i.shape.length,l=o.shape[s],u=new Array(a-1);let c=0;for(let m=0;m<a;m++)m!==s&&(u[c++]=i.shape[m]);const d=[],f=new Array(a).fill(0),h=i.shape.slice();h[s]=1;const p=new Array(l);for(let m=0;m<p.length;m++){f[s]=m;const g=nf({inputs:{x:i},backend:n,attrs:{begin:f,size:h}}),y=ge({inputs:{x:g},backend:n,attrs:{shape:u}});p[m]=y,d.push(g)}return d.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const K6e={kernelName:Db,backendName:"webgl",kernelFunc:H6e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class q6e{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,o=e.batchSize,s=e.inSize,i=e.numSegments,a=i*Math.ceil(s/r);this.outputShape=[o,a];const l="0.0",u="sumValue",c=Math.floor(r/4)*4,d=r%4,f=`
        sumValue += dot(values, segFilter);
    `;let h="";s%r>0&&(h=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `);let p="";s%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${h}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${p}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${i})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${i})));

        float sumValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${f}
        }

        int inIdx = inOffset + ${c};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${f}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${f}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${f}
        }
        setOutput(${u});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,segmentIds:s}=e,{numSegments:i}=r,a=o.shape.length,l=[];let u=0;const c=Gt([u],a);let d=o;c!=null&&(d=lr({inputs:{x:o},backend:n,attrs:{perm:c}}),l.push(d),u=rn(1,a)[0]);const f=VU(d.shape,u,i),h=re([d.shape[u]]),p=ge({inputs:{x:d},backend:n,attrs:{shape:[-1,h]}});l.push(p);const m=kE(o.dtype),g=(x,w,S,$,C)=>{const k=x.shape[0],I=x.shape[1],T=WU(I,C),E={windowSize:T,inSize:I,batchSize:k,numSegments:C},_=new q6e(E,w),O=n.compileAndRun(_,[x,S],$);if(l.push(O),O.shape[1]===C)return O;const F=o8({backend:n,attrs:{start:0,stop:C,step:1,dtype:"float32"}}),M=s8({inputs:{x:F},backend:n,attrs:{reps:[I/T]}});return l.push(F),l.push(M),g(O,w,M,$,C)},y=g(p,"unsortedSegmentSum",s,m,i),v=ge({inputs:{x:y},backend:n,attrs:{shape:f}});let b=v;if(c!=null){l.push(v);const x=Za(c);b=lr({inputs:{x:b},backend:n,attrs:{perm:x}})}return l.forEach(x=>n.disposeIntermediateTensorInfo(x)),b}const Y6e={kernelName:Mb,backendName:"webgl",kernelFunc:X6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q6e=[Pje,Mje,Bje,Wje,Uje,Kje,Xje,Qje,t4e,r4e,i4e,u4e,f4e,g4e,x4e,w4e,C4e,T4e,N4e,O4e,D4e,W4e,U4e,q4e,Y4e,nWe,oWe,lWe,yje,dWe,gWe,bWe,IWe,NWe,OWe,RWe,DWe,BWe,WWe,GWe,KWe,XWe,QWe,eVe,nVe,iVe,lVe,dVe,pVe,gVe,bVe,$Ve,EVe,OVe,PVe,DVe,FVe,BVe,jVe,VVe,GVe,XVe,ZVe,tUe,rUe,iUe,uUe,hUe,yUe,gje,xUe,pWe,SUe,kUe,EUe,xje,_Ue,MUe,LUe,WUe,GUe,XUe,ZUe,nGe,iGe,uGe,dGe,mGe,yGe,xGe,CGe,kGe,TGe,NGe,OGe,DGe,BGe,VGe,QGe,Sje,tHe,oHe,aHe,cHe,Z4e,hHe,mHe,yHe,bHe,$He,wje,IHe,EHe,AHe,_He,RHe,J4e,KGe,MHe,zHe,UHe,$je,qHe,QHe,t5e,o5e,l5e,c5e,h5e,g5e,x5e,S5e,k5e,E5e,_5e,D5e,B5e,W5e,z4e,XGe,G5e,K5e,X5e,Q5e,J5e,t6e,r6e,s6e,a6e,c6e,f6e,p6e,g6e,x6e,w6e,C6e,k6e,qGe,Oje,E6e,O6e,R6e,M6e,z6e,V6e,_je,G6e,K6e,Y6e,pHe];for(const t of Q6e)ZW(t);class Z6e{constructor(){CN(this,"model",null);this.initializeModel()}async initializeModel(){try{await LCe("webgl"),await BCe(),console.log("Using TensorFlow.js backend:",zCe());const e=p_e();e.add(Dw({units:64,activation:"relu",inputShape:[14],kernelRegularizer:gM({l2:.01})})),e.add(__e({rate:.2})),e.add(Dw({units:32,activation:"relu",kernelRegularizer:gM({l2:.01})})),e.add(Dw({units:1,activation:"sigmoid"})),e.compile({optimizer:yl.adam(.001),loss:"binaryCrossentropy",metrics:["accuracy"]}),this.model=e,this.warmupModel()}catch(e){throw console.error("Error initializing model:",e),e}}async warmupModel(){if(this.model)try{const e=pn([1,14]),n=this.model.predict(e);Array.isArray(n)?n.forEach(r=>r.dispose()):n.dispose(),e.dispose(),console.log("Model warmup complete")}catch(e){console.error("Model warmup failed:",e)}}createFeatures(e,n){const r=new Map;return n.forEach(o=>{r.has(o.client_id)||r.set(o.client_id,[]),r.get(o.client_id).push(o)}),e.map(o=>{const s=r.get(o.client_id)||[],i=s.map(m=>m.payment_status),a=i.length?Math.max(...i,-1):-1,l=i.length>0?i.reduce((m,g)=>m+g,0)/i.length:0,u=i.filter(m=>m>=1).length,c=i.filter(m=>m===-1).length;let d=0;for(const m of s)if(m.bill_amt!==0){const g=1/m.bill_amt;d+=m.paid_amt*g}d=d/(s.length||1);let f=0;if(i.length>1){const m=l;let g=0;for(let y=0;y<i.length;y++){const v=i[y]-m;g+=v*v}f=Math.sqrt(g/i.length)}const h=e.length>=4?this.assignCreditBin(o.credit_given,e.map(m=>m.credit_given)):0,p=o.credit_given>2e5&&l>2?1:0;return{client_id:o.client_id,default:o.default,credit_given:o.credit_given,gender:o.gender,education:o.education,marital_status:o.marital_status,max_delay:a,avg_delay:l,total_delayed:u,total_on_time:c,avg_paid_ratio:d,payment_volatility:f,credit_bins:h,high_credit_risk:p}})}assignCreditBin(e,n){const r=[...n].sort((s,i)=>s-i),o=Math.ceil(r.length/4);for(let s=0;s<4;s++){const i=r[Math.min((s+1)*o-1,r.length-1)];if(e<=i)return s}return 3}encodeCategories(e){const n=new Array(e.length);for(let r=0;r<e.length;r++){const o=e[r];n[r]={...o,gender_2:o.gender===2?1:0,education_2:o.education===2?1:0,education_3:o.education===3?1:0,marital_status_2:o.marital_status===2?1:0,credit_bins_1:o.credit_bins===1?1:0,credit_bins_2:o.credit_bins===2?1:0,credit_bins_3:o.credit_bins===3?1:0}}return n}normalizeFeatures(e){const n=["credit_given","max_delay","avg_delay","total_delayed","total_on_time","avg_paid_ratio","payment_volatility"],r={},o={},s={};n.forEach(a=>{r[a]=Number.MAX_VALUE,o[a]=Number.MIN_VALUE});for(let a=0;a<e.length;a++){const l=e[a];for(const u of n)l[u]<r[u]&&(r[u]=l[u]),l[u]>o[u]&&(o[u]=l[u])}for(const a of n)s[a]=o[a]-r[a];const i=new Array(e.length);for(let a=0;a<e.length;a++){const l=e[a],u={...l};for(const c of n){const d=s[c];u[c]=d===0?0:(l[c]-r[c])/d}i[a]=u}return i}preprocessData(e,n){return Q(()=>{const r=this.createFeatures(e,n),o=r.map(u=>u.client_id),s=r.map(u=>u.default),i=this.encodeCategories(r);return{features:this.normalizeFeatures(i).map(u=>[u.credit_given,u.max_delay,u.avg_delay,u.total_delayed,u.total_on_time,u.avg_paid_ratio,u.payment_volatility,u.high_credit_risk,u.gender_2,u.education_2,u.education_3,u.marital_status_2,u.credit_bins_1,u.credit_bins_2]),clientIds:o,defaults:s}})}async trainModel(e,n){try{this.model||await this.initializeModel();const{features:r,defaults:o}=this.preprocessData(e,n),s=gc(r),i=gc(o.map(a=>[a]));await this.model.fit(s,i,{epochs:100,batchSize:32,validationSplit:.2,callbacks:{onEpochEnd:(a,l)=>{a%10===0&&console.log(`Epoch ${a}: loss = ${l==null?void 0:l.loss.toFixed(4)}, accuracy = ${l==null?void 0:l.acc.toFixed(4)}`)}}}),s.dispose(),i.dispose()}catch(r){throw console.error("Error training model:",r),r}}async generatePredictions(e,n){try{return this.model||await this.initializeModel(),Q(()=>{const{features:r,clientIds:o}=this.preprocessData(e,n),s=gc(r),a=this.model.predict(s).arraySync();return o.map((l,u)=>({client_id:l,probability_default:a[u][0],default_indicator:a[u][0]>=.5?1:0}))})}catch(r){throw console.error("Error generating predictions:",r),r}}}const J6e=()=>{const[t,e]=A.useState(!1),[n,r]=A.useState(!1),[o,s]=A.useState({default:null,history:null}),[i,a]=A.useState(""),[l,u]=A.useState(0),[c,d]=A.useState(null),[f,h]=A.useState([]),[p]=A.useState(()=>new Z6e),m=y=>{s(y),d(null),y.default&&y.history&&(bg.success('Both files uploaded successfully! Click "Analyze Payment Data" to begin processing.'),r(!0))},g=async()=>{if(!o.default||!o.history){bg.error("Please upload both required files first.");return}try{e(!0),r(!1),d(null),a("Parsing CSV files"),u(10);const y=await pD(o.default);u(25);const v=await pD(o.history);u(40),a("Validating data");const b=USe(y),x=GSe(v);u(55),a("Training model"),await p.trainModel(b,x),u(85),a("Generating predictions");const w=await p.generatePredictions(b,x);u(100),h(w),bg.success("Analysis completed successfully")}catch(y){console.error("Error processing files:",y);const v=y instanceof Error?y.message:"Unknown error occurred";d(v),bg.error(`Error: ${v}`),r(!0)}finally{e(!1)}};return R.jsx("div",{className:"min-h-screen bg-finance-slate py-10 px-4 sm:px-6",children:R.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[R.jsxs("div",{className:"text-center mb-8",children:[R.jsx("h1",{className:"text-3xl font-bold text-finance-blue mb-2",children:"ShopUp Assignment: Risk Predictor"}),R.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Upload your payment data files to predict default probabilities using machine learning."}),R.jsx("br",{}),R.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Please Do not forget to Smash the Analyze Button after Uploading both the (2 .csv) files"})]}),R.jsx(BQ,{onFilesUploaded:m,onAnalyzeClick:g,filesReady:n}),R.jsx(XQ,{isProcessing:t,stage:i,progress:l,filesReady:n&&!t,error:c}),f.length>0&&!t&&R.jsxs("div",{className:"space-y-6 animate-fade-in",children:[R.jsx(zSe,{results:f}),R.jsx(uZ,{results:f})]})]})})},e8e=()=>{const t=JB();return A.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),R.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:R.jsxs("div",{className:"text-center",children:[R.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),R.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),R.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},t8e=new QY,n8e=()=>R.jsx(JY,{client:t8e,children:R.jsxs(qS,{children:[R.jsx(w7,{}),R.jsx(Y7,{}),R.jsx(FQ,{basename:"/Risk-Detector-ML/",children:R.jsxs(PQ,{children:[R.jsx(JS,{path:"/",element:R.jsx(J6e,{})}),R.jsx(JS,{path:"*",element:R.jsx(e8e,{})})]})})]})});S3(document.getElementById("root")).render(R.jsx(n8e,{}));
